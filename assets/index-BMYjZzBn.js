var Cw=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var M=(i,e,t)=>(Cw(i,e,"read from private field"),t?t.call(i):e.get(i)),ge=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},ne=(i,e,t,s)=>(Cw(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t);var Gf=(i,e,t,s)=>({set _(r){ne(i,e,r,t)},get _(){return M(i,e,s)}}),He=(i,e,t)=>(Cw(i,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function _L(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var NL={exports:{}},Hv={},GL={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg=Symbol.for("react.element"),qV=Symbol.for("react.portal"),QV=Symbol.for("react.fragment"),XV=Symbol.for("react.strict_mode"),JV=Symbol.for("react.profiler"),ZV=Symbol.for("react.provider"),eH=Symbol.for("react.context"),tH=Symbol.for("react.forward_ref"),iH=Symbol.for("react.suspense"),sH=Symbol.for("react.memo"),rH=Symbol.for("react.lazy"),YP=Symbol.iterator;function oH(i){return i===null||typeof i!="object"?null:(i=YP&&i[YP]||i["@@iterator"],typeof i=="function"?i:null)}var kL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VL=Object.assign,HL={};function Nc(i,e,t){this.props=i,this.context=e,this.refs=HL,this.updater=t||kL}Nc.prototype.isReactComponent={};Nc.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Nc.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function BL(){}BL.prototype=Nc.prototype;function cT(i,e,t){this.props=i,this.context=e,this.refs=HL,this.updater=t||kL}var hT=cT.prototype=new BL;hT.constructor=cT;VL(hT,Nc.prototype);hT.isPureReactComponent=!0;var qP=Array.isArray,WL=Object.prototype.hasOwnProperty,pT={current:null},UL={key:!0,ref:!0,__self:!0,__source:!0};function zL(i,e,t){var s,r={},o=null,n=null;if(e!=null)for(s in e.ref!==void 0&&(n=e.ref),e.key!==void 0&&(o=""+e.key),e)WL.call(e,s)&&!UL.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}if(i&&i.defaultProps)for(s in l=i.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:Bg,type:i,key:o,ref:n,props:r,_owner:pT.current}}function nH(i,e){return{$$typeof:Bg,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function gT(i){return typeof i=="object"&&i!==null&&i.$$typeof===Bg}function lH(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var QP=/\/+/g;function vw(i,e){return typeof i=="object"&&i!==null&&i.key!=null?lH(""+i.key):e.toString(36)}function fm(i,e,t,s,r){var o=typeof i;(o==="undefined"||o==="boolean")&&(i=null);var n=!1;if(i===null)n=!0;else switch(o){case"string":case"number":n=!0;break;case"object":switch(i.$$typeof){case Bg:case qV:n=!0}}if(n)return n=i,r=r(n),i=s===""?"."+vw(n,0):s,qP(r)?(t="",i!=null&&(t=i.replace(QP,"$&/")+"/"),fm(r,e,t,"",function(u){return u})):r!=null&&(gT(r)&&(r=nH(r,t+(!r.key||n&&n.key===r.key?"":(""+r.key).replace(QP,"$&/")+"/")+i)),e.push(r)),1;if(n=0,s=s===""?".":s+":",qP(i))for(var l=0;l<i.length;l++){o=i[l];var a=s+vw(o,l);n+=fm(o,e,t,a,r)}else if(a=oH(i),typeof a=="function")for(i=a.call(i),l=0;!(o=i.next()).done;)o=o.value,a=s+vw(o,l++),n+=fm(o,e,t,a,r);else if(o==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return n}function kf(i,e,t){if(i==null)return i;var s=[],r=0;return fm(i,s,"","",function(o){return e.call(t,o,r++)}),s}function aH(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var cs={current:null},mm={transition:null},uH={ReactCurrentDispatcher:cs,ReactCurrentBatchConfig:mm,ReactCurrentOwner:pT};Ye.Children={map:kf,forEach:function(i,e,t){kf(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return kf(i,function(){e++}),e},toArray:function(i){return kf(i,function(e){return e})||[]},only:function(i){if(!gT(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};Ye.Component=Nc;Ye.Fragment=QV;Ye.Profiler=JV;Ye.PureComponent=cT;Ye.StrictMode=XV;Ye.Suspense=iH;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uH;Ye.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var s=VL({},i.props),r=i.key,o=i.ref,n=i._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,n=pT.current),e.key!==void 0&&(r=""+e.key),i.type&&i.type.defaultProps)var l=i.type.defaultProps;for(a in e)WL.call(e,a)&&!UL.hasOwnProperty(a)&&(s[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Bg,type:i.type,key:r,ref:o,props:s,_owner:n}};Ye.createContext=function(i){return i={$$typeof:eH,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:ZV,_context:i},i.Consumer=i};Ye.createElement=zL;Ye.createFactory=function(i){var e=zL.bind(null,i);return e.type=i,e};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(i){return{$$typeof:tH,render:i}};Ye.isValidElement=gT;Ye.lazy=function(i){return{$$typeof:rH,_payload:{_status:-1,_result:i},_init:aH}};Ye.memo=function(i,e){return{$$typeof:sH,type:i,compare:e===void 0?null:e}};Ye.startTransition=function(i){var e=mm.transition;mm.transition={};try{i()}finally{mm.transition=e}};Ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ye.useCallback=function(i,e){return cs.current.useCallback(i,e)};Ye.useContext=function(i){return cs.current.useContext(i)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(i){return cs.current.useDeferredValue(i)};Ye.useEffect=function(i,e){return cs.current.useEffect(i,e)};Ye.useId=function(){return cs.current.useId()};Ye.useImperativeHandle=function(i,e,t){return cs.current.useImperativeHandle(i,e,t)};Ye.useInsertionEffect=function(i,e){return cs.current.useInsertionEffect(i,e)};Ye.useLayoutEffect=function(i,e){return cs.current.useLayoutEffect(i,e)};Ye.useMemo=function(i,e){return cs.current.useMemo(i,e)};Ye.useReducer=function(i,e,t){return cs.current.useReducer(i,e,t)};Ye.useRef=function(i){return cs.current.useRef(i)};Ye.useState=function(i){return cs.current.useState(i)};Ye.useSyncExternalStore=function(i,e,t){return cs.current.useSyncExternalStore(i,e,t)};Ye.useTransition=function(){return cs.current.useTransition()};Ye.version="18.2.0";GL.exports=Ye;var P=GL.exports;const $=_L(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dH=P,cH=Symbol.for("react.element"),hH=Symbol.for("react.fragment"),pH=Object.prototype.hasOwnProperty,gH=dH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fH={key:!0,ref:!0,__self:!0,__source:!0};function $L(i,e,t){var s,r={},o=null,n=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(n=e.ref);for(s in e)pH.call(e,s)&&!fH.hasOwnProperty(s)&&(r[s]=e[s]);if(i&&i.defaultProps)for(s in e=i.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:cH,type:i,key:o,ref:n,props:r,_owner:gH.current}}Hv.Fragment=hH;Hv.jsx=$L;Hv.jsxs=$L;NL.exports=Hv;var de=NL.exports,Uy={},KL={exports:{}},pr={},jL={exports:{}},YL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(J,X){var re=J.length;J.push(X);e:for(;0<re;){var Me=re-1>>>1,Re=J[Me];if(0<r(Re,X))J[Me]=X,J[re]=Re,re=Me;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var X=J[0],re=J.pop();if(re!==X){J[0]=re;e:for(var Me=0,Re=J.length,Ve=Re>>>1;Me<Ve;){var Kt=2*(Me+1)-1,ft=J[Kt],jt=Kt+1,Hs=J[jt];if(0>r(ft,re))jt<Re&&0>r(Hs,ft)?(J[Me]=Hs,J[jt]=re,Me=jt):(J[Me]=ft,J[Kt]=re,Me=Kt);else if(jt<Re&&0>r(Hs,re))J[Me]=Hs,J[jt]=re,Me=jt;else break e}}return X}function r(J,X){var re=J.sortIndex-X.sortIndex;return re!==0?re:J.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var n=Date,l=n.now();i.unstable_now=function(){return n.now()-l}}var a=[],u=[],d=1,c=null,h=3,p=!1,m=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(J){for(var X=t(u);X!==null;){if(X.callback===null)s(u);else if(X.startTime<=J)s(u),X.sortIndex=X.expirationTime,e(a,X);else break;X=t(u)}}function b(J){if(S=!1,R(J),!m)if(t(a)!==null)m=!0,Le(A);else{var X=t(u);X!==null&&Ie(b,X.startTime-J)}}function A(J,X){m=!1,S&&(S=!1,C(L),L=-1),p=!0;var re=h;try{for(R(X),c=t(a);c!==null&&(!(c.expirationTime>X)||J&&!se());){var Me=c.callback;if(typeof Me=="function"){c.callback=null,h=c.priorityLevel;var Re=Me(c.expirationTime<=X);X=i.unstable_now(),typeof Re=="function"?c.callback=Re:c===t(a)&&s(a),R(X)}else s(a);c=t(a)}if(c!==null)var Ve=!0;else{var Kt=t(u);Kt!==null&&Ie(b,Kt.startTime-X),Ve=!1}return Ve}finally{c=null,h=re,p=!1}}var F=!1,O=null,L=-1,G=5,k=-1;function se(){return!(i.unstable_now()-k<G)}function j(){if(O!==null){var J=i.unstable_now();k=J;var X=!0;try{X=O(!0,J)}finally{X?Z():(F=!1,O=null)}}else F=!1}var Z;if(typeof v=="function")Z=function(){v(j)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Oe=ce.port2;ce.port1.onmessage=j,Z=function(){Oe.postMessage(null)}}else Z=function(){E(j,0)};function Le(J){O=J,F||(F=!0,Z())}function Ie(J,X){L=E(function(){J(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){m||p||(m=!0,Le(A))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return h},i.unstable_getFirstCallbackNode=function(){return t(a)},i.unstable_next=function(J){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var re=h;h=X;try{return J()}finally{h=re}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,X){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var re=h;h=J;try{return X()}finally{h=re}},i.unstable_scheduleCallback=function(J,X,re){var Me=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Me+re:Me):re=Me,J){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=re+Re,J={id:d++,callback:X,priorityLevel:J,startTime:re,expirationTime:Re,sortIndex:-1},re>Me?(J.sortIndex=re,e(u,J),t(a)===null&&J===t(u)&&(S?(C(L),L=-1):S=!0,Ie(b,re-Me))):(J.sortIndex=Re,e(a,J),m||p||(m=!0,Le(A))),J},i.unstable_shouldYield=se,i.unstable_wrapCallback=function(J){var X=h;return function(){var re=h;h=X;try{return J.apply(this,arguments)}finally{h=re}}}})(YL);jL.exports=YL;var mH=jL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qL=P,ur=mH;function Q(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QL=new Set,hp={};function gu(i,e){ic(i,e),ic(i+"Capture",e)}function ic(i,e){for(hp[i]=e,i=0;i<e.length;i++)QL.add(e[i])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zy=Object.prototype.hasOwnProperty,CH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XP={},JP={};function vH(i){return zy.call(JP,i)?!0:zy.call(XP,i)?!1:CH.test(i)?JP[i]=!0:(XP[i]=!0,!1)}function SH(i,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function wH(i,e,t,s){if(e===null||typeof e>"u"||SH(i,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hs(i,e,t,s,r,o,n){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=o,this.removeEmptyString=n}var ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){ki[i]=new hs(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];ki[e]=new hs(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){ki[i]=new hs(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){ki[i]=new hs(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){ki[i]=new hs(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){ki[i]=new hs(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){ki[i]=new hs(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){ki[i]=new hs(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){ki[i]=new hs(i,5,!1,i.toLowerCase(),null,!1,!1)});var fT=/[\-:]([a-z])/g;function mT(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(fT,mT);ki[e]=new hs(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(fT,mT);ki[e]=new hs(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(fT,mT);ki[e]=new hs(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){ki[i]=new hs(i,1,!1,i.toLowerCase(),null,!1,!1)});ki.xlinkHref=new hs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){ki[i]=new hs(i,1,!1,i.toLowerCase(),null,!0,!0)});function CT(i,e,t,s){var r=ki.hasOwnProperty(e)?ki[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wH(e,t,r,s)&&(t=null),s||r===null?vH(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):r.mustUseProperty?i[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?i.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?i.setAttributeNS(s,e,t):i.setAttribute(e,t))))}var Pn=qL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vf=Symbol.for("react.element"),dd=Symbol.for("react.portal"),cd=Symbol.for("react.fragment"),vT=Symbol.for("react.strict_mode"),$y=Symbol.for("react.profiler"),XL=Symbol.for("react.provider"),JL=Symbol.for("react.context"),ST=Symbol.for("react.forward_ref"),Ky=Symbol.for("react.suspense"),jy=Symbol.for("react.suspense_list"),wT=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),ZL=Symbol.for("react.offscreen"),ZP=Symbol.iterator;function fh(i){return i===null||typeof i!="object"?null:(i=ZP&&i[ZP]||i["@@iterator"],typeof i=="function"?i:null)}var $t=Object.assign,Sw;function Ph(i){if(Sw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Sw=e&&e[1]||""}return`
`+Sw+i}var ww=!1;function yw(i,e){if(!i||ww)return"";ww=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(i,[],e)}else{try{e.call()}catch(u){s=u}i.call(e.prototype)}else{try{throw Error()}catch(u){s=u}i()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=s.stack.split(`
`),n=r.length-1,l=o.length-1;1<=n&&0<=l&&r[n]!==o[l];)l--;for(;1<=n&&0<=l;n--,l--)if(r[n]!==o[l]){if(n!==1||l!==1)do if(n--,l--,0>l||r[n]!==o[l]){var a=`
`+r[n].replace(" at new "," at ");return i.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",i.displayName)),a}while(1<=n&&0<=l);break}}}finally{ww=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?Ph(i):""}function yH(i){switch(i.tag){case 5:return Ph(i.type);case 16:return Ph("Lazy");case 13:return Ph("Suspense");case 19:return Ph("SuspenseList");case 0:case 2:case 15:return i=yw(i.type,!1),i;case 11:return i=yw(i.type.render,!1),i;case 1:return i=yw(i.type,!0),i;default:return""}}function Yy(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case cd:return"Fragment";case dd:return"Portal";case $y:return"Profiler";case vT:return"StrictMode";case Ky:return"Suspense";case jy:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case JL:return(i.displayName||"Context")+".Consumer";case XL:return(i._context.displayName||"Context")+".Provider";case ST:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case wT:return e=i.displayName||null,e!==null?e:Yy(i.type)||"Memo";case Yn:e=i._payload,i=i._init;try{return Yy(i(e))}catch{}}return null}function EH(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yy(e);case 8:return e===vT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bl(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function eI(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RH(i){var e=eI(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),s=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,o=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return r.call(this)},set:function(n){s=""+n,o.call(this,n)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(n){s=""+n},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Hf(i){i._valueTracker||(i._valueTracker=RH(i))}function tI(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return i&&(s=eI(i)?i.checked?"true":"false":i.value),i=s,i!==t?(e.setValue(i),!0):!1}function tC(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function qy(i,e){var t=e.checked;return $t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function eA(i,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=bl(e.value!=null?e.value:t),i._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iI(i,e){e=e.checked,e!=null&&CT(i,"checked",e,!1)}function Qy(i,e){iI(i,e);var t=bl(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(s==="submit"||s==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?Xy(i,e.type,t):e.hasOwnProperty("defaultValue")&&Xy(i,e.type,bl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function tA(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function Xy(i,e,t){(e!=="number"||tC(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var Ah=Array.isArray;function Pd(i,e,t,s){if(i=i.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<i.length;t++)r=e.hasOwnProperty("$"+i[t].value),i[t].selected!==r&&(i[t].selected=r),r&&s&&(i[t].defaultSelected=!0)}else{for(t=""+bl(t),e=null,r=0;r<i.length;r++){if(i[r].value===t){i[r].selected=!0,s&&(i[r].defaultSelected=!0);return}e!==null||i[r].disabled||(e=i[r])}e!==null&&(e.selected=!0)}}function Jy(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return $t({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function iA(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Q(92));if(Ah(t)){if(1<t.length)throw Error(Q(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:bl(t)}}function sI(i,e){var t=bl(e.value),s=bl(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),s!=null&&(i.defaultValue=""+s)}function sA(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function rI(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zy(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?rI(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Bf,oI=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return i(e,t,s,r)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(Bf=Bf||document.createElement("div"),Bf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bf.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function pp(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var Qh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TH=["Webkit","ms","Moz","O"];Object.keys(Qh).forEach(function(i){TH.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),Qh[e]=Qh[i]})});function nI(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Qh.hasOwnProperty(i)&&Qh[i]?(""+e).trim():e+"px"}function lI(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=nI(t,e[t],s);t==="float"&&(t="cssFloat"),s?i.setProperty(t,r):i[t]=r}}var DH=$t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eE(i,e){if(e){if(DH[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function tE(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iE=null;function yT(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var sE=null,Ad=null,Fd=null;function rA(i){if(i=zg(i)){if(typeof sE!="function")throw Error(Q(280));var e=i.stateNode;e&&(e=$v(e),sE(i.stateNode,i.type,e))}}function aI(i){Ad?Fd?Fd.push(i):Fd=[i]:Ad=i}function uI(){if(Ad){var i=Ad,e=Fd;if(Fd=Ad=null,rA(i),e)for(i=0;i<e.length;i++)rA(e[i])}}function dI(i,e){return i(e)}function cI(){}var Ew=!1;function hI(i,e,t){if(Ew)return i(e,t);Ew=!0;try{return dI(i,e,t)}finally{Ew=!1,(Ad!==null||Fd!==null)&&(cI(),uI())}}function gp(i,e){var t=i.stateNode;if(t===null)return null;var s=$v(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(i=i.type,s=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!s;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Q(231,e,typeof t));return t}var rE=!1;if(gn)try{var mh={};Object.defineProperty(mh,"passive",{get:function(){rE=!0}}),window.addEventListener("test",mh,mh),window.removeEventListener("test",mh,mh)}catch{rE=!1}function bH(i,e,t,s,r,o,n,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var Xh=!1,iC=null,sC=!1,oE=null,PH={onError:function(i){Xh=!0,iC=i}};function AH(i,e,t,s,r,o,n,l,a){Xh=!1,iC=null,bH.apply(PH,arguments)}function FH(i,e,t,s,r,o,n,l,a){if(AH.apply(this,arguments),Xh){if(Xh){var u=iC;Xh=!1,iC=null}else throw Error(Q(198));sC||(sC=!0,oE=u)}}function fu(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function pI(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function oA(i){if(fu(i)!==i)throw Error(Q(188))}function OH(i){var e=i.alternate;if(!e){if(e=fu(i),e===null)throw Error(Q(188));return e!==i?null:i}for(var t=i,s=e;;){var r=t.return;if(r===null)break;var o=r.alternate;if(o===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===t)return oA(r),i;if(o===s)return oA(r),e;o=o.sibling}throw Error(Q(188))}if(t.return!==s.return)t=r,s=o;else{for(var n=!1,l=r.child;l;){if(l===t){n=!0,t=r,s=o;break}if(l===s){n=!0,s=r,t=o;break}l=l.sibling}if(!n){for(l=o.child;l;){if(l===t){n=!0,t=o,s=r;break}if(l===s){n=!0,s=o,t=r;break}l=l.sibling}if(!n)throw Error(Q(189))}}if(t.alternate!==s)throw Error(Q(190))}if(t.tag!==3)throw Error(Q(188));return t.stateNode.current===t?i:e}function gI(i){return i=OH(i),i!==null?fI(i):null}function fI(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=fI(i);if(e!==null)return e;i=i.sibling}return null}var mI=ur.unstable_scheduleCallback,nA=ur.unstable_cancelCallback,LH=ur.unstable_shouldYield,IH=ur.unstable_requestPaint,ri=ur.unstable_now,MH=ur.unstable_getCurrentPriorityLevel,ET=ur.unstable_ImmediatePriority,CI=ur.unstable_UserBlockingPriority,rC=ur.unstable_NormalPriority,xH=ur.unstable_LowPriority,vI=ur.unstable_IdlePriority,Bv=null,Ho=null;function _H(i){if(Ho&&typeof Ho.onCommitFiberRoot=="function")try{Ho.onCommitFiberRoot(Bv,i,void 0,(i.current.flags&128)===128)}catch{}}var ao=Math.clz32?Math.clz32:kH,NH=Math.log,GH=Math.LN2;function kH(i){return i>>>=0,i===0?32:31-(NH(i)/GH|0)|0}var Wf=64,Uf=4194304;function Fh(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function oC(i,e){var t=i.pendingLanes;if(t===0)return 0;var s=0,r=i.suspendedLanes,o=i.pingedLanes,n=t&268435455;if(n!==0){var l=n&~r;l!==0?s=Fh(l):(o&=n,o!==0&&(s=Fh(o)))}else n=t&~r,n!==0?s=Fh(n):o!==0&&(s=Fh(o));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(s&4&&(s|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=s;0<e;)t=31-ao(e),r=1<<t,s|=i[t],e&=~r;return s}function VH(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HH(i,e){for(var t=i.suspendedLanes,s=i.pingedLanes,r=i.expirationTimes,o=i.pendingLanes;0<o;){var n=31-ao(o),l=1<<n,a=r[n];a===-1?(!(l&t)||l&s)&&(r[n]=VH(l,e)):a<=e&&(i.expiredLanes|=l),o&=~l}}function nE(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function SI(){var i=Wf;return Wf<<=1,!(Wf&4194240)&&(Wf=64),i}function Rw(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function Wg(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-ao(e),i[e]=t}function BH(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var s=i.eventTimes;for(i=i.expirationTimes;0<t;){var r=31-ao(t),o=1<<r;e[r]=0,s[r]=-1,i[r]=-1,t&=~o}}function RT(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var s=31-ao(t),r=1<<s;r&e|i[s]&e&&(i[s]|=e),t&=~r}}var gt=0;function wI(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var yI,TT,EI,RI,TI,lE=!1,zf=[],fl=null,ml=null,Cl=null,fp=new Map,mp=new Map,Xn=[],WH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lA(i,e){switch(i){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":fp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mp.delete(e.pointerId)}}function Ch(i,e,t,s,r,o){return i===null||i.nativeEvent!==o?(i={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:o,targetContainers:[r]},e!==null&&(e=zg(e),e!==null&&TT(e)),i):(i.eventSystemFlags|=s,e=i.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),i)}function UH(i,e,t,s,r){switch(e){case"focusin":return fl=Ch(fl,i,e,t,s,r),!0;case"dragenter":return ml=Ch(ml,i,e,t,s,r),!0;case"mouseover":return Cl=Ch(Cl,i,e,t,s,r),!0;case"pointerover":var o=r.pointerId;return fp.set(o,Ch(fp.get(o)||null,i,e,t,s,r)),!0;case"gotpointercapture":return o=r.pointerId,mp.set(o,Ch(mp.get(o)||null,i,e,t,s,r)),!0}return!1}function DI(i){var e=ca(i.target);if(e!==null){var t=fu(e);if(t!==null){if(e=t.tag,e===13){if(e=pI(t),e!==null){i.blockedOn=e,TI(i.priority,function(){EI(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cm(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=aE(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var s=new t.constructor(t.type,t);iE=s,t.target.dispatchEvent(s),iE=null}else return e=zg(t),e!==null&&TT(e),i.blockedOn=t,!1;e.shift()}return!0}function aA(i,e,t){Cm(i)&&t.delete(e)}function zH(){lE=!1,fl!==null&&Cm(fl)&&(fl=null),ml!==null&&Cm(ml)&&(ml=null),Cl!==null&&Cm(Cl)&&(Cl=null),fp.forEach(aA),mp.forEach(aA)}function vh(i,e){i.blockedOn===e&&(i.blockedOn=null,lE||(lE=!0,ur.unstable_scheduleCallback(ur.unstable_NormalPriority,zH)))}function Cp(i){function e(r){return vh(r,i)}if(0<zf.length){vh(zf[0],i);for(var t=1;t<zf.length;t++){var s=zf[t];s.blockedOn===i&&(s.blockedOn=null)}}for(fl!==null&&vh(fl,i),ml!==null&&vh(ml,i),Cl!==null&&vh(Cl,i),fp.forEach(e),mp.forEach(e),t=0;t<Xn.length;t++)s=Xn[t],s.blockedOn===i&&(s.blockedOn=null);for(;0<Xn.length&&(t=Xn[0],t.blockedOn===null);)DI(t),t.blockedOn===null&&Xn.shift()}var Od=Pn.ReactCurrentBatchConfig,nC=!0;function $H(i,e,t,s){var r=gt,o=Od.transition;Od.transition=null;try{gt=1,DT(i,e,t,s)}finally{gt=r,Od.transition=o}}function KH(i,e,t,s){var r=gt,o=Od.transition;Od.transition=null;try{gt=4,DT(i,e,t,s)}finally{gt=r,Od.transition=o}}function DT(i,e,t,s){if(nC){var r=aE(i,e,t,s);if(r===null)Mw(i,e,s,lC,t),lA(i,s);else if(UH(r,i,e,t,s))s.stopPropagation();else if(lA(i,s),e&4&&-1<WH.indexOf(i)){for(;r!==null;){var o=zg(r);if(o!==null&&yI(o),o=aE(i,e,t,s),o===null&&Mw(i,e,s,lC,t),o===r)break;r=o}r!==null&&s.stopPropagation()}else Mw(i,e,s,null,t)}}var lC=null;function aE(i,e,t,s){if(lC=null,i=yT(s),i=ca(i),i!==null)if(e=fu(i),e===null)i=null;else if(t=e.tag,t===13){if(i=pI(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return lC=i,null}function bI(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MH()){case ET:return 1;case CI:return 4;case rC:case xH:return 16;case vI:return 536870912;default:return 16}default:return 16}}var dl=null,bT=null,vm=null;function PI(){if(vm)return vm;var i,e=bT,t=e.length,s,r="value"in dl?dl.value:dl.textContent,o=r.length;for(i=0;i<t&&e[i]===r[i];i++);var n=t-i;for(s=1;s<=n&&e[t-s]===r[o-s];s++);return vm=r.slice(i,1<s?1-s:void 0)}function Sm(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function $f(){return!0}function uA(){return!1}function gr(i){function e(t,s,r,o,n){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=o,this.target=n,this.currentTarget=null;for(var l in i)i.hasOwnProperty(l)&&(t=i[l],this[l]=t?t(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?$f:uA,this.isPropagationStopped=uA,this}return $t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$f)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$f)},persist:function(){},isPersistent:$f}),e}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PT=gr(Gc),Ug=$t({},Gc,{view:0,detail:0}),jH=gr(Ug),Tw,Dw,Sh,Wv=$t({},Ug,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:AT,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Sh&&(Sh&&i.type==="mousemove"?(Tw=i.screenX-Sh.screenX,Dw=i.screenY-Sh.screenY):Dw=Tw=0,Sh=i),Tw)},movementY:function(i){return"movementY"in i?i.movementY:Dw}}),dA=gr(Wv),YH=$t({},Wv,{dataTransfer:0}),qH=gr(YH),QH=$t({},Ug,{relatedTarget:0}),bw=gr(QH),XH=$t({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),JH=gr(XH),ZH=$t({},Gc,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),e1=gr(ZH),t1=$t({},Gc,{data:0}),cA=gr(t1),i1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o1(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=r1[i])?!!e[i]:!1}function AT(){return o1}var n1=$t({},Ug,{key:function(i){if(i.key){var e=i1[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=Sm(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?s1[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:AT,charCode:function(i){return i.type==="keypress"?Sm(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Sm(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),l1=gr(n1),a1=$t({},Wv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hA=gr(a1),u1=$t({},Ug,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:AT}),d1=gr(u1),c1=$t({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),h1=gr(c1),p1=$t({},Wv,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),g1=gr(p1),f1=[9,13,27,32],FT=gn&&"CompositionEvent"in window,Jh=null;gn&&"documentMode"in document&&(Jh=document.documentMode);var m1=gn&&"TextEvent"in window&&!Jh,AI=gn&&(!FT||Jh&&8<Jh&&11>=Jh),pA=" ",gA=!1;function FI(i,e){switch(i){case"keyup":return f1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OI(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var hd=!1;function C1(i,e){switch(i){case"compositionend":return OI(e);case"keypress":return e.which!==32?null:(gA=!0,pA);case"textInput":return i=e.data,i===pA&&gA?null:i;default:return null}}function v1(i,e){if(hd)return i==="compositionend"||!FT&&FI(i,e)?(i=PI(),vm=bT=dl=null,hd=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AI&&e.locale!=="ko"?null:e.data;default:return null}}var S1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fA(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!S1[i.type]:e==="textarea"}function LI(i,e,t,s){aI(s),e=aC(e,"onChange"),0<e.length&&(t=new PT("onChange","change",null,t,s),i.push({event:t,listeners:e}))}var Zh=null,vp=null;function w1(i){WI(i,0)}function Uv(i){var e=fd(i);if(tI(e))return i}function y1(i,e){if(i==="change")return e}var II=!1;if(gn){var Pw;if(gn){var Aw="oninput"in document;if(!Aw){var mA=document.createElement("div");mA.setAttribute("oninput","return;"),Aw=typeof mA.oninput=="function"}Pw=Aw}else Pw=!1;II=Pw&&(!document.documentMode||9<document.documentMode)}function CA(){Zh&&(Zh.detachEvent("onpropertychange",MI),vp=Zh=null)}function MI(i){if(i.propertyName==="value"&&Uv(vp)){var e=[];LI(e,vp,i,yT(i)),hI(w1,e)}}function E1(i,e,t){i==="focusin"?(CA(),Zh=e,vp=t,Zh.attachEvent("onpropertychange",MI)):i==="focusout"&&CA()}function R1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Uv(vp)}function T1(i,e){if(i==="click")return Uv(e)}function D1(i,e){if(i==="input"||i==="change")return Uv(e)}function b1(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var po=typeof Object.is=="function"?Object.is:b1;function Sp(i,e){if(po(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!zy.call(e,r)||!po(i[r],e[r]))return!1}return!0}function vA(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function SA(i,e){var t=vA(i);i=0;for(var s;t;){if(t.nodeType===3){if(s=i+t.textContent.length,i<=e&&s>=e)return{node:t,offset:e-i};i=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=vA(t)}}function xI(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?xI(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function _I(){for(var i=window,e=tC();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=tC(i.document)}return e}function OT(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function P1(i){var e=_I(),t=i.focusedElem,s=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&xI(t.ownerDocument.documentElement,t)){if(s!==null&&OT(t)){if(e=s.start,i=s.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var r=t.textContent.length,o=Math.min(s.start,r);s=s.end===void 0?o:Math.min(s.end,r),!i.extend&&o>s&&(r=s,s=o,o=r),r=SA(t,o);var n=SA(t,s);r&&n&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==n.node||i.focusOffset!==n.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),i.removeAllRanges(),o>s?(i.addRange(e),i.extend(n.node,n.offset)):(e.setEnd(n.node,n.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var A1=gn&&"documentMode"in document&&11>=document.documentMode,pd=null,uE=null,ep=null,dE=!1;function wA(i,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;dE||pd==null||pd!==tC(s)||(s=pd,"selectionStart"in s&&OT(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ep&&Sp(ep,s)||(ep=s,s=aC(uE,"onSelect"),0<s.length&&(e=new PT("onSelect","select",null,e,t),i.push({event:e,listeners:s}),e.target=pd)))}function Kf(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var gd={animationend:Kf("Animation","AnimationEnd"),animationiteration:Kf("Animation","AnimationIteration"),animationstart:Kf("Animation","AnimationStart"),transitionend:Kf("Transition","TransitionEnd")},Fw={},NI={};gn&&(NI=document.createElement("div").style,"AnimationEvent"in window||(delete gd.animationend.animation,delete gd.animationiteration.animation,delete gd.animationstart.animation),"TransitionEvent"in window||delete gd.transitionend.transition);function zv(i){if(Fw[i])return Fw[i];if(!gd[i])return i;var e=gd[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in NI)return Fw[i]=e[t];return i}var GI=zv("animationend"),kI=zv("animationiteration"),VI=zv("animationstart"),HI=zv("transitionend"),BI=new Map,yA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(i,e){BI.set(i,e),gu(e,[i])}for(var Ow=0;Ow<yA.length;Ow++){var Lw=yA[Ow],F1=Lw.toLowerCase(),O1=Lw[0].toUpperCase()+Lw.slice(1);Nl(F1,"on"+O1)}Nl(GI,"onAnimationEnd");Nl(kI,"onAnimationIteration");Nl(VI,"onAnimationStart");Nl("dblclick","onDoubleClick");Nl("focusin","onFocus");Nl("focusout","onBlur");Nl(HI,"onTransitionEnd");ic("onMouseEnter",["mouseout","mouseover"]);ic("onMouseLeave",["mouseout","mouseover"]);ic("onPointerEnter",["pointerout","pointerover"]);ic("onPointerLeave",["pointerout","pointerover"]);gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oh));function EA(i,e,t){var s=i.type||"unknown-event";i.currentTarget=t,FH(s,e,void 0,i),i.currentTarget=null}function WI(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var s=i[t],r=s.event;s=s.listeners;e:{var o=void 0;if(e)for(var n=s.length-1;0<=n;n--){var l=s[n],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&r.isPropagationStopped())break e;EA(r,l,u),o=a}else for(n=0;n<s.length;n++){if(l=s[n],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&r.isPropagationStopped())break e;EA(r,l,u),o=a}}}if(sC)throw i=oE,sC=!1,oE=null,i}function Lt(i,e){var t=e[fE];t===void 0&&(t=e[fE]=new Set);var s=i+"__bubble";t.has(s)||(UI(e,i,2,!1),t.add(s))}function Iw(i,e,t){var s=0;e&&(s|=4),UI(t,i,s,e)}var jf="_reactListening"+Math.random().toString(36).slice(2);function wp(i){if(!i[jf]){i[jf]=!0,QL.forEach(function(t){t!=="selectionchange"&&(L1.has(t)||Iw(t,!1,i),Iw(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[jf]||(e[jf]=!0,Iw("selectionchange",!1,e))}}function UI(i,e,t,s){switch(bI(e)){case 1:var r=$H;break;case 4:r=KH;break;default:r=DT}t=r.bind(null,e,t,i),r=void 0,!rE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?i.addEventListener(e,t,{capture:!0,passive:r}):i.addEventListener(e,t,!0):r!==void 0?i.addEventListener(e,t,{passive:r}):i.addEventListener(e,t,!1)}function Mw(i,e,t,s,r){var o=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var n=s.tag;if(n===3||n===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(n===4)for(n=s.return;n!==null;){var a=n.tag;if((a===3||a===4)&&(a=n.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;n=n.return}for(;l!==null;){if(n=ca(l),n===null)return;if(a=n.tag,a===5||a===6){s=o=n;continue e}l=l.parentNode}}s=s.return}hI(function(){var u=o,d=yT(t),c=[];e:{var h=BI.get(i);if(h!==void 0){var p=PT,m=i;switch(i){case"keypress":if(Sm(t)===0)break e;case"keydown":case"keyup":p=l1;break;case"focusin":m="focus",p=bw;break;case"focusout":m="blur",p=bw;break;case"beforeblur":case"afterblur":p=bw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=dA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=d1;break;case GI:case kI:case VI:p=JH;break;case HI:p=h1;break;case"scroll":p=jH;break;case"wheel":p=g1;break;case"copy":case"cut":case"paste":p=e1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=hA}var S=(e&4)!==0,E=!S&&i==="scroll",C=S?h!==null?h+"Capture":null:h;S=[];for(var v=u,R;v!==null;){R=v;var b=R.stateNode;if(R.tag===5&&b!==null&&(R=b,C!==null&&(b=gp(v,C),b!=null&&S.push(yp(v,b,R)))),E)break;v=v.return}0<S.length&&(h=new p(h,m,null,t,d),c.push({event:h,listeners:S}))}}if(!(e&7)){e:{if(h=i==="mouseover"||i==="pointerover",p=i==="mouseout"||i==="pointerout",h&&t!==iE&&(m=t.relatedTarget||t.fromElement)&&(ca(m)||m[fn]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=u,m=m?ca(m):null,m!==null&&(E=fu(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(S=dA,b="onMouseLeave",C="onMouseEnter",v="mouse",(i==="pointerout"||i==="pointerover")&&(S=hA,b="onPointerLeave",C="onPointerEnter",v="pointer"),E=p==null?h:fd(p),R=m==null?h:fd(m),h=new S(b,v+"leave",p,t,d),h.target=E,h.relatedTarget=R,b=null,ca(d)===u&&(S=new S(C,v+"enter",m,t,d),S.target=R,S.relatedTarget=E,b=S),E=b,p&&m)t:{for(S=p,C=m,v=0,R=S;R;R=Yu(R))v++;for(R=0,b=C;b;b=Yu(b))R++;for(;0<v-R;)S=Yu(S),v--;for(;0<R-v;)C=Yu(C),R--;for(;v--;){if(S===C||C!==null&&S===C.alternate)break t;S=Yu(S),C=Yu(C)}S=null}else S=null;p!==null&&RA(c,h,p,S,!1),m!==null&&E!==null&&RA(c,E,m,S,!0)}}e:{if(h=u?fd(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var A=y1;else if(fA(h))if(II)A=D1;else{A=R1;var F=E1}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=T1);if(A&&(A=A(i,u))){LI(c,A,t,d);break e}F&&F(i,h,u),i==="focusout"&&(F=h._wrapperState)&&F.controlled&&h.type==="number"&&Xy(h,"number",h.value)}switch(F=u?fd(u):window,i){case"focusin":(fA(F)||F.contentEditable==="true")&&(pd=F,uE=u,ep=null);break;case"focusout":ep=uE=pd=null;break;case"mousedown":dE=!0;break;case"contextmenu":case"mouseup":case"dragend":dE=!1,wA(c,t,d);break;case"selectionchange":if(A1)break;case"keydown":case"keyup":wA(c,t,d)}var O;if(FT)e:{switch(i){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else hd?FI(i,t)&&(L="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(AI&&t.locale!=="ko"&&(hd||L!=="onCompositionStart"?L==="onCompositionEnd"&&hd&&(O=PI()):(dl=d,bT="value"in dl?dl.value:dl.textContent,hd=!0)),F=aC(u,L),0<F.length&&(L=new cA(L,i,null,t,d),c.push({event:L,listeners:F}),O?L.data=O:(O=OI(t),O!==null&&(L.data=O)))),(O=m1?C1(i,t):v1(i,t))&&(u=aC(u,"onBeforeInput"),0<u.length&&(d=new cA("onBeforeInput","beforeinput",null,t,d),c.push({event:d,listeners:u}),d.data=O))}WI(c,e)})}function yp(i,e,t){return{instance:i,listener:e,currentTarget:t}}function aC(i,e){for(var t=e+"Capture",s=[];i!==null;){var r=i,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=gp(i,t),o!=null&&s.unshift(yp(i,o,r)),o=gp(i,e),o!=null&&s.push(yp(i,o,r))),i=i.return}return s}function Yu(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function RA(i,e,t,s,r){for(var o=e._reactName,n=[];t!==null&&t!==s;){var l=t,a=l.alternate,u=l.stateNode;if(a!==null&&a===s)break;l.tag===5&&u!==null&&(l=u,r?(a=gp(t,o),a!=null&&n.unshift(yp(t,a,l))):r||(a=gp(t,o),a!=null&&n.push(yp(t,a,l)))),t=t.return}n.length!==0&&i.push({event:e,listeners:n})}var I1=/\r\n?/g,M1=/\u0000|\uFFFD/g;function TA(i){return(typeof i=="string"?i:""+i).replace(I1,`
`).replace(M1,"")}function Yf(i,e,t){if(e=TA(e),TA(i)!==e&&t)throw Error(Q(425))}function uC(){}var cE=null,hE=null;function pE(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gE=typeof setTimeout=="function"?setTimeout:void 0,x1=typeof clearTimeout=="function"?clearTimeout:void 0,DA=typeof Promise=="function"?Promise:void 0,_1=typeof queueMicrotask=="function"?queueMicrotask:typeof DA<"u"?function(i){return DA.resolve(null).then(i).catch(N1)}:gE;function N1(i){setTimeout(function(){throw i})}function xw(i,e){var t=e,s=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){i.removeChild(r),Cp(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);Cp(e)}function vl(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function bA(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var kc=Math.random().toString(36).slice(2),No="__reactFiber$"+kc,Ep="__reactProps$"+kc,fn="__reactContainer$"+kc,fE="__reactEvents$"+kc,G1="__reactListeners$"+kc,k1="__reactHandles$"+kc;function ca(i){var e=i[No];if(e)return e;for(var t=i.parentNode;t;){if(e=t[fn]||t[No]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=bA(i);i!==null;){if(t=i[No])return t;i=bA(i)}return e}i=t,t=i.parentNode}return null}function zg(i){return i=i[No]||i[fn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function fd(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Q(33))}function $v(i){return i[Ep]||null}var mE=[],md=-1;function Gl(i){return{current:i}}function xt(i){0>md||(i.current=mE[md],mE[md]=null,md--)}function bt(i,e){md++,mE[md]=i.current,i.current=e}var Pl={},Ki=Gl(Pl),Ms=Gl(!1),$a=Pl;function sc(i,e){var t=i.type.contextTypes;if(!t)return Pl;var s=i.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in t)r[o]=e[o];return s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=r),r}function xs(i){return i=i.childContextTypes,i!=null}function dC(){xt(Ms),xt(Ki)}function PA(i,e,t){if(Ki.current!==Pl)throw Error(Q(168));bt(Ki,e),bt(Ms,t)}function zI(i,e,t){var s=i.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(Q(108,EH(i)||"Unknown",r));return $t({},t,s)}function cC(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Pl,$a=Ki.current,bt(Ki,i),bt(Ms,Ms.current),!0}function AA(i,e,t){var s=i.stateNode;if(!s)throw Error(Q(169));t?(i=zI(i,e,$a),s.__reactInternalMemoizedMergedChildContext=i,xt(Ms),xt(Ki),bt(Ki,i)):xt(Ms),bt(Ms,t)}var nn=null,Kv=!1,_w=!1;function $I(i){nn===null?nn=[i]:nn.push(i)}function V1(i){Kv=!0,$I(i)}function kl(){if(!_w&&nn!==null){_w=!0;var i=0,e=gt;try{var t=nn;for(gt=1;i<t.length;i++){var s=t[i];do s=s(!0);while(s!==null)}nn=null,Kv=!1}catch(r){throw nn!==null&&(nn=nn.slice(i+1)),mI(ET,kl),r}finally{gt=e,_w=!1}}return null}var Cd=[],vd=0,hC=null,pC=0,Dr=[],br=0,Ka=null,un=1,dn="";function Zl(i,e){Cd[vd++]=pC,Cd[vd++]=hC,hC=i,pC=e}function KI(i,e,t){Dr[br++]=un,Dr[br++]=dn,Dr[br++]=Ka,Ka=i;var s=un;i=dn;var r=32-ao(s)-1;s&=~(1<<r),t+=1;var o=32-ao(e)+r;if(30<o){var n=r-r%5;o=(s&(1<<n)-1).toString(32),s>>=n,r-=n,un=1<<32-ao(e)+r|t<<r|s,dn=o+i}else un=1<<o|t<<r|s,dn=i}function LT(i){i.return!==null&&(Zl(i,1),KI(i,1,0))}function IT(i){for(;i===hC;)hC=Cd[--vd],Cd[vd]=null,pC=Cd[--vd],Cd[vd]=null;for(;i===Ka;)Ka=Dr[--br],Dr[br]=null,dn=Dr[--br],Dr[br]=null,un=Dr[--br],Dr[br]=null}var lr=null,ir=null,Ht=!1,eo=null;function jI(i,e){var t=Ar(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function FA(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,lr=i,ir=vl(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,lr=i,ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ka!==null?{id:un,overflow:dn}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ar(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,lr=i,ir=null,!0):!1;default:return!1}}function CE(i){return(i.mode&1)!==0&&(i.flags&128)===0}function vE(i){if(Ht){var e=ir;if(e){var t=e;if(!FA(i,e)){if(CE(i))throw Error(Q(418));e=vl(t.nextSibling);var s=lr;e&&FA(i,e)?jI(s,t):(i.flags=i.flags&-4097|2,Ht=!1,lr=i)}}else{if(CE(i))throw Error(Q(418));i.flags=i.flags&-4097|2,Ht=!1,lr=i}}}function OA(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;lr=i}function qf(i){if(i!==lr)return!1;if(!Ht)return OA(i),Ht=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!pE(i.type,i.memoizedProps)),e&&(e=ir)){if(CE(i))throw YI(),Error(Q(418));for(;e;)jI(i,e),e=vl(e.nextSibling)}if(OA(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){ir=vl(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}ir=null}}else ir=lr?vl(i.stateNode.nextSibling):null;return!0}function YI(){for(var i=ir;i;)i=vl(i.nextSibling)}function rc(){ir=lr=null,Ht=!1}function MT(i){eo===null?eo=[i]:eo.push(i)}var H1=Pn.ReactCurrentBatchConfig;function Yr(i,e){if(i&&i.defaultProps){e=$t({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}var gC=Gl(null),fC=null,Sd=null,xT=null;function _T(){xT=Sd=fC=null}function NT(i){var e=gC.current;xt(gC),i._currentValue=e}function SE(i,e,t){for(;i!==null;){var s=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),i===t)break;i=i.return}}function Ld(i,e){fC=i,xT=Sd=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(As=!0),i.firstContext=null)}function Nr(i){var e=i._currentValue;if(xT!==i)if(i={context:i,memoizedValue:e,next:null},Sd===null){if(fC===null)throw Error(Q(308));Sd=i,fC.dependencies={lanes:0,firstContext:i}}else Sd=Sd.next=i;return e}var ha=null;function GT(i){ha===null?ha=[i]:ha.push(i)}function qI(i,e,t,s){var r=e.interleaved;return r===null?(t.next=t,GT(e)):(t.next=r.next,r.next=t),e.interleaved=t,mn(i,s)}function mn(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var qn=!1;function kT(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QI(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function hn(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Sl(i,e,t){var s=i.updateQueue;if(s===null)return null;if(s=s.shared,it&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,mn(i,t)}return r=s.interleaved,r===null?(e.next=e,GT(s)):(e.next=r.next,r.next=e),s.interleaved=e,mn(i,t)}function wm(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=i.pendingLanes,t|=s,e.lanes=t,RT(i,t)}}function LA(i,e){var t=i.updateQueue,s=i.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var n={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?r=o=n:o=o.next=n,t=t.next}while(t!==null);o===null?r=o=e:o=o.next=e}else r=o=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:s.shared,effects:s.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function mC(i,e,t,s){var r=i.updateQueue;qn=!1;var o=r.firstBaseUpdate,n=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var a=l,u=a.next;a.next=null,n===null?o=u:n.next=u,n=a;var d=i.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==n&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=a))}if(o!==null){var c=r.baseState;n=0,d=u=a=null,l=o;do{var h=l.lane,p=l.eventTime;if((s&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=i,S=l;switch(h=e,p=t,S.tag){case 1:if(m=S.payload,typeof m=="function"){c=m.call(p,c,h);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=S.payload,h=typeof m=="function"?m.call(p,c,h):m,h==null)break e;c=$t({},c,h);break e;case 2:qn=!0}}l.callback!==null&&l.lane!==0&&(i.flags|=64,h=r.effects,h===null?r.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,a=c):d=d.next=p,n|=h;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(d===null&&(a=c),r.baseState=a,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do n|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Ya|=n,i.lanes=n,i.memoizedState=c}}function IA(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var s=i[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(Q(191,r));r.call(s)}}}var XI=new qL.Component().refs;function wE(i,e,t,s){e=i.memoizedState,t=t(s,e),t=t==null?e:$t({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var jv={isMounted:function(i){return(i=i._reactInternals)?fu(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var s=ls(),r=yl(i),o=hn(s,r);o.payload=e,t!=null&&(o.callback=t),e=Sl(i,o,r),e!==null&&(uo(e,i,r,s),wm(e,i,r))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var s=ls(),r=yl(i),o=hn(s,r);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Sl(i,o,r),e!==null&&(uo(e,i,r,s),wm(e,i,r))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=ls(),s=yl(i),r=hn(t,s);r.tag=2,e!=null&&(r.callback=e),e=Sl(i,r,s),e!==null&&(uo(e,i,s,t),wm(e,i,s))}};function MA(i,e,t,s,r,o,n){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(s,o,n):e.prototype&&e.prototype.isPureReactComponent?!Sp(t,s)||!Sp(r,o):!0}function JI(i,e,t){var s=!1,r=Pl,o=e.contextType;return typeof o=="object"&&o!==null?o=Nr(o):(r=xs(e)?$a:Ki.current,s=e.contextTypes,o=(s=s!=null)?sc(i,r):Pl),e=new e(t,o),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jv,i.stateNode=e,e._reactInternals=i,s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=o),e}function xA(i,e,t,s){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==i&&jv.enqueueReplaceState(e,e.state,null)}function yE(i,e,t,s){var r=i.stateNode;r.props=t,r.state=i.memoizedState,r.refs=XI,kT(i);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Nr(o):(o=xs(e)?$a:Ki.current,r.context=sc(i,o)),r.state=i.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(wE(i,e,o,t),r.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&jv.enqueueReplaceState(r,r.state,null),mC(i,t,r,s),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function wh(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Q(309));var s=t.stateNode}if(!s)throw Error(Q(147,i));var r=s,o=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(n){var l=r.refs;l===XI&&(l=r.refs={}),n===null?delete l[o]:l[o]=n},e._stringRef=o,e)}if(typeof i!="string")throw Error(Q(284));if(!t._owner)throw Error(Q(290,i))}return i}function Qf(i,e){throw i=Object.prototype.toString.call(e),Error(Q(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function _A(i){var e=i._init;return e(i._payload)}function ZI(i){function e(C,v){if(i){var R=C.deletions;R===null?(C.deletions=[v],C.flags|=16):R.push(v)}}function t(C,v){if(!i)return null;for(;v!==null;)e(C,v),v=v.sibling;return null}function s(C,v){for(C=new Map;v!==null;)v.key!==null?C.set(v.key,v):C.set(v.index,v),v=v.sibling;return C}function r(C,v){return C=El(C,v),C.index=0,C.sibling=null,C}function o(C,v,R){return C.index=R,i?(R=C.alternate,R!==null?(R=R.index,R<v?(C.flags|=2,v):R):(C.flags|=2,v)):(C.flags|=1048576,v)}function n(C){return i&&C.alternate===null&&(C.flags|=2),C}function l(C,v,R,b){return v===null||v.tag!==6?(v=Ww(R,C.mode,b),v.return=C,v):(v=r(v,R),v.return=C,v)}function a(C,v,R,b){var A=R.type;return A===cd?d(C,v,R.props.children,b,R.key):v!==null&&(v.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Yn&&_A(A)===v.type)?(b=r(v,R.props),b.ref=wh(C,v,R),b.return=C,b):(b=bm(R.type,R.key,R.props,null,C.mode,b),b.ref=wh(C,v,R),b.return=C,b)}function u(C,v,R,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==R.containerInfo||v.stateNode.implementation!==R.implementation?(v=Uw(R,C.mode,b),v.return=C,v):(v=r(v,R.children||[]),v.return=C,v)}function d(C,v,R,b,A){return v===null||v.tag!==7?(v=Fa(R,C.mode,b,A),v.return=C,v):(v=r(v,R),v.return=C,v)}function c(C,v,R){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ww(""+v,C.mode,R),v.return=C,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Vf:return R=bm(v.type,v.key,v.props,null,C.mode,R),R.ref=wh(C,null,v),R.return=C,R;case dd:return v=Uw(v,C.mode,R),v.return=C,v;case Yn:var b=v._init;return c(C,b(v._payload),R)}if(Ah(v)||fh(v))return v=Fa(v,C.mode,R,null),v.return=C,v;Qf(C,v)}return null}function h(C,v,R,b){var A=v!==null?v.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return A!==null?null:l(C,v,""+R,b);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Vf:return R.key===A?a(C,v,R,b):null;case dd:return R.key===A?u(C,v,R,b):null;case Yn:return A=R._init,h(C,v,A(R._payload),b)}if(Ah(R)||fh(R))return A!==null?null:d(C,v,R,b,null);Qf(C,R)}return null}function p(C,v,R,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return C=C.get(R)||null,l(v,C,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vf:return C=C.get(b.key===null?R:b.key)||null,a(v,C,b,A);case dd:return C=C.get(b.key===null?R:b.key)||null,u(v,C,b,A);case Yn:var F=b._init;return p(C,v,R,F(b._payload),A)}if(Ah(b)||fh(b))return C=C.get(R)||null,d(v,C,b,A,null);Qf(v,b)}return null}function m(C,v,R,b){for(var A=null,F=null,O=v,L=v=0,G=null;O!==null&&L<R.length;L++){O.index>L?(G=O,O=null):G=O.sibling;var k=h(C,O,R[L],b);if(k===null){O===null&&(O=G);break}i&&O&&k.alternate===null&&e(C,O),v=o(k,v,L),F===null?A=k:F.sibling=k,F=k,O=G}if(L===R.length)return t(C,O),Ht&&Zl(C,L),A;if(O===null){for(;L<R.length;L++)O=c(C,R[L],b),O!==null&&(v=o(O,v,L),F===null?A=O:F.sibling=O,F=O);return Ht&&Zl(C,L),A}for(O=s(C,O);L<R.length;L++)G=p(O,C,L,R[L],b),G!==null&&(i&&G.alternate!==null&&O.delete(G.key===null?L:G.key),v=o(G,v,L),F===null?A=G:F.sibling=G,F=G);return i&&O.forEach(function(se){return e(C,se)}),Ht&&Zl(C,L),A}function S(C,v,R,b){var A=fh(R);if(typeof A!="function")throw Error(Q(150));if(R=A.call(R),R==null)throw Error(Q(151));for(var F=A=null,O=v,L=v=0,G=null,k=R.next();O!==null&&!k.done;L++,k=R.next()){O.index>L?(G=O,O=null):G=O.sibling;var se=h(C,O,k.value,b);if(se===null){O===null&&(O=G);break}i&&O&&se.alternate===null&&e(C,O),v=o(se,v,L),F===null?A=se:F.sibling=se,F=se,O=G}if(k.done)return t(C,O),Ht&&Zl(C,L),A;if(O===null){for(;!k.done;L++,k=R.next())k=c(C,k.value,b),k!==null&&(v=o(k,v,L),F===null?A=k:F.sibling=k,F=k);return Ht&&Zl(C,L),A}for(O=s(C,O);!k.done;L++,k=R.next())k=p(O,C,L,k.value,b),k!==null&&(i&&k.alternate!==null&&O.delete(k.key===null?L:k.key),v=o(k,v,L),F===null?A=k:F.sibling=k,F=k);return i&&O.forEach(function(j){return e(C,j)}),Ht&&Zl(C,L),A}function E(C,v,R,b){if(typeof R=="object"&&R!==null&&R.type===cd&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Vf:e:{for(var A=R.key,F=v;F!==null;){if(F.key===A){if(A=R.type,A===cd){if(F.tag===7){t(C,F.sibling),v=r(F,R.props.children),v.return=C,C=v;break e}}else if(F.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Yn&&_A(A)===F.type){t(C,F.sibling),v=r(F,R.props),v.ref=wh(C,F,R),v.return=C,C=v;break e}t(C,F);break}else e(C,F);F=F.sibling}R.type===cd?(v=Fa(R.props.children,C.mode,b,R.key),v.return=C,C=v):(b=bm(R.type,R.key,R.props,null,C.mode,b),b.ref=wh(C,v,R),b.return=C,C=b)}return n(C);case dd:e:{for(F=R.key;v!==null;){if(v.key===F)if(v.tag===4&&v.stateNode.containerInfo===R.containerInfo&&v.stateNode.implementation===R.implementation){t(C,v.sibling),v=r(v,R.children||[]),v.return=C,C=v;break e}else{t(C,v);break}else e(C,v);v=v.sibling}v=Uw(R,C.mode,b),v.return=C,C=v}return n(C);case Yn:return F=R._init,E(C,v,F(R._payload),b)}if(Ah(R))return m(C,v,R,b);if(fh(R))return S(C,v,R,b);Qf(C,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,v!==null&&v.tag===6?(t(C,v.sibling),v=r(v,R),v.return=C,C=v):(t(C,v),v=Ww(R,C.mode,b),v.return=C,C=v),n(C)):t(C,v)}return E}var oc=ZI(!0),eM=ZI(!1),$g={},Bo=Gl($g),Rp=Gl($g),Tp=Gl($g);function pa(i){if(i===$g)throw Error(Q(174));return i}function VT(i,e){switch(bt(Tp,e),bt(Rp,i),bt(Bo,$g),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zy(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=Zy(e,i)}xt(Bo),bt(Bo,e)}function nc(){xt(Bo),xt(Rp),xt(Tp)}function tM(i){pa(Tp.current);var e=pa(Bo.current),t=Zy(e,i.type);e!==t&&(bt(Rp,i),bt(Bo,t))}function HT(i){Rp.current===i&&(xt(Bo),xt(Rp))}var Ut=Gl(0);function CC(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nw=[];function BT(){for(var i=0;i<Nw.length;i++)Nw[i]._workInProgressVersionPrimary=null;Nw.length=0}var ym=Pn.ReactCurrentDispatcher,Gw=Pn.ReactCurrentBatchConfig,ja=0,zt=null,vi=null,bi=null,vC=!1,tp=!1,Dp=0,B1=0;function Bi(){throw Error(Q(321))}function WT(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!po(i[t],e[t]))return!1;return!0}function UT(i,e,t,s,r,o){if(ja=o,zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ym.current=i===null||i.memoizedState===null?$1:K1,i=t(s,r),tp){o=0;do{if(tp=!1,Dp=0,25<=o)throw Error(Q(301));o+=1,bi=vi=null,e.updateQueue=null,ym.current=j1,i=t(s,r)}while(tp)}if(ym.current=SC,e=vi!==null&&vi.next!==null,ja=0,bi=vi=zt=null,vC=!1,e)throw Error(Q(300));return i}function zT(){var i=Dp!==0;return Dp=0,i}function Oo(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bi===null?zt.memoizedState=bi=i:bi=bi.next=i,bi}function Gr(){if(vi===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=vi.next;var e=bi===null?zt.memoizedState:bi.next;if(e!==null)bi=e,vi=i;else{if(i===null)throw Error(Q(310));vi=i,i={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},bi===null?zt.memoizedState=bi=i:bi=bi.next=i}return bi}function bp(i,e){return typeof e=="function"?e(i):e}function kw(i){var e=Gr(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=i;var s=vi,r=s.baseQueue,o=t.pending;if(o!==null){if(r!==null){var n=r.next;r.next=o.next,o.next=n}s.baseQueue=r=o,t.pending=null}if(r!==null){o=r.next,s=s.baseState;var l=n=null,a=null,u=o;do{var d=u.lane;if((ja&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:i(s,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=c,n=s):a=a.next=c,zt.lanes|=d,Ya|=d}u=u.next}while(u!==null&&u!==o);a===null?n=s:a.next=l,po(s,e.memoizedState)||(As=!0),e.memoizedState=s,e.baseState=n,e.baseQueue=a,t.lastRenderedState=s}if(i=t.interleaved,i!==null){r=i;do o=r.lane,zt.lanes|=o,Ya|=o,r=r.next;while(r!==i)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Vw(i){var e=Gr(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=i;var s=t.dispatch,r=t.pending,o=e.memoizedState;if(r!==null){t.pending=null;var n=r=r.next;do o=i(o,n.action),n=n.next;while(n!==r);po(o,e.memoizedState)||(As=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,s]}function iM(){}function sM(i,e){var t=zt,s=Gr(),r=e(),o=!po(s.memoizedState,r);if(o&&(s.memoizedState=r,As=!0),s=s.queue,$T(nM.bind(null,t,s,i),[i]),s.getSnapshot!==e||o||bi!==null&&bi.memoizedState.tag&1){if(t.flags|=2048,Pp(9,oM.bind(null,t,s,r,e),void 0,null),Li===null)throw Error(Q(349));ja&30||rM(t,e,r)}return r}function rM(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function oM(i,e,t,s){e.value=t,e.getSnapshot=s,lM(e)&&aM(i)}function nM(i,e,t){return t(function(){lM(e)&&aM(i)})}function lM(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!po(i,t)}catch{return!0}}function aM(i){var e=mn(i,1);e!==null&&uo(e,i,1,-1)}function NA(i){var e=Oo();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:i},e.queue=i,i=i.dispatch=z1.bind(null,zt,i),[e.memoizedState,i]}function Pp(i,e,t,s){return i={tag:i,create:e,destroy:t,deps:s,next:null},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(s=t.next,t.next=i,i.next=s,e.lastEffect=i)),i}function uM(){return Gr().memoizedState}function Em(i,e,t,s){var r=Oo();zt.flags|=i,r.memoizedState=Pp(1|e,t,void 0,s===void 0?null:s)}function Yv(i,e,t,s){var r=Gr();s=s===void 0?null:s;var o=void 0;if(vi!==null){var n=vi.memoizedState;if(o=n.destroy,s!==null&&WT(s,n.deps)){r.memoizedState=Pp(e,t,o,s);return}}zt.flags|=i,r.memoizedState=Pp(1|e,t,o,s)}function GA(i,e){return Em(8390656,8,i,e)}function $T(i,e){return Yv(2048,8,i,e)}function dM(i,e){return Yv(4,2,i,e)}function cM(i,e){return Yv(4,4,i,e)}function hM(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function pM(i,e,t){return t=t!=null?t.concat([i]):null,Yv(4,4,hM.bind(null,e,i),t)}function KT(){}function gM(i,e){var t=Gr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&WT(e,s[1])?s[0]:(t.memoizedState=[i,e],i)}function fM(i,e){var t=Gr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&WT(e,s[1])?s[0]:(i=i(),t.memoizedState=[i,e],i)}function mM(i,e,t){return ja&21?(po(t,e)||(t=SI(),zt.lanes|=t,Ya|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,As=!0),i.memoizedState=t)}function W1(i,e){var t=gt;gt=t!==0&&4>t?t:4,i(!0);var s=Gw.transition;Gw.transition={};try{i(!1),e()}finally{gt=t,Gw.transition=s}}function CM(){return Gr().memoizedState}function U1(i,e,t){var s=yl(i);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},vM(i))SM(e,t);else if(t=qI(i,e,t,s),t!==null){var r=ls();uo(t,i,s,r),wM(t,e,s)}}function z1(i,e,t){var s=yl(i),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(vM(i))SM(e,r);else{var o=i.alternate;if(i.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var n=e.lastRenderedState,l=o(n,t);if(r.hasEagerState=!0,r.eagerState=l,po(l,n)){var a=e.interleaved;a===null?(r.next=r,GT(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}t=qI(i,e,r,s),t!==null&&(r=ls(),uo(t,i,s,r),wM(t,e,s))}}function vM(i){var e=i.alternate;return i===zt||e!==null&&e===zt}function SM(i,e){tp=vC=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function wM(i,e,t){if(t&4194240){var s=e.lanes;s&=i.pendingLanes,t|=s,e.lanes=t,RT(i,t)}}var SC={readContext:Nr,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},$1={readContext:Nr,useCallback:function(i,e){return Oo().memoizedState=[i,e===void 0?null:e],i},useContext:Nr,useEffect:GA,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,Em(4194308,4,hM.bind(null,e,i),t)},useLayoutEffect:function(i,e){return Em(4194308,4,i,e)},useInsertionEffect:function(i,e){return Em(4,2,i,e)},useMemo:function(i,e){var t=Oo();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var s=Oo();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},s.queue=i,i=i.dispatch=U1.bind(null,zt,i),[s.memoizedState,i]},useRef:function(i){var e=Oo();return i={current:i},e.memoizedState=i},useState:NA,useDebugValue:KT,useDeferredValue:function(i){return Oo().memoizedState=i},useTransition:function(){var i=NA(!1),e=i[0];return i=W1.bind(null,i[1]),Oo().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var s=zt,r=Oo();if(Ht){if(t===void 0)throw Error(Q(407));t=t()}else{if(t=e(),Li===null)throw Error(Q(349));ja&30||rM(s,e,t)}r.memoizedState=t;var o={value:t,getSnapshot:e};return r.queue=o,GA(nM.bind(null,s,o,i),[i]),s.flags|=2048,Pp(9,oM.bind(null,s,o,t,e),void 0,null),t},useId:function(){var i=Oo(),e=Li.identifierPrefix;if(Ht){var t=dn,s=un;t=(s&~(1<<32-ao(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Dp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=B1++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},K1={readContext:Nr,useCallback:gM,useContext:Nr,useEffect:$T,useImperativeHandle:pM,useInsertionEffect:dM,useLayoutEffect:cM,useMemo:fM,useReducer:kw,useRef:uM,useState:function(){return kw(bp)},useDebugValue:KT,useDeferredValue:function(i){var e=Gr();return mM(e,vi.memoizedState,i)},useTransition:function(){var i=kw(bp)[0],e=Gr().memoizedState;return[i,e]},useMutableSource:iM,useSyncExternalStore:sM,useId:CM,unstable_isNewReconciler:!1},j1={readContext:Nr,useCallback:gM,useContext:Nr,useEffect:$T,useImperativeHandle:pM,useInsertionEffect:dM,useLayoutEffect:cM,useMemo:fM,useReducer:Vw,useRef:uM,useState:function(){return Vw(bp)},useDebugValue:KT,useDeferredValue:function(i){var e=Gr();return vi===null?e.memoizedState=i:mM(e,vi.memoizedState,i)},useTransition:function(){var i=Vw(bp)[0],e=Gr().memoizedState;return[i,e]},useMutableSource:iM,useSyncExternalStore:sM,useId:CM,unstable_isNewReconciler:!1};function lc(i,e){try{var t="",s=e;do t+=yH(s),s=s.return;while(s);var r=t}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:i,source:e,stack:r,digest:null}}function Hw(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function EE(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Y1=typeof WeakMap=="function"?WeakMap:Map;function yM(i,e,t){t=hn(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){yC||(yC=!0,IE=s),EE(i,e)},t}function EM(i,e,t){t=hn(-1,t),t.tag=3;var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){EE(i,e)}}var o=i.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){EE(i,e),typeof s!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var n=e.stack;this.componentDidCatch(e.value,{componentStack:n!==null?n:""})}),t}function kA(i,e,t){var s=i.pingCache;if(s===null){s=i.pingCache=new Y1;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),i=aB.bind(null,i,e,t),e.then(i,i))}function VA(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function HA(i,e,t,s,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=hn(-1,1),e.tag=2,Sl(t,e,1))),t.lanes|=1),i)}var q1=Pn.ReactCurrentOwner,As=!1;function is(i,e,t,s){e.child=i===null?eM(e,null,t,s):oc(e,i.child,t,s)}function BA(i,e,t,s,r){t=t.render;var o=e.ref;return Ld(e,r),s=UT(i,e,t,s,o,r),t=zT(),i!==null&&!As?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Cn(i,e,r)):(Ht&&t&&LT(e),e.flags|=1,is(i,e,s,r),e.child)}function WA(i,e,t,s,r){if(i===null){var o=t.type;return typeof o=="function"&&!eD(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,RM(i,e,o,s,r)):(i=bm(t.type,null,s,e,e.mode,r),i.ref=e.ref,i.return=e,e.child=i)}if(o=i.child,!(i.lanes&r)){var n=o.memoizedProps;if(t=t.compare,t=t!==null?t:Sp,t(n,s)&&i.ref===e.ref)return Cn(i,e,r)}return e.flags|=1,i=El(o,s),i.ref=e.ref,i.return=e,e.child=i}function RM(i,e,t,s,r){if(i!==null){var o=i.memoizedProps;if(Sp(o,s)&&i.ref===e.ref)if(As=!1,e.pendingProps=s=o,(i.lanes&r)!==0)i.flags&131072&&(As=!0);else return e.lanes=i.lanes,Cn(i,e,r)}return RE(i,e,t,s,r)}function TM(i,e,t){var s=e.pendingProps,r=s.children,o=i!==null?i.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(yd,Ys),Ys|=t;else{if(!(t&1073741824))return i=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,bt(yd,Ys),Ys|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:t,bt(yd,Ys),Ys|=s}else o!==null?(s=o.baseLanes|t,e.memoizedState=null):s=t,bt(yd,Ys),Ys|=s;return is(i,e,r,t),e.child}function DM(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function RE(i,e,t,s,r){var o=xs(t)?$a:Ki.current;return o=sc(e,o),Ld(e,r),t=UT(i,e,t,s,o,r),s=zT(),i!==null&&!As?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Cn(i,e,r)):(Ht&&s&&LT(e),e.flags|=1,is(i,e,t,r),e.child)}function UA(i,e,t,s,r){if(xs(t)){var o=!0;cC(e)}else o=!1;if(Ld(e,r),e.stateNode===null)Rm(i,e),JI(e,t,s),yE(e,t,s,r),s=!0;else if(i===null){var n=e.stateNode,l=e.memoizedProps;n.props=l;var a=n.context,u=t.contextType;typeof u=="object"&&u!==null?u=Nr(u):(u=xs(t)?$a:Ki.current,u=sc(e,u));var d=t.getDerivedStateFromProps,c=typeof d=="function"||typeof n.getSnapshotBeforeUpdate=="function";c||typeof n.UNSAFE_componentWillReceiveProps!="function"&&typeof n.componentWillReceiveProps!="function"||(l!==s||a!==u)&&xA(e,n,s,u),qn=!1;var h=e.memoizedState;n.state=h,mC(e,s,n,r),a=e.memoizedState,l!==s||h!==a||Ms.current||qn?(typeof d=="function"&&(wE(e,t,d,s),a=e.memoizedState),(l=qn||MA(e,t,l,s,h,a,u))?(c||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount()),typeof n.componentDidMount=="function"&&(e.flags|=4194308)):(typeof n.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=a),n.props=s,n.state=a,n.context=u,s=l):(typeof n.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{n=e.stateNode,QI(i,e),l=e.memoizedProps,u=e.type===e.elementType?l:Yr(e.type,l),n.props=u,c=e.pendingProps,h=n.context,a=t.contextType,typeof a=="object"&&a!==null?a=Nr(a):(a=xs(t)?$a:Ki.current,a=sc(e,a));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof n.getSnapshotBeforeUpdate=="function")||typeof n.UNSAFE_componentWillReceiveProps!="function"&&typeof n.componentWillReceiveProps!="function"||(l!==c||h!==a)&&xA(e,n,s,a),qn=!1,h=e.memoizedState,n.state=h,mC(e,s,n,r);var m=e.memoizedState;l!==c||h!==m||Ms.current||qn?(typeof p=="function"&&(wE(e,t,p,s),m=e.memoizedState),(u=qn||MA(e,t,u,s,h,m,a)||!1)?(d||typeof n.UNSAFE_componentWillUpdate!="function"&&typeof n.componentWillUpdate!="function"||(typeof n.componentWillUpdate=="function"&&n.componentWillUpdate(s,m,a),typeof n.UNSAFE_componentWillUpdate=="function"&&n.UNSAFE_componentWillUpdate(s,m,a)),typeof n.componentDidUpdate=="function"&&(e.flags|=4),typeof n.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof n.componentDidUpdate!="function"||l===i.memoizedProps&&h===i.memoizedState||(e.flags|=4),typeof n.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&h===i.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),n.props=s,n.state=m,n.context=a,s=u):(typeof n.componentDidUpdate!="function"||l===i.memoizedProps&&h===i.memoizedState||(e.flags|=4),typeof n.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&h===i.memoizedState||(e.flags|=1024),s=!1)}return TE(i,e,t,s,o,r)}function TE(i,e,t,s,r,o){DM(i,e);var n=(e.flags&128)!==0;if(!s&&!n)return r&&AA(e,t,!1),Cn(i,e,o);s=e.stateNode,q1.current=e;var l=n&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,i!==null&&n?(e.child=oc(e,i.child,null,o),e.child=oc(e,null,l,o)):is(i,e,l,o),e.memoizedState=s.state,r&&AA(e,t,!0),e.child}function bM(i){var e=i.stateNode;e.pendingContext?PA(i,e.pendingContext,e.pendingContext!==e.context):e.context&&PA(i,e.context,!1),VT(i,e.containerInfo)}function zA(i,e,t,s,r){return rc(),MT(r),e.flags|=256,is(i,e,t,s),e.child}var DE={dehydrated:null,treeContext:null,retryLane:0};function bE(i){return{baseLanes:i,cachePool:null,transitions:null}}function PM(i,e,t){var s=e.pendingProps,r=Ut.current,o=!1,n=(e.flags&128)!==0,l;if((l=n)||(l=i!==null&&i.memoizedState===null?!1:(r&2)!==0),l?(o=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),bt(Ut,r&1),i===null)return vE(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(n=s.children,i=s.fallback,o?(s=e.mode,o=e.child,n={mode:"hidden",children:n},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=n):o=Xv(n,s,0,null),i=Fa(i,s,t,null),o.return=e,i.return=e,o.sibling=i,e.child=o,e.child.memoizedState=bE(t),e.memoizedState=DE,i):jT(e,n));if(r=i.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Q1(i,e,n,s,l,r,t);if(o){o=s.fallback,n=e.mode,r=i.child,l=r.sibling;var a={mode:"hidden",children:s.children};return!(n&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=a,e.deletions=null):(s=El(r,a),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=El(l,o):(o=Fa(o,n,t,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,n=i.child.memoizedState,n=n===null?bE(t):{baseLanes:n.baseLanes|t,cachePool:null,transitions:n.transitions},o.memoizedState=n,o.childLanes=i.childLanes&~t,e.memoizedState=DE,s}return o=i.child,i=o.sibling,s=El(o,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=s,e.memoizedState=null,s}function jT(i,e){return e=Xv({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function Xf(i,e,t,s){return s!==null&&MT(s),oc(e,i.child,null,t),i=jT(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function Q1(i,e,t,s,r,o,n){if(t)return e.flags&256?(e.flags&=-257,s=Hw(Error(Q(422))),Xf(i,e,n,s)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(o=s.fallback,r=e.mode,s=Xv({mode:"visible",children:s.children},r,0,null),o=Fa(o,r,n,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,e.mode&1&&oc(e,i.child,null,n),e.child.memoizedState=bE(n),e.memoizedState=DE,o);if(!(e.mode&1))return Xf(i,e,n,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,o=Error(Q(419)),s=Hw(o,s,void 0),Xf(i,e,n,s)}if(l=(n&i.childLanes)!==0,As||l){if(s=Li,s!==null){switch(n&-n){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|n)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,mn(i,r),uo(s,i,r,-1))}return ZT(),s=Hw(Error(Q(421))),Xf(i,e,n,s)}return r.data==="$?"?(e.flags|=128,e.child=i.child,e=uB.bind(null,i),r._reactRetry=e,null):(i=o.treeContext,ir=vl(r.nextSibling),lr=e,Ht=!0,eo=null,i!==null&&(Dr[br++]=un,Dr[br++]=dn,Dr[br++]=Ka,un=i.id,dn=i.overflow,Ka=e),e=jT(e,s.children),e.flags|=4096,e)}function $A(i,e,t){i.lanes|=e;var s=i.alternate;s!==null&&(s.lanes|=e),SE(i.return,e,t)}function Bw(i,e,t,s,r){var o=i.memoizedState;o===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=t,o.tailMode=r)}function AM(i,e,t){var s=e.pendingProps,r=s.revealOrder,o=s.tail;if(is(i,e,s.children,t),s=Ut.current,s&2)s=s&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$A(i,t,e);else if(i.tag===19)$A(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}s&=1}if(bt(Ut,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)i=t.alternate,i!==null&&CC(i)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Bw(e,!1,r,t,o);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(i=r.alternate,i!==null&&CC(i)===null){e.child=r;break}i=r.sibling,r.sibling=t,t=r,r=i}Bw(e,!0,t,null,o);break;case"together":Bw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rm(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Cn(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),Ya|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(Q(153));if(e.child!==null){for(i=e.child,t=El(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=El(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function X1(i,e,t){switch(e.tag){case 3:bM(e),rc();break;case 5:tM(e);break;case 1:xs(e.type)&&cC(e);break;case 4:VT(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;bt(gC,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(bt(Ut,Ut.current&1),e.flags|=128,null):t&e.child.childLanes?PM(i,e,t):(bt(Ut,Ut.current&1),i=Cn(i,e,t),i!==null?i.sibling:null);bt(Ut,Ut.current&1);break;case 19:if(s=(t&e.childLanes)!==0,i.flags&128){if(s)return AM(i,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),bt(Ut,Ut.current),s)break;return null;case 22:case 23:return e.lanes=0,TM(i,e,t)}return Cn(i,e,t)}var FM,PE,OM,LM;FM=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};PE=function(){};OM=function(i,e,t,s){var r=i.memoizedProps;if(r!==s){i=e.stateNode,pa(Bo.current);var o=null;switch(t){case"input":r=qy(i,r),s=qy(i,s),o=[];break;case"select":r=$t({},r,{value:void 0}),s=$t({},s,{value:void 0}),o=[];break;case"textarea":r=Jy(i,r),s=Jy(i,s),o=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(i.onclick=uC)}eE(t,s);var n;t=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(n in l)l.hasOwnProperty(n)&&(t||(t={}),t[n]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hp.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in s){var a=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(n in l)!l.hasOwnProperty(n)||a&&a.hasOwnProperty(n)||(t||(t={}),t[n]="");for(n in a)a.hasOwnProperty(n)&&l[n]!==a[n]&&(t||(t={}),t[n]=a[n])}else t||(o||(o=[]),o.push(u,t)),t=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hp.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Lt("scroll",i),o||l===a||(o=[])):(o=o||[]).push(u,a))}t&&(o=o||[]).push("style",t);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};LM=function(i,e,t,s){t!==s&&(e.flags|=4)};function yh(i,e){if(!Ht)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:s.sibling=null}}function Wi(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,s=0;if(e)for(var r=i.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=s,i.childLanes=t,e}function J1(i,e,t){var s=e.pendingProps;switch(IT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(e),null;case 1:return xs(e.type)&&dC(),Wi(e),null;case 3:return s=e.stateNode,nc(),xt(Ms),xt(Ki),BT(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(i===null||i.child===null)&&(qf(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,eo!==null&&(_E(eo),eo=null))),PE(i,e),Wi(e),null;case 5:HT(e);var r=pa(Tp.current);if(t=e.type,i!==null&&e.stateNode!=null)OM(i,e,t,s,r),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Q(166));return Wi(e),null}if(i=pa(Bo.current),qf(e)){s=e.stateNode,t=e.type;var o=e.memoizedProps;switch(s[No]=e,s[Ep]=o,i=(e.mode&1)!==0,t){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(r=0;r<Oh.length;r++)Lt(Oh[r],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":eA(s,o),Lt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Lt("invalid",s);break;case"textarea":iA(s,o),Lt("invalid",s)}eE(t,o),r=null;for(var n in o)if(o.hasOwnProperty(n)){var l=o[n];n==="children"?typeof l=="string"?s.textContent!==l&&(o.suppressHydrationWarning!==!0&&Yf(s.textContent,l,i),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Yf(s.textContent,l,i),r=["children",""+l]):hp.hasOwnProperty(n)&&l!=null&&n==="onScroll"&&Lt("scroll",s)}switch(t){case"input":Hf(s),tA(s,o,!0);break;case"textarea":Hf(s),sA(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=uC)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{n=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=rI(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=n.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof s.is=="string"?i=n.createElement(t,{is:s.is}):(i=n.createElement(t),t==="select"&&(n=i,s.multiple?n.multiple=!0:s.size&&(n.size=s.size))):i=n.createElementNS(i,t),i[No]=e,i[Ep]=s,FM(i,e,!1,!1),e.stateNode=i;e:{switch(n=tE(t,s),t){case"dialog":Lt("cancel",i),Lt("close",i),r=s;break;case"iframe":case"object":case"embed":Lt("load",i),r=s;break;case"video":case"audio":for(r=0;r<Oh.length;r++)Lt(Oh[r],i);r=s;break;case"source":Lt("error",i),r=s;break;case"img":case"image":case"link":Lt("error",i),Lt("load",i),r=s;break;case"details":Lt("toggle",i),r=s;break;case"input":eA(i,s),r=qy(i,s),Lt("invalid",i);break;case"option":r=s;break;case"select":i._wrapperState={wasMultiple:!!s.multiple},r=$t({},s,{value:void 0}),Lt("invalid",i);break;case"textarea":iA(i,s),r=Jy(i,s),Lt("invalid",i);break;default:r=s}eE(t,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?lI(i,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&oI(i,a)):o==="children"?typeof a=="string"?(t!=="textarea"||a!=="")&&pp(i,a):typeof a=="number"&&pp(i,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(hp.hasOwnProperty(o)?a!=null&&o==="onScroll"&&Lt("scroll",i):a!=null&&CT(i,o,a,n))}switch(t){case"input":Hf(i),tA(i,s,!1);break;case"textarea":Hf(i),sA(i);break;case"option":s.value!=null&&i.setAttribute("value",""+bl(s.value));break;case"select":i.multiple=!!s.multiple,o=s.value,o!=null?Pd(i,!!s.multiple,o,!1):s.defaultValue!=null&&Pd(i,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=uC)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wi(e),null;case 6:if(i&&e.stateNode!=null)LM(i,e,i.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Q(166));if(t=pa(Tp.current),pa(Bo.current),qf(e)){if(s=e.stateNode,t=e.memoizedProps,s[No]=e,(o=s.nodeValue!==t)&&(i=lr,i!==null))switch(i.tag){case 3:Yf(s.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Yf(s.nodeValue,t,(i.mode&1)!==0)}o&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[No]=e,e.stateNode=s}return Wi(e),null;case 13:if(xt(Ut),s=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ht&&ir!==null&&e.mode&1&&!(e.flags&128))YI(),rc(),e.flags|=98560,o=!1;else if(o=qf(e),s!==null&&s.dehydrated!==null){if(i===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[No]=e}else rc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wi(e),o=!1}else eo!==null&&(_E(eo),eo=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(i!==null&&i.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(i===null||Ut.current&1?yi===0&&(yi=3):ZT())),e.updateQueue!==null&&(e.flags|=4),Wi(e),null);case 4:return nc(),PE(i,e),i===null&&wp(e.stateNode.containerInfo),Wi(e),null;case 10:return NT(e.type._context),Wi(e),null;case 17:return xs(e.type)&&dC(),Wi(e),null;case 19:if(xt(Ut),o=e.memoizedState,o===null)return Wi(e),null;if(s=(e.flags&128)!==0,n=o.rendering,n===null)if(s)yh(o,!1);else{if(yi!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(n=CC(i),n!==null){for(e.flags|=128,yh(o,!1),s=n.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)o=t,i=s,o.flags&=14680066,n=o.alternate,n===null?(o.childLanes=0,o.lanes=i,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,o.type=n.type,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return bt(Ut,Ut.current&1|2),e.child}i=i.sibling}o.tail!==null&&ri()>ac&&(e.flags|=128,s=!0,yh(o,!1),e.lanes=4194304)}else{if(!s)if(i=CC(n),i!==null){if(e.flags|=128,s=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),yh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!n.alternate&&!Ht)return Wi(e),null}else 2*ri()-o.renderingStartTime>ac&&t!==1073741824&&(e.flags|=128,s=!0,yh(o,!1),e.lanes=4194304);o.isBackwards?(n.sibling=e.child,e.child=n):(t=o.last,t!==null?t.sibling=n:e.child=n,o.last=n)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ri(),e.sibling=null,t=Ut.current,bt(Ut,s?t&1|2:t&1),e):(Wi(e),null);case 22:case 23:return JT(),s=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Ys&1073741824&&(Wi(e),e.subtreeFlags&6&&(e.flags|=8192)):Wi(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function Z1(i,e){switch(IT(e),e.tag){case 1:return xs(e.type)&&dC(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return nc(),xt(Ms),xt(Ki),BT(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return HT(e),null;case 13:if(xt(Ut),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));rc()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return xt(Ut),null;case 4:return nc(),null;case 10:return NT(e.type._context),null;case 22:case 23:return JT(),null;case 24:return null;default:return null}}var Jf=!1,zi=!1,eB=typeof WeakSet=="function"?WeakSet:Set,ue=null;function wd(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Qt(i,e,s)}else t.current=null}function AE(i,e,t){try{t()}catch(s){Qt(i,e,s)}}var KA=!1;function tB(i,e){if(cE=nC,i=_I(),OT(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var n=0,l=-1,a=-1,u=0,d=0,c=i,h=null;t:for(;;){for(var p;c!==t||r!==0&&c.nodeType!==3||(l=n+r),c!==o||s!==0&&c.nodeType!==3||(a=n+s),c.nodeType===3&&(n+=c.nodeValue.length),(p=c.firstChild)!==null;)h=c,c=p;for(;;){if(c===i)break t;if(h===t&&++u===r&&(l=n),h===o&&++d===s&&(a=n),(p=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=p}t=l===-1||a===-1?null:{start:l,end:a}}else t=null}t=t||{start:0,end:0}}else t=null;for(hE={focusedElem:i,selectionRange:t},nC=!1,ue=e;ue!==null;)if(e=ue,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,ue=i;else for(;ue!==null;){e=ue;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var S=m.memoizedProps,E=m.memoizedState,C=e.stateNode,v=C.getSnapshotBeforeUpdate(e.elementType===e.type?S:Yr(e.type,S),E);C.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(b){Qt(e,e.return,b)}if(i=e.sibling,i!==null){i.return=e.return,ue=i;break}ue=e.return}return m=KA,KA=!1,m}function ip(i,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&i)===i){var o=r.destroy;r.destroy=void 0,o!==void 0&&AE(e,t,o)}r=r.next}while(r!==s)}}function qv(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function FE(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function IM(i){var e=i.alternate;e!==null&&(i.alternate=null,IM(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[No],delete e[Ep],delete e[fE],delete e[G1],delete e[k1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function MM(i){return i.tag===5||i.tag===3||i.tag===4}function jA(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||MM(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function OE(i,e,t){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=uC));else if(s!==4&&(i=i.child,i!==null))for(OE(i,e,t),i=i.sibling;i!==null;)OE(i,e,t),i=i.sibling}function LE(i,e,t){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(s!==4&&(i=i.child,i!==null))for(LE(i,e,t),i=i.sibling;i!==null;)LE(i,e,t),i=i.sibling}var _i=null,Qr=!1;function Bn(i,e,t){for(t=t.child;t!==null;)xM(i,e,t),t=t.sibling}function xM(i,e,t){if(Ho&&typeof Ho.onCommitFiberUnmount=="function")try{Ho.onCommitFiberUnmount(Bv,t)}catch{}switch(t.tag){case 5:zi||wd(t,e);case 6:var s=_i,r=Qr;_i=null,Bn(i,e,t),_i=s,Qr=r,_i!==null&&(Qr?(i=_i,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):_i.removeChild(t.stateNode));break;case 18:_i!==null&&(Qr?(i=_i,t=t.stateNode,i.nodeType===8?xw(i.parentNode,t):i.nodeType===1&&xw(i,t),Cp(i)):xw(_i,t.stateNode));break;case 4:s=_i,r=Qr,_i=t.stateNode.containerInfo,Qr=!0,Bn(i,e,t),_i=s,Qr=r;break;case 0:case 11:case 14:case 15:if(!zi&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var o=r,n=o.destroy;o=o.tag,n!==void 0&&(o&2||o&4)&&AE(t,e,n),r=r.next}while(r!==s)}Bn(i,e,t);break;case 1:if(!zi&&(wd(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(l){Qt(t,e,l)}Bn(i,e,t);break;case 21:Bn(i,e,t);break;case 22:t.mode&1?(zi=(s=zi)||t.memoizedState!==null,Bn(i,e,t),zi=s):Bn(i,e,t);break;default:Bn(i,e,t)}}function YA(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new eB),e.forEach(function(s){var r=dB.bind(null,i,s);t.has(s)||(t.add(s),s.then(r,r))})}}function Kr(i,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var o=i,n=e,l=n;e:for(;l!==null;){switch(l.tag){case 5:_i=l.stateNode,Qr=!1;break e;case 3:_i=l.stateNode.containerInfo,Qr=!0;break e;case 4:_i=l.stateNode.containerInfo,Qr=!0;break e}l=l.return}if(_i===null)throw Error(Q(160));xM(o,n,r),_i=null,Qr=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(u){Qt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_M(e,i),e=e.sibling}function _M(i,e){var t=i.alternate,s=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Kr(e,i),Eo(i),s&4){try{ip(3,i,i.return),qv(3,i)}catch(S){Qt(i,i.return,S)}try{ip(5,i,i.return)}catch(S){Qt(i,i.return,S)}}break;case 1:Kr(e,i),Eo(i),s&512&&t!==null&&wd(t,t.return);break;case 5:if(Kr(e,i),Eo(i),s&512&&t!==null&&wd(t,t.return),i.flags&32){var r=i.stateNode;try{pp(r,"")}catch(S){Qt(i,i.return,S)}}if(s&4&&(r=i.stateNode,r!=null)){var o=i.memoizedProps,n=t!==null?t.memoizedProps:o,l=i.type,a=i.updateQueue;if(i.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&iI(r,o),tE(l,n);var u=tE(l,o);for(n=0;n<a.length;n+=2){var d=a[n],c=a[n+1];d==="style"?lI(r,c):d==="dangerouslySetInnerHTML"?oI(r,c):d==="children"?pp(r,c):CT(r,d,c,u)}switch(l){case"input":Qy(r,o);break;case"textarea":sI(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Pd(r,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Pd(r,!!o.multiple,o.defaultValue,!0):Pd(r,!!o.multiple,o.multiple?[]:"",!1))}r[Ep]=o}catch(S){Qt(i,i.return,S)}}break;case 6:if(Kr(e,i),Eo(i),s&4){if(i.stateNode===null)throw Error(Q(162));r=i.stateNode,o=i.memoizedProps;try{r.nodeValue=o}catch(S){Qt(i,i.return,S)}}break;case 3:if(Kr(e,i),Eo(i),s&4&&t!==null&&t.memoizedState.isDehydrated)try{Cp(e.containerInfo)}catch(S){Qt(i,i.return,S)}break;case 4:Kr(e,i),Eo(i);break;case 13:Kr(e,i),Eo(i),r=i.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(QT=ri())),s&4&&YA(i);break;case 22:if(d=t!==null&&t.memoizedState!==null,i.mode&1?(zi=(u=zi)||d,Kr(e,i),zi=u):Kr(e,i),Eo(i),s&8192){if(u=i.memoizedState!==null,(i.stateNode.isHidden=u)&&!d&&i.mode&1)for(ue=i,d=i.child;d!==null;){for(c=ue=d;ue!==null;){switch(h=ue,p=h.child,h.tag){case 0:case 11:case 14:case 15:ip(4,h,h.return);break;case 1:wd(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){s=h,t=h.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(S){Qt(s,t,S)}}break;case 5:wd(h,h.return);break;case 22:if(h.memoizedState!==null){QA(c);continue}}p!==null?(p.return=h,ue=p):QA(c)}d=d.sibling}e:for(d=null,c=i;;){if(c.tag===5){if(d===null){d=c;try{r=c.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=c.stateNode,a=c.memoizedProps.style,n=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=nI("display",n))}catch(S){Qt(i,i.return,S)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(S){Qt(i,i.return,S)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===i)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break e;for(;c.sibling===null;){if(c.return===null||c.return===i)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Kr(e,i),Eo(i),s&4&&YA(i);break;case 21:break;default:Kr(e,i),Eo(i)}}function Eo(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(MM(t)){var s=t;break e}t=t.return}throw Error(Q(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(pp(r,""),s.flags&=-33);var o=jA(i);LE(i,o,r);break;case 3:case 4:var n=s.stateNode.containerInfo,l=jA(i);OE(i,l,n);break;default:throw Error(Q(161))}}catch(a){Qt(i,i.return,a)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function iB(i,e,t){ue=i,NM(i)}function NM(i,e,t){for(var s=(i.mode&1)!==0;ue!==null;){var r=ue,o=r.child;if(r.tag===22&&s){var n=r.memoizedState!==null||Jf;if(!n){var l=r.alternate,a=l!==null&&l.memoizedState!==null||zi;l=Jf;var u=zi;if(Jf=n,(zi=a)&&!u)for(ue=r;ue!==null;)n=ue,a=n.child,n.tag===22&&n.memoizedState!==null?XA(r):a!==null?(a.return=n,ue=a):XA(r);for(;o!==null;)ue=o,NM(o),o=o.sibling;ue=r,Jf=l,zi=u}qA(i)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ue=o):qA(i)}}function qA(i){for(;ue!==null;){var e=ue;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zi||qv(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!zi)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Yr(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&IA(e,o,s);break;case 3:var n=e.updateQueue;if(n!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}IA(e,n,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&t.focus();break;case"img":a.src&&(t.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&Cp(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}zi||e.flags&512&&FE(e)}catch(h){Qt(e,e.return,h)}}if(e===i){ue=null;break}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}}function QA(i){for(;ue!==null;){var e=ue;if(e===i){ue=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ue=t;break}ue=e.return}}function XA(i){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{qv(4,e)}catch(a){Qt(e,t,a)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(a){Qt(e,r,a)}}var o=e.return;try{FE(e)}catch(a){Qt(e,o,a)}break;case 5:var n=e.return;try{FE(e)}catch(a){Qt(e,n,a)}}}catch(a){Qt(e,e.return,a)}if(e===i){ue=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ue=l;break}ue=e.return}}var sB=Math.ceil,wC=Pn.ReactCurrentDispatcher,YT=Pn.ReactCurrentOwner,Lr=Pn.ReactCurrentBatchConfig,it=0,Li=null,hi=null,Gi=0,Ys=0,yd=Gl(0),yi=0,Ap=null,Ya=0,Qv=0,qT=0,sp=null,Ps=null,QT=0,ac=1/0,on=null,yC=!1,IE=null,wl=null,Zf=!1,cl=null,EC=0,rp=0,ME=null,Tm=-1,Dm=0;function ls(){return it&6?ri():Tm!==-1?Tm:Tm=ri()}function yl(i){return i.mode&1?it&2&&Gi!==0?Gi&-Gi:H1.transition!==null?(Dm===0&&(Dm=SI()),Dm):(i=gt,i!==0||(i=window.event,i=i===void 0?16:bI(i.type)),i):1}function uo(i,e,t,s){if(50<rp)throw rp=0,ME=null,Error(Q(185));Wg(i,t,s),(!(it&2)||i!==Li)&&(i===Li&&(!(it&2)&&(Qv|=t),yi===4&&Jn(i,Gi)),_s(i,s),t===1&&it===0&&!(e.mode&1)&&(ac=ri()+500,Kv&&kl()))}function _s(i,e){var t=i.callbackNode;HH(i,e);var s=oC(i,i===Li?Gi:0);if(s===0)t!==null&&nA(t),i.callbackNode=null,i.callbackPriority=0;else if(e=s&-s,i.callbackPriority!==e){if(t!=null&&nA(t),e===1)i.tag===0?V1(JA.bind(null,i)):$I(JA.bind(null,i)),_1(function(){!(it&6)&&kl()}),t=null;else{switch(wI(s)){case 1:t=ET;break;case 4:t=CI;break;case 16:t=rC;break;case 536870912:t=vI;break;default:t=rC}t=zM(t,GM.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function GM(i,e){if(Tm=-1,Dm=0,it&6)throw Error(Q(327));var t=i.callbackNode;if(Id()&&i.callbackNode!==t)return null;var s=oC(i,i===Li?Gi:0);if(s===0)return null;if(s&30||s&i.expiredLanes||e)e=RC(i,s);else{e=s;var r=it;it|=2;var o=VM();(Li!==i||Gi!==e)&&(on=null,ac=ri()+500,Aa(i,e));do try{nB();break}catch(l){kM(i,l)}while(!0);_T(),wC.current=o,it=r,hi!==null?e=0:(Li=null,Gi=0,e=yi)}if(e!==0){if(e===2&&(r=nE(i),r!==0&&(s=r,e=xE(i,r))),e===1)throw t=Ap,Aa(i,0),Jn(i,s),_s(i,ri()),t;if(e===6)Jn(i,s);else{if(r=i.current.alternate,!(s&30)&&!rB(r)&&(e=RC(i,s),e===2&&(o=nE(i),o!==0&&(s=o,e=xE(i,o))),e===1))throw t=Ap,Aa(i,0),Jn(i,s),_s(i,ri()),t;switch(i.finishedWork=r,i.finishedLanes=s,e){case 0:case 1:throw Error(Q(345));case 2:ea(i,Ps,on);break;case 3:if(Jn(i,s),(s&130023424)===s&&(e=QT+500-ri(),10<e)){if(oC(i,0)!==0)break;if(r=i.suspendedLanes,(r&s)!==s){ls(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=gE(ea.bind(null,i,Ps,on),e);break}ea(i,Ps,on);break;case 4:if(Jn(i,s),(s&4194240)===s)break;for(e=i.eventTimes,r=-1;0<s;){var n=31-ao(s);o=1<<n,n=e[n],n>r&&(r=n),s&=~o}if(s=r,s=ri()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*sB(s/1960))-s,10<s){i.timeoutHandle=gE(ea.bind(null,i,Ps,on),s);break}ea(i,Ps,on);break;case 5:ea(i,Ps,on);break;default:throw Error(Q(329))}}}return _s(i,ri()),i.callbackNode===t?GM.bind(null,i):null}function xE(i,e){var t=sp;return i.current.memoizedState.isDehydrated&&(Aa(i,e).flags|=256),i=RC(i,e),i!==2&&(e=Ps,Ps=t,e!==null&&_E(e)),i}function _E(i){Ps===null?Ps=i:Ps.push.apply(Ps,i)}function rB(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],o=r.getSnapshot;r=r.value;try{if(!po(o(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jn(i,e){for(e&=~qT,e&=~Qv,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-ao(e),s=1<<t;i[t]=-1,e&=~s}}function JA(i){if(it&6)throw Error(Q(327));Id();var e=oC(i,0);if(!(e&1))return _s(i,ri()),null;var t=RC(i,e);if(i.tag!==0&&t===2){var s=nE(i);s!==0&&(e=s,t=xE(i,s))}if(t===1)throw t=Ap,Aa(i,0),Jn(i,e),_s(i,ri()),t;if(t===6)throw Error(Q(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,ea(i,Ps,on),_s(i,ri()),null}function XT(i,e){var t=it;it|=1;try{return i(e)}finally{it=t,it===0&&(ac=ri()+500,Kv&&kl())}}function qa(i){cl!==null&&cl.tag===0&&!(it&6)&&Id();var e=it;it|=1;var t=Lr.transition,s=gt;try{if(Lr.transition=null,gt=1,i)return i()}finally{gt=s,Lr.transition=t,it=e,!(it&6)&&kl()}}function JT(){Ys=yd.current,xt(yd)}function Aa(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,x1(t)),hi!==null)for(t=hi.return;t!==null;){var s=t;switch(IT(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&dC();break;case 3:nc(),xt(Ms),xt(Ki),BT();break;case 5:HT(s);break;case 4:nc();break;case 13:xt(Ut);break;case 19:xt(Ut);break;case 10:NT(s.type._context);break;case 22:case 23:JT()}t=t.return}if(Li=i,hi=i=El(i.current,null),Gi=Ys=e,yi=0,Ap=null,qT=Qv=Ya=0,Ps=sp=null,ha!==null){for(e=0;e<ha.length;e++)if(t=ha[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,o=t.pending;if(o!==null){var n=o.next;o.next=r,s.next=n}t.pending=s}ha=null}return i}function kM(i,e){do{var t=hi;try{if(_T(),ym.current=SC,vC){for(var s=zt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}vC=!1}if(ja=0,bi=vi=zt=null,tp=!1,Dp=0,YT.current=null,t===null||t.return===null){yi=1,Ap=e,hi=null;break}e:{var o=i,n=t.return,l=t,a=e;if(e=Gi,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=l,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=VA(n);if(p!==null){p.flags&=-257,HA(p,n,l,o,e),p.mode&1&&kA(o,u,e),e=p,a=u;var m=e.updateQueue;if(m===null){var S=new Set;S.add(a),e.updateQueue=S}else m.add(a);break e}else{if(!(e&1)){kA(o,u,e),ZT();break e}a=Error(Q(426))}}else if(Ht&&l.mode&1){var E=VA(n);if(E!==null){!(E.flags&65536)&&(E.flags|=256),HA(E,n,l,o,e),MT(lc(a,l));break e}}o=a=lc(a,l),yi!==4&&(yi=2),sp===null?sp=[o]:sp.push(o),o=n;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=yM(o,a,e);LA(o,C);break e;case 1:l=a;var v=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(wl===null||!wl.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=EM(o,l,e);LA(o,b);break e}}o=o.return}while(o!==null)}BM(t)}catch(A){e=A,hi===t&&t!==null&&(hi=t=t.return);continue}break}while(!0)}function VM(){var i=wC.current;return wC.current=SC,i===null?SC:i}function ZT(){(yi===0||yi===3||yi===2)&&(yi=4),Li===null||!(Ya&268435455)&&!(Qv&268435455)||Jn(Li,Gi)}function RC(i,e){var t=it;it|=2;var s=VM();(Li!==i||Gi!==e)&&(on=null,Aa(i,e));do try{oB();break}catch(r){kM(i,r)}while(!0);if(_T(),it=t,wC.current=s,hi!==null)throw Error(Q(261));return Li=null,Gi=0,yi}function oB(){for(;hi!==null;)HM(hi)}function nB(){for(;hi!==null&&!LH();)HM(hi)}function HM(i){var e=UM(i.alternate,i,Ys);i.memoizedProps=i.pendingProps,e===null?BM(i):hi=e,YT.current=null}function BM(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=Z1(t,e),t!==null){t.flags&=32767,hi=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{yi=6,hi=null;return}}else if(t=J1(t,e,Ys),t!==null){hi=t;return}if(e=e.sibling,e!==null){hi=e;return}hi=e=i}while(e!==null);yi===0&&(yi=5)}function ea(i,e,t){var s=gt,r=Lr.transition;try{Lr.transition=null,gt=1,lB(i,e,t,s)}finally{Lr.transition=r,gt=s}return null}function lB(i,e,t,s){do Id();while(cl!==null);if(it&6)throw Error(Q(327));t=i.finishedWork;var r=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Q(177));i.callbackNode=null,i.callbackPriority=0;var o=t.lanes|t.childLanes;if(BH(i,o),i===Li&&(hi=Li=null,Gi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Zf||(Zf=!0,zM(rC,function(){return Id(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Lr.transition,Lr.transition=null;var n=gt;gt=1;var l=it;it|=4,YT.current=null,tB(i,t),_M(t,i),P1(hE),nC=!!cE,hE=cE=null,i.current=t,iB(t),IH(),it=l,gt=n,Lr.transition=o}else i.current=t;if(Zf&&(Zf=!1,cl=i,EC=r),o=i.pendingLanes,o===0&&(wl=null),_H(t.stateNode),_s(i,ri()),e!==null)for(s=i.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(yC)throw yC=!1,i=IE,IE=null,i;return EC&1&&i.tag!==0&&Id(),o=i.pendingLanes,o&1?i===ME?rp++:(rp=0,ME=i):rp=0,kl(),null}function Id(){if(cl!==null){var i=wI(EC),e=Lr.transition,t=gt;try{if(Lr.transition=null,gt=16>i?16:i,cl===null)var s=!1;else{if(i=cl,cl=null,EC=0,it&6)throw Error(Q(331));var r=it;for(it|=4,ue=i.current;ue!==null;){var o=ue,n=o.child;if(ue.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(ue=u;ue!==null;){var d=ue;switch(d.tag){case 0:case 11:case 15:ip(8,d,o)}var c=d.child;if(c!==null)c.return=d,ue=c;else for(;ue!==null;){d=ue;var h=d.sibling,p=d.return;if(IM(d),d===u){ue=null;break}if(h!==null){h.return=p,ue=h;break}ue=p}}}var m=o.alternate;if(m!==null){var S=m.child;if(S!==null){m.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}ue=o}}if(o.subtreeFlags&2064&&n!==null)n.return=o,ue=n;else e:for(;ue!==null;){if(o=ue,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ip(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,ue=C;break e}ue=o.return}}var v=i.current;for(ue=v;ue!==null;){n=ue;var R=n.child;if(n.subtreeFlags&2064&&R!==null)R.return=n,ue=R;else e:for(n=v;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qv(9,l)}}catch(A){Qt(l,l.return,A)}if(l===n){ue=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,ue=b;break e}ue=l.return}}if(it=r,kl(),Ho&&typeof Ho.onPostCommitFiberRoot=="function")try{Ho.onPostCommitFiberRoot(Bv,i)}catch{}s=!0}return s}finally{gt=t,Lr.transition=e}}return!1}function ZA(i,e,t){e=lc(t,e),e=yM(i,e,1),i=Sl(i,e,1),e=ls(),i!==null&&(Wg(i,1,e),_s(i,e))}function Qt(i,e,t){if(i.tag===3)ZA(i,i,t);else for(;e!==null;){if(e.tag===3){ZA(e,i,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(wl===null||!wl.has(s))){i=lc(t,i),i=EM(e,i,1),e=Sl(e,i,1),i=ls(),e!==null&&(Wg(e,1,i),_s(e,i));break}}e=e.return}}function aB(i,e,t){var s=i.pingCache;s!==null&&s.delete(e),e=ls(),i.pingedLanes|=i.suspendedLanes&t,Li===i&&(Gi&t)===t&&(yi===4||yi===3&&(Gi&130023424)===Gi&&500>ri()-QT?Aa(i,0):qT|=t),_s(i,e)}function WM(i,e){e===0&&(i.mode&1?(e=Uf,Uf<<=1,!(Uf&130023424)&&(Uf=4194304)):e=1);var t=ls();i=mn(i,e),i!==null&&(Wg(i,e,t),_s(i,t))}function uB(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),WM(i,t)}function dB(i,e){var t=0;switch(i.tag){case 13:var s=i.stateNode,r=i.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=i.stateNode;break;default:throw Error(Q(314))}s!==null&&s.delete(e),WM(i,t)}var UM;UM=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Ms.current)As=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return As=!1,X1(i,e,t);As=!!(i.flags&131072)}else As=!1,Ht&&e.flags&1048576&&KI(e,pC,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Rm(i,e),i=e.pendingProps;var r=sc(e,Ki.current);Ld(e,t),r=UT(null,e,s,i,r,t);var o=zT();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xs(s)?(o=!0,cC(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,kT(e),r.updater=jv,e.stateNode=r,r._reactInternals=e,yE(e,s,i,t),e=TE(null,e,s,!0,o,t)):(e.tag=0,Ht&&o&&LT(e),is(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Rm(i,e),i=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=hB(s),i=Yr(s,i),r){case 0:e=RE(null,e,s,i,t);break e;case 1:e=UA(null,e,s,i,t);break e;case 11:e=BA(null,e,s,i,t);break e;case 14:e=WA(null,e,s,Yr(s.type,i),t);break e}throw Error(Q(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Yr(s,r),RE(i,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Yr(s,r),UA(i,e,s,r,t);case 3:e:{if(bM(e),i===null)throw Error(Q(387));s=e.pendingProps,o=e.memoizedState,r=o.element,QI(i,e),mC(e,s,null,t);var n=e.memoizedState;if(s=n.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:n.cache,pendingSuspenseBoundaries:n.pendingSuspenseBoundaries,transitions:n.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=lc(Error(Q(423)),e),e=zA(i,e,s,t,r);break e}else if(s!==r){r=lc(Error(Q(424)),e),e=zA(i,e,s,t,r);break e}else for(ir=vl(e.stateNode.containerInfo.firstChild),lr=e,Ht=!0,eo=null,t=eM(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(rc(),s===r){e=Cn(i,e,t);break e}is(i,e,s,t)}e=e.child}return e;case 5:return tM(e),i===null&&vE(e),s=e.type,r=e.pendingProps,o=i!==null?i.memoizedProps:null,n=r.children,pE(s,r)?n=null:o!==null&&pE(s,o)&&(e.flags|=32),DM(i,e),is(i,e,n,t),e.child;case 6:return i===null&&vE(e),null;case 13:return PM(i,e,t);case 4:return VT(e,e.stateNode.containerInfo),s=e.pendingProps,i===null?e.child=oc(e,null,s,t):is(i,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Yr(s,r),BA(i,e,s,r,t);case 7:return is(i,e,e.pendingProps,t),e.child;case 8:return is(i,e,e.pendingProps.children,t),e.child;case 12:return is(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,o=e.memoizedProps,n=r.value,bt(gC,s._currentValue),s._currentValue=n,o!==null)if(po(o.value,n)){if(o.children===r.children&&!Ms.current){e=Cn(i,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){n=o.child;for(var a=l.firstContext;a!==null;){if(a.context===s){if(o.tag===1){a=hn(-1,t&-t),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),SE(o.return,t,e),l.lanes|=t;break}a=a.next}}else if(o.tag===10)n=o.type===e.type?null:o.child;else if(o.tag===18){if(n=o.return,n===null)throw Error(Q(341));n.lanes|=t,l=n.alternate,l!==null&&(l.lanes|=t),SE(n,t,e),n=o.sibling}else n=o.child;if(n!==null)n.return=o;else for(n=o;n!==null;){if(n===e){n=null;break}if(o=n.sibling,o!==null){o.return=n.return,n=o;break}n=n.return}o=n}is(i,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Ld(e,t),r=Nr(r),s=s(r),e.flags|=1,is(i,e,s,t),e.child;case 14:return s=e.type,r=Yr(s,e.pendingProps),r=Yr(s.type,r),WA(i,e,s,r,t);case 15:return RM(i,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Yr(s,r),Rm(i,e),e.tag=1,xs(s)?(i=!0,cC(e)):i=!1,Ld(e,t),JI(e,s,r),yE(e,s,r,t),TE(null,e,s,!0,i,t);case 19:return AM(i,e,t);case 22:return TM(i,e,t)}throw Error(Q(156,e.tag))};function zM(i,e){return mI(i,e)}function cB(i,e,t,s){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(i,e,t,s){return new cB(i,e,t,s)}function eD(i){return i=i.prototype,!(!i||!i.isReactComponent)}function hB(i){if(typeof i=="function")return eD(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ST)return 11;if(i===wT)return 14}return 2}function El(i,e){var t=i.alternate;return t===null?(t=Ar(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function bm(i,e,t,s,r,o){var n=2;if(s=i,typeof i=="function")eD(i)&&(n=1);else if(typeof i=="string")n=5;else e:switch(i){case cd:return Fa(t.children,r,o,e);case vT:n=8,r|=8;break;case $y:return i=Ar(12,t,e,r|2),i.elementType=$y,i.lanes=o,i;case Ky:return i=Ar(13,t,e,r),i.elementType=Ky,i.lanes=o,i;case jy:return i=Ar(19,t,e,r),i.elementType=jy,i.lanes=o,i;case ZL:return Xv(t,r,o,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case XL:n=10;break e;case JL:n=9;break e;case ST:n=11;break e;case wT:n=14;break e;case Yn:n=16,s=null;break e}throw Error(Q(130,i==null?i:typeof i,""))}return e=Ar(n,t,e,r),e.elementType=i,e.type=s,e.lanes=o,e}function Fa(i,e,t,s){return i=Ar(7,i,s,e),i.lanes=t,i}function Xv(i,e,t,s){return i=Ar(22,i,s,e),i.elementType=ZL,i.lanes=t,i.stateNode={isHidden:!1},i}function Ww(i,e,t){return i=Ar(6,i,null,e),i.lanes=t,i}function Uw(i,e,t){return e=Ar(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function pB(i,e,t,s,r){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rw(0),this.expirationTimes=Rw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rw(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function tD(i,e,t,s,r,o,n,l,a){return i=new pB(i,e,t,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ar(3,null,null,e),i.current=o,o.stateNode=i,o.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},kT(o),i}function gB(i,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dd,key:s==null?null:""+s,children:i,containerInfo:e,implementation:t}}function $M(i){if(!i)return Pl;i=i._reactInternals;e:{if(fu(i)!==i||i.tag!==1)throw Error(Q(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(i.tag===1){var t=i.type;if(xs(t))return zI(i,t,e)}return e}function KM(i,e,t,s,r,o,n,l,a){return i=tD(t,s,!0,i,r,o,n,l,a),i.context=$M(null),t=i.current,s=ls(),r=yl(t),o=hn(s,r),o.callback=e??null,Sl(t,o,r),i.current.lanes=r,Wg(i,r,s),_s(i,s),i}function Jv(i,e,t,s){var r=e.current,o=ls(),n=yl(r);return t=$M(t),e.context===null?e.context=t:e.pendingContext=t,e=hn(o,n),e.payload={element:i},s=s===void 0?null:s,s!==null&&(e.callback=s),i=Sl(r,e,n),i!==null&&(uo(i,r,n,o),wm(i,r,n)),n}function TC(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function eF(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function iD(i,e){eF(i,e),(i=i.alternate)&&eF(i,e)}function fB(){return null}var jM=typeof reportError=="function"?reportError:function(i){console.error(i)};function sD(i){this._internalRoot=i}Zv.prototype.render=sD.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Q(409));Jv(i,e,null,null)};Zv.prototype.unmount=sD.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;qa(function(){Jv(null,i,null,null)}),e[fn]=null}};function Zv(i){this._internalRoot=i}Zv.prototype.unstable_scheduleHydration=function(i){if(i){var e=RI();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Xn.length&&e!==0&&e<Xn[t].priority;t++);Xn.splice(t,0,i),t===0&&DI(i)}};function rD(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function eS(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function tF(){}function mB(i,e,t,s,r){if(r){if(typeof s=="function"){var o=s;s=function(){var u=TC(n);o.call(u)}}var n=KM(e,s,i,0,null,!1,!1,"",tF);return i._reactRootContainer=n,i[fn]=n.current,wp(i.nodeType===8?i.parentNode:i),qa(),n}for(;r=i.lastChild;)i.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=TC(a);l.call(u)}}var a=tD(i,0,!1,null,null,!1,!1,"",tF);return i._reactRootContainer=a,i[fn]=a.current,wp(i.nodeType===8?i.parentNode:i),qa(function(){Jv(e,a,t,s)}),a}function tS(i,e,t,s,r){var o=t._reactRootContainer;if(o){var n=o;if(typeof r=="function"){var l=r;r=function(){var a=TC(n);l.call(a)}}Jv(e,n,i,r)}else n=mB(t,e,i,r,s);return TC(n)}yI=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=Fh(e.pendingLanes);t!==0&&(RT(e,t|1),_s(e,ri()),!(it&6)&&(ac=ri()+500,kl()))}break;case 13:qa(function(){var s=mn(i,1);if(s!==null){var r=ls();uo(s,i,1,r)}}),iD(i,1)}};TT=function(i){if(i.tag===13){var e=mn(i,134217728);if(e!==null){var t=ls();uo(e,i,134217728,t)}iD(i,134217728)}};EI=function(i){if(i.tag===13){var e=yl(i),t=mn(i,e);if(t!==null){var s=ls();uo(t,i,e,s)}iD(i,e)}};RI=function(){return gt};TI=function(i,e){var t=gt;try{return gt=i,e()}finally{gt=t}};sE=function(i,e,t){switch(e){case"input":if(Qy(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==i&&s.form===i.form){var r=$v(s);if(!r)throw Error(Q(90));tI(s),Qy(s,r)}}}break;case"textarea":sI(i,t);break;case"select":e=t.value,e!=null&&Pd(i,!!t.multiple,e,!1)}};dI=XT;cI=qa;var CB={usingClientEntryPoint:!1,Events:[zg,fd,$v,aI,uI,XT]},Eh={findFiberByHostInstance:ca,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vB={bundleType:Eh.bundleType,version:Eh.version,rendererPackageName:Eh.rendererPackageName,rendererConfig:Eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=gI(i),i===null?null:i.stateNode},findFiberByHostInstance:Eh.findFiberByHostInstance||fB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var em=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!em.isDisabled&&em.supportsFiber)try{Bv=em.inject(vB),Ho=em}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CB;pr.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rD(e))throw Error(Q(200));return gB(i,e,null,t)};pr.createRoot=function(i,e){if(!rD(i))throw Error(Q(299));var t=!1,s="",r=jM;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=tD(i,1,!1,null,null,t,!1,s,r),i[fn]=e.current,wp(i.nodeType===8?i.parentNode:i),new sD(e)};pr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Q(188)):(i=Object.keys(i).join(","),Error(Q(268,i)));return i=gI(e),i=i===null?null:i.stateNode,i};pr.flushSync=function(i){return qa(i)};pr.hydrate=function(i,e,t){if(!eS(e))throw Error(Q(200));return tS(null,i,e,!0,t)};pr.hydrateRoot=function(i,e,t){if(!rD(i))throw Error(Q(405));var s=t!=null&&t.hydratedSources||null,r=!1,o="",n=jM;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),e=KM(e,null,i,1,t??null,r,!1,o,n),i[fn]=e.current,wp(i),s)for(i=0;i<s.length;i++)t=s[i],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Zv(e)};pr.render=function(i,e,t){if(!eS(e))throw Error(Q(200));return tS(null,i,e,!1,t)};pr.unmountComponentAtNode=function(i){if(!eS(i))throw Error(Q(40));return i._reactRootContainer?(qa(function(){tS(null,null,i,!1,function(){i._reactRootContainer=null,i[fn]=null})}),!0):!1};pr.unstable_batchedUpdates=XT;pr.unstable_renderSubtreeIntoContainer=function(i,e,t,s){if(!eS(t))throw Error(Q(200));if(i==null||i._reactInternals===void 0)throw Error(Q(38));return tS(i,e,t,!1,s)};pr.version="18.2.0-next-9e3b772b8-20220608";function YM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YM)}catch(i){console.error(i)}}YM(),KL.exports=pr;var iS=KL.exports;const NE=_L(iS);var iF=iS;Uy.createRoot=iF.createRoot,Uy.hydrateRoot=iF.hydrateRoot;var Kg=i=>i.type==="checkbox",Ed=i=>i instanceof Date,ss=i=>i==null;const qM=i=>typeof i=="object";var Ei=i=>!ss(i)&&!Array.isArray(i)&&qM(i)&&!Ed(i),SB=i=>Ei(i)&&i.target?Kg(i.target)?i.target.checked:i.target.value:i,wB=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,yB=(i,e)=>i.has(wB(e)),EB=i=>{const e=i.constructor&&i.constructor.prototype;return Ei(e)&&e.hasOwnProperty("isPrototypeOf")},oD=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Sr(i){let e;const t=Array.isArray(i);if(i instanceof Date)e=new Date(i);else if(i instanceof Set)e=new Set(i);else if(!(oD&&(i instanceof Blob||i instanceof FileList))&&(t||Ei(i)))if(e=t?[]:{},!t&&!EB(i))e=i;else for(const s in i)i.hasOwnProperty(s)&&(e[s]=Sr(i[s]));else return i;return e}var jg=i=>Array.isArray(i)?i.filter(Boolean):[],si=i=>i===void 0,fe=(i,e,t)=>{if(!e||!Ei(i))return t;const s=jg(e.split(/[,[\].]+?/)).reduce((r,o)=>ss(r)?r:r[o],i);return si(s)||s===i?si(i[e])?t:i[e]:s},ln=i=>typeof i=="boolean";const sF={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},to={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},tn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};$.createContext(null);var RB=(i,e,t,s=!0)=>{const r={defaultValues:e._defaultValues};for(const o in i)Object.defineProperty(r,o,{get:()=>{const n=o;return e._proxyFormState[n]!==to.all&&(e._proxyFormState[n]=!s||to.all),t&&(t[n]=!0),i[n]}});return r},js=i=>Ei(i)&&!Object.keys(i).length,TB=(i,e,t,s)=>{t(i);const{name:r,...o}=i;return js(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(n=>e[n]===(!s||to.all))},zw=i=>Array.isArray(i)?i:[i];function DB(i){const e=$.useRef(i);e.current=i,$.useEffect(()=>{const t=!i.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{t&&t.unsubscribe()}},[i.disabled])}var Go=i=>typeof i=="string",bB=(i,e,t,s,r)=>Go(i)?(s&&e.watch.add(i),fe(t,i,r)):Array.isArray(i)?i.map(o=>(s&&e.watch.add(o),fe(t,o))):(s&&(e.watchAll=!0),t),nD=i=>/^\w*$/.test(i),QM=i=>jg(i.replace(/["|']|\]/g,"").split(/\.|\[/)),It=(i,e,t)=>{let s=-1;const r=nD(e)?[e]:QM(e),o=r.length,n=o-1;for(;++s<o;){const l=r[s];let a=t;if(s!==n){const u=i[l];a=Ei(u)||Array.isArray(u)?u:isNaN(+r[s+1])?{}:[]}i[l]=a,i=i[l]}return i},PB=(i,e,t,s,r)=>e?{...t[i],types:{...t[i]&&t[i].types?t[i].types:{},[s]:r||!0}}:{},rF=i=>({isOnSubmit:!i||i===to.onSubmit,isOnBlur:i===to.onBlur,isOnChange:i===to.onChange,isOnAll:i===to.all,isOnTouch:i===to.onTouched}),oF=(i,e,t)=>!t&&(e.watchAll||e.watch.has(i)||[...e.watch].some(s=>i.startsWith(s)&&/^\.\w+/.test(i.slice(s.length))));const op=(i,e,t,s)=>{for(const r of t||Object.keys(i)){const o=fe(i,r);if(o){const{_f:n,...l}=o;if(n){if(n.refs&&n.refs[0]&&e(n.refs[0],r)&&!s)break;if(n.ref&&e(n.ref,n.name)&&!s)break;op(l,e)}else Ei(l)&&op(l,e)}}};var AB=(i,e,t)=>{const s=jg(fe(i,t));return It(s,"root",e[t]),It(i,t,s),i},lD=i=>i.type==="file",hl=i=>typeof i=="function",DC=i=>{if(!oD)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Pm=i=>Go(i),aD=i=>i.type==="radio",bC=i=>i instanceof RegExp;const nF={value:!1,isValid:!1},lF={value:!0,isValid:!0};var XM=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!si(i[0].attributes.value)?si(i[0].value)||i[0].value===""?lF:{value:i[0].value,isValid:!0}:lF:nF}return nF};const aF={isValid:!1,value:null};var JM=i=>Array.isArray(i)?i.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,aF):aF;function uF(i,e,t="validate"){if(Pm(i)||Array.isArray(i)&&i.every(Pm)||ln(i)&&!i)return{type:t,message:Pm(i)?i:"",ref:e}}var qu=i=>Ei(i)&&!bC(i)?i:{value:i,message:""},dF=async(i,e,t,s,r)=>{const{ref:o,refs:n,required:l,maxLength:a,minLength:u,min:d,max:c,pattern:h,validate:p,name:m,valueAsNumber:S,mount:E,disabled:C}=i._f,v=fe(e,m);if(!E||C)return{};const R=n?n[0]:o,b=j=>{s&&R.reportValidity&&(R.setCustomValidity(ln(j)?"":j||""),R.reportValidity())},A={},F=aD(o),O=Kg(o),L=F||O,G=(S||lD(o))&&si(o.value)&&si(v)||DC(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,k=PB.bind(null,m,t,A),se=(j,Z,ce,Oe=tn.maxLength,Le=tn.minLength)=>{const Ie=j?Z:ce;A[m]={type:j?Oe:Le,message:Ie,ref:o,...k(j?Oe:Le,Ie)}};if(r?!Array.isArray(v)||!v.length:l&&(!L&&(G||ss(v))||ln(v)&&!v||O&&!XM(n).isValid||F&&!JM(n).isValid)){const{value:j,message:Z}=Pm(l)?{value:!!l,message:l}:qu(l);if(j&&(A[m]={type:tn.required,message:Z,ref:R,...k(tn.required,Z)},!t))return b(Z),A}if(!G&&(!ss(d)||!ss(c))){let j,Z;const ce=qu(c),Oe=qu(d);if(!ss(v)&&!isNaN(v)){const Le=o.valueAsNumber||v&&+v;ss(ce.value)||(j=Le>ce.value),ss(Oe.value)||(Z=Le<Oe.value)}else{const Le=o.valueAsDate||new Date(v),Ie=re=>new Date(new Date().toDateString()+" "+re),J=o.type=="time",X=o.type=="week";Go(ce.value)&&v&&(j=J?Ie(v)>Ie(ce.value):X?v>ce.value:Le>new Date(ce.value)),Go(Oe.value)&&v&&(Z=J?Ie(v)<Ie(Oe.value):X?v<Oe.value:Le<new Date(Oe.value))}if((j||Z)&&(se(!!j,ce.message,Oe.message,tn.max,tn.min),!t))return b(A[m].message),A}if((a||u)&&!G&&(Go(v)||r&&Array.isArray(v))){const j=qu(a),Z=qu(u),ce=!ss(j.value)&&v.length>+j.value,Oe=!ss(Z.value)&&v.length<+Z.value;if((ce||Oe)&&(se(ce,j.message,Z.message),!t))return b(A[m].message),A}if(h&&!G&&Go(v)){const{value:j,message:Z}=qu(h);if(bC(j)&&!v.match(j)&&(A[m]={type:tn.pattern,message:Z,ref:o,...k(tn.pattern,Z)},!t))return b(Z),A}if(p){if(hl(p)){const j=await p(v,e),Z=uF(j,R);if(Z&&(A[m]={...Z,...k(tn.validate,Z.message)},!t))return b(Z.message),A}else if(Ei(p)){let j={};for(const Z in p){if(!js(j)&&!t)break;const ce=uF(await p[Z](v,e),R,Z);ce&&(j={...ce,...k(Z,ce.message)},b(ce.message),t&&(A[m]=j))}if(!js(j)&&(A[m]={ref:R,...j},!t))return A}}return b(!0),A};function FB(i,e){const t=e.slice(0,-1).length;let s=0;for(;s<t;)i=si(i)?s++:i[e[s++]];return i}function OB(i){for(const e in i)if(i.hasOwnProperty(e)&&!si(i[e]))return!1;return!0}function Ci(i,e){const t=Array.isArray(e)?e:nD(e)?[e]:QM(e),s=t.length===1?i:FB(i,t),r=t.length-1,o=t[r];return s&&delete s[o],r!==0&&(Ei(s)&&js(s)||Array.isArray(s)&&OB(s))&&Ci(i,t.slice(0,-1)),i}var $w=()=>{let i=[];return{get observers(){return i},next:r=>{for(const o of i)o.next&&o.next(r)},subscribe:r=>(i.push(r),{unsubscribe:()=>{i=i.filter(o=>o!==r)}}),unsubscribe:()=>{i=[]}}},PC=i=>ss(i)||!qM(i);function ga(i,e){if(PC(i)||PC(e))return i===e;if(Ed(i)&&Ed(e))return i.getTime()===e.getTime();const t=Object.keys(i),s=Object.keys(e);if(t.length!==s.length)return!1;for(const r of t){const o=i[r];if(!s.includes(r))return!1;if(r!=="ref"){const n=e[r];if(Ed(o)&&Ed(n)||Ei(o)&&Ei(n)||Array.isArray(o)&&Array.isArray(n)?!ga(o,n):o!==n)return!1}}return!0}var ZM=i=>i.type==="select-multiple",LB=i=>aD(i)||Kg(i),Kw=i=>DC(i)&&i.isConnected,ex=i=>{for(const e in i)if(hl(i[e]))return!0;return!1};function AC(i,e={}){const t=Array.isArray(i);if(Ei(i)||t)for(const s in i)Array.isArray(i[s])||Ei(i[s])&&!ex(i[s])?(e[s]=Array.isArray(i[s])?[]:{},AC(i[s],e[s])):ss(i[s])||(e[s]=!0);return e}function tx(i,e,t){const s=Array.isArray(i);if(Ei(i)||s)for(const r in i)Array.isArray(i[r])||Ei(i[r])&&!ex(i[r])?si(e)||PC(t[r])?t[r]=Array.isArray(i[r])?AC(i[r],[]):{...AC(i[r])}:tx(i[r],ss(e)?{}:e[r],t[r]):t[r]=!ga(i[r],e[r]);return t}var tm=(i,e)=>tx(i,e,AC(e)),ix=(i,{valueAsNumber:e,valueAsDate:t,setValueAs:s})=>si(i)?i:e?i===""?NaN:i&&+i:t&&Go(i)?new Date(i):s?s(i):i;function jw(i){const e=i.ref;if(!(i.refs?i.refs.every(t=>t.disabled):e.disabled))return lD(e)?e.files:aD(e)?JM(i.refs).value:ZM(e)?[...e.selectedOptions].map(({value:t})=>t):Kg(e)?XM(i.refs).value:ix(si(e.value)?i.ref.value:e.value,i)}var IB=(i,e,t,s)=>{const r={};for(const o of i){const n=fe(e,o);n&&It(r,o,n._f)}return{criteriaMode:t,names:[...i],fields:r,shouldUseNativeValidation:s}},Rh=i=>si(i)?i:bC(i)?i.source:Ei(i)?bC(i.value)?i.value.source:i.value:i,MB=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate);function cF(i,e,t){const s=fe(i,t);if(s||nD(t))return{error:s,name:t};const r=t.split(".");for(;r.length;){const o=r.join("."),n=fe(e,o),l=fe(i,o);if(n&&!Array.isArray(n)&&t!==o)return{name:t};if(l&&l.type)return{name:o,error:l};r.pop()}return{name:t}}var xB=(i,e,t,s,r)=>r.isOnAll?!1:!t&&r.isOnTouch?!(e||i):(t?s.isOnBlur:r.isOnBlur)?!i:(t?s.isOnChange:r.isOnChange)?i:!0,_B=(i,e)=>!jg(fe(i,e)).length&&Ci(i,e);const NB={mode:to.onSubmit,reValidateMode:to.onChange,shouldFocusError:!0};function GB(i={}){let e={...NB,...i},t={submitCount:0,isDirty:!1,isLoading:hl(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},r=Ei(e.defaultValues)||Ei(e.values)?Sr(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:Sr(r),n={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},a,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},c={values:$w(),array:$w(),state:$w()},h=rF(e.mode),p=rF(e.reValidateMode),m=e.criteriaMode===to.all,S=I=>N=>{clearTimeout(u),u=setTimeout(I,N)},E=async I=>{if(d.isValid||I){const N=e.resolver?js((await L()).errors):await k(s,!0);N!==t.isValid&&c.state.next({isValid:N})}},C=(I,N)=>{(d.isValidating||d.validatingFields)&&((I||Array.from(l.mount)).forEach(B=>{B&&(N?It(t.validatingFields,B,N):Ci(t.validatingFields,B))}),c.state.next({validatingFields:t.validatingFields,isValidating:!js(t.validatingFields)}))},v=(I,N=[],B,ae,oe=!0,ee=!0)=>{if(ae&&B){if(n.action=!0,ee&&Array.isArray(fe(s,I))){const we=B(fe(s,I),ae.argA,ae.argB);oe&&It(s,I,we)}if(ee&&Array.isArray(fe(t.errors,I))){const we=B(fe(t.errors,I),ae.argA,ae.argB);oe&&It(t.errors,I,we),_B(t.errors,I)}if(d.touchedFields&&ee&&Array.isArray(fe(t.touchedFields,I))){const we=B(fe(t.touchedFields,I),ae.argA,ae.argB);oe&&It(t.touchedFields,I,we)}d.dirtyFields&&(t.dirtyFields=tm(r,o)),c.state.next({name:I,isDirty:j(I,N),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else It(o,I,N)},R=(I,N)=>{It(t.errors,I,N),c.state.next({errors:t.errors})},b=I=>{t.errors=I,c.state.next({errors:t.errors,isValid:!1})},A=(I,N,B,ae)=>{const oe=fe(s,I);if(oe){const ee=fe(o,I,si(B)?fe(r,I):B);si(ee)||ae&&ae.defaultChecked||N?It(o,I,N?ee:jw(oe._f)):Oe(I,ee),n.mount&&E()}},F=(I,N,B,ae,oe)=>{let ee=!1,we=!1;const ht={name:I},Ti=!!(fe(s,I)&&fe(s,I)._f.disabled);if(!B||ae){d.isDirty&&(we=t.isDirty,t.isDirty=ht.isDirty=j(),ee=we!==ht.isDirty);const Ws=Ti||ga(fe(r,I),N);we=!!(!Ti&&fe(t.dirtyFields,I)),Ws||Ti?Ci(t.dirtyFields,I):It(t.dirtyFields,I,!0),ht.dirtyFields=t.dirtyFields,ee=ee||d.dirtyFields&&we!==!Ws}if(B){const Ws=fe(t.touchedFields,I);Ws||(It(t.touchedFields,I,B),ht.touchedFields=t.touchedFields,ee=ee||d.touchedFields&&Ws!==B)}return ee&&oe&&c.state.next(ht),ee?ht:{}},O=(I,N,B,ae)=>{const oe=fe(t.errors,I),ee=d.isValid&&ln(N)&&t.isValid!==N;if(i.delayError&&B?(a=S(()=>R(I,B)),a(i.delayError)):(clearTimeout(u),a=null,B?It(t.errors,I,B):Ci(t.errors,I)),(B?!ga(oe,B):oe)||!js(ae)||ee){const we={...ae,...ee&&ln(N)?{isValid:N}:{},errors:t.errors,name:I};t={...t,...we},c.state.next(we)}},L=async I=>{C(I,!0);const N=await e.resolver(o,e.context,IB(I||l.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return C(I),N},G=async I=>{const{errors:N}=await L(I);if(I)for(const B of I){const ae=fe(N,B);ae?It(t.errors,B,ae):Ci(t.errors,B)}else t.errors=N;return N},k=async(I,N,B={valid:!0})=>{for(const ae in I){const oe=I[ae];if(oe){const{_f:ee,...we}=oe;if(ee){const ht=l.array.has(ee.name);C([ae],!0);const Ti=await dF(oe,o,m,e.shouldUseNativeValidation&&!N,ht);if(C([ae]),Ti[ee.name]&&(B.valid=!1,N))break;!N&&(fe(Ti,ee.name)?ht?AB(t.errors,Ti,ee.name):It(t.errors,ee.name,Ti[ee.name]):Ci(t.errors,ee.name))}we&&await k(we,N,B)}}return B.valid},se=()=>{for(const I of l.unMount){const N=fe(s,I);N&&(N._f.refs?N._f.refs.every(B=>!Kw(B)):!Kw(N._f.ref))&&jt(I)}l.unMount=new Set},j=(I,N)=>(I&&N&&It(o,I,N),!ga(Me(),r)),Z=(I,N,B)=>bB(I,l,{...n.mount?o:si(N)?r:Go(I)?{[I]:N}:N},B,N),ce=I=>jg(fe(n.mount?o:r,I,i.shouldUnregister?fe(r,I,[]):[])),Oe=(I,N,B={})=>{const ae=fe(s,I);let oe=N;if(ae){const ee=ae._f;ee&&(!ee.disabled&&It(o,I,ix(N,ee)),oe=DC(ee.ref)&&ss(N)?"":N,ZM(ee.ref)?[...ee.ref.options].forEach(we=>we.selected=oe.includes(we.value)):ee.refs?Kg(ee.ref)?ee.refs.length>1?ee.refs.forEach(we=>(!we.defaultChecked||!we.disabled)&&(we.checked=Array.isArray(oe)?!!oe.find(ht=>ht===we.value):oe===we.value)):ee.refs[0]&&(ee.refs[0].checked=!!oe):ee.refs.forEach(we=>we.checked=we.value===oe):lD(ee.ref)?ee.ref.value="":(ee.ref.value=oe,ee.ref.type||c.values.next({name:I,values:{...o}})))}(B.shouldDirty||B.shouldTouch)&&F(I,oe,B.shouldTouch,B.shouldDirty,!0),B.shouldValidate&&re(I)},Le=(I,N,B)=>{for(const ae in N){const oe=N[ae],ee=`${I}.${ae}`,we=fe(s,ee);(l.array.has(I)||!PC(oe)||we&&!we._f)&&!Ed(oe)?Le(ee,oe,B):Oe(ee,oe,B)}},Ie=(I,N,B={})=>{const ae=fe(s,I),oe=l.array.has(I),ee=Sr(N);It(o,I,ee),oe?(c.array.next({name:I,values:{...o}}),(d.isDirty||d.dirtyFields)&&B.shouldDirty&&c.state.next({name:I,dirtyFields:tm(r,o),isDirty:j(I,ee)})):ae&&!ae._f&&!ss(ee)?Le(I,ee,B):Oe(I,ee,B),oF(I,l)&&c.state.next({...t}),c.values.next({name:n.mount?I:void 0,values:{...o}})},J=async I=>{const N=I.target;let B=N.name,ae=!0;const oe=fe(s,B),ee=()=>N.type?jw(oe._f):SB(I),we=ht=>{ae=Number.isNaN(ht)||ht===fe(o,B,ht)};if(oe){let ht,Ti;const Ws=ee(),ju=I.type===sF.BLUR||I.type===sF.FOCUS_OUT,KV=!MB(oe._f)&&!e.resolver&&!fe(t.errors,B)&&!oe._f.deps||xB(ju,fe(t.touchedFields,B),t.isSubmitted,p,h),fw=oF(B,l,ju);It(o,B,Ws),ju?(oe._f.onBlur&&oe._f.onBlur(I),a&&a(0)):oe._f.onChange&&oe._f.onChange(I);const mw=F(B,Ws,ju,!1),jV=!js(mw)||fw;if(!ju&&c.values.next({name:B,type:I.type,values:{...o}}),KV)return d.isValid&&E(),jV&&c.state.next({name:B,...fw?{}:mw});if(!ju&&fw&&c.state.next({...t}),e.resolver){const{errors:KP}=await L([B]);if(we(Ws),ae){const YV=cF(t.errors,s,B),jP=cF(KP,s,YV.name||B);ht=jP.error,B=jP.name,Ti=js(KP)}}else C([B],!0),ht=(await dF(oe,o,m,e.shouldUseNativeValidation))[B],C([B]),we(Ws),ae&&(ht?Ti=!1:d.isValid&&(Ti=await k(s,!0)));ae&&(oe._f.deps&&re(oe._f.deps),O(B,Ti,ht,mw))}},X=(I,N)=>{if(fe(t.errors,N)&&I.focus)return I.focus(),1},re=async(I,N={})=>{let B,ae;const oe=zw(I);if(e.resolver){const ee=await G(si(I)?I:oe);B=js(ee),ae=I?!oe.some(we=>fe(ee,we)):B}else I?(ae=(await Promise.all(oe.map(async ee=>{const we=fe(s,ee);return await k(we&&we._f?{[ee]:we}:we)}))).every(Boolean),!(!ae&&!t.isValid)&&E()):ae=B=await k(s);return c.state.next({...!Go(I)||d.isValid&&B!==t.isValid?{}:{name:I},...e.resolver||!I?{isValid:B}:{},errors:t.errors}),N.shouldFocus&&!ae&&op(s,X,I?oe:l.mount),ae},Me=I=>{const N={...r,...n.mount?o:{}};return si(I)?N:Go(I)?fe(N,I):I.map(B=>fe(N,B))},Re=(I,N)=>({invalid:!!fe((N||t).errors,I),isDirty:!!fe((N||t).dirtyFields,I),isTouched:!!fe((N||t).touchedFields,I),isValidating:!!fe((N||t).validatingFields,I),error:fe((N||t).errors,I)}),Ve=I=>{I&&zw(I).forEach(N=>Ci(t.errors,N)),c.state.next({errors:I?t.errors:{}})},Kt=(I,N,B)=>{const ae=(fe(s,I,{_f:{}})._f||{}).ref;It(t.errors,I,{...N,ref:ae}),c.state.next({name:I,errors:t.errors,isValid:!1}),B&&B.shouldFocus&&ae&&ae.focus&&ae.focus()},ft=(I,N)=>hl(I)?c.values.subscribe({next:B=>I(Z(void 0,N),B)}):Z(I,N,!0),jt=(I,N={})=>{for(const B of I?zw(I):l.mount)l.mount.delete(B),l.array.delete(B),N.keepValue||(Ci(s,B),Ci(o,B)),!N.keepError&&Ci(t.errors,B),!N.keepDirty&&Ci(t.dirtyFields,B),!N.keepTouched&&Ci(t.touchedFields,B),!N.keepIsValidating&&Ci(t.validatingFields,B),!e.shouldUnregister&&!N.keepDefaultValue&&Ci(r,B);c.values.next({values:{...o}}),c.state.next({...t,...N.keepDirty?{isDirty:j()}:{}}),!N.keepIsValid&&E()},Hs=({disabled:I,name:N,field:B,fields:ae,value:oe})=>{if(ln(I)){const ee=I?void 0:si(oe)?jw(B?B._f:fe(ae,N)._f):oe;It(o,N,ee),F(N,ee,!1,!1,!0)}},Xl=(I,N={})=>{let B=fe(s,I);const ae=ln(N.disabled);return It(s,I,{...B||{},_f:{...B&&B._f?B._f:{ref:{name:I}},name:I,mount:!0,...N}}),l.mount.add(I),B?Hs({field:B,disabled:N.disabled,name:I,value:N.value}):A(I,!0,N.value),{...ae?{disabled:N.disabled}:{},...e.progressive?{required:!!N.required,min:Rh(N.min),max:Rh(N.max),minLength:Rh(N.minLength),maxLength:Rh(N.maxLength),pattern:Rh(N.pattern)}:{},name:I,onChange:J,onBlur:J,ref:oe=>{if(oe){Xl(I,N),B=fe(s,I);const ee=si(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,we=LB(ee),ht=B._f.refs||[];if(we?ht.find(Ti=>Ti===ee):ee===B._f.ref)return;It(s,I,{_f:{...B._f,...we?{refs:[...ht.filter(Kw),ee,...Array.isArray(fe(r,I))?[{}]:[]],ref:{type:ee.type,name:I}}:{ref:ee}}}),A(I,!1,void 0,ee)}else B=fe(s,I,{}),B._f&&(B._f.mount=!1),(e.shouldUnregister||N.shouldUnregister)&&!(yB(l.array,I)&&n.action)&&l.unMount.add(I)}}},$u=()=>e.shouldFocusError&&op(s,X,l.mount),Ku=I=>{ln(I)&&(c.state.next({disabled:I}),op(s,(N,B)=>{let ae=I;const oe=fe(s,B);oe&&ln(oe._f.disabled)&&(ae||(ae=oe._f.disabled)),N.disabled=ae},0,!1))},mt=(I,N)=>async B=>{let ae;B&&(B.preventDefault&&B.preventDefault(),B.persist&&B.persist());let oe=Sr(o);if(c.state.next({isSubmitting:!0}),e.resolver){const{errors:ee,values:we}=await L();t.errors=ee,oe=we}else await k(s);if(Ci(t.errors,"root"),js(t.errors)){c.state.next({errors:{}});try{await I(oe,B)}catch(ee){ae=ee}}else N&&await N({...t.errors},B),$u(),setTimeout($u);if(c.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:js(t.errors)&&!ae,submitCount:t.submitCount+1,errors:t.errors}),ae)throw ae},Ct=(I,N={})=>{fe(s,I)&&(si(N.defaultValue)?Ie(I,Sr(fe(r,I))):(Ie(I,N.defaultValue),It(r,I,Sr(N.defaultValue))),N.keepTouched||Ci(t.touchedFields,I),N.keepDirty||(Ci(t.dirtyFields,I),t.isDirty=N.defaultValue?j(I,Sr(fe(r,I))):j()),N.keepError||(Ci(t.errors,I),d.isValid&&E()),c.state.next({...t}))},yt=(I,N={})=>{const B=I?Sr(I):r,ae=Sr(B),oe=js(I),ee=oe?r:ae;if(N.keepDefaultValues||(r=B),!N.keepValues){if(N.keepDirtyValues)for(const we of l.mount)fe(t.dirtyFields,we)?It(ee,we,fe(o,we)):Ie(we,fe(ee,we));else{if(oD&&si(I))for(const we of l.mount){const ht=fe(s,we);if(ht&&ht._f){const Ti=Array.isArray(ht._f.refs)?ht._f.refs[0]:ht._f.ref;if(DC(Ti)){const Ws=Ti.closest("form");if(Ws){Ws.reset();break}}}}s={}}o=i.shouldUnregister?N.keepDefaultValues?Sr(r):{}:Sr(ee),c.array.next({values:{...ee}}),c.values.next({values:{...ee}})}l={mount:N.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},n.mount=!d.isValid||!!N.keepIsValid||!!N.keepDirtyValues,n.watch=!!i.shouldUnregister,c.state.next({submitCount:N.keepSubmitCount?t.submitCount:0,isDirty:oe?!1:N.keepDirty?t.isDirty:!!(N.keepDefaultValues&&!ga(I,r)),isSubmitted:N.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:oe?[]:N.keepDirtyValues?N.keepDefaultValues&&o?tm(r,o):t.dirtyFields:N.keepDefaultValues&&I?tm(r,I):{},touchedFields:N.keepTouched?t.touchedFields:{},errors:N.keepErrors?t.errors:{},isSubmitSuccessful:N.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},xe=(I,N)=>yt(hl(I)?I(o):I,N);return{control:{register:Xl,unregister:jt,getFieldState:Re,handleSubmit:mt,setError:Kt,_executeSchema:L,_getWatch:Z,_getDirty:j,_updateValid:E,_removeUnmounted:se,_updateFieldArray:v,_updateDisabledField:Hs,_getFieldArray:ce,_reset:yt,_resetDefaultValues:()=>hl(e.defaultValues)&&e.defaultValues().then(I=>{xe(I,e.resetOptions),c.state.next({isLoading:!1})}),_updateFormState:I=>{t={...t,...I}},_disableForm:Ku,_subjects:c,_proxyFormState:d,_setErrors:b,get _fields(){return s},get _formValues(){return o},get _state(){return n},set _state(I){n=I},get _defaultValues(){return r},get _names(){return l},set _names(I){l=I},get _formState(){return t},set _formState(I){t=I},get _options(){return e},set _options(I){e={...e,...I}}},trigger:re,register:Xl,handleSubmit:mt,watch:ft,setValue:Ie,getValues:Me,reset:xe,resetField:Ct,clearErrors:Ve,unregister:jt,setError:Kt,setFocus:(I,N={})=>{const B=fe(s,I),ae=B&&B._f;if(ae){const oe=ae.refs?ae.refs[0]:ae.ref;oe.focus&&(oe.focus(),N.shouldSelect&&oe.select())}},getFieldState:Re}}function kB(i={}){const e=$.useRef(),t=$.useRef(),[s,r]=$.useState({isDirty:!1,isValidating:!1,isLoading:hl(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,defaultValues:hl(i.defaultValues)?void 0:i.defaultValues});e.current||(e.current={...GB(i),formState:s});const o=e.current.control;return o._options=i,DB({subject:o._subjects.state,next:n=>{TB(n,o._proxyFormState,o._updateFormState,!0)&&r({...o._formState})}}),$.useEffect(()=>o._disableForm(i.disabled),[o,i.disabled]),$.useEffect(()=>{if(o._proxyFormState.isDirty){const n=o._getDirty();n!==s.isDirty&&o._subjects.state.next({isDirty:n})}},[o,s.isDirty]),$.useEffect(()=>{i.values&&!ga(i.values,t.current)?(o._reset(i.values,o._options.resetOptions),t.current=i.values,r(n=>({...n}))):o._resetDefaultValues()},[i.values,o]),$.useEffect(()=>{i.errors&&o._setErrors(i.errors)},[i.errors,o]),$.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),$.useEffect(()=>{i.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[i.shouldUnregister,o]),e.current.formState=RB(s,o),e.current}var Vc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(i){return this.listeners.add(i),this.onSubscribe(),()=>{this.listeners.delete(i),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uc=typeof window>"u"||"Deno"in globalThis;function Tr(){}function VB(i,e){return typeof i=="function"?i(e):i}function GE(i){return typeof i=="number"&&i>=0&&i!==1/0}function sx(i,e){return Math.max(i+(e||0)-Date.now(),0)}function hF(i,e){const{type:t="all",exact:s,fetchStatus:r,predicate:o,queryKey:n,stale:l}=i;if(n){if(s){if(e.queryHash!==uD(n,e.options))return!1}else if(!Fp(e.queryKey,n))return!1}if(t!=="all"){const a=e.isActive();if(t==="active"&&!a||t==="inactive"&&a)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||o&&!o(e))}function pF(i,e){const{exact:t,status:s,predicate:r,mutationKey:o}=i;if(o){if(!e.options.mutationKey)return!1;if(t){if(Qa(e.options.mutationKey)!==Qa(o))return!1}else if(!Fp(e.options.mutationKey,o))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function uD(i,e){return((e==null?void 0:e.queryKeyHashFn)||Qa)(i)}function Qa(i){return JSON.stringify(i,(e,t)=>kE(t)?Object.keys(t).sort().reduce((s,r)=>(s[r]=t[r],s),{}):t)}function Fp(i,e){return i===e?!0:typeof i!=typeof e?!1:i&&e&&typeof i=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Fp(i[t],e[t])):!1}function rx(i,e){if(i===e)return i;const t=gF(i)&&gF(e);if(t||kE(i)&&kE(e)){const s=t?i:Object.keys(i),r=s.length,o=t?e:Object.keys(e),n=o.length,l=t?[]:{};let a=0;for(let u=0;u<n;u++){const d=t?u:o[u];!t&&i[d]===void 0&&e[d]===void 0&&s.includes(d)?(l[d]=void 0,a++):(l[d]=rx(i[d],e[d]),l[d]===i[d]&&i[d]!==void 0&&a++)}return r===n&&a===r?i:l}return e}function FC(i,e){if(!e||Object.keys(i).length!==Object.keys(e).length)return!1;for(const t in i)if(i[t]!==e[t])return!1;return!0}function gF(i){return Array.isArray(i)&&i.length===Object.keys(i).length}function kE(i){if(!fF(i))return!1;const e=i.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!fF(t)||!t.hasOwnProperty("isPrototypeOf"))}function fF(i){return Object.prototype.toString.call(i)==="[object Object]"}function HB(i){return new Promise(e=>{setTimeout(e,i)})}function VE(i,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(i,e):t.structuralSharing!==!1?rx(i,e):e}function BB(i,e,t=0){const s=[...i,e];return t&&s.length>t?s.slice(1):s}function WB(i,e,t=0){const s=[e,...i];return t&&s.length>t?s.slice(0,-1):s}var dD=Symbol(),wa,il,Bd,DL,UB=(DL=class extends Vc{constructor(){super();ge(this,wa,void 0);ge(this,il,void 0);ge(this,Bd,void 0);ne(this,Bd,e=>{if(!uc&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){M(this,il)||this.setEventListener(M(this,Bd))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,il))==null||e.call(this),ne(this,il,void 0))}setEventListener(e){var t;ne(this,Bd,e),(t=M(this,il))==null||t.call(this),ne(this,il,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){M(this,wa)!==e&&(ne(this,wa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof M(this,wa)=="boolean"?M(this,wa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},wa=new WeakMap,il=new WeakMap,Bd=new WeakMap,DL),cD=new UB,Wd,sl,Ud,bL,zB=(bL=class extends Vc{constructor(){super();ge(this,Wd,!0);ge(this,sl,void 0);ge(this,Ud,void 0);ne(this,Ud,e=>{if(!uc&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){M(this,sl)||this.setEventListener(M(this,Ud))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,sl))==null||e.call(this),ne(this,sl,void 0))}setEventListener(e){var t;ne(this,Ud,e),(t=M(this,sl))==null||t.call(this),ne(this,sl,e(this.setOnline.bind(this)))}setOnline(e){M(this,Wd)!==e&&(ne(this,Wd,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return M(this,Wd)}},Wd=new WeakMap,sl=new WeakMap,Ud=new WeakMap,bL),OC=new zB;function $B(i){return Math.min(1e3*2**i,3e4)}function hD(i){return(i??"online")==="online"?OC.isOnline():!0}var ox=class{constructor(i){this.revert=i==null?void 0:i.revert,this.silent=i==null?void 0:i.silent}};function Yw(i){return i instanceof ox}function nx(i){let e=!1,t=0,s=!1,r,o,n;const l=new Promise((E,C)=>{o=E,n=C}),a=E=>{var C;s||(p(new ox(E)),(C=i.abort)==null||C.call(i))},u=()=>{e=!0},d=()=>{e=!1},c=()=>!cD.isFocused()||i.networkMode!=="always"&&!OC.isOnline(),h=E=>{var C;s||(s=!0,(C=i.onSuccess)==null||C.call(i,E),r==null||r(),o(E))},p=E=>{var C;s||(s=!0,(C=i.onError)==null||C.call(i,E),r==null||r(),n(E))},m=()=>new Promise(E=>{var C;r=v=>{const R=s||!c();return R&&E(v),R},(C=i.onPause)==null||C.call(i)}).then(()=>{var E;r=void 0,s||(E=i.onContinue)==null||E.call(i)}),S=()=>{if(s)return;let E;try{E=i.fn()}catch(C){E=Promise.reject(C)}Promise.resolve(E).then(h).catch(C=>{var F;if(s)return;const v=i.retry??(uc?0:3),R=i.retryDelay??$B,b=typeof R=="function"?R(t,C):R,A=v===!0||typeof v=="number"&&t<v||typeof v=="function"&&v(t,C);if(e||!A){p(C);return}t++,(F=i.onFail)==null||F.call(i,t,C),HB(b).then(()=>{if(c())return m()}).then(()=>{e?p(C):S()})})};return hD(i.networkMode)?S():m().then(S),{promise:l,cancel:a,continue:()=>(r==null?void 0:r())?l:Promise.resolve(),cancelRetry:u,continueRetry:d}}function KB(){let i=[],e=0,t=h=>{h()},s=h=>{h()},r=h=>setTimeout(h,0);const o=h=>{r=h},n=h=>{let p;e++;try{p=h()}finally{e--,e||u()}return p},l=h=>{e?i.push(h):r(()=>{t(h)})},a=h=>(...p)=>{l(()=>{h(...p)})},u=()=>{const h=i;i=[],h.length&&r(()=>{s(()=>{h.forEach(p=>{t(p)})})})};return{batch:n,batchCalls:a,schedule:l,setNotifyFunction:h=>{t=h},setBatchNotifyFunction:h=>{s=h},setScheduler:o}}var wi=KB(),ya,PL,lx=(PL=class{constructor(){ge(this,ya,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),GE(this.gcTime)&&ne(this,ya,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(i){this.gcTime=Math.max(this.gcTime||0,i??(uc?1/0:5*60*1e3))}clearGcTimeout(){M(this,ya)&&(clearTimeout(M(this,ya)),ne(this,ya,void 0))}},ya=new WeakMap,PL),zd,$d,Er,es,Di,Ag,Ea,qr,rn,AL,jB=(AL=class extends lx{constructor(e){super();ge(this,qr);ge(this,zd,void 0);ge(this,$d,void 0);ge(this,Er,void 0);ge(this,es,void 0);ge(this,Di,void 0);ge(this,Ag,void 0);ge(this,Ea,void 0);ne(this,Ea,!1),ne(this,Ag,e.defaultOptions),this.setOptions(e.options),ne(this,Di,[]),ne(this,Er,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ne(this,zd,e.state||YB(this.options)),this.state=M(this,zd),this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...M(this,Ag),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!M(this,Di).length&&this.state.fetchStatus==="idle"&&M(this,Er).remove(this)}setData(e,t){const s=VE(this.state.data,e,this.options);return He(this,qr,rn).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){He(this,qr,rn).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,r;const t=(s=M(this,es))==null?void 0:s.promise;return(r=M(this,es))==null||r.cancel(e),t?t.then(Tr).catch(Tr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,zd))}isActive(){return M(this,Di).some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?M(this,Di).some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!sx(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=M(this,Di).find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=M(this,es))==null||t.continue()}onOnline(){var t;const e=M(this,Di).find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=M(this,es))==null||t.continue()}addObserver(e){M(this,Di).includes(e)||(M(this,Di).push(e),this.clearGcTimeout(),M(this,Er).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){M(this,Di).includes(e)&&(ne(this,Di,M(this,Di).filter(t=>t!==e)),M(this,Di).length||(M(this,es)&&(M(this,Ea)?M(this,es).cancel({revert:!0}):M(this,es).cancelRetry()),this.scheduleGc()),M(this,Er).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return M(this,Di).length}invalidate(){this.state.isInvalidated||He(this,qr,rn).call(this,{type:"invalidate"})}fetch(e,t){var u,d,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(M(this,es))return M(this,es).continueRetry(),M(this,es).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=M(this,Di).find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,r={queryKey:this.queryKey,meta:this.meta},o=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ne(this,Ea,!0),s.signal)})};o(r);const n=()=>!this.options.queryFn||this.options.queryFn===dD?Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)):(ne(this,Ea,!1),this.options.persister?this.options.persister(this.options.queryFn,r,this):this.options.queryFn(r)),l={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:n};o(l),(u=this.options.behavior)==null||u.onFetch(l,this),ne(this,$d,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&He(this,qr,rn).call(this,{type:"fetch",meta:(c=l.fetchOptions)==null?void 0:c.meta});const a=h=>{var p,m,S,E;Yw(h)&&h.silent||He(this,qr,rn).call(this,{type:"error",error:h}),Yw(h)||((m=(p=M(this,Er).config).onError)==null||m.call(p,h,this),(E=(S=M(this,Er).config).onSettled)==null||E.call(S,this.state.data,h,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return ne(this,es,nx({fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var p,m,S,E;if(h===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(h),(m=(p=M(this,Er).config).onSuccess)==null||m.call(p,h,this),(E=(S=M(this,Er).config).onSettled)==null||E.call(S,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(h,p)=>{He(this,qr,rn).call(this,{type:"failed",failureCount:h,error:p})},onPause:()=>{He(this,qr,rn).call(this,{type:"pause"})},onContinue:()=>{He(this,qr,rn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode})),M(this,es).promise}},zd=new WeakMap,$d=new WeakMap,Er=new WeakMap,es=new WeakMap,Di=new WeakMap,Ag=new WeakMap,Ea=new WeakMap,qr=new WeakSet,rn=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...ax(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return Yw(r)&&r.revert&&M(this,$d)?{...M(this,$d),fetchStatus:"idle"}:{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),wi.batch(()=>{M(this,Di).forEach(s=>{s.onQueryUpdate()}),M(this,Er).notify({query:this,type:"updated",action:e})})},AL);function ax(i,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hD(e.networkMode)?"fetching":"paused",...i===void 0&&{error:null,status:"pending"}}}function YB(i){const e=typeof i.initialData=="function"?i.initialData():i.initialData,t=e!==void 0,s=t?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Lo,FL,qB=(FL=class extends Vc{constructor(e={}){super();ge(this,Lo,void 0);this.config=e,ne(this,Lo,new Map)}build(e,t,s){const r=t.queryKey,o=t.queryHash??uD(r,t);let n=this.get(o);return n||(n=new jB({cache:this,queryKey:r,queryHash:o,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(n)),n}add(e){M(this,Lo).has(e.queryHash)||(M(this,Lo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=M(this,Lo).get(e.queryHash);t&&(e.destroy(),t===e&&M(this,Lo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){wi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,Lo).get(e)}getAll(){return[...M(this,Lo).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>hF(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>hF(e,s)):t}notify(e){wi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){wi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){wi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Lo=new WeakMap,FL),Io,Fg,Ks,Kd,Mo,zn,OL,QB=(OL=class extends lx{constructor(e){super();ge(this,Mo);ge(this,Io,void 0);ge(this,Fg,void 0);ge(this,Ks,void 0);ge(this,Kd,void 0);this.mutationId=e.mutationId,ne(this,Fg,e.defaultOptions),ne(this,Ks,e.mutationCache),ne(this,Io,[]),this.state=e.state||ux(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...M(this,Fg),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){M(this,Io).includes(e)||(M(this,Io).push(e),this.clearGcTimeout(),M(this,Ks).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ne(this,Io,M(this,Io).filter(t=>t!==e)),this.scheduleGc(),M(this,Ks).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){M(this,Io).length||(this.state.status==="pending"?this.scheduleGc():M(this,Ks).remove(this))}continue(){var e;return((e=M(this,Kd))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,o,n,l,a,u,d,c,h,p,m,S,E,C,v,R,b,A,F,O;const t=()=>(ne(this,Kd,nx({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(L,G)=>{He(this,Mo,zn).call(this,{type:"failed",failureCount:L,error:G})},onPause:()=>{He(this,Mo,zn).call(this,{type:"pause"})},onContinue:()=>{He(this,Mo,zn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),M(this,Kd).promise),s=this.state.status==="pending";try{if(!s){He(this,Mo,zn).call(this,{type:"pending",variables:e}),await((o=(r=M(this,Ks).config).onMutate)==null?void 0:o.call(r,e,this));const G=await((l=(n=this.options).onMutate)==null?void 0:l.call(n,e));G!==this.state.context&&He(this,Mo,zn).call(this,{type:"pending",context:G,variables:e})}const L=await t();return await((u=(a=M(this,Ks).config).onSuccess)==null?void 0:u.call(a,L,e,this.state.context,this)),await((c=(d=this.options).onSuccess)==null?void 0:c.call(d,L,e,this.state.context)),await((p=(h=M(this,Ks).config).onSettled)==null?void 0:p.call(h,L,null,this.state.variables,this.state.context,this)),await((S=(m=this.options).onSettled)==null?void 0:S.call(m,L,null,e,this.state.context)),He(this,Mo,zn).call(this,{type:"success",data:L}),L}catch(L){try{throw await((C=(E=M(this,Ks).config).onError)==null?void 0:C.call(E,L,e,this.state.context,this)),await((R=(v=this.options).onError)==null?void 0:R.call(v,L,e,this.state.context)),await((A=(b=M(this,Ks).config).onSettled)==null?void 0:A.call(b,void 0,L,this.state.variables,this.state.context,this)),await((O=(F=this.options).onSettled)==null?void 0:O.call(F,void 0,L,e,this.state.context)),L}finally{He(this,Mo,zn).call(this,{type:"error",error:L})}}}},Io=new WeakMap,Fg=new WeakMap,Ks=new WeakMap,Kd=new WeakMap,Mo=new WeakSet,zn=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!hD(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),wi.batch(()=>{M(this,Io).forEach(s=>{s.onMutationUpdate(e)}),M(this,Ks).notify({mutation:this,type:"updated",action:e})})},OL);function ux(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Rr,Og,Ra,LL,XB=(LL=class extends Vc{constructor(e={}){super();ge(this,Rr,void 0);ge(this,Og,void 0);ge(this,Ra,void 0);this.config=e,ne(this,Rr,[]),ne(this,Og,0)}build(e,t,s){const r=new QB({mutationCache:this,mutationId:++Gf(this,Og)._,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){M(this,Rr).push(e),this.notify({type:"added",mutation:e})}remove(e){ne(this,Rr,M(this,Rr).filter(t=>t!==e)),this.notify({type:"removed",mutation:e})}clear(){wi.batch(()=>{M(this,Rr).forEach(e=>{this.remove(e)})})}getAll(){return M(this,Rr)}find(e){const t={exact:!0,...e};return M(this,Rr).find(s=>pF(t,s))}findAll(e={}){return M(this,Rr).filter(t=>pF(e,t))}notify(e){wi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){return ne(this,Ra,(M(this,Ra)??Promise.resolve()).then(()=>{const e=M(this,Rr).filter(t=>t.state.isPaused);return wi.batch(()=>e.reduce((t,s)=>t.then(()=>s.continue().catch(Tr)),Promise.resolve()))}).then(()=>{ne(this,Ra,void 0)})),M(this,Ra)}},Rr=new WeakMap,Og=new WeakMap,Ra=new WeakMap,LL);function JB(i){return{onFetch:(e,t)=>{const s=async()=>{var m,S,E,C,v;const r=e.options,o=(E=(S=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:S.fetchMore)==null?void 0:E.direction,n=((C=e.state.data)==null?void 0:C.pages)||[],l=((v=e.state.data)==null?void 0:v.pageParams)||[],a={pages:[],pageParams:[]};let u=!1;const d=R=>{Object.defineProperty(R,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},c=e.options.queryFn&&e.options.queryFn!==dD?e.options.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`)),h=async(R,b,A)=>{if(u)return Promise.reject();if(b==null&&R.pages.length)return Promise.resolve(R);const F={queryKey:e.queryKey,pageParam:b,direction:A?"backward":"forward",meta:e.options.meta};d(F);const O=await c(F),{maxPages:L}=e.options,G=A?WB:BB;return{pages:G(R.pages,O,L),pageParams:G(R.pageParams,b,L)}};let p;if(o&&n.length){const R=o==="backward",b=R?ZB:mF,A={pages:n,pageParams:l},F=b(r,A);p=await h(A,F,R)}else{p=await h(a,l[0]??r.initialPageParam);const R=i??n.length;for(let b=1;b<R;b++){const A=mF(r,p);p=await h(p,A)}}return p};e.options.persister?e.fetchFn=()=>{var r,o;return(o=(r=e.options).persister)==null?void 0:o.call(r,s,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=s}}}function mF(i,{pages:e,pageParams:t}){const s=e.length-1;return i.getNextPageParam(e[s],e,t[s],t)}function ZB(i,{pages:e,pageParams:t}){var s;return(s=i.getPreviousPageParam)==null?void 0:s.call(i,e[0],e,t[0],t)}var qt,rl,ol,jd,Yd,nl,qd,Qd,IL,eW=(IL=class{constructor(i={}){ge(this,qt,void 0);ge(this,rl,void 0);ge(this,ol,void 0);ge(this,jd,void 0);ge(this,Yd,void 0);ge(this,nl,void 0);ge(this,qd,void 0);ge(this,Qd,void 0);ne(this,qt,i.queryCache||new qB),ne(this,rl,i.mutationCache||new XB),ne(this,ol,i.defaultOptions||{}),ne(this,jd,new Map),ne(this,Yd,new Map),ne(this,nl,0)}mount(){Gf(this,nl)._++,M(this,nl)===1&&(ne(this,qd,cD.subscribe(async i=>{i&&(await this.resumePausedMutations(),M(this,qt).onFocus())})),ne(this,Qd,OC.subscribe(async i=>{i&&(await this.resumePausedMutations(),M(this,qt).onOnline())})))}unmount(){var i,e;Gf(this,nl)._--,M(this,nl)===0&&((i=M(this,qd))==null||i.call(this),ne(this,qd,void 0),(e=M(this,Qd))==null||e.call(this),ne(this,Qd,void 0))}isFetching(i){return M(this,qt).findAll({...i,fetchStatus:"fetching"}).length}isMutating(i){return M(this,rl).findAll({...i,status:"pending"}).length}getQueryData(i){var t;const e=this.defaultQueryOptions({queryKey:i});return(t=M(this,qt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(i){const e=this.getQueryData(i.queryKey);if(e===void 0)return this.fetchQuery(i);{const t=this.defaultQueryOptions(i),s=M(this,qt).build(this,t);return i.revalidateIfStale&&s.isStaleByTime(t.staleTime)&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(i){return M(this,qt).findAll(i).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(i,e,t){const s=this.defaultQueryOptions({queryKey:i}),r=M(this,qt).get(s.queryHash),o=r==null?void 0:r.state.data,n=VB(e,o);if(n!==void 0)return M(this,qt).build(this,s).setData(n,{...t,manual:!0})}setQueriesData(i,e,t){return wi.batch(()=>M(this,qt).findAll(i).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(i){var t;const e=this.defaultQueryOptions({queryKey:i});return(t=M(this,qt).get(e.queryHash))==null?void 0:t.state}removeQueries(i){const e=M(this,qt);wi.batch(()=>{e.findAll(i).forEach(t=>{e.remove(t)})})}resetQueries(i,e){const t=M(this,qt),s={type:"active",...i};return wi.batch(()=>(t.findAll(i).forEach(r=>{r.reset()}),this.refetchQueries(s,e)))}cancelQueries(i={},e={}){const t={revert:!0,...e},s=wi.batch(()=>M(this,qt).findAll(i).map(r=>r.cancel(t)));return Promise.all(s).then(Tr).catch(Tr)}invalidateQueries(i={},e={}){return wi.batch(()=>{if(M(this,qt).findAll(i).forEach(s=>{s.invalidate()}),i.refetchType==="none")return Promise.resolve();const t={...i,type:i.refetchType??i.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(i={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=wi.batch(()=>M(this,qt).findAll(i).filter(r=>!r.isDisabled()).map(r=>{let o=r.fetch(void 0,t);return t.throwOnError||(o=o.catch(Tr)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Tr)}fetchQuery(i){const e=this.defaultQueryOptions(i);e.retry===void 0&&(e.retry=!1);const t=M(this,qt).build(this,e);return t.isStaleByTime(e.staleTime)?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(i){return this.fetchQuery(i).then(Tr).catch(Tr)}fetchInfiniteQuery(i){return i.behavior=JB(i.pages),this.fetchQuery(i)}prefetchInfiniteQuery(i){return this.fetchInfiniteQuery(i).then(Tr).catch(Tr)}resumePausedMutations(){return OC.isOnline()?M(this,rl).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,qt)}getMutationCache(){return M(this,rl)}getDefaultOptions(){return M(this,ol)}setDefaultOptions(i){ne(this,ol,i)}setQueryDefaults(i,e){M(this,jd).set(Qa(i),{queryKey:i,defaultOptions:e})}getQueryDefaults(i){const e=[...M(this,jd).values()];let t={};return e.forEach(s=>{Fp(i,s.queryKey)&&(t={...t,...s.defaultOptions})}),t}setMutationDefaults(i,e){M(this,Yd).set(Qa(i),{mutationKey:i,defaultOptions:e})}getMutationDefaults(i){const e=[...M(this,Yd).values()];let t={};return e.forEach(s=>{Fp(i,s.mutationKey)&&(t={...t,...s.defaultOptions})}),t}defaultQueryOptions(i){if(i._defaulted)return i;const e={...M(this,ol).queries,...this.getQueryDefaults(i.queryKey),...i,_defaulted:!0};return e.queryHash||(e.queryHash=uD(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===dD&&(e.enabled=!1),e}defaultMutationOptions(i){return i!=null&&i._defaulted?i:{...M(this,ol).mutations,...(i==null?void 0:i.mutationKey)&&this.getMutationDefaults(i.mutationKey),...i,_defaulted:!0}}clear(){M(this,qt).clear(),M(this,rl).clear()}},qt=new WeakMap,rl=new WeakMap,ol=new WeakMap,jd=new WeakMap,Yd=new WeakMap,nl=new WeakMap,qd=new WeakMap,Qd=new WeakMap,IL),ys,Rt,Lg,ts,Ta,Xd,xo,Ig,Jd,Zd,Da,ba,ll,ec,Pa,Lh,Mg,HE,xg,BE,_g,WE,Ng,UE,Gg,zE,kg,$E,Vg,KE,Vv,dx,ML,tW=(ML=class extends Vc{constructor(e,t){super();ge(this,Pa);ge(this,Mg);ge(this,xg);ge(this,_g);ge(this,Ng);ge(this,Gg);ge(this,kg);ge(this,Vg);ge(this,Vv);ge(this,ys,void 0);ge(this,Rt,void 0);ge(this,Lg,void 0);ge(this,ts,void 0);ge(this,Ta,void 0);ge(this,Xd,void 0);ge(this,xo,void 0);ge(this,Ig,void 0);ge(this,Jd,void 0);ge(this,Zd,void 0);ge(this,Da,void 0);ge(this,ba,void 0);ge(this,ll,void 0);ge(this,ec,new Set);this.options=t,ne(this,ys,e),ne(this,xo,null),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,Rt).addObserver(this),CF(M(this,Rt),this.options)?He(this,Pa,Lh).call(this):this.updateResult(),He(this,Ng,UE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jE(M(this,Rt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jE(M(this,Rt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,He(this,Gg,zE).call(this),He(this,kg,$E).call(this),M(this,Rt).removeObserver(this)}setOptions(e,t){const s=this.options,r=M(this,Rt);if(this.options=M(this,ys).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");He(this,Vg,KE).call(this),M(this,Rt).setOptions(this.options),s._defaulted&&!FC(this.options,s)&&M(this,ys).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,Rt),observer:this});const o=this.hasListeners();o&&vF(M(this,Rt),r,this.options,s)&&He(this,Pa,Lh).call(this),this.updateResult(t),o&&(M(this,Rt)!==r||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&He(this,Mg,HE).call(this);const n=He(this,xg,BE).call(this);o&&(M(this,Rt)!==r||this.options.enabled!==s.enabled||n!==M(this,ll))&&He(this,_g,WE).call(this,n)}getOptimisticResult(e){const t=M(this,ys).getQueryCache().build(M(this,ys),e),s=this.createResult(t,e);return sW(this,s)&&(ne(this,ts,s),ne(this,Xd,this.options),ne(this,Ta,M(this,Rt).state)),s}getCurrentResult(){return M(this,ts)}trackResult(e,t){const s={};return Object.keys(e).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t==null||t(r),e[r])})}),s}trackProp(e){M(this,ec).add(e)}getCurrentQuery(){return M(this,Rt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=M(this,ys).defaultQueryOptions(e),s=M(this,ys).getQueryCache().build(M(this,ys),t);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,t))}fetch(e){return He(this,Pa,Lh).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,ts)))}createResult(e,t){var O;const s=M(this,Rt),r=this.options,o=M(this,ts),n=M(this,Ta),l=M(this,Xd),u=e!==s?e.state:M(this,Lg),{state:d}=e;let c={...d},h=!1,p;if(t._optimisticResults){const L=this.hasListeners(),G=!L&&CF(e,t),k=L&&vF(e,s,t,r);(G||k)&&(c={...c,...ax(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:m,errorUpdatedAt:S,status:E}=c;if(t.select&&c.data!==void 0)if(o&&c.data===(n==null?void 0:n.data)&&t.select===M(this,Ig))p=M(this,Jd);else try{ne(this,Ig,t.select),p=t.select(c.data),p=VE(o==null?void 0:o.data,p,t),ne(this,Jd,p),ne(this,xo,null)}catch(L){ne(this,xo,L)}else p=c.data;if(t.placeholderData!==void 0&&p===void 0&&E==="pending"){let L;if(o!=null&&o.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData))L=o.data;else if(L=typeof t.placeholderData=="function"?t.placeholderData((O=M(this,Zd))==null?void 0:O.state.data,M(this,Zd)):t.placeholderData,t.select&&L!==void 0)try{L=t.select(L),ne(this,xo,null)}catch(G){ne(this,xo,G)}L!==void 0&&(E="success",p=VE(o==null?void 0:o.data,L,t),h=!0)}M(this,xo)&&(m=M(this,xo),p=M(this,Jd),S=Date.now(),E="error");const C=c.fetchStatus==="fetching",v=E==="pending",R=E==="error",b=v&&C,A=p!==void 0;return{status:E,fetchStatus:c.fetchStatus,isPending:v,isSuccess:E==="success",isError:R,isInitialLoading:b,isLoading:b,data:p,dataUpdatedAt:c.dataUpdatedAt,error:m,errorUpdatedAt:S,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>u.dataUpdateCount||c.errorUpdateCount>u.errorUpdateCount,isFetching:C,isRefetching:C&&!v,isLoadingError:R&&!A,isPaused:c.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:R&&A,isStale:pD(e,t),refetch:this.refetch}}updateResult(e){const t=M(this,ts),s=this.createResult(M(this,Rt),this.options);if(ne(this,Ta,M(this,Rt).state),ne(this,Xd,this.options),M(this,Ta).data!==void 0&&ne(this,Zd,M(this,Rt)),FC(s,t))return;ne(this,ts,s);const r={},o=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,l=typeof n=="function"?n():n;if(l==="all"||!l&&!M(this,ec).size)return!0;const a=new Set(l??M(this,ec));return this.options.throwOnError&&a.add("error"),Object.keys(M(this,ts)).some(u=>{const d=u;return M(this,ts)[d]!==t[d]&&a.has(d)})};(e==null?void 0:e.listeners)!==!1&&o()&&(r.listeners=!0),He(this,Vv,dx).call(this,{...r,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&He(this,Ng,UE).call(this)}},ys=new WeakMap,Rt=new WeakMap,Lg=new WeakMap,ts=new WeakMap,Ta=new WeakMap,Xd=new WeakMap,xo=new WeakMap,Ig=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,Da=new WeakMap,ba=new WeakMap,ll=new WeakMap,ec=new WeakMap,Pa=new WeakSet,Lh=function(e){He(this,Vg,KE).call(this);let t=M(this,Rt).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Tr)),t},Mg=new WeakSet,HE=function(){if(He(this,Gg,zE).call(this),uc||M(this,ts).isStale||!GE(this.options.staleTime))return;const t=sx(M(this,ts).dataUpdatedAt,this.options.staleTime)+1;ne(this,Da,setTimeout(()=>{M(this,ts).isStale||this.updateResult()},t))},xg=new WeakSet,BE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,Rt)):this.options.refetchInterval)??!1},_g=new WeakSet,WE=function(e){He(this,kg,$E).call(this),ne(this,ll,e),!(uc||this.options.enabled===!1||!GE(M(this,ll))||M(this,ll)===0)&&ne(this,ba,setInterval(()=>{(this.options.refetchIntervalInBackground||cD.isFocused())&&He(this,Pa,Lh).call(this)},M(this,ll)))},Ng=new WeakSet,UE=function(){He(this,Mg,HE).call(this),He(this,_g,WE).call(this,He(this,xg,BE).call(this))},Gg=new WeakSet,zE=function(){M(this,Da)&&(clearTimeout(M(this,Da)),ne(this,Da,void 0))},kg=new WeakSet,$E=function(){M(this,ba)&&(clearInterval(M(this,ba)),ne(this,ba,void 0))},Vg=new WeakSet,KE=function(){const e=M(this,ys).getQueryCache().build(M(this,ys),this.options);if(e===M(this,Rt))return;const t=M(this,Rt);ne(this,Rt,e),ne(this,Lg,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Vv=new WeakSet,dx=function(e){wi.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(M(this,ts))}),M(this,ys).getQueryCache().notify({query:M(this,Rt),type:"observerResultsUpdated"})})},ML);function iW(i,e){return e.enabled!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&e.retryOnMount===!1)}function CF(i,e){return iW(i,e)||i.state.data!==void 0&&jE(i,e,e.refetchOnMount)}function jE(i,e,t){if(e.enabled!==!1){const s=typeof t=="function"?t(i):t;return s==="always"||s!==!1&&pD(i,e)}return!1}function vF(i,e,t,s){return(i!==e||s.enabled===!1)&&(!t.suspense||i.state.status!=="error")&&pD(i,t)}function pD(i,e){return e.enabled!==!1&&i.isStaleByTime(e.staleTime)}function sW(i,e){return!FC(i.getCurrentResult(),e)}var al,ul,Es,an,tc,Am,Hg,YE,xL,rW=(xL=class extends Vc{constructor(t,s){super();ge(this,tc);ge(this,Hg);ge(this,al,void 0);ge(this,ul,void 0);ge(this,Es,void 0);ge(this,an,void 0);ne(this,al,t),this.setOptions(s),this.bindMethods(),He(this,tc,Am).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=M(this,al).defaultMutationOptions(t),FC(this.options,s)||M(this,al).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,Es),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Qa(s.mutationKey)!==Qa(this.options.mutationKey)?this.reset():((r=M(this,Es))==null?void 0:r.state.status)==="pending"&&M(this,Es).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=M(this,Es))==null||t.removeObserver(this)}onMutationUpdate(t){He(this,tc,Am).call(this),He(this,Hg,YE).call(this,t)}getCurrentResult(){return M(this,ul)}reset(){var t;(t=M(this,Es))==null||t.removeObserver(this),ne(this,Es,void 0),He(this,tc,Am).call(this),He(this,Hg,YE).call(this)}mutate(t,s){var r;return ne(this,an,s),(r=M(this,Es))==null||r.removeObserver(this),ne(this,Es,M(this,al).getMutationCache().build(M(this,al),this.options)),M(this,Es).addObserver(this),M(this,Es).execute(t)}},al=new WeakMap,ul=new WeakMap,Es=new WeakMap,an=new WeakMap,tc=new WeakSet,Am=function(){var s;const t=((s=M(this,Es))==null?void 0:s.state)??ux();ne(this,ul,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Hg=new WeakSet,YE=function(t){wi.batch(()=>{var s,r,o,n,l,a,u,d;if(M(this,an)&&this.hasListeners()){const c=M(this,ul).variables,h=M(this,ul).context;(t==null?void 0:t.type)==="success"?((r=(s=M(this,an)).onSuccess)==null||r.call(s,t.data,c,h),(n=(o=M(this,an)).onSettled)==null||n.call(o,t.data,null,c,h)):(t==null?void 0:t.type)==="error"&&((a=(l=M(this,an)).onError)==null||a.call(l,t.error,c,h),(d=(u=M(this,an)).onSettled)==null||d.call(u,void 0,t.error,c,h))}this.listeners.forEach(c=>{c(M(this,ul))})})},xL),cx=P.createContext(void 0),gD=i=>{const e=P.useContext(cx);if(i)return i;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},oW=({client:i,children:e})=>(P.useEffect(()=>(i.mount(),()=>{i.unmount()}),[i]),de.jsx(cx.Provider,{value:i,children:e})),hx=P.createContext(!1),nW=()=>P.useContext(hx);hx.Provider;function lW(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var aW=P.createContext(lW()),uW=()=>P.useContext(aW);function px(i,e){return typeof i=="function"?i(...e):!!i}function dW(){}var cW=(i,e)=>{(i.suspense||i.throwOnError)&&(e.isReset()||(i.retryOnMount=!1))},hW=i=>{P.useEffect(()=>{i.clearReset()},[i])},pW=({result:i,errorResetBoundary:e,throwOnError:t,query:s})=>i.isError&&!e.isReset()&&!i.isFetching&&s&&px(t,[i.error,s]),gW=i=>{i.suspense&&typeof i.staleTime!="number"&&(i.staleTime=1e3)},fW=(i,e)=>(i==null?void 0:i.suspense)&&e.isPending,mW=(i,e,t)=>e.fetchOptimistic(i).catch(()=>{t.clearReset()});function CW(i,e,t){const s=gD(t),r=nW(),o=uW(),n=s.defaultQueryOptions(i);n._optimisticResults=r?"isRestoring":"optimistic",gW(n),cW(n,o),hW(o);const[l]=P.useState(()=>new e(s,n)),a=l.getOptimisticResult(n);if(P.useSyncExternalStore(P.useCallback(u=>{const d=r?()=>{}:l.subscribe(wi.batchCalls(u));return l.updateResult(),d},[l,r]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),P.useEffect(()=>{l.setOptions(n,{listeners:!1})},[n,l]),fW(n,a))throw mW(n,l,o);if(pW({result:a,errorResetBoundary:o,throwOnError:n.throwOnError,query:s.getQueryCache().get(n.queryHash)}))throw a.error;return n.notifyOnChangeProps?a:l.trackResult(a)}function vW(i,e){return CW(i,tW,e)}function SW(i,e){const t=gD(e),[s]=P.useState(()=>new rW(t,i));P.useEffect(()=>{s.setOptions(i)},[s,i]);const r=P.useSyncExternalStore(P.useCallback(n=>s.subscribe(wi.batchCalls(n)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=P.useCallback((n,l)=>{s.mutate(n,l).catch(dW)},[s]);if(r.error&&px(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}const wW="modulepreload",yW=function(i){return"/wealth-health/"+i},SF={},dc=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),l=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));r=Promise.all(t.map(a=>{if(a=yW(a),a in SF)return;SF[a]=!0;const u=a.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!s)for(let p=o.length-1;p>=0;p--){const m=o[p];if(m.href===a&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":wW,u||(h.as="script",h.crossOrigin=""),h.href=a,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o})},EW=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>dc(()=>Promise.resolve().then(()=>Yg),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class fD extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class RW extends fD{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class TW extends fD{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class DW extends fD{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qE;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(qE||(qE={}));var bW=function(i,e,t,s){function r(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(s.next(d))}catch(c){n(c)}}function a(d){try{u(s.throw(d))}catch(c){n(c)}}function u(d){d.done?o(d.value):r(d.value).then(l,a)}u((s=s.apply(i,e||[])).next())})};class PW{constructor(e,{headers:t={},customFetch:s,region:r=qE.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=EW(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return bW(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:n}=t;let l={},{region:a}=t;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let u;n&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&n instanceof Blob||n instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=n):typeof n=="string"?(l["Content-Type"]="text/plain",u=n):typeof FormData<"u"&&n instanceof FormData?u=n:(l["Content-Type"]="application/json",u=JSON.stringify(n)));const d=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(m=>{throw new RW(m)}),c=d.headers.get("x-relay-error");if(c&&c==="true")throw new TW(d);if(!d.ok)throw new DW(d);let h=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield d.json():h==="application/octet-stream"?p=yield d.blob():h==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(r){return{data:null,error:r}}})}}var AW=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},cc=AW();const FW=cc.fetch,mD=cc.fetch.bind(cc),gx=cc.Headers,OW=cc.Request,LW=cc.Response,Yg=Object.freeze(Object.defineProperty({__proto__:null,Headers:gx,Request:OW,Response:LW,default:mD,fetch:FW},Symbol.toStringTag,{value:"Module"}));class IW extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class MW{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=mD:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var n,l,a;let u=null,d=null,c=null,h=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const C=await o.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=C:d=JSON.parse(C))}const S=(n=this.headers.Prefer)===null||n===void 0?void 0:n.match(/count=(exact|planned|estimated)/),E=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");S&&E&&E.length>1&&(c=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,c=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const S=await o.text();try{u=JSON.parse(S),Array.isArray(u)&&o.status===404&&(d=[],u=null,h=200,p="OK")}catch{o.status===404&&S===""?(h=204,p="No Content"):u={message:S}}if(u&&this.isMaybeSingle&&(!((a=u==null?void 0:u.details)===null||a===void 0)&&a.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new IW(u)}return{error:u,data:d,count:c,status:h,statusText:p}});return this.shouldThrowOnError||(r=r.catch(o=>{var n,l,a;return{error:{message:`${(n=o==null?void 0:o.name)!==null&&n!==void 0?n:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=o==null?void 0:o.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}}class xW extends MW{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:o=r}={}){const n=o?`${o}.order`:"order",l=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const o=typeof r>"u"?"offset":`${r}.offset`,n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:o=!1,format:n="text"}={}){var l;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${n}; for="${u}"; options=${a};`,n==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class ed extends xW{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");const n=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${o}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class _W{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let o=!1;const n=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",n),s&&(this.headers.Prefer=`count=${s}`),new ed({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),t&&o.push(`count=${t}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const n=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(n.length>0){const l=[...new Set(n)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new ed({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:o=!0}={}){const n="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(a.length>0){const u=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ed({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new ed({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new ed({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const NW="1.15.0",GW={"X-Client-Info":`postgrest-js/${NW}`};class CD{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},GW),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new _W(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new CD(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:o}={}){let n;const l=new URL(`${this.url}/rpc/${e}`);let a;s?(n="HEAD",Object.entries(t).forEach(([d,c])=>{l.searchParams.append(d,`${c}`)})):r?(n="GET",Object.entries(t).forEach(([d,c])=>{l.searchParams.append(d,`${c}`)})):(n="POST",a=t);const u=Object.assign({},this.headers);return o&&(u.Prefer=`count=${o}`),new ed({method:n,url:l,headers:u,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const kW="2.9.3",VW={"X-Client-Info":`realtime-js/${kW}`},HW="1.0.0",fx=1e4,BW=1e3;var Md;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Md||(Md={}));var $s;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})($s||($s={}));var Xr;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Xr||(Xr={}));var QE;(function(i){i.websocket="websocket"})(QE||(QE={}));var na;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(na||(na={}));class mx{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class WW{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),o=t.getUint8(2);let n=this.HEADER_LENGTH+2;const l=s.decode(e.slice(n,n+r));n=n+r;const a=s.decode(e.slice(n,n+o));n=n+o;const u=JSON.parse(s.decode(e.slice(n,e.byteLength)));return{ref:null,topic:l,event:a,payload:u}}}class qw{constructor(e,t,s={},r=fx){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wF;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(wF||(wF={}));class np{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:o,onLeave:n,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=np.syncState(this.state,r,o,n),this.pendingDiffs.forEach(a=>{this.state=np.syncDiff(this.state,a,o,n)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},r=>{const{onJoin:o,onLeave:n,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=np.syncDiff(this.state,r,o,n),l())}),this.onJoin((r,o,n)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:n})}),this.onLeave((r,o,n)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const o=this.cloneDeep(e),n=this.transformState(t),l={},a={};return this.map(o,(u,d)=>{n[u]||(a[u]=d)}),this.map(n,(u,d)=>{const c=o[u];if(c){const h=d.map(E=>E.presence_ref),p=c.map(E=>E.presence_ref),m=d.filter(E=>p.indexOf(E.presence_ref)<0),S=c.filter(E=>h.indexOf(E.presence_ref)<0);m.length>0&&(l[u]=m),S.length>0&&(a[u]=S)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:a},s,r)}static syncDiff(e,t,s,r){const{joins:o,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(o,(l,a)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(a),d.length>0){const c=e[l].map(p=>p.presence_ref),h=d.filter(p=>c.indexOf(p.presence_ref)<0);e[l].unshift(...h)}s(l,d,a)}),this.map(n,(l,a)=>{let u=e[l];if(!u)return;const d=a.map(c=>c.presence_ref);u=u.filter(c=>d.indexOf(c.presence_ref)<0),e[l]=u,r(l,u,a),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Et;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Et||(Et={}));const yF=(i,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((o,n)=>(o[n]=UW(n,i,e,r),o),{})},UW=(i,e,t,s)=>{const r=e.find(l=>l.name===i),o=r==null?void 0:r.type,n=t[i];return o&&!s.includes(o)?Cx(o,n):XE(n)},Cx=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return jW(e,t)}switch(i){case Et.bool:return zW(e);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return $W(e);case Et.json:case Et.jsonb:return KW(e);case Et.timestamp:return YW(e);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return XE(e);default:return XE(e)}},XE=i=>i,zW=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},$W=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},KW=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},jW=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,s=i[t];if(i[0]==="{"&&s==="}"){let o;const n=i.slice(1,t);try{o=JSON.parse("["+n+"]")}catch{o=n?n.split(","):[]}return o.map(l=>Cx(e,l))}return i},YW=i=>typeof i=="string"?i.replace(" ","T"):i;var EF;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(EF||(EF={}));var RF;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes"})(RF||(RF={}));var TF;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(TF||(TF={}));class vD{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=$s.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new qw(this,Xr.join,this.params,this.timeout),this.rejoinTimer=new mx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$s.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$s.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=$s.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$s.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xr.reply,{},(r,o)=>{this._trigger(this._replyEventName(o),r)}),this.presence=new np(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:n}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:o,presence:n,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&r!==void 0?r:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:u})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const c=this.bindings.postgres_changes,h=(d=c==null?void 0:c.length)!==null&&d!==void 0?d:0,p=[];for(let m=0;m<h;m++){const S=c[m],{filter:{event:E,schema:C,table:v,filter:R}}=S,b=u&&u[m];if(b&&b.event===E&&b.schema===C&&b.table===v&&b.filter===R)p.push(Object.assign(Object.assign({},S),{id:b.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:n}=e,l={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:n}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var n,l,a;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(n=this.params)===null||n===void 0?void 0:n.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=$s.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const r=new qw(this,Xr.leave,{},e);r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){const r=new AbortController,o=setTimeout(()=>r.abort(),s),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(o),n}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new qw(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,o;const n=e.toLocaleLowerCase(),{close:l,error:a,leave:u,join:d}=Xr;if(s&&[l,a,u,d].indexOf(n)>=0&&s!==this._joinRef())return;let h=this._onMessage(n,t,s);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var m,S,E;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((E=(S=p.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===n}).map(p=>p.callback(h,s)):(o=this.bindings[n])===null||o===void 0||o.filter(p=>{var m,S,E,C,v,R;if(["broadcast","presence","postgres_changes"].includes(n))if("id"in p){const b=p.id,A=(m=p.filter)===null||m===void 0?void 0:m.event;return b&&((S=t.ids)===null||S===void 0?void 0:S.includes(b))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const b=(v=(C=p==null?void 0:p.filter)===null||C===void 0?void 0:C.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return b==="*"||b===((R=t==null?void 0:t.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===n}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:S,table:E,commit_timestamp:C,type:v,errors:R}=m;h=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:C,eventType:v,new:{},old:{},errors:R}),this._getPayloadRecords(m))}p.callback(h,s)})}_isClosed(){return this.state===$s.closed}_isJoined(){return this.state===$s.joined}_isJoining(){return this.state===$s.joining}_isLeaving(){return this.state===$s.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),o={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&vD.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xr.close,{},e)}_onError(e){this._on(Xr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$s.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=yF(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=yF(e.columns,e.old_record)),t}}const qW=()=>{},QW=typeof WebSocket<"u";class XW{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=VW,this.params={},this.timeout=fx,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=qW,this.conn=null,this.sendBuffer=[],this.serializer=new WW,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...l)=>dc(()=>Promise.resolve().then(()=>Yg),void 0).then(({default:a})=>a(...l)):n=fetch,(...l)=>n(...l)},this.endPoint=`${e}/${QE.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(o,n)=>n(JSON.stringify(o)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new mx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(QW){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new JW(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),dc(()=>import("./browser-BoLXXqyw.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Md.connecting:return na.Connecting;case Md.open:return na.Open;case Md.closing:return na.Closing;default:return na.Closed}}isConnected(){return this.connectionState()===na.Open}channel(e,t={config:{}}){const s=new vD(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:r,ref:o}=e,n=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${t} ${s} (${o})`,r),this.isConnected()?n():this.sendBuffer.push(n)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Xr.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:HW}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:o,ref:n}=t;(n&&n===this.pendingHeartbeatRef||r===(o==null?void 0:o.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${s} ${r} ${n&&"("+n+")"||""}`,o),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(r,o,n)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(BW,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class JW{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Md.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class SD extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ui(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class ZW extends SD{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class DF extends SD{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var eU=function(i,e,t,s){function r(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(s.next(d))}catch(c){n(c)}}function a(d){try{u(s.throw(d))}catch(c){n(c)}}function u(d){d.done?o(d.value):r(d.value).then(l,a)}u((s=s.apply(i,e||[])).next())})};const vx=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>dc(()=>Promise.resolve().then(()=>Yg),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},tU=()=>eU(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield dc(()=>Promise.resolve().then(()=>Yg),void 0)).Response:Response});var Hc=function(i,e,t,s){function r(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(s.next(d))}catch(c){n(c)}}function a(d){try{u(s.throw(d))}catch(c){n(c)}}function u(d){d.done?o(d.value):r(d.value).then(l,a)}u((s=s.apply(i,e||[])).next())})};const Qw=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),iU=(i,e)=>Hc(void 0,void 0,void 0,function*(){const t=yield tU();i instanceof t?i.json().then(s=>{e(new ZW(Qw(s),i.status||500))}).catch(s=>{e(new DF(Qw(s),s))}):e(new DF(Qw(i),i))}),sU=(i,e,t,s)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};function sS(i,e,t,s,r,o){return Hc(this,void 0,void 0,function*(){return new Promise((n,l)=>{i(t,sU(e,s,r,o)).then(a=>{if(!a.ok)throw a;return s!=null&&s.noResolveJson?a:a.json()}).then(a=>n(a)).catch(a=>iU(a,l))})})}function JE(i,e,t,s){return Hc(this,void 0,void 0,function*(){return sS(i,"GET",e,t,s)})}function Qn(i,e,t,s,r){return Hc(this,void 0,void 0,function*(){return sS(i,"POST",e,s,r,t)})}function rU(i,e,t,s,r){return Hc(this,void 0,void 0,function*(){return sS(i,"PUT",e,s,r,t)})}function Sx(i,e,t,s,r){return Hc(this,void 0,void 0,function*(){return sS(i,"DELETE",e,s,r,t)})}var vr=function(i,e,t,s){function r(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(s.next(d))}catch(c){n(c)}}function a(d){try{u(s.throw(d))}catch(c){n(c)}}function u(d){d.done?o(d.value):r(d.value).then(l,a)}u((s=s.apply(i,e||[])).next())})};const oU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bF={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nU{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=vx(r)}uploadOrUpdate(e,t,s,r){return vr(this,void 0,void 0,function*(){try{let o;const n=Object.assign(Object.assign({},bF),r),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(n.upsert)});typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",n.cacheControl),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",n.cacheControl)):(o=s,l["cache-control"]=`max-age=${n.cacheControl}`,l["content-type"]=n.contentType);const a=this._removeEmptyFolders(t),u=this._getFinalPath(a),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:l},n!=null&&n.duplex?{duplex:n.duplex}:{})),c=yield d.json();return d.ok?{data:{path:a,id:c.Id,fullPath:c.Key},error:null}:{data:null,error:c}}catch(o){if(Ui(o))return{data:null,error:o};throw o}})}upload(e,t,s){return vr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return vr(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),n=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${n}`);l.searchParams.set("token",t);try{let a;const u=Object.assign({upsert:bF.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",u.cacheControl)):(a=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const c=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:d}),h=yield c.json();return c.ok?{data:{path:o,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(Ui(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return vr(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=yield Qn(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),r=new URL(this.url+s.url),o=r.searchParams.get("token");if(!o)throw new SD("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:o},error:null}}catch(t){if(Ui(t))return{data:null,error:t};throw t}})}update(e,t,s){return vr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return vr(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(Ui(s))return{data:null,error:s};throw s}})}copy(e,t){return vr(this,void 0,void 0,function*(){try{return{data:{path:(yield Qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(Ui(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return vr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield Qn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const n=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${n}`)},{data:o,error:null}}catch(r){if(Ui(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return vr(this,void 0,void 0,function*(){try{const r=yield Qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(n=>Object.assign(Object.assign({},n),{signedUrl:n.signedURL?encodeURI(`${this.url}${n.signedURL}${o}`):null})),error:null}}catch(r){if(Ui(r))return{data:null,error:r};throw r}})}download(e,t){return vr(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),n=o?`?${o}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield JE(this.fetch,`${this.url}/${r}/${l}${n}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ui(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&r.push(o);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&r.push(a);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return vr(this,void 0,void 0,function*(){try{return{data:yield Sx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ui(t))return{data:null,error:t};throw t}})}list(e,t,s){return vr(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},oU),t),{prefix:e||""});return{data:yield Qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Ui(r))return{data:null,error:r};throw r}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const lU="2.5.5",aU={"X-Client-Info":`storage-js/${lU}`};var Qu=function(i,e,t,s){function r(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(s.next(d))}catch(c){n(c)}}function a(d){try{u(s.throw(d))}catch(c){n(c)}}function u(d){d.done?o(d.value):r(d.value).then(l,a)}u((s=s.apply(i,e||[])).next())})};class uU{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},aU),t),this.fetch=vx(s)}listBuckets(){return Qu(this,void 0,void 0,function*(){try{return{data:yield JE(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ui(e))return{data:null,error:e};throw e}})}getBucket(e){return Qu(this,void 0,void 0,function*(){try{return{data:yield JE(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ui(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Qu(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ui(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Qu(this,void 0,void 0,function*(){try{return{data:yield rU(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ui(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Qu(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ui(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Qu(this,void 0,void 0,function*(){try{return{data:yield Sx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ui(t))return{data:null,error:t};throw t}})}}class dU extends uU{constructor(e,t={},s){super(e,t,s)}from(e){return new nU(this.url,this.headers,e,this.fetch)}}const cU="2.42.0";let Ih="";typeof Deno<"u"?Ih="deno":typeof document<"u"?Ih="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ih="react-native":Ih="node";const hU={"X-Client-Info":`supabase-js-${Ih}/${cU}`},pU={headers:hU},gU={schema:"public"},fU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mU={};var CU=function(i,e,t,s){function r(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(s.next(d))}catch(c){n(c)}}function a(d){try{u(s.throw(d))}catch(c){n(c)}}function u(d){d.done?o(d.value):r(d.value).then(l,a)}u((s=s.apply(i,e||[])).next())})};const vU=i=>{let e;return i?e=i:typeof fetch>"u"?e=mD:e=fetch,(...t)=>e(...t)},SU=()=>typeof Headers>"u"?gx:Headers,wU=(i,e,t)=>{const s=vU(t),r=SU();return(o,n)=>CU(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:i;let u=new r(n==null?void 0:n.headers);return u.has("apikey")||u.set("apikey",i),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),s(o,Object.assign(Object.assign({},n),{headers:u}))})};function yU(i){return i.replace(/\/$/,"")}function EU(i,e){const{db:t,auth:s,realtime:r,global:o}=i,{db:n,auth:l,realtime:a,global:u}=e;return{db:Object.assign(Object.assign({},n),t),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},a),r),global:Object.assign(Object.assign({},u),o)}}const wx="2.63.0",RU="http://localhost:9999",TU="supabase.auth.token",DU={"X-Client-Info":`gotrue-js/${wx}`},PF=10,ZE="X-Supabase-Api-Version",yx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function bU(i){return Math.round(Date.now()/1e3)+i}function PU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const jr=()=>typeof document<"u",Jl={tested:!1,writable:!1},lp=()=>{if(!jr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jl.tested)return Jl.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Jl.tested=!0,Jl.writable=!0}catch{Jl.tested=!0,Jl.writable=!1}return Jl.writable};function Xw(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,o)=>{e[o]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const Ex=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>dc(()=>Promise.resolve().then(()=>Yg),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},AU=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Rx=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},im=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Jw=async(i,e)=>{await i.removeItem(e)};function FU(i){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,r,o,n,l,a,u,d=0;for(i=i.replace("-","+").replace("_","/");d<i.length;)n=e.indexOf(i.charAt(d++)),l=e.indexOf(i.charAt(d++)),a=e.indexOf(i.charAt(d++)),u=e.indexOf(i.charAt(d++)),s=n<<2|l>>4,r=(l&15)<<4|a>>2,o=(a&3)<<6|u,t=t+String.fromCharCode(s),a!=64&&r!=0&&(t=t+String.fromCharCode(r)),u!=64&&o!=0&&(t=t+String.fromCharCode(o));return t}class rS{constructor(){this.promise=new rS.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}rS.promiseConstructor=Promise;function AF(i){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=i.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(FU(s))}async function OU(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function LU(i,e){return new Promise((s,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const n=await i(o);if(!e(o,null,n)){s(n);return}}catch(n){if(!e(o,n)){r(n);return}}})()})}function IU(i){return("0"+i.toString(16)).substr(-2)}function MU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let o=0;o<56;o++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,IU).join("")}async function xU(i){const t=new TextEncoder().encode(i),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}function _U(i){return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function NU(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await xU(i);return _U(t)}async function Xu(i,e,t=!1){const s=MU();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await Rx(i,`${e}-code-verifier`,r);const o=await NU(s);return[o,s===o?"plain":"s256"]}const GU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kU(i){const e=i.headers.get(ZE);if(!e||!e.match(GU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class wD extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function je(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class VU extends wD{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function HU(i){return je(i)&&i.name==="AuthApiError"}class Tx extends wD{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class mu extends wD{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class Ju extends mu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Zw extends mu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sm extends mu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class rm extends mu{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class FF extends mu{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class eR extends mu{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ey(i){return je(i)&&i.name==="AuthRetryableFetchError"}class OF extends mu{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var BU=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(t[s[r]]=i[s[r]]);return t};const ta=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),WU=[502,503,504];async function LF(i){var e;if(!AU(i))throw new eR(ta(i),0);if(WU.includes(i.status))throw new eR(ta(i),i.status);let t;try{t=await i.json()}catch(o){throw new Tx(ta(o),o)}let s;const r=kU(i);if(r&&r.getTime()>=yx["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new OF(ta(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,n)=>o&&typeof n=="string",!0))throw new OF(ta(t),i.status,t.weak_password.reasons);throw new VU(ta(t),i.status||500,s)}const UU=(i,e,t,s)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function Xe(i,e,t,s){var r;const o=Object.assign({},s==null?void 0:s.headers);o[ZE]||(o[ZE]=yx["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const n=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(n.redirect_to=s.redirectTo);const l=Object.keys(n).length?"?"+new URLSearchParams(n).toString():"",a=await zU(i,e,t+l,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(a):{data:Object.assign({},a),error:null}}async function zU(i,e,t,s,r,o){const n=UU(e,s,r,o);let l;try{l=await i(t,Object.assign(Object.assign({},n),{cache:"no-store"}))}catch(a){throw console.error(a),new eR(ta(a),0)}if(l.ok||await LF(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(a){await LF(a)}}function $n(i){var e;let t=null;YU(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=bU(i.expires_in)));const s=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:s},error:null}}function IF(i){const e=$n(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Zn(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function $U(i){return{data:i,error:null}}function KU(i){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:o}=i,n=BU(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:o},a=Object.assign({},n);return{data:{properties:l,user:a},error:null}}function jU(i){return i}function YU(i){return i.access_token&&i.refresh_token&&i.expires_in}var qU=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(t[s[r]]=i[s[r]]);return t};class QU{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Ex(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Xe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Zn})}catch(s){if(je(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=qU(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await Xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:KU,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(je(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Xe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zn})}catch(t){if(je(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,o,n,l,a;try{const u={nextPage:null,lastPage:0,total:0},d=await Xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:jU});if(d.error)throw d.error;const c=await d.json(),h=(n=d.headers.get("x-total-count"))!==null&&n!==void 0?n:0,p=(a=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return p.length>0&&(p.forEach(m=>{const S=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(m.split(";")[1].split("=")[1]);u[`${E}Page`]=S}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(je(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await Xe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zn})}catch(t){if(je(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Xe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Zn})}catch(s){if(je(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Zn})}catch(s){if(je(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await Xe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(je(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(je(t))return{data:null,error:t};throw t}}}const XU={getItem:i=>lp()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{lp()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{lp()&&globalThis.localStorage.removeItem(i)}};function MF(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}function JU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zu={debug:!!(globalThis&&lp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Dx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ZU extends Dx{}async function ez(i,e,t){Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,r.name);try{return await t()}finally{Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,r.name)}}else{if(e===0)throw Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new ZU(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Zu.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}JU();const tz={url:RU,storageKey:TU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DU,flowType:"implicit",debug:!1},Th=30*1e3,xF=3;async function _F(i,e,t){return await t()}class Op{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.insecureGetSessionWarningShown=!1,this.instanceID=Op.nextInstanceID,Op.nextInstanceID+=1,this.instanceID>0&&jr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},tz),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new QU({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ex(r.fetch),this.lock=r.lock||_F,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,r.lock?this.lock=r.lock:jr()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ez:this.lock=_F,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:lp()?this.storage=XU:(this.memoryStorage={},this.storage=MF(this.memoryStorage)):(this.memoryStorage={},this.storage=MF(this.memoryStorage)),jr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${wx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=jr()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:r,redirectType:o}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",o),await this._saveSession(r),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return je(e)?{error:e}:{error:new Tx("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{await this._removeSession();const o=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:$n}),{data:n,error:l}=o;if(l||!n)return{data:{user:null,session:null},error:l};const a=n.session,u=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(o){if(je(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,s,r;try{await this._removeSession();let o;if("email"in e){const{email:d,password:c,options:h}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Xu(this.storage,this.storageKey)),o=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:c,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:$n})}else if("phone"in e){const{phone:d,password:c,options:h}=e;o=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:c,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(r=h==null?void 0:h.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$n})}else throw new sm("You must provide either an email or phone number and a password");const{data:n,error:l}=o;if(l||!n)return{data:{user:null,session:null},error:l};const a=n.session,u=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(o){if(je(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:o,password:n,options:l}=e;t=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:n,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:IF})}else if("phone"in e){const{phone:o,password:n,options:l}=e;t=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:n,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:IF})}else throw new sm("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Zw}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(je(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,o;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await im(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/"),{data:o,error:n}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:$n});return await Jw(this.storage,`${this.storageKey}-code-verifier`),n?{data:{user:null,session:null,redirectType:null},error:n}:!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Zw}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:n})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:r,access_token:o,nonce:n}=e,l=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:o,nonce:n,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:$n}),{data:a,error:u}=l;return u?{data:{user:null,session:null},error:u}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Zw}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:u})}catch(t){if(je(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,o,n;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Xu(this.storage,this.storageKey));const{error:c}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:c}}if("phone"in e){const{phone:l,options:a}=e,{data:u,error:d}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=a==null?void 0:a.data)!==null&&r!==void 0?r:{},create_user:(o=a==null?void 0:a.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(n=a==null?void 0:a.channel)!==null&&n!==void 0?n:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new sm("You must provide either an email or phone number.")}catch(l){if(je(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let r,o;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:n,error:l}=await Xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:$n});if(l)throw l;if(!n)throw new Error("An error occurred on token verification.");const a=n.session,u=n.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(r){if(je(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{await this._removeSession();let o=null,n=null;return this.flowType==="pkce"&&([o,n]=await Xu(this.storage,this.storageKey)),await Xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:n}),headers:this.headers,xform:$U})}catch(o){if(je(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ju;const{error:r}=await Xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(je(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:o}=e,{error:n}=await Xe(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:n}}else if("phone"in e){const{phone:s,type:r,options:o}=e,{data:n,error:l}=await Xe(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:n==null?void 0:n.message_id},error:l}}throw new sm("You must provide either an email or phone number and a type")}catch(t){if(je(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;const e=await this._acquireLock(-1,async()=>this._useSession(async t=>t));return e.data&&this.storage.isServer&&(this.insecureGetSessionWarningShown||(console.warn("Using supabase.auth.getSession() is potentially insecure as it loads data directly from the storage medium (typically cookies) which may not be authentic. Prefer using supabase.auth.getUser() instead. To suppress this warning call supabase.auth.getUser() before you call supabase.auth.getSession()."),this.insecureGetSessionWarningShown=!0)),e}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await im(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let n=e.user;delete e.user,Object.defineProperty(e,"user",{enumerable:!0,get:()=>(e.__suppressUserWarning||console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n),set:l=>{n=l}})}return{data:{session:e},error:null}}const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data&&this.storage.isServer&&(this.insecureGetSessionWarningShown=!0),t}async _getUser(e){try{return e?await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zn}):await this._useSession(async t=>{var s,r;const{data:o,error:n}=t;if(n)throw n;return await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0,xform:Zn})})}catch(t){if(je(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:o}=s;if(o)throw o;if(!r.session)throw new Ju;const n=r.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await Xu(this.storage,this.storageKey));const{data:u,error:d}=await Xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:n.access_token,xform:Zn});if(d)throw d;return n.user=u.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(s){if(je(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return AF(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ju;const t=Date.now()/1e3;let s=t,r=!0,o=null;const n=AF(e.access_token);if(n.exp&&(s=n.exp,r=s<=t),r){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(je(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:n,error:l}=t;if(l)throw l;e=(s=n.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ju;const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(je(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!jr())throw new rm("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new rm("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new FF("Not a valid PKCE flow url.");const t=Xw(window.location.href);if(e){if(!t.code)throw new FF("No code detected.");const{data:v,error:R}=await this._exchangeCodeForSession(t.code);if(R)throw R;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:v.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new rm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:r,access_token:o,refresh_token:n,expires_in:l,expires_at:a,token_type:u}=t;if(!o||!l||!n||!u)throw new rm("No session defined in URL");const d=Math.round(Date.now()/1e3),c=parseInt(l);let h=d+c;a&&(h=parseInt(a));const p=h-d;p*1e3<=Th&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${c}s`);const m=h-c;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",m,h,d);const{data:S,error:E}=await this._getUser(o);if(E)throw E;const C={provider_token:s,provider_refresh_token:r,access_token:o,expires_in:c,expires_at:h,refresh_token:n,token_type:u,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(t){if(je(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=Xw(window.location.href);return!!(jr()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Xw(window.location.href),t=await im(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:o}=t;if(o)return{error:o};const n=(s=r.session)===null||s===void 0?void 0:s.access_token;if(n){const{error:l}=await this.admin.signOut(n,e);if(l&&!(HU(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Jw(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=PU(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:o},error:n}=t;if(n)throw n;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Xu(this.storage,this.storageKey,!0));try{return await Xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(je(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(je(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async o=>{var n,l,a,u,d;const{data:c,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await Xe(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=c.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return jr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(je(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:o,error:n}=t;if(n)throw n;return await Xe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(je(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await LU(async r=>(await OU(r*200),this._debug(t,"refreshing attempt",r),await Xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$n})),(r,o,n)=>n&&n.error&&ey(n.error)&&Date.now()+(r+1)*200-s<Th)}catch(s){if(this._debug(t,"error",s),je(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),jr()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await im(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),o=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<r+PF;if(this._debug(t,`session has${o?"":" not"} expired with margin of ${PF}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:n}=await this._callRefreshToken(s.refresh_token);n&&(console.error(n),ey(n)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",n),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ju;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new rS;const{data:o,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!o.session)throw new Ju;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(r,"error",o),je(o)){const n={session:null,error:o};return ey(o)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(n),n}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],n=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(a){o.push(a)}});if(await Promise.all(n),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await Rx(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Jw(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Th);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Th);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Th}ms, refresh threshold is ${xF} ticks`),r<=xF&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Dx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,n]=await Xu(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(n)}`});r.push(l.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);r.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:o}=t;return o?{data:null,error:o}:await Xe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(je(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:o,error:n}=t;if(n)return{data:null,error:n};const{data:l,error:a}=await Xe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(je(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:o}=t;if(o)return{data:null,error:o};const{data:n,error:l}=await Xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:l})})}catch(t){if(je(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:o}=t;return o?{data:null,error:o}:await Xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(je(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:s,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:o}=e;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const n=this._decodeJWT(r.access_token);let l=null;n.aal&&(l=n.aal);let a=l;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(c=>c.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const d=n.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:d},error:null}}))}}Op.nextInstanceID=0;const iz=Op;class sz extends iz{constructor(e){super(e)}}var rz=function(i,e,t,s){function r(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(s.next(d))}catch(c){n(c)}}function a(d){try{u(s.throw(d))}catch(c){n(c)}}function u(d){d.done?o(d.value):r(d.value).then(l,a)}u((s=s.apply(i,e||[])).next())})};class oz{constructor(e,t,s){var r,o,n,l,a,u,d,c;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=yU(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const p=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,m={db:gU,realtime:mU,auth:Object.assign(Object.assign({},fU),{storageKey:p}),global:pU},S=EU(s??{},m);this.storageKey=(o=(r=S.auth)===null||r===void 0?void 0:r.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=(n=S.global)===null||n===void 0?void 0:n.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=S.auth)!==null&&a!==void 0?a:{},this.headers,(u=S.global)===null||u===void 0?void 0:u.fetch),this.fetch=wU(t,this._getAccessToken.bind(this),(d=S.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},S.realtime)),this.rest=new CD(`${h}/rest/v1`,{headers:this.headers,schema:(c=S.db)===null||c===void 0?void 0:c.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new PW(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new dU(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return rz(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:o,flowType:n,debug:l},a,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sz({url:this.authUrl,headers:Object.assign(Object.assign({},d),a),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:n,debug:l,fetch:u})}_initRealtimeClient(e){return new XW(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nz=(i,e,t)=>new oz(i,e,t),lz="https://ioyaoryfwxzeltvdlfep.supabase.co",az="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlveWFvcnlmd3h6ZWx0dmRsZmVwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTI3NDUzODMsImV4cCI6MjAyODMyMTM4M30.WQh63FoR6wNlSDCJiqDz4aQVeBIpcl6F7Wpt2Xn71Bo",bx=nz(lz,az);async function uz(){let{data:i,error:e}=await bx.from("employees").select("*");if(e)throw console.error(e),new Error("Could not get employees");return i}async function dz(i){const{data:e,error:t}=await bx.from("employees").insert([i]).select();if(t)throw console.error(t),new Error("Could not create an employee");return e}const cz="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='32px'%20height='32px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%20id='style=bulk'%3e%3cg%20id='close-circle'%3e%3cpath%20id='vector%20(Stroke)'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M1.25%2012C1.25%206.06294%206.06294%201.25%2012%201.25C17.9371%201.25%2022.75%206.06294%2022.75%2012C22.75%2017.9371%2017.9371%2022.75%2012%2022.75C6.06294%2022.75%201.25%2017.9371%201.25%2012Z'%20fill='%23317746'/%3e%3cpath%20id='vector%20(Stroke)_2'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.46967%208.46967C8.76257%208.17678%209.23744%208.17678%209.53033%208.46967L15.5303%2014.4697C15.8232%2014.7626%2015.8232%2015.2374%2015.5303%2015.5303C15.2374%2015.8232%2014.7625%2015.8232%2014.4696%2015.5303L8.46967%209.53033C8.17678%209.23743%208.17678%208.76256%208.46967%208.46967Z'%20fill='%23ffffff'/%3e%3cpath%20id='vector%20(Stroke)_3'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15.5303%208.46967C15.8232%208.76257%2015.8232%209.23744%2015.5303%209.53033L9.53033%2015.5303C9.23743%2015.8232%208.76256%2015.8232%208.46967%2015.5303C8.17678%2015.2374%208.17678%2014.7625%208.46967%2014.4696L14.4697%208.46967C14.7626%208.17678%2015.2374%208.17678%2015.5303%208.46967Z'%20fill='%23ffffff'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function hz({msg:i,duration:e=3e3}){const[t,s]=P.useState(!0);return P.useEffect(()=>{const r=setTimeout(()=>{s(!1)},e);return()=>clearTimeout(r)},[e]),t?de.jsxs("div",{style:{position:"fixed",top:"3%",right:"3%",backgroundColor:"#22c55e",color:"white",padding:"1.5rem",borderRadius:"5px",zIndex:999},children:[de.jsx("img",{style:{cursor:"pointer",position:"absolute",top:"-10px",right:"-10px"},src:cz,onClick:()=>s(!1),alt:"close"}),de.jsx("p",{children:i})]}):null}const pz=[{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"}];function gz(){var h,p,m,S,E,C,v;const[i,e]=P.useState(!1),{register:t,handleSubmit:s,reset:r,formState:o}=kB(),{errors:n}=o,l=gD(),{mutate:a,isLoading:u}=SW({mutationFn:dz,onSuccess:()=>{e(!0),l.invalidateQueries({queryKey:["employees"]}),r()},onError:R=>alert(R.message)});function d(R){a(R)}function c(R){console.log(R)}return de.jsxs("div",{className:"container mx-auto max-w-[1300px]",children:[de.jsxs("form",{className:"border-b-2 border-gray-100 pb-4",onSubmit:s(d,c),children:[de.jsxs("div",{className:"flex justify-evenly ",children:[de.jsxs("div",{className:"flex flex-col p-3",children:[de.jsx("label",{htmlFor:"FirstName",children:"First Name"}),de.jsx("input",{className:"border-2 p-1",type:"text",id:"FirstName",disabled:u,...t("FirstName",{required:"this field is required",maxLength:20,pattern:/^[A-Za-z]+$/i})}),n.FirstName&&de.jsx("p",{className:"text-red-700",children:(h=n==null?void 0:n.FirstName)==null?void 0:h.message}),de.jsx("label",{htmlFor:"LastName",children:"Last Name"}),de.jsx("input",{className:"border-2 p-1",type:"text",id:"LastName",disabled:u,...t("LastName",{required:"this field is required",maxLength:20,pattern:/^[A-Za-z]+$/i})}),n.LastName&&de.jsx("p",{className:"text-red-700",children:(p=n==null?void 0:n.LastName)==null?void 0:p.message})]}),de.jsxs("div",{className:"flex flex-col p-3",children:[de.jsx("label",{htmlFor:"StartDate",children:"Start Date"}),de.jsx("input",{className:"border-2 p-1",type:"datetime-local",id:"StartDate",disabled:u,...t("StartDate",{required:"Fill in your start date"})}),n.StartDate&&de.jsx("p",{className:"text-red-700",children:(m=n==null?void 0:n.StartDate)==null?void 0:m.message}),de.jsx("label",{htmlFor:"Department",children:"Department"}),de.jsxs("select",{className:"border-2 p-1",id:"Department",...t("Department"),children:[de.jsx("option",{value:"sales",children:"Sales"}),de.jsx("option",{value:"marketing",children:"Marketing"}),de.jsx("option",{value:"humanResources",children:"Human resources"}),de.jsx("option",{value:"engineering",children:"Engineering"}),de.jsx("option",{value:"legal",children:"Legal"})]})]}),de.jsxs("div",{className:"flex flex-col p-3",children:[de.jsx("label",{htmlFor:"dob",children:"Date of Birth"}),de.jsx("input",{className:"border-2 p-1",type:"datetime-local",id:"dob",...t("dob",{required:"Fill in your date of Birth"})}),n.dob&&de.jsx("p",{className:"text-red-700",children:(S=n==null?void 0:n.dob)==null?void 0:S.message})]}),de.jsxs("div",{className:"flex flex-col p-3",children:[de.jsx("label",{htmlFor:"Street",children:"Street"}),de.jsx("input",{className:"border-2 p-1",type:"text",id:"Street",...t("Street",{required:"Fill in your street"})}),n.Street&&de.jsx("p",{className:"text-red-700",children:(E=n==null?void 0:n.Street)==null?void 0:E.message}),de.jsx("label",{htmlFor:"City",children:"City"}),de.jsx("input",{className:"border-2 p-1",type:"text",id:"City",...t("City",{required:"Fill in your City"})}),n.City&&de.jsx("p",{className:"text-red-700",children:(C=n==null?void 0:n.City)==null?void 0:C.message})]}),de.jsxs("div",{className:"flex flex-col p-3",children:[de.jsx("label",{htmlFor:"State",children:"State"}),de.jsx("select",{className:"border-2 p-1",id:"State",...t("State"),children:pz.map(R=>de.jsx("option",{value:R.value,children:R.label},R.value))}),de.jsx("label",{htmlFor:"ZipCode",children:"Zip Code"}),de.jsx("input",{className:"border-2 p-1",type:"number",id:"ZipCode",...t("ZipCode",{required:"This field is required"})}),n.ZipCode&&de.jsx("p",{className:"text-red-700",children:(v=n==null?void 0:n.ZipCode)==null?void 0:v.message})]})]}),de.jsx("input",{className:"mx-auto block bg-green-50 hover:bg-green-500 text-green-700 font-bold hover:text-white py-2 px-8 border-2 border-green-500 hover:border-transparent rounded",type:"submit",disabled:u})]}),i&&de.jsx(hz,{msg:"new Employee created"})]})}var yD=Object.defineProperty,fz=Object.defineProperties,mz=Object.getOwnPropertyDescriptor,Cz=Object.getOwnPropertyDescriptors,LC=Object.getOwnPropertySymbols,Px=Object.prototype.hasOwnProperty,Ax=Object.prototype.propertyIsEnumerable,NF=(i,e,t)=>e in i?yD(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,he=(i,e)=>{for(var t in e||(e={}))Px.call(e,t)&&NF(i,t,e[t]);if(LC)for(var t of LC(e))Ax.call(e,t)&&NF(i,t,e[t]);return i},Pt=(i,e)=>fz(i,Cz(e)),vz=(i,e)=>{var t={};for(var s in i)Px.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&LC)for(var s of LC(i))e.indexOf(s)<0&&Ax.call(i,s)&&(t[s]=i[s]);return t},Mi=(i,e)=>{for(var t in e)yD(i,t,{get:e[t],enumerable:!0})},g=(i,e,t,s)=>{for(var r=s>1?void 0:s?mz(e,t):e,o=i.length-1,n;o>=0;o--)(n=i[o])&&(r=(s?n(e,t,r):n(r))||r);return s&&r&&yD(e,t,r),r},io=(i,e)=>(t,s)=>e(t,s,i),Fx={};Mi(Fx,{attrToBoolean:()=>IC,attrToNumber:()=>Rl,attrToString:()=>Sz,defaultComparator:()=>wz,exists:()=>V,jsonEquals:()=>tR,makeNull:()=>Wo,missing:()=>Se,missingOrEmpty:()=>Zs,toStringOrNull:()=>Lp,values:()=>Oa});function Wo(i){return i==null||i===""?null:i}function V(i,e=!1){return i!=null&&(i!==""||e)}function Se(i){return!V(i)}function Zs(i){return i==null||i.length===0}function Lp(i){return i!=null&&typeof i.toString=="function"?i.toString():null}function Rl(i){if(i===void 0)return;if(i===null||i==="")return null;if(typeof i=="number")return isNaN(i)?void 0:i;const e=parseInt(i,10);return isNaN(e)?void 0:e}function IC(i){if(i!==void 0)return i===null||i===""?!1:typeof i=="boolean"?i:/true/i.test(i)}function Sz(i){if(!(i==null||i===""))return i}function tR(i,e){const t=i?JSON.stringify(i):null,s=e?JSON.stringify(e):null;return t===s}function wz(i,e,t=!1){const s=i==null,r=e==null;if(i&&i.toNumber&&(i=i.toNumber()),e&&e.toNumber&&(e=e.toNumber()),s&&r)return 0;if(s)return-1;if(r)return 1;function o(n,l){return n>l?1:n<l?-1:0}if(typeof i!="string"||!t)return o(i,e);try{return i.localeCompare(e)}catch{return o(i,e)}}function Oa(i){if(i instanceof Set||i instanceof Map){const e=[];return i.forEach(t=>e.push(t)),e}return Object.values(i)}var yz=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Lp(e);let s=0;for(;;){let r;if(e?(r=e,s!==0&&(r+="_"+s)):t?(r=t,s!==0&&(r+="_"+s)):r=s,!this.existingKeys[r])return this.existingKeys[r]=!0,String(r);s++}}},Ox={};Mi(Ox,{cloneObject:()=>ED,deepCloneDefinition:()=>MC,getAllValuesInObject:()=>Al,getValueUsingField:()=>xd,isNonNullObject:()=>xC,iterateObject:()=>$i,mergeDeep:()=>sr,removeAllReferences:()=>Lx});function $i(i,e){if(i!=null){if(Array.isArray(i)){for(let t=0;t<i.length;t++)e(t.toString(),i[t]);return}for(const[t,s]of Object.entries(i))e(t,s)}}function ED(i){const e={},t=Object.keys(i);for(let s=0;s<t.length;s++){const r=t[s],o=i[r];e[r]=o}return e}function MC(i,e){if(!i)return;const t=i,s={};return Object.keys(t).forEach(r=>{if(e&&e.indexOf(r)>=0)return;const o=t[r];xC(o)&&o.constructor===Object?s[r]=MC(o):s[r]=o}),s}function Al(i){if(!i)return[];const e=Object;if(typeof e.values=="function")return e.values(i);const t=[];for(const s in i)i.hasOwnProperty(s)&&i.propertyIsEnumerable(s)&&t.push(i[s]);return t}function sr(i,e,t=!0,s=!1){V(e)&&$i(e,(r,o)=>{let n=i[r];n!==o&&(s&&n==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(n={},i[r]=n),xC(o)&&xC(n)&&!Array.isArray(n)?sr(n,o,t,s):(t||o!==void 0)&&(i[r]=o))})}function xd(i,e,t){if(!e||!i)return;if(!t)return i[e];const s=e.split(".");let r=i;for(let o=0;o<s.length;o++){if(r==null)return;r=r[s[o]]}return r}function Lx(i,e=[],t){Object.keys(i).forEach(n=>{typeof i[n]=="object"&&!e.includes(n)&&(i[n]=void 0)});const s=Object.getPrototypeOf(i),r={},o=n=>`AG Grid: Grid API function ${n}() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`;Object.getOwnPropertyNames(s).forEach(n=>{if(typeof s[n]=="function"&&!e.includes(n)){const a=()=>{console.warn(o(n))};r[n]={value:a,writable:!0}}}),Object.defineProperties(i,r)}function xC(i){return typeof i=="object"&&i!==null}var Ix={};Mi(Ix,{compose:()=>Ez,debounce:()=>os,doOnce:()=>La,errorOnce:()=>fa,executeAfter:()=>xx,executeInAWhile:()=>Mx,executeNextVMTurn:()=>iR,getFunctionName:()=>oS,isFunction:()=>nS,noop:()=>Rz,throttle:()=>sR,waitUntil:()=>RD,warnOnce:()=>Ce});var GF={};function La(i,e){GF[e]||(i(),GF[e]=!0)}function Ce(i){La(()=>console.warn("AG Grid: "+i),i)}function fa(i){La(()=>console.error("AG Grid: "+i),i)}function oS(i){if(i.name)return i.name;const e=/function\s+([^\(]+)/.exec(i.toString());return e&&e.length===2?e[1].trim():null}function nS(i){return!!(i&&i.constructor&&i.call&&i.apply)}function Mx(i){xx(i,400)}var ty=[],iy=!1;function iR(i){ty.push(i),!iy&&(iy=!0,window.setTimeout(()=>{const e=ty.slice();ty.length=0,iy=!1,e.forEach(t=>t())},0))}function xx(i,e=0){i.length>0&&window.setTimeout(()=>i.forEach(t=>t()),e)}function os(i,e){let t;return function(...s){const r=this;window.clearTimeout(t),t=window.setTimeout(function(){i.apply(r,s)},e)}}function sR(i,e){let t=0;return function(...s){const r=this,o=new Date().getTime();o-t<e||(t=o,i.apply(r,s))}}function RD(i,e,t=100,s){const r=new Date().getTime();let o=null,n=!1;const l=()=>{const a=new Date().getTime()-r>t;(i()||a)&&(e(),n=!0,o!=null&&(window.clearInterval(o),o=null),a&&s&&console.warn(s))};l(),n||(o=window.setInterval(l,10))}function Ez(...i){return e=>i.reduce((t,s)=>s(t),e)}var Rz=()=>{},_x=(i=>(i.CommunityCoreModule="@ag-grid-community/core",i.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",i.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",i.CsvExportModule="@ag-grid-community/csv-export",i.EnterpriseCoreModule="@ag-grid-enterprise/core",i.RowGroupingModule="@ag-grid-enterprise/row-grouping",i.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",i.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",i.MenuModule="@ag-grid-enterprise/menu",i.SetFilterModule="@ag-grid-enterprise/set-filter",i.MultiFilterModule="@ag-grid-enterprise/multi-filter",i.StatusBarModule="@ag-grid-enterprise/status-bar",i.SideBarModule="@ag-grid-enterprise/side-bar",i.RangeSelectionModule="@ag-grid-enterprise/range-selection",i.MasterDetailModule="@ag-grid-enterprise/master-detail",i.RichSelectModule="@ag-grid-enterprise/rich-select",i.GridChartsModule="@ag-grid-enterprise/charts",i.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",i.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",i.ExcelExportModule="@ag-grid-enterprise/excel-export",i.ClipboardModule="@ag-grid-enterprise/clipboard",i.SparklinesModule="@ag-grid-enterprise/sparklines",i.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",i.AngularModule="@ag-grid-community/angular",i.ReactModule="@ag-grid-community/react",i.VueModule="@ag-grid-community/vue",i))(_x||{}),lS=class ot{static register(e){ot.__register(e,!0,void 0)}static registerModules(e){ot.__registerModules(e,!0,void 0)}static __register(e,t,s){ot.runVersionChecks(e),s!==void 0?(ot.areGridScopedModules=!0,ot.gridModulesMap[s]===void 0&&(ot.gridModulesMap[s]={}),ot.gridModulesMap[s][e.moduleName]=e):ot.globalModulesMap[e.moduleName]=e,ot.setModuleBased(t)}static __unRegisterGridModules(e){delete ot.gridModulesMap[e]}static __registerModules(e,t,s){ot.setModuleBased(t),e&&e.forEach(r=>ot.__register(r,t,s))}static isValidModuleVersion(e){const[t,s]=e.version.split(".")||[],[r,o]=ot.currentModuleVersion.split(".")||[];return t===r&&s===o}static runVersionChecks(e){if(ot.currentModuleVersion||(ot.currentModuleVersion=e.version),e.version?ot.isValidModuleVersion(e)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is version ${e.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is incompatible. Please update all modules to the same version.`),e.validate){const t=e.validate();t.isValid||console.error(`AG Grid: ${t.message}`)}}static setModuleBased(e){ot.moduleBased===void 0?ot.moduleBased=e:ot.moduleBased!==e&&La(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){ot.isBundled=!0}static __assertRegistered(e,t,s){var r;if(this.__isRegistered(e,s))return!0;const o=t+e;let n;if(ot.isBundled)n=`AG Grid: unable to use ${t} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(ot.moduleBased||ot.moduleBased===void 0){let l=(r=Object.entries(_x).find(([a,u])=>u===e))==null?void 0:r[0];n=`AG Grid: unable to use ${t} as the ${l} is not registered${ot.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${l} } from '${e}';
    
    ModuleRegistry.registerModules([ ${l} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${t} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';
            
For more info see: https://www.ag-grid.com/javascript-grid/packages/`;return La(()=>{console.warn(n)},o),!1}static __warnEnterpriseChartDisabled(e){const s="ag-charts-enterprise"+":"+e,o=`AG Grid: the '${e}' chart type is not supported in AG Charts Community as 'ag-grid-charts-enterprise' or '@ag-grid-enterprise/charts-enterprise' hasn't been loaded. See https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/ for more details.`;La(()=>{console.warn(o)},s)}static __isRegistered(e,t){var s;return!!ot.globalModulesMap[e]||!!((s=ot.gridModulesMap[t])!=null&&s[e])}static __getRegisteredModules(e){return[...Oa(ot.globalModulesMap),...Oa(ot.gridModulesMap[e]||{})]}static __getGridRegisteredModules(e){var t;return Oa((t=ot.gridModulesMap[e])!=null?t:{})||[]}static __isPackageBased(){return!ot.moduleBased}};lS.globalModulesMap={};lS.gridModulesMap={};lS.areGridScopedModules=!1;var et=lS,Tz=class{constructor(i,e){if(this.beanWrappers={},this.destroyed=!1,!i||!i.beanClasses)return;this.contextParams=i,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();const t=this.getBeanInstances();this.wireBeans(t),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return Oa(this.beanWrappers).map(i=>i.beanInstance)}createBean(i,e){if(!i)throw Error("Can't wire to bean since it is null");return this.wireBeans([i],e),i}wireBeans(i,e){this.autoWireBeans(i),this.methodWireBeans(i),this.callLifeCycleMethods(i,"preConstructMethods"),V(e)&&i.forEach(e),this.callLifeCycleMethods(i,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),$i(this.beanWrappers,(e,t)=>{let s;t.bean.__agBeanMetaData&&t.bean.__agBeanMetaData.autowireMethods&&t.bean.__agBeanMetaData.autowireMethods.agConstructor&&(s=t.bean.__agBeanMetaData.autowireMethods.agConstructor);const r=this.getBeansForParameters(s,t.bean.name),o=new(t.bean.bind.apply(t.bean,[null,...r]));t.beanInstance=o});const i=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${i}`)}createBeanWrapper(i){const e=i.__agBeanMetaData;if(!e){let s;i.prototype.constructor?s=oS(i.prototype.constructor):s=""+i,console.error(`Context item ${s} is not a bean`);return}const t={bean:i,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=t}autoWireBeans(i){i.forEach(e=>{this.forEachMetaDataInHierarchy(e,(t,s)=>{const r=t.agClassAttributes;r&&r.forEach(o=>{const n=this.lookupBeanInstance(s,o.beanName,o.optional);e[o.attributeName]=n})})})}methodWireBeans(i){i.forEach(e=>{this.forEachMetaDataInHierarchy(e,(t,s)=>{$i(t.autowireMethods,(r,o)=>{if(r==="agConstructor")return;const n=this.getBeansForParameters(o,s);e[r].apply(e,n)})})})}forEachMetaDataInHierarchy(i,e){let t=Object.getPrototypeOf(i);for(;t!=null;){const s=t.constructor;if(s.hasOwnProperty("__agBeanMetaData")){const r=s.__agBeanMetaData,o=this.getBeanName(s);e(r,o)}t=Object.getPrototypeOf(t)}}getBeanName(i){if(i.__agBeanMetaData&&i.__agBeanMetaData.beanName)return i.__agBeanMetaData.beanName;const e=i.toString();return e.substring(9,e.indexOf("("))}getBeansForParameters(i,e){const t=[];return i&&$i(i,(s,r)=>{const o=this.lookupBeanInstance(e,r);t[Number(s)]=o}),t}lookupBeanInstance(i,e,t=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${e} is used after the grid is destroyed!`),null;if(e==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];const s=this.beanWrappers[e];return s?s.beanInstance:(t||console.error(`AG Grid: unable to find bean reference ${e} while initialising ${i}`),null)}callLifeCycleMethods(i,e){i.forEach(t=>this.callLifeCycleMethodsOnBean(t,e))}callLifeCycleMethodsOnBean(i,e,t){const s={};this.forEachMetaDataInHierarchy(i,o=>{const n=o[e];n&&n.forEach(l=>{l!=t&&(s[l]=!0)})}),Object.keys(s).forEach(o=>i[o]())}getBean(i){return this.lookupBeanInstance("getBean",i,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");const i=this.getBeanInstances();this.destroyBeans(i),this.contextParams.providedBeanInstances=null,et.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(i){i&&this.destroyBeans([i])}destroyBeans(i){return i?(i.forEach(e=>{this.callLifeCycleMethodsOnBean(e,"preDestroyMethods","destroy");const t=e;typeof t.destroy=="function"&&t.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function Nx(i,e,t){const s=Xa(i.constructor);s.preConstructMethods||(s.preConstructMethods=[]),s.preConstructMethods.push(e)}function z(i,e,t){const s=Xa(i.constructor);s.postConstructMethods||(s.postConstructMethods=[]),s.postConstructMethods.push(e)}function ps(i,e,t){const s=Xa(i.constructor);s.preDestroyMethods||(s.preDestroyMethods=[]),s.preDestroyMethods.push(e)}function te(i){return e=>{const t=Xa(e);t.beanName=i}}function T(i){return(e,t,s)=>{Gx(e,i,!1,e,t,null)}}function qe(i){return(e,t,s)=>{Gx(e,i,!0,e,t,null)}}function Gx(i,e,t,s,r,o){if(e===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof o=="number"){console.error("AG Grid: Autowired should be on an attribute");return}const n=Xa(i.constructor);n.agClassAttributes||(n.agClassAttributes=[]),n.agClassAttributes.push({attributeName:r,beanName:e,optional:t})}function Fr(i){return(e,t,s)=>{const r=typeof e=="function"?e:e.constructor;let o;if(typeof s=="number"){let n;t?(o=Xa(r),n=t):(o=Xa(r),n="agConstructor"),o.autowireMethods||(o.autowireMethods={}),o.autowireMethods[n]||(o.autowireMethods[n]={}),o.autowireMethods[n][s]=i}}}function Xa(i){return i.hasOwnProperty("__agBeanMetaData")||(i.__agBeanMetaData={}),i.__agBeanMetaData}var go=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(e,t,s=null,r=null){if(this.frameworkOverrides=t,this.gridOptionsService=e,s){const o=e.useAsyncEvents();this.addGlobalListener(s,o)}r&&this.addGlobalListener(r,!1)}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,s){const r=t?this.allAsyncListeners:this.allSyncListeners;let o=r.get(e);return!o&&s&&(o=new Set,r.set(e,o)),o}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,s=!1){this.getListeners(e,s,!0).add(t)}removeEventListener(e,t,s=!1){const r=this.getListeners(e,s,!1);r&&(r.delete(t),r.size===0&&(s?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.gridOptionsService&&this.gridOptionsService.addGridCommonParams(t),this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var s;const r=e.type;if(t&&"event"in e){const u=e.event;u instanceof Event&&(e.eventPath=u.composedPath())}const o=(u,d)=>u.forEach(c=>{if(!d.has(c))return;const h=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(h):h()}),n=(s=this.getListeners(r,t,!1))!=null?s:new Set,l=new Set(n);l.size>0&&o(l,n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(u=>{const d=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>u(r,e)):()=>u(r,e);t?this.dispatchAsync(d):d()})}dispatchAsync(e){this.asyncFunctionsQueue.push(e),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};g([io(0,Fr("gridOptionsService")),io(1,Fr("frameworkOverrides")),io(2,Fr("globalEventListener")),io(3,Fr("globalSyncEventListener"))],go.prototype,"setBeans",1);go=g([te("eventService")],go);var TD=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=s=>{this.frameworkOverrides.wrapOutgoing(()=>e(s))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(s,r)=>{this.frameworkOverrides.wrapOutgoing(()=>e(s,r))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){var t;return(t=this.wrappedListeners.get(e))!=null?t:e}unwrapGlobal(e){var t;return(t=this.wrappedGlobalListeners.get(e))!=null?t:e}},Dz={resizable:!0,sortable:!0},bz=0;function kx(){return bz++}var li=class Vx{constructor(e,t,s,r){this.instanceId=kx(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new go,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=s,this.primary=r,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=e.sortIndex,s=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):s!==null&&(this.sortIndex=s);const r=e.hide,o=e.initialHide;r!==void 0?this.visible=!r:this.visible=!o,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const n=e.flex,l=e.initialFlex;n!==void 0?this.flex=n:l!==void 0&&(this.flex=l)}setColDef(e,t,s){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",s))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gridOptionsService.get("suppressFieldDotNotation");this.fieldContainsDots=V(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=V(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(e),this.maxWidth=this.columnUtils.calculateColMaxWidth(e)}initTooltip(){this.tooltipEnabled=V(this.colDef.tooltipField)||V(this.colDef.tooltipValueGetter)||V(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Se(this.colDef)||Se(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,s=this.colDef.showRowGroup===e;return t||s}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,t){var s,r;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new TD(this.frameworkOverrides));const o=(r=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(t))!=null?r:t;this.eventService.addEventListener(e,o)}removeEventListener(e,t){var s,r;const o=(r=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(t))!=null?r:t;this.eventService.removeEventListener(e,o)}createColumnFunctionCallbackParams(e){return this.gridOptionsService.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),s=this.colDef.suppressNavigable;return s(t)}return!1}isCellEditable(e){return e.group&&!this.gridOptionsService.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var t;return(t=this.colDef[e])!=null?t:Dz[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const s=this.createColumnFunctionCallbackParams(e);return t(s)}return!1}setMoving(e,t){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gridOptionsService.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Se(this.sort)}isSorting(){return V(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,s){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const r=this.createColumnEvent("filterChanged",t);s&&sr(r,s),this.eventService.dispatchEvent(r)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const s=e===!0;this.visible!==s&&(this.visible=s,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let s=!0;for(;e;){if(!e.isPadding()){s=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:s}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gridOptionsService.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Se(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),s=this.colDef.colSpan(t);return Math.max(s,1)}getRowSpan(e){if(Se(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),s=this.colDef.rowSpan(t);return Math.max(s,1)}setActualWidth(e,t,s=!1){this.minWidth!=null&&(e=Math.max(e,this.minWidth)),this.maxWidth!=null&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),s||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return this.maxWidth!=null?e>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){V(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(e){Ce("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let t=this.getColDef().menuTabs;return t==null&&(t=e),t}dispatchStateUpdatedEvent(e){this.eventService.dispatchEvent({type:Vx.EVENT_STATE_UPDATED,key:e})}};li.EVENT_MOVING_CHANGED="movingChanged";li.EVENT_LEFT_CHANGED="leftChanged";li.EVENT_WIDTH_CHANGED="widthChanged";li.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";li.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";li.EVENT_VISIBLE_CHANGED="visibleChanged";li.EVENT_FILTER_CHANGED="filterChanged";li.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";li.EVENT_SORT_CHANGED="sortChanged";li.EVENT_COL_DEF_CHANGED="colDefChanged";li.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";li.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";li.EVENT_PIVOT_CHANGED="columnPivotChanged";li.EVENT_VALUE_CHANGED="columnValueChanged";li.EVENT_STATE_UPDATED="columnStateUpdated";g([T("gridOptionsService")],li.prototype,"gridOptionsService",2);g([T("columnUtils")],li.prototype,"columnUtils",2);g([T("columnHoverService")],li.prototype,"columnHoverService",2);g([T("frameworkOverrides")],li.prototype,"frameworkOverrides",2);g([z],li.prototype,"initialise",1);var ut=li,aS=class Mh{constructor(e,t,s,r){this.localEventService=new go,this.expandable=!1,this.instanceId=kx(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=s,this.level=r}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e;const t={type:Mh.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(t)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{t instanceof ut?e.push(t):t instanceof Mh&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,s=!1;const r=this.findChildrenRemovingPadding();for(let n=0,l=r.length;n<l;n++){const a=r[n];if(!a.isVisible())continue;const u=a.getColumnGroupShow();u==="open"?(e=!0,s=!0):u==="closed"?(t=!0,s=!0):(e=!0,t=!0)}const o=e&&t&&s;if(this.expandable!==o){this.expandable=o;const n={type:Mh.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(n)}}findChildrenRemovingPadding(){const e=[],t=s=>{s.forEach(r=>{r instanceof Mh&&r.isPadding()?t(r.children):e.push(r)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}};aS.EVENT_EXPANDED_CHANGED="expandedChanged";aS.EVENT_EXPANDABLE_CHANGED="expandableChanged";g([ps],aS.prototype,"destroy",1);var Xt=aS,Pz={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},Hx={};Mi(Hx,{addSafePassiveEventListener:()=>Qx,createEventPath:()=>Yx,getCtrlForEventTarget:()=>_C,getEventPath:()=>qx,isElementInEventPath:()=>NC,isEventSupported:()=>bD,isStopPropagationForAgGrid:()=>co,stopPropagationForAgGrid:()=>fo});var Bx={};Mi(Bx,{areEqual:()=>ko,existsAndNotEmpty:()=>Wx,flatten:()=>Kx,forEachReverse:()=>Lz,includes:()=>ar,insertArrayIntoArray:()=>rR,insertIntoArray:()=>Ip,last:()=>Je,moveInArray:()=>oR,pushAll:()=>nR,removeAllFromArray:()=>$x,removeAllFromUnorderedArray:()=>zx,removeFromArray:()=>Ds,removeFromUnorderedArray:()=>DD,removeRepeatsFromArray:()=>Fz,shallowCompare:()=>Az,sortNumerically:()=>Ux,toStrings:()=>Oz});function Wx(i){return i!=null&&i.length>0}function Je(i){if(!(!i||!i.length))return i[i.length-1]}function ko(i,e,t){return i==null&&e==null?!0:i!=null&&e!=null&&i.length===e.length&&i.every((s,r)=>t?t(s,e[r]):e[r]===s)}function Az(i,e){return ko(i,e)}function Ux(i){return i.sort((e,t)=>e-t)}function Fz(i,e){if(i)for(let t=i.length-2;t>=0;t--){const s=i[t]===e,r=i[t+1]===e;s&&r&&i.splice(t+1,1)}}function DD(i,e){const t=i.indexOf(e);t>=0&&(i[t]=i[i.length-1],i.pop())}function Ds(i,e){const t=i.indexOf(e);t>=0&&i.splice(t,1)}function zx(i,e){for(let t=0;t<e.length;t++)DD(i,e[t])}function $x(i,e){for(let t=0;t<e.length;t++)Ds(i,e[t])}function Ip(i,e,t){i.splice(t,0,e)}function rR(i,e,t){if(!(i==null||e==null))for(let s=e.length-1;s>=0;s--){const r=e[s];Ip(i,r,t)}}function oR(i,e,t){$x(i,e),e.slice().reverse().forEach(s=>Ip(i,s,t))}function ar(i,e){return i.indexOf(e)>-1}function Kx(i){return[].concat.apply([],i)}function nR(i,e){e==null||i==null||e.forEach(t=>i.push(t))}function Oz(i){return i.map(Lp)}function Lz(i,e){if(i!=null)for(let t=i.length-1;t>=0;t--)e(i[t],t)}var jx="__ag_Grid_Stop_Propagation",Iz=["touchstart","touchend","touchmove","touchcancel","scroll"],sy={};function fo(i){i[jx]=!0}function co(i){return i[jx]===!0}var bD=(()=>{const i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if(typeof sy[t]=="boolean")return sy[t];const s=document.createElement(i[t]||"div");return t="on"+t,sy[t]=t in s}})();function _C(i,e,t){let s=e;for(;s;){const r=i.getDomData(s,t);if(r)return r;s=s.parentElement}return null}function NC(i,e){return!e||!i?!1:qx(e).indexOf(i)>=0}function Yx(i){const e=[];let t=i.target;for(;t;)e.push(t),t=t.parentElement;return e}function qx(i){const e=i;return e.path?e.path:e.composedPath?e.composedPath():Yx(e)}function Qx(i,e,t,s){const o=ar(Iz,t)?{passive:!0}:void 0;i&&i.addEventListener&&i.addEventListener(e,t,s,o)}var An=class Xx{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){this.destroyFunctions.forEach(e=>e()),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:Xx.EVENT_DESTROYED})}addEventListener(e,t){this.localEventService||(this.localEventService=new go),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,t,s){if(this.destroyed)return;e instanceof HTMLElement?Qx(this.getFrameworkOverrides(),e,t,s):e.addEventListener(t,s);const r=()=>(e.removeEventListener(t,s),this.destroyFunctions=this.destroyFunctions.filter(o=>o!==r),null);return this.destroyFunctions.push(r),r}setupGridOptionListener(e,t){this.gridOptionsService.addEventListener(e,t);const s=()=>(this.gridOptionsService.removeEventListener(e,t),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==s),null);return this.destroyFunctions.push(s),s}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const s=e.join("-")+this.propertyListenerId++,r=o=>{if(o.changeSet){if(o.changeSet&&o.changeSet.id===this.lastChangeSetIdLookup[s])return;this.lastChangeSetIdLookup[s]=o.changeSet.id}const n={type:"gridPropertyChanged",changeSet:o.changeSet,source:o.source};t(n)};e.forEach(o=>this.setupGridOptionListener(o,r))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const s=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),s}createBean(e,t,s){return(t||this.getContext()).createBean(e,s)}destroyBean(e,t){return(t||this.getContext()).destroyBean(e)}destroyBeans(e,t){return e&&e.forEach(s=>this.destroyBean(s,t)),[]}};An.EVENT_DESTROYED="destroyed";g([T("frameworkOverrides")],An.prototype,"frameworkOverrides",2);g([T("context")],An.prototype,"context",2);g([T("eventService")],An.prototype,"eventService",2);g([T("gridOptionsService")],An.prototype,"gridOptionsService",2);g([T("localeService")],An.prototype,"localeService",2);g([T("environment")],An.prototype,"environment",2);g([ps],An.prototype,"destroy",1);var W=An,hc=class extends W{setBeans(e){this.logger=e.create("ColumnFactory")}createColumnTree(e,t,s,r){const o=new yz,{existingCols:n,existingGroups:l,existingColKeys:a}=this.extractExistingTreeData(s);o.addExistingKeys(a);const u=this.recursivelyCreateColumns(e,0,t,n,o,l,r),d=this.findMaxDept(u,0);this.logger.log("Number of levels for grouped columns is "+d);const c=this.balanceColumnTree(u,0,d,o),h=(p,m)=>{p instanceof Xt&&p.setupExpandable(),p.setOriginalParent(m)};return this.columnUtils.depthFirstOriginalTreeSearch(null,c,h),{columnTree:c,treeDept:d}}extractExistingTreeData(e){const t=[],s=[],r=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,o=>{if(o instanceof Xt){const n=o;s.push(n)}else{const n=o;r.push(n.getId()),t.push(n)}}),{existingCols:t,existingGroups:s,existingColKeys:r}}createForAutoGroups(e,t){return e.map(s=>this.createAutoGroupTreeItem(t,s))}createAutoGroupTreeItem(e,t){const s=this.findDepth(e);let r=t;for(let o=s-1;o>=0;o--){const n=new Xt(null,`FAKE_PATH_${t.getId()}}_${o}`,!0,o);this.createBean(n),n.setChildren([r]),r.setOriginalParent(n),r=n}return s===0&&t.setOriginalParent(null),r}findDepth(e){let t=0,s=e;for(;s&&s[0]&&s[0]instanceof Xt;)t++,s=s[0].getChildren();return t}balanceColumnTree(e,t,s,r){const o=[];for(let n=0;n<e.length;n++){const l=e[n];if(l instanceof Xt){const a=l,u=this.balanceColumnTree(a.getChildren(),t+1,s,r);a.setChildren(u),o.push(a)}else{let a,u;for(let d=s-1;d>=t;d--){const c=r.getUniqueKey(null,null),h=this.createMergedColGroupDef(null),p=new Xt(h,c,!0,t);this.createBean(p),u&&u.setChildren([p]),u=p,a||(a=u)}if(a&&u)if(o.push(a),e.some(c=>c instanceof Xt)){u.setChildren([l]);continue}else{u.setChildren(e);break}o.push(l)}}return o}findMaxDept(e,t){let s=t;for(let r=0;r<e.length;r++){const o=e[r];if(o instanceof Xt){const n=o,l=this.findMaxDept(n.getChildren(),t+1);s<l&&(s=l)}}return s}recursivelyCreateColumns(e,t,s,r,o,n,l){if(!e)return[];const a=new Array(e.length);for(let u=0;u<a.length;u++){const d=e[u];this.isColumnGroup(d)?a[u]=this.createColumnGroup(s,d,t,r,o,n,l):a[u]=this.createColumn(s,d,r,o,l)}return a}createColumnGroup(e,t,s,r,o,n,l){const a=this.createMergedColGroupDef(t),u=o.getUniqueKey(a.groupId||null,null),d=new Xt(a,u,!1,s);this.createBean(d);const c=this.findExistingGroup(t,n);c&&n.splice(c.idx,1);let h=c==null?void 0:c.group;h&&d.setExpanded(h.isExpanded());const p=this.recursivelyCreateColumns(a.children,s+1,e,r,o,n,l);return d.setChildren(p),d}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,s,r,o){const n=this.findExistingColumn(t,s);n&&(s==null||s.splice(n.idx,1));let l=n==null?void 0:n.column;if(l){const a=this.addColumnDefaultAndTypes(t,l.getColId());l.setColDef(a,t,o),this.applyColumnState(l,a,o)}else{const a=r.getUniqueKey(t.colId,t.field),u=this.addColumnDefaultAndTypes(t,a);l=new ut(u,t,a,e),this.context.createBean(l)}return this.dataTypeService.addColumnListeners(l),l}applyColumnState(e,t,s){const r=Rl(t.flex);if(r!==void 0&&e.setFlex(r),e.getFlex()<=0){const a=Rl(t.width);if(a!=null)e.setActualWidth(a,s);else{const u=e.getActualWidth();e.setActualWidth(u,s)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,s):e.setSort(void 0,s));const n=Rl(t.sortIndex);n!==void 0&&e.setSortIndex(n);const l=IC(t.hide);l!==void 0&&e.setVisible(!l,s),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let s=0;s<t.length;s++){const r=t[s].getUserProvidedColDef();if(!r)continue;if(e.colId!=null){if(t[s].getId()===e.colId)return{idx:s,column:t[s]};continue}if(e.field!=null){if(r.field===e.field)return{idx:s,column:t[s]};continue}if(r===e)return{idx:s,column:t[s]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let r=0;r<t.length;r++){const o=t[r];if(o.getColGroupDef()&&o.getId()===e.groupId)return{idx:r,group:o}}}addColumnDefaultAndTypes(e,t){const s={},r=this.gridOptionsService.get("defaultColDef");sr(s,r,!1,!0);const o=this.dataTypeService.updateColDefAndGetColumnType(s,e,t);o&&this.assignColumnTypes(o,s),sr(s,e,!1,!0);const n=this.gridOptionsService.get("autoGroupColumnDef"),l=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&n&&l&&sr(s,{sort:n.sort,initialSort:n.initialSort},!1,!0),this.dataTypeService.validateColDef(s),s}assignColumnTypes(e,t){if(!e.length)return;const s=Object.assign({},Pz),r=this.gridOptionsService.get("columnTypes")||{};$i(r,(o,n)=>{o in s?console.warn(`AG Grid: the column type '${o}' is a default column type and cannot be overridden.`):(n.type&&Ce("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),s[o]=n)}),e.forEach(o=>{const n=s[o.trim()];n?sr(t,n,!1,!0):console.warn("AG Grid: colDef.type '"+o+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};g([T("columnUtils")],hc.prototype,"columnUtils",2);g([T("dataTypeService")],hc.prototype,"dataTypeService",2);g([io(0,Fr("loggerFactory"))],hc.prototype,"setBeans",1);hc=g([te("columnFactory")],hc);var uS=class Ro{constructor(e,t,s,r){this.displayedChildren=[],this.localEventService=new go,this.groupId=t,this.partId=s,this.providedColumnGroup=e,this.pinned=r}static createUniqueId(e,t){return e+"_"+t}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return Ro.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof Ro&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.get("enableRtl")){const t=Je(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(Ro.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let t=!1;return this.children.forEach(s=>{e===s&&(t=!0),s instanceof Ro&&s.isChildInThisGroupDeepSearch(e)&&(t=!0)}),t}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{t instanceof ut?e.push(t):t instanceof Ro&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{t instanceof ut?e.push(t):t instanceof Ro&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(Ro.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(s=>{if(s instanceof Ro&&(!s.displayedChildren||!s.displayedChildren.length))return;switch(s.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(s);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(s);break;default:this.displayedChildren.push(s);break}}),this.localEventService.dispatchEvent(this.createAgEvent(Ro.EVENT_DISPLAYED_CHILDREN_CHANGED))}};uS.EVENT_LEFT_CHANGED="leftChanged";uS.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";g([T("gridOptionsService")],uS.prototype,"gridOptionsService",2);var ci=uS,w=class{};w.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";w.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";w.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";w.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded";w.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";w.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";w.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";w.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";w.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";w.EVENT_COLUMN_MOVED="columnMoved";w.EVENT_COLUMN_VISIBLE="columnVisible";w.EVENT_COLUMN_PINNED="columnPinned";w.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";w.EVENT_COLUMN_RESIZED="columnResized";w.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";w.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns";w.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide";w.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation";w.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";w.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver";w.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave";w.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked";w.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu";w.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";w.EVENT_ROW_GROUP_OPENED="rowGroupOpened";w.EVENT_ROW_DATA_UPDATED="rowDataUpdated";w.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";w.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";w.EVENT_CHART_CREATED="chartCreated";w.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";w.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";w.EVENT_CHART_DESTROYED="chartDestroyed";w.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";w.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";w.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";w.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";w.EVENT_MODEL_UPDATED="modelUpdated";w.EVENT_CUT_START="cutStart";w.EVENT_CUT_END="cutEnd";w.EVENT_PASTE_START="pasteStart";w.EVENT_PASTE_END="pasteEnd";w.EVENT_FILL_START="fillStart";w.EVENT_FILL_END="fillEnd";w.EVENT_RANGE_DELETE_START="rangeDeleteStart";w.EVENT_RANGE_DELETE_END="rangeDeleteEnd";w.EVENT_UNDO_STARTED="undoStarted";w.EVENT_UNDO_ENDED="undoEnded";w.EVENT_REDO_STARTED="redoStarted";w.EVENT_REDO_ENDED="redoEnded";w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";w.EVENT_CELL_CLICKED="cellClicked";w.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";w.EVENT_CELL_MOUSE_DOWN="cellMouseDown";w.EVENT_CELL_CONTEXT_MENU="cellContextMenu";w.EVENT_CELL_VALUE_CHANGED="cellValueChanged";w.EVENT_CELL_EDIT_REQUEST="cellEditRequest";w.EVENT_ROW_VALUE_CHANGED="rowValueChanged";w.EVENT_CELL_FOCUSED="cellFocused";w.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";w.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";w.EVENT_ROW_SELECTED="rowSelected";w.EVENT_SELECTION_CHANGED="selectionChanged";w.EVENT_TOOLTIP_SHOW="tooltipShow";w.EVENT_TOOLTIP_HIDE="tooltipHide";w.EVENT_CELL_KEY_DOWN="cellKeyDown";w.EVENT_CELL_MOUSE_OVER="cellMouseOver";w.EVENT_CELL_MOUSE_OUT="cellMouseOut";w.EVENT_FILTER_CHANGED="filterChanged";w.EVENT_FILTER_MODIFIED="filterModified";w.EVENT_FILTER_OPENED="filterOpened";w.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged";w.EVENT_SORT_CHANGED="sortChanged";w.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";w.EVENT_ROW_CLICKED="rowClicked";w.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";w.EVENT_GRID_READY="gridReady";w.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed";w.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";w.EVENT_VIEWPORT_CHANGED="viewportChanged";w.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";w.EVENT_FIRST_DATA_RENDERED="firstDataRendered";w.EVENT_DRAG_STARTED="dragStarted";w.EVENT_DRAG_STOPPED="dragStopped";w.EVENT_CHECKBOX_CHANGED="checkboxChanged";w.EVENT_ROW_EDITING_STARTED="rowEditingStarted";w.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";w.EVENT_CELL_EDITING_STARTED="cellEditingStarted";w.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";w.EVENT_BODY_SCROLL="bodyScroll";w.EVENT_BODY_SCROLL_END="bodyScrollEnd";w.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";w.EVENT_PAGINATION_CHANGED="paginationChanged";w.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";w.EVENT_STORE_REFRESHED="storeRefreshed";w.EVENT_STATE_UPDATED="stateUpdated";w.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged";w.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";w.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged";w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";w.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";w.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";w.EVENT_FLASH_CELLS="flashCells";w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";w.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";w.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";w.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";w.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";w.EVENT_ROW_DRAG_ENTER="rowDragEnter";w.EVENT_ROW_DRAG_MOVE="rowDragMove";w.EVENT_ROW_DRAG_LEAVE="rowDragLeave";w.EVENT_ROW_DRAG_END="rowDragEnd";w.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";w.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";w.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";w.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";w.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";w.EVENT_STORE_UPDATED="storeUpdated";w.EVENT_FILTER_DESTROYED="filterDestroyed";w.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";w.EVENT_ROW_COUNT_READY="rowCountReady";w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";w.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";w.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";w.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";w.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var Fm=new Set([w.EVENT_GRID_PRE_DESTROYED]),Jx=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let s;return typeof t!="number"?s=0:s=t+1,this.existingIds[e]=s,s}},pc="ag-Grid-AutoColumn",Mp=class extends W{createAutoGroupColumns(e){const t=[],s=this.gridOptionsService.get("treeData");let r=this.gridOptionsService.isGroupMultiAutoColumn();return s&&r&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),r=!1),r?e.forEach((o,n)=>{t.push(this.createOneAutoGroupColumn(o,n))}):t.push(this.createOneAutoGroupColumn()),t}updateAutoGroupColumns(e,t){e.forEach((s,r)=>this.updateOneAutoGroupColumn(s,r,t))}createOneAutoGroupColumn(e,t){let s;e?s=`${pc}-${e.getId()}`:s=pc;const r=this.createAutoGroupColDef(s,e,t);r.colId=s;const o=new ut(r,null,s,!0);return this.context.createBean(o),o}updateOneAutoGroupColumn(e,t,s){const r=e.getColDef(),o=typeof r.showRowGroup=="string"?r.showRowGroup:void 0,n=o!=null?this.columnModel.getPrimaryColumn(o):void 0,l=this.createAutoGroupColDef(e.getId(),n??void 0,t);e.setColDef(l,null,s),this.columnFactory.applyColumnState(e,l,s)}createAutoGroupColDef(e,t,s){let r=this.createBaseColDef(t);const o=this.gridOptionsService.get("autoGroupColumnDef");sr(r,o),r=this.columnFactory.addColumnDefaultAndTypes(r,e),this.gridOptionsService.get("treeData")||Se(r.field)&&Se(r.valueGetter)&&Se(r.filterValueGetter)&&r.filter!=="agGroupColumnFilter"&&(r.filter=!1),s&&s>0&&(r.headerCheckboxSelection=!1);const n=this.gridOptionsService.isColumnsSortingCoupledToGroup(),l=r.valueGetter||r.field!=null;return n&&!l&&(r.sortIndex=void 0,r.initialSort=void 0),r}createBaseColDef(e){const t=this.gridOptionsService.get("autoGroupColumnDef"),r={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(r.cellRenderer="agGroupCellRenderer"),e){const n=e.getColDef();Object.assign(r,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:n.headerValueGetter}),n.cellRenderer&&Object.assign(r,{cellRendererParams:{innerRenderer:n.cellRenderer,innerRendererParams:n.cellRendererParams}}),r.showRowGroup=e.getColId()}else r.showRowGroup=!0;return r}};g([T("columnModel")],Mp.prototype,"columnModel",2);g([T("columnFactory")],Mp.prototype,"columnFactory",2);Mp=g([te("autoGroupColService")],Mp);var Zx={};Mi(Zx,{camelCaseToHumanText:()=>e_,camelCaseToHyphenated:()=>t_,capitalise:()=>Nz,escapeString:()=>pi,utf8_encode:()=>_z});var Mz=/[&<>"']/g,xz={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _z(i){const e=String.fromCharCode;function t(c){const h=[];if(!c)return[];const p=c.length;let m=0,S,E;for(;m<p;)S=c.charCodeAt(m++),S>=55296&&S<=56319&&m<p?(E=c.charCodeAt(m++),(E&64512)==56320?h.push(((S&1023)<<10)+(E&1023)+65536):(h.push(S),m--)):h.push(S);return h}function s(c){if(c>=55296&&c<=57343)throw Error("Lone surrogate U+"+c.toString(16).toUpperCase()+" is not a scalar value")}function r(c,h){return e(c>>h&63|128)}function o(c){if(c>=0&&c<=31&&c!==10)return`_x${c.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(c&4294967168))return e(c);let h="";return c&4294965248?c&4294901760?c&4292870144||(h=e(c>>18&7|240),h+=r(c,12),h+=r(c,6)):(s(c),h=e(c>>12&15|224),h+=r(c,6)):h=e(c>>6&31|192),h+=e(c&63|128),h}const n=t(i),l=n.length;let a=-1,u,d="";for(;++a<l;)u=n[a],d+=o(u);return d}function Nz(i){return i[0].toUpperCase()+i.substring(1).toLowerCase()}function pi(i,e){if(i==null)return null;const t=i.toString().toString();return e?t:t.replace(Mz,s=>xz[s])}function e_(i){if(!i||i==null)return null;const e=/([a-z])([A-Z])/g,t=/([A-Z]+)([A-Z])([a-z])/g;return i.replace(e,"$1 $2").replace(t,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function t_(i){return i.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}var i_={};Mi(i_,{convertToMap:()=>el,keys:()=>kz,mapById:()=>Gz});function el(i){const e=new Map;return i.forEach(t=>e.set(t[0],t[1])),e}function Gz(i,e){const t=new Map;return i.forEach(s=>t.set(e(s),s)),t}function kz(i){const e=[];return i.forEach((t,s)=>e.push(s)),e}var Ri=class extends W{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gridOptionsService.get("suppressColumnVirtualisation");const e=this.gridOptionsService.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.buildAutoGroupColumns(Rd(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(Rd(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.onSharedColDefChanged(Rd(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gridOptionsService.get("pivotMode"),Rd(t.source))),this.addManagedListener(this.eventService,w.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(e){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(e))}onAutoGroupColumnDefChanged(e){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e)}onSharedColDefChanged(e){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e),this.createColumnsFromColumnDefs(!0,e))}setColumnDefs(e,t){const s=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(s,t)}recreateColumnDefs(e){this.onSharedColDefChanged(e)}destroyOldColumns(e,t){const s={};if(!e)return;this.columnUtils.depthFirstOriginalTreeSearch(null,e,o=>{s[o.getInstanceId()]=o}),t&&this.columnUtils.depthFirstOriginalTreeSearch(null,t,o=>{s[o.getInstanceId()]=null});const r=Object.values(s).filter(o=>o!=null);this.destroyBeans(r)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(e,t){const s=e?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const r=this.primaryColumns,o=this.primaryColumnTree,n=this.columnFactory.createColumnTree(this.columnDefs,!0,o,t);this.destroyOldColumns(this.primaryColumnTree,n.columnTree),this.primaryColumnTree=n.columnTree,this.primaryHeaderRowCount=n.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(u=>this.primaryColumnsMap[u.getId()]=u),this.extractRowGroupColumns(t,r),this.extractPivotColumns(t,r),this.extractValueColumns(t,r),this.ready=!0;const l=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||l||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gridOptionsService.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),this.changeEventsDispatching=!0,s&&s(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(t)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(e){const t={type:w.EVENT_NEW_COLUMNS_LOADED,source:e};this.eventService.dispatchEvent(t),e==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(e){const t={type:w.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(t)}orderGridColumnsLikePrimary(){const e=this.primaryColumns;if(!e)return;const t=e.filter(r=>this.gridColumns.indexOf(r)>=0),s=this.gridColumns.filter(r=>t.indexOf(r)<0);this.gridColumns=[...s,...t],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gridOptionsService.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}getDisplayedColumnsStartingAt(e){let t=e;const s=[];for(;t!=null;)s.push(t),t=this.getDisplayedColAfter(t);return s}checkViewportColumns(e=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;const s={type:w.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(s)}setViewportPosition(e,t,s=!1){(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(s))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(e){return e&&this.gridOptionsService.get("treeData")?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0}setPivotMode(e,t){if(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t);const s={type:w.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(s)}getSecondaryPivotColumn(e,t){if(Se(this.secondaryColumns))return null;const s=this.getPrimaryColumn(t);let r=null;return this.secondaryColumns.forEach(o=>{const n=o.getColDef().pivotKeys,l=o.getColDef().pivotValueColumn;ko(n,e)&&l===s&&(r=o)}),r}setBeans(e){this.logger=e.create("columnModel")}setFirstRightAndLastLeftPinned(e){let t,s;this.gridOptionsService.get("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,s=this.displayedColumnsRight?Je(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?Je(this.displayedColumnsLeft):null,s=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(r=>{r.setLastLeftPinned(r===t,e),r.setFirstRightPinned(r===s,e)})}autoSizeColumns(e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(e));return}const{columns:t,skipHeader:s,skipHeaderGroups:r,stopAtGroup:o,source:n="api"}=e;this.animationFrameService.flushAllFrames();const l=[];let a=-1;const u=s??this.gridOptionsService.get("skipHeaderOnAutoSize"),d=r??u;for(;a!==0;)a=0,this.actionOnGridColumns(t,c=>{if(l.indexOf(c)>=0)return!1;const h=this.autoWidthCalculator.getPreferredWidthForColumn(c,u);if(h>0){const p=this.normaliseColumnWidth(c,h);c.setActualWidth(p,n),l.push(c),a++}return!0},n);d||this.autoSizeColumnGroupsByColumns(t,n,o),this.dispatchColumnResizedEvent(l,!0,"autosizeColumns")}dispatchColumnResizedEvent(e,t,s,r=null){if(e&&e.length){const o={type:w.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:r,finished:t,source:s};this.eventService.dispatchEvent(o)}}dispatchColumnChangedEvent(e,t,s){const r={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:s};this.eventService.dispatchEvent(r)}dispatchColumnMovedEvent(e){const{movedColumns:t,source:s,toIndex:r,finished:o}=e,n={type:w.EVENT_COLUMN_MOVED,columns:t,column:t&&t.length===1?t[0]:null,toIndex:r,finished:o,source:s};this.eventService.dispatchEvent(n)}dispatchColumnPinnedEvent(e,t){if(!e.length)return;const s=e.length===1?e[0]:null,r=this.getCommonValue(e,n=>n.getPinned()),o={type:w.EVENT_COLUMN_PINNED,pinned:r??null,columns:e,column:s,source:t};this.eventService.dispatchEvent(o)}dispatchColumnVisibleEvent(e,t){if(!e.length)return;const s=e.length===1?e[0]:null,r=this.getCommonValue(e,n=>n.isVisible()),o={type:w.EVENT_COLUMN_VISIBLE,visible:r,columns:e,column:s,source:t};this.eventService.dispatchEvent(o)}autoSizeColumn(e,t,s){e&&this.autoSizeColumns({columns:[e],skipHeader:s,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,s){const r=new Set;this.getGridColumns(e).forEach(a=>{let u=a.getParent();for(;u&&u!=s;)u.isPadding()||r.add(u),u=u.getParent()});let n;const l=[];for(const a of r){for(const u of this.ctrlsService.getHeaderRowContainerCtrls())if(n=u.getHeaderCtrlForColumn(a),n)break;n&&n.resizeLeafColumnsToFit(t)}return l}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(e,t));return}const s=this.getAllDisplayedColumns();this.autoSizeColumns({columns:s,skipHeader:t,source:e})}getColumnsFromTree(e){const t=[],s=r=>{for(let o=0;o<r.length;o++){const n=r[o];n instanceof ut?t.push(n):n instanceof Xt&&s(n.getChildren())}};return s(e),t}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(e){return this.getAllDisplayedColumns().indexOf(e)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(e,t,s,r){const o=[];let n=null;for(let l=0;l<t.length;l++){const a=t[l],u=t.length-l,d=Math.min(a.getColSpan(e),u),c=[a];if(d>1){const p=d-1;for(let m=1;m<=p;m++)c.push(t[l+m]);l+=p}let h;s?(h=!1,c.forEach(p=>{s(p)&&(h=!0)})):h=!0,h&&(o.length===0&&n&&(r&&r(a))&&o.push(n),o.push(a)),n=a}return o}getViewportCenterColumnsForRow(e){if(!this.colSpanActive)return this.viewportColumnsCenter;const t=r=>{const o=r.getLeft();return V(o)&&o>this.viewportLeft},s=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,s,t)}isColumnAtEdge(e,t){const s=this.getAllDisplayedColumns();if(!s.length)return!1;const r=t==="first";let o;if(e instanceof ci){const n=e.getDisplayedLeafColumns();if(!n.length)return!1;o=r?n[0]:Je(n)}else o=e;return(r?s[0]:Je(s))===o}getAriaColumnIndex(e){let t;return e instanceof ci?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,s=t+e.getActualWidth(),r=this.viewportLeft-200,o=this.viewportRight+200,n=t<r&&s<r,l=t>o&&s>o;return!n&&!l}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(e,t,s,r,o,n){if(!e||Zs(e))return;let l=!1;if(e.forEach(u=>{if(!u)return;const d=this.getPrimaryColumn(u);if(d){if(s){if(t.indexOf(d)>=0)return;t.push(d)}else{if(t.indexOf(d)<0)return;Ds(t,d)}r(d),l=!0}}),!l)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n);const a={type:o,columns:t,column:t.length===1?t[0]:null,source:n};this.eventService.dispatchEvent(a)}setRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,w.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),t)}setRowGroupActive(e,t,s){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,s),e&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([t],!1,s),!e&&!this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([t],!0,s))}addRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),w.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),w.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}addPivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!0,s=>s.setPivotActive(!0,t),w.EVENT_COLUMN_PIVOT_CHANGED,t)}setPivotColumns(e,t){this.setPrimaryColumnList(e,this.pivotColumns,w.EVENT_COLUMN_PIVOT_CHANGED,!0,(s,r)=>{r.setPivotActive(s,t)},t)}removePivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!1,s=>s.setPivotActive(!1,t),w.EVENT_COLUMN_PIVOT_CHANGED,t)}setPrimaryColumnList(e,t,s,r,o,n){if(!this.gridColumns)return;const l=new Map;t.forEach((a,u)=>l.set(a,u)),t.length=0,V(e)&&e.forEach(a=>{const u=this.getPrimaryColumn(a);u&&t.push(u)}),t.forEach((a,u)=>{const d=l.get(a);if(d===void 0){l.set(a,0);return}r&&d!==u||l.delete(a)}),(this.primaryColumns||[]).forEach(a=>{const u=t.indexOf(a)>=0;o(u,a)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n),this.dispatchColumnChangedEvent(s,[...l.keys()],n)}setValueColumns(e,t){this.setPrimaryColumnList(e,this.valueColumns,w.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),t)}setValueActive(e,t,s){if(e!==t.isValueActive()&&(t.setValueActive(e,s),e&&!t.getAggFunc())){const r=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(r)}}addValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),w.EVENT_COLUMN_VALUE_CHANGED,t)}removeValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),w.EVENT_COLUMN_VALUE_CHANGED,t)}normaliseColumnWidth(e,t){const s=e.getMinWidth();V(s)&&t<s&&(t=s);const r=e.getMaxWidth();return V(r)&&e.isGreaterThanMax(t)&&(t=r),t}getPrimaryOrGridColumn(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)}setColumnWidths(e,t,s,r){const o=[];e.forEach(n=>{const l=this.getPrimaryOrGridColumn(n.key);if(!l)return;if(o.push({width:n.newWidth,ratios:[1],columns:[l]}),this.gridOptionsService.get("colResizeDefault")==="shift"&&(t=!t),t){const u=this.getDisplayedColAfter(l);if(!u)return;const d=l.getActualWidth()-n.newWidth,c=u.getActualWidth()+d;o.push({width:c,ratios:[1],columns:[u]})}}),o.length!==0&&this.resizeColumnSets({resizeSets:o,finished:s,source:r})}checkMinAndMaxWidthsForSet(e){const{columns:t,width:s}=e;let r=0,o=0,n=!0;t.forEach(u=>{const d=u.getMinWidth();r+=d||0;const c=u.getMaxWidth();V(c)&&c>0?o+=c:n=!1});const l=s>=r,a=!n||s<=o;return l&&a}resizeColumnSets(e){const{resizeSets:t,finished:s,source:r}=e;if(!(!t||t.every(c=>this.checkMinAndMaxWidthsForSet(c)))){if(s){const c=t&&t.length>0?t[0].columns:null;this.dispatchColumnResizedEvent(c,s,r)}return}const n=[],l=[];t.forEach(c=>{const{width:h,columns:p,ratios:m}=c,S={},E={};p.forEach(R=>l.push(R));let C=!0,v=0;for(;C;){if(v++,v>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}C=!1;const R=[];let b=0,A=h;p.forEach((O,L)=>{if(E[O.getId()])A-=S[O.getId()];else{R.push(O);const k=m[L];b+=k}});const F=1/b;R.forEach((O,L)=>{const G=L===R.length-1;let k;G?k=A:(k=Math.round(m[L]*h*F),A-=k);const se=O.getMinWidth(),j=O.getMaxWidth();V(se)&&k<se?(k=se,E[O.getId()]=!0,C=!0):V(j)&&j>0&&k>j&&(k=j,E[O.getId()]=!0,C=!0),S[O.getId()]=k})}p.forEach(R=>{const b=S[R.getId()];R.getActualWidth()!==b&&(R.setActualWidth(b,r),n.push(R))})});const a=n.length>0;let u=[];a&&(u=this.refreshFlexedColumns({resizingCols:l,skipSetLeft:!0}),this.setLeftValues(r),this.updateBodyWidths(),this.checkViewportColumns());const d=l.concat(u);(a||s)&&this.dispatchColumnResizedEvent(d,s,r,u)}setColumnAggFunc(e,t,s){if(!e)return;const r=this.getPrimaryColumn(e);r&&(r.setAggFunc(t),this.dispatchColumnChangedEvent(w.EVENT_COLUMN_VALUE_CHANGED,[r],s))}moveRowGroupColumn(e,t,s){if(this.isRowGroupEmpty())return;const r=this.rowGroupColumns[e],o=this.rowGroupColumns.slice(e,t);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,r);const n={type:w.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:o,column:o.length===1?o[0]:null,source:s};this.eventService.dispatchEvent(n)}moveColumns(e,t,s,r=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),t>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}const o=this.getGridColumns(e);this.doesMovePassRules(o,t)&&(oR(this.gridColumns,o,t),this.updateDisplayedColumns(s),this.dispatchColumnMovedEvent({movedColumns:o,source:s,toIndex:t,finished:r}),this.columnAnimationService.finish())}doesMovePassRules(e,t){const s=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(s)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const s=this.gridColumns.slice();return oR(s,e,t),s}sortColumnsLikeGridColumns(e){!e||e.length<=1||e.filter(s=>this.gridColumns.indexOf(s)<0).length>0||e.sort((s,r)=>{const o=this.gridColumns.indexOf(s),n=this.gridColumns.indexOf(r);return o-n})}doesMovePassLockedPositions(e){let t=0,s=!0;const r=o=>o?o===!0||o==="left"?0:2:1;return e.forEach(o=>{const n=r(o.getColDef().lockPosition);n<t&&(s=!1),t=n}),s}doesMovePassMarryChildren(e){let t=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,s=>{if(!(s instanceof Xt))return;const r=s,o=r.getColGroupDef();if(!(o&&o.marryChildren))return;const l=[];r.getLeafColumns().forEach(h=>{const p=e.indexOf(h);l.push(p)});const a=Math.max.apply(Math,l),u=Math.min.apply(Math,l),d=a-u,c=r.getLeafColumns().length-1;d>c&&(t=!1)}),t}moveColumnByIndex(e,t,s){if(!this.gridColumns)return;const r=this.gridColumns[e];this.moveColumns([r],t,s)}getColumnDefs(){if(!this.primaryColumns)return;const e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort((t,s)=>this.gridColumns.indexOf(t)-this.gridColumns.indexOf(s)):this.lastPrimaryOrder&&e.sort((t,s)=>this.lastPrimaryOrder.indexOf(t)-this.lastPrimaryOrder.indexOf(s)),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const e=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),s=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==s){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=s;const o={type:w.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(o);const n={type:w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(n)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getDisplayedColumns(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var e;return(e=this.gridColumns)!=null?e:[]}isEmpty(){return Zs(this.gridColumns)}isRowGroupEmpty(){return Zs(this.rowGroupColumns)}setColumnsVisible(e,t=!1,s){this.applyColumnState({state:e.map(r=>({colId:typeof r=="string"?r:r.getColId(),hide:!t}))},s)}setColumnsPinned(e,t,s){if(!this.gridColumns)return;if(this.gridOptionsService.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let r;t===!0||t==="left"?r="left":t==="right"?r="right":r=null,this.actionOnGridColumns(e,o=>o.getPinned()!==r?(o.setPinned(r),!0):!1,s,()=>({type:w.EVENT_COLUMN_PINNED,pinned:r,column:null,columns:null,source:s})),this.columnAnimationService.finish()}actionOnGridColumns(e,t,s,r){if(Zs(e))return;const o=[];if(e.forEach(n=>{if(!n)return;const l=this.getGridColumn(n);if(!l)return;t(l)!==!1&&o.push(l)}),!!o.length&&(this.updateDisplayedColumns(s),V(r)&&r)){const n=r();n.columns=o,n.column=o.length===1?o[0]:null,this.eventService.dispatchEvent(n)}}getDisplayedColBefore(e){const t=this.getAllDisplayedColumns(),s=t.indexOf(e);return s>0?t[s-1]:null}getDisplayedColAfter(e){const t=this.getAllDisplayedColumns(),s=t.indexOf(e);return s<t.length-1?t[s+1]:null}getDisplayedGroupAfter(e){return this.getDisplayedGroupAtDirection(e,"After")}getDisplayedGroupBefore(e){return this.getDisplayedGroupAtDirection(e,"Before")}getDisplayedGroupAtDirection(e,t){const s=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),r=e.getDisplayedLeafColumns(),o=t==="After"?Je(r):r[0],n=`getDisplayedCol${t}`;for(;;){const l=this[n](o);if(!l)return null;const a=this.getColumnGroupAtLevel(l,s);if(a!==e)return a}}getColumnGroupAtLevel(e,t){let s=e.getParent(),r,o;for(;r=s.getProvidedColumnGroup().getLevel(),o=s.getPaddingLevel(),!(r+o<=t);)s=s.getParent();return s}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(e){const t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,s=e.isPivotActive()?this.pivotColumns.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,o=e.getSort()!=null?e.getSort():null,n=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:o,sortIndex:n,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:s,flex:l}}getColumnState(){if(Se(this.primaryColumns)||!this.isAlive())return[];const t=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t}orderColumnStateList(e){const t=el(this.gridColumns.map((s,r)=>[s.getColId(),r]));e.sort((s,r)=>{const o=t.has(s.colId)?t.get(s.colId):-1,n=t.has(r.colId)?t.get(r.colId):-1;return o-n})}resetColumnState(e){if(Zs(this.primaryColumns))return;const t=this.getColumnsFromTree(this.primaryColumnTree),s=[];let r=1e3,o=1e3,n=[];this.groupAutoColumns&&(n=n.concat(this.groupAutoColumns)),t&&(n=n.concat(t)),n.forEach(l=>{const a=this.getColumnStateFromColDef(l);Se(a.rowGroupIndex)&&a.rowGroup&&(a.rowGroupIndex=r++),Se(a.pivotIndex)&&a.pivot&&(a.pivotIndex=o++),s.push(a)}),this.applyColumnState({state:s,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(S,E)=>S??E??null,s=e.getColDef(),r=t(s.sort,s.initialSort),o=t(s.sortIndex,s.initialSortIndex),n=t(s.hide,s.initialHide),l=t(s.pinned,s.initialPinned),a=t(s.width,s.initialWidth),u=t(s.flex,s.initialFlex);let d=t(s.rowGroupIndex,s.initialRowGroupIndex),c=t(s.rowGroup,s.initialRowGroup);d==null&&(c==null||c==!1)&&(d=null,c=null);let h=t(s.pivotIndex,s.initialPivotIndex),p=t(s.pivot,s.initialPivot);h==null&&(p==null||p==!1)&&(h=null,p=null);const m=t(s.aggFunc,s.initialAggFunc);return{colId:e.getColId(),sort:r,sortIndex:o,hide:n,pinned:l,width:a,flex:u,rowGroup:c,rowGroupIndex:d,pivot:p,pivotIndex:h,aggFunc:m}}applyColumnState(e,t){if(Zs(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const s=(n,l,a)=>{const u=this.compareColumnStatesAndDispatchEvents(t);this.autoGroupsNeedBuilding=!0;const d=l.slice(),c={},h={},p=[],m=[];let S=0;const E=this.rowGroupColumns.slice(),C=this.pivotColumns.slice();n.forEach(A=>{const F=A.colId||"";if(F.startsWith(pc)){p.push(A),m.push(A);return}const L=a(F);L?(this.syncColumnWithStateItem(L,A,e.defaultState,c,h,!1,t),Ds(d,L)):(m.push(A),S+=1)});const v=A=>this.syncColumnWithStateItem(A,null,e.defaultState,c,h,!1,t);d.forEach(v);const R=(A,F,O,L)=>{const G=A[O.getId()],k=A[L.getId()],se=G!=null,j=k!=null;if(se&&j)return G-k;if(se)return-1;if(j)return 1;const Z=F.indexOf(O),ce=F.indexOf(L),Oe=Z>=0,Le=ce>=0;return Oe&&Le?Z-ce:Oe?-1:1};this.rowGroupColumns.sort(R.bind(this,c,E)),this.pivotColumns.sort(R.bind(this,h,C)),this.updateGridColumns();const b=this.groupAutoColumns?this.groupAutoColumns.slice():[];return p.forEach(A=>{const F=this.getAutoColumn(A.colId);Ds(b,F),this.syncColumnWithStateItem(F,A,e.defaultState,null,null,!0,t)}),b.forEach(v),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(t),this.dispatchEverythingChanged(t),u(),{unmatchedAndAutoStates:m,unmatchedCount:S}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:o}=s(e.state||[],this.primaryColumns||[],n=>this.getPrimaryColumn(n));return(r.length>0||V(e.defaultState))&&(o=s(r,this.secondaryColumns||[],n=>this.getSecondaryColumn(n)).unmatchedCount),this.columnAnimationService.finish(),o===0}applyOrderAfterApplyState(e){if(!e.applyOrder||!e.state)return;let t=[];const s={};e.state.forEach(o=>{if(!o.colId||s[o.colId])return;const n=this.gridColumnsMap[o.colId];n&&(t.push(n),s[o.colId]=!0)});let r=0;if(this.gridColumns.forEach(o=>{const n=o.getColId();if(s[n]!=null)return;n.startsWith(pc)?Ip(t,o,r++):t.push(o)}),t=this.placeLockedColumns(t),!this.doesMovePassMarryChildren(t)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=t}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},s=this.getColumnState(),r={};return s.forEach(o=>{r[o.colId]=o}),()=>{const o=this.getPrimaryAndSecondaryAndAutoColumns(),n=(E,C,v,R)=>{const b=C.map(R),A=v.map(R);if(ko(b,A))return;const O=new Set(C);v.forEach(k=>{O.delete(k)||O.add(k)});const L=[...O],G={type:E,columns:L,column:L.length===1?L[0]:null,source:e};this.eventService.dispatchEvent(G)},l=E=>{const C=[];return o.forEach(v=>{const R=r[v.getColId()];R&&E(R,v)&&C.push(v)}),C},a=E=>E.getColId();n(w.EVENT_COLUMN_ROW_GROUP_CHANGED,t.rowGroupColumns,this.rowGroupColumns,a),n(w.EVENT_COLUMN_PIVOT_CHANGED,t.pivotColumns,this.pivotColumns,a);const d=l((E,C)=>{const v=E.aggFunc!=null,R=v!=C.isValueActive(),b=v&&E.aggFunc!=C.getAggFunc();return R||b});d.length>0&&this.dispatchColumnChangedEvent(w.EVENT_COLUMN_VALUE_CHANGED,d,e);const c=(E,C)=>E.width!=C.getActualWidth();this.dispatchColumnResizedEvent(l(c),!0,e);const h=(E,C)=>E.pinned!=C.getPinned();this.dispatchColumnPinnedEvent(l(h),e);const p=(E,C)=>E.hide==C.isVisible();this.dispatchColumnVisibleEvent(l(p),e);const S=l((E,C)=>E.sort!=C.getSort()||E.sortIndex!=C.getSortIndex());S.length>0&&this.sortController.dispatchSortChangedEvents(e,S),this.normaliseColumnMovedEventForColumnState(s,e)}}getCommonValue(e,t){if(!e||e.length==0)return;const s=t(e[0]);for(let r=1;r<e.length;r++)if(s!==t(e[r]))return;return s}normaliseColumnMovedEventForColumnState(e,t){const s=this.getColumnState(),r={};s.forEach(u=>r[u.colId]=u);const o={};e.forEach(u=>{r[u.colId]&&(o[u.colId]=!0)});const n=e.filter(u=>o[u.colId]),l=s.filter(u=>o[u.colId]),a=[];l.forEach((u,d)=>{const c=n&&n[d];if(c&&c.colId!==u.colId){const h=this.getGridColumn(c.colId);h&&a.push(h)}}),a.length&&this.dispatchColumnMovedEvent({movedColumns:a,source:t,finished:!0})}syncColumnWithStateItem(e,t,s,r,o,n,l){if(!e)return;const a=(b,A)=>{const F={value1:void 0,value2:void 0};let O=!1;return t&&(t[b]!==void 0&&(F.value1=t[b],O=!0),V(A)&&t[A]!==void 0&&(F.value2=t[A],O=!0)),!O&&s&&(s[b]!==void 0&&(F.value1=s[b]),V(A)&&s[A]!==void 0&&(F.value2=s[A])),F},u=a("hide").value1;u!==void 0&&e.setVisible(!u,l);const d=a("pinned").value1;d!==void 0&&e.setPinned(d);const c=this.columnUtils.calculateColMinWidth(e.getColDef()),h=a("flex").value1;if(h!==void 0&&e.setFlex(h),h==null){const b=a("width").value1;b!=null&&c!=null&&b>=c&&e.setActualWidth(b,l)}const p=a("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?e.setSort(p,l):e.setSort(void 0,l));const m=a("sortIndex").value1;if(m!==void 0&&e.setSortIndex(m),n||!e.isPrimary())return;const S=a("aggFunc").value1;S!==void 0&&(typeof S=="string"?(e.setAggFunc(S),e.isValueActive()||(e.setValueActive(!0,l),this.valueColumns.push(e))):(V(S)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,l),Ds(this.valueColumns,e))));const{value1:E,value2:C}=a("rowGroup","rowGroupIndex");(E!==void 0||C!==void 0)&&(typeof C=="number"||E?(e.isRowGroupActive()||(e.setRowGroupActive(!0,l),this.rowGroupColumns.push(e)),r&&typeof C=="number"&&(r[e.getId()]=C)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,l),Ds(this.rowGroupColumns,e)));const{value1:v,value2:R}=a("pivot","pivotIndex");(v!==void 0||R!==void 0)&&(typeof R=="number"||v?(e.isPivotActive()||(e.setPivotActive(!0,l),this.pivotColumns.push(e)),o&&typeof R=="number"&&(o[e.getId()]=R)):e.isPivotActive()&&(e.setPivotActive(!1,l),Ds(this.pivotColumns,e)))}getGridColumns(e){return this.getColumns(e,this.getGridColumn.bind(this))}getColumns(e,t){const s=[];return e&&e.forEach(r=>{const o=t(r);o&&s.push(o)}),s}getColumnWithValidation(e){if(e==null)return null;const t=this.getGridColumn(e);return t||console.warn("AG Grid: could not find column "+e),t}getPrimaryColumn(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(e){return this.gridColumnsMap[e]}getSecondaryColumn(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(e,t,s){if(!e||!s)return null;if(typeof e=="string"&&s[e])return s[e];for(let r=0;r<t.length;r++)if(this.columnsMatch(t[r],e))return t[r];return this.getAutoColumn(e)}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupColumns.slice(0);const s=this.getPrimaryColumn(t);return s?[s]:null}getAutoColumn(e){return!this.groupAutoColumns||!V(this.groupAutoColumns)||Se(this.groupAutoColumns)?null:this.groupAutoColumns.find(t=>this.columnsMatch(t,e))||null}columnsMatch(e,t){const s=e===t,r=e.getColDef()===t,o=e.getColId()==t;return s||r||o}getDisplayNameForColumn(e,t,s=!1){if(!e)return null;const r=this.getHeaderName(e.getColDef(),e,null,null,t);return s?this.wrapHeaderNameWithAggFunc(e,r):r}getDisplayNameForProvidedColumnGroup(e,t,s){const r=t?t.getColGroupDef():null;return r?this.getHeaderName(r,null,e,t,s):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,s,r,o){const n=e.headerValueGetter;if(n){const l=this.gridOptionsService.addGridCommonParams({colDef:e,column:t,columnGroup:s,providedColumnGroup:r,location:o});return typeof n=="function"?n(l):typeof n=="string"?this.expressionService.evaluate(n,l):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return e_(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gridOptionsService.get("suppressAggFuncInHeader"))return t;const s=e.getColDef().pivotValueColumn,r=V(s);let o=null,n;if(r){const l=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,a=e.getColDef().pivotTotalColumnIds!==void 0;if(l&&!a)return t;o=s?s.getAggFunc():null,n=!0}else{const l=e.isValueActive(),a=this.pivotMode||!this.isRowGroupEmpty();l&&a?(o=e.getAggFunc(),n=!0):n=!1}if(n){const l=typeof o=="string"?o:"func";return`${this.localeService.getLocaleTextFunc()(l,l)}(${t})`}return t}getColumnGroup(e,t){if(!e)return null;if(e instanceof ci)return e;const s=this.getAllDisplayedTrees(),r=typeof t=="number";let o=null;return this.columnUtils.depthFirstAllColumnTreeSearch(s,n=>{if(n instanceof ci){const l=n;let a;r?a=e===l.getGroupId()&&t===l.getPartId():a=e===l.getGroupId(),a&&(o=l)}}),o}isReady(){return this.ready}extractValueColumns(e,t){this.valueColumns=this.extractColumns(t,this.valueColumns,(s,r)=>s.setValueActive(r,e),()=>{},()=>{},s=>{const r=s.aggFunc;if(r===null||r==="")return null;if(r!==void 0)return!!r},s=>s.initialAggFunc!=null&&s.initialAggFunc!=""),this.valueColumns.forEach(s=>{const r=s.getColDef();r.aggFunc!=null&&r.aggFunc!=""?s.setAggFunc(r.aggFunc):s.getAggFunc()||s.setAggFunc(r.initialAggFunc)})}extractRowGroupColumns(e,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,(s,r)=>s.setRowGroupActive(r,e),s=>s.rowGroupIndex,s=>s.initialRowGroupIndex,s=>s.rowGroup,s=>s.initialRowGroup)}extractColumns(e=[],t=[],s,r,o,n,l){const a=[],u=[];(this.primaryColumns||[]).forEach(h=>{const p=e.indexOf(h)<0,m=h.getColDef(),S=IC(n(m)),E=IC(l(m)),C=Rl(r(m)),v=Rl(o(m));let R;S!==void 0?R=S:C!==void 0?C===null?R=!1:R=C>=0:p?E!==void 0?R=E:v!==void 0?R=v!=null&&v>=0:R=!1:R=t.indexOf(h)>=0,R&&((p?C!=null||v!=null:C!=null)?a.push(h):u.push(h))});const d=h=>{const p=r(h.getColDef()),m=o(h.getColDef());return p??m};a.sort((h,p)=>{const m=d(h),S=d(p);return m===S?0:m<S?-1:1});const c=[].concat(a);return t.forEach(h=>{u.indexOf(h)>=0&&c.push(h)}),u.forEach(h=>{c.indexOf(h)<0&&c.push(h)}),t.forEach(h=>{c.indexOf(h)<0&&s(h,!1)}),c.forEach(h=>{t.indexOf(h)<0&&s(h,!0)}),c}extractPivotColumns(e,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,(s,r)=>s.setPivotActive(r,e),s=>s.pivotIndex,s=>s.initialPivotIndex,s=>s.pivot,s=>s.initialPivot)}resetColumnGroupState(e){if(!this.primaryColumnTree)return;const t=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,s=>{if(s instanceof Xt){const r=s.getColGroupDef(),o={groupId:s.getGroupId(),open:r?r.openByDefault:void 0};t.push(o)}}),this.setColumnGroupState(t,e)}getColumnGroupState(){const e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,t=>{t instanceof Xt&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}setColumnGroupState(e,t){if(!this.gridBalancedTree)return;this.columnAnimationService.start();const s=[];if(e.forEach(r=>{const o=r.groupId,n=r.open,l=this.getProvidedColumnGroup(o);l&&l.isExpanded()!==n&&(this.logger.log("columnGroupOpened("+l.getGroupId()+","+n+")"),l.setExpanded(n),s.push(l))}),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),s.length){const r={type:w.EVENT_COLUMN_GROUP_OPENED,columnGroup:Xt.length===1?s[0]:void 0,columnGroups:s};this.eventService.dispatchEvent(r)}this.columnAnimationService.finish()}setColumnGroupOpened(e,t,s){let r;e instanceof Xt?r=e.getId():r=e||"",this.setColumnGroupState([{groupId:r,open:t}],s)}getProvidedColumnGroup(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");let t=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,s=>{s instanceof Xt&&s.getId()===e&&(t=s)}),t}calculateColumnsForDisplay(){let e;return this.pivotMode&&Se(this.secondaryColumns)?e=this.gridColumns.filter(t=>{const s=this.groupAutoColumns&&ar(this.groupAutoColumns,t),r=this.valueColumns&&ar(this.valueColumns,t);return s||r}):e=this.gridColumns.filter(t=>this.groupAutoColumns&&ar(this.groupAutoColumns,t)||t.isVisible()),e}checkColSpanActiveInCols(e){let t=!1;return e.forEach(s=>{V(s.getColDef().colSpan)&&(t=!0)}),t}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};const e=t=>{const s=t.getColDef(),r=s.showRowGroup;s&&V(r)&&(this.groupDisplayColumns.push(t),typeof r=="string"?this.groupDisplayColumnsMap[r]=t:r===!0&&this.getRowGroupColumns().forEach(o=>{this.groupDisplayColumnsMap[o.getId()]=t}))};this.gridColumns.forEach(e)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(e){return this.groupDisplayColumnsMap[e]}updateDisplayedColumns(e){const t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)}isSecondaryColumnsPresent(){return V(this.secondaryColumns)}setSecondaryColumns(e,t){if(!this.gridColumns)return;const s=e;if(!(!s&&Se(this.secondaryColumns))){if(s){this.processSecondaryColumnDefinitions(e);const r=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,t);this.destroyOldColumns(this.secondaryBalancedTree,r.columnTree),this.secondaryBalancedTree=r.columnTree,this.secondaryHeaderRowCount=r.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(o=>this.secondaryColumnsMap[o.getId()]=o),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}}processSecondaryColumnDefinitions(e){const t=this.gridOptionsService.get("processPivotResultColDef"),s=this.gridOptionsService.get("processPivotResultColGroupDef");if(!t&&!s)return;const r=o=>{o.forEach(n=>{if(V(n.children)){const a=n;s&&s(a),r(a.children)}else t&&t(n)})};e&&r(e)}updateGridColumns(){const e=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){const r=el(this.groupAutoColumns.map(o=>[o,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(o=>!r.has(o)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(o=>!r.has(o)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let s;if(this.secondaryColumns&&this.secondaryBalancedTree){const r=this.secondaryColumns.some(o=>this.gridColumnsMap[o.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,r&&(s=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,s=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(s),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(r=>this.gridColumnsMap[r.getId()]=r),this.setAutoHeightActive(),!ko(e,this.gridBalancedTree)){const r={type:w.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(r)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(e=>e.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide")||Ce("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(e){if(Se(e))return;const t=el(e.map((u,d)=>[u,d]));let s=!0;if(this.gridColumns.forEach(u=>{t.has(u)&&(s=!1)}),s)return;const r=el(this.gridColumns.map(u=>[u,!0])),o=e.filter(u=>r.has(u)),n=el(o.map(u=>[u,!0])),l=this.gridColumns.filter(u=>!n.has(u)),a=o.slice();l.forEach(u=>{let d=u.getOriginalParent();if(!d){a.push(u);return}const c=[];for(;!c.length&&d;)d.getLeafColumns().forEach(S=>{const E=a.indexOf(S)>=0,C=c.indexOf(S)<0;E&&C&&c.push(S)}),d=d.getOriginalParent();if(!c.length){a.push(u);return}const h=c.map(m=>a.indexOf(m)),p=Math.max(...h);Ip(a,u,p+1)}),this.gridColumns=a}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var e;let t=(e=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)!=null?e:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")?t:t.filter(s=>s.isVisible()||s.isRowGroupActive())}placeLockedColumns(e){const t=[],s=[],r=[];return e.forEach(o=>{const n=o.getColDef().lockPosition;n==="right"?r.push(o):n==="left"||n===!0?t.push(o):s.push(o)}),[...t,...s,...r]}addAutoGroupToGridColumns(){if(Se(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const t={type:w.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)}deriveDisplayedColumns(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(t=>t.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){const e=this.getAllGridColumns(),t=[],s=[],r=[];for(const o of e){const n=o.getPinned();n?n===!0||n==="left"?t.push(o):r.push(o):s.push(o)}this.ariaOrderColumns=t.concat(s).concat(r)}joinDisplayedColumns(){this.gridOptionsService.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(e){if(!this.primaryColumns)return;const t=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),s=this.gridOptionsService.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(r=>{if(s){let o=this.getWidthOfColsInList(r);r.forEach(n=>{o-=n.getActualWidth(),n.setLeft(o,e)})}else{let o=0;r.forEach(n=>{n.setLeft(o,e),o+=n.getActualWidth()})}zx(t,r)}),t.forEach(r=>{r.setLeft(null,e)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(e=>{e.forEach(t=>{t instanceof ci&&t.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(e,t){t.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,s=>{s instanceof ut&&t.push(s)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(e,t){let s;switch(e){case"left":s=this.viewportRowLeft[t];break;case"right":s=this.viewportRowRight[t];break;default:s=this.viewportRowCenter[t];break}return Se(s)&&(s=[]),s}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const e={};this.headerViewportColumns.forEach(s=>e[s.getId()]=!0);const t=(s,r,o)=>{let n=!1;for(let l=0;l<s.length;l++){const a=s[l];let u=!1;if(a instanceof ut)u=e[a.getId()]===!0;else{const c=a.getDisplayedChildren();c&&(u=t(c,r,o+1))}u&&(n=!0,r[o]||(r[o]=[]),r[o].push(a))}return n};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){const e=r=>`${r.getId()}-${r.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.viewportColumns.map(e).join("#"),s=this.viewportColumnsHash!==t;return s&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),s}refreshFlexedColumns(e={}){var t;const s=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let r=-1;if(e.resizingCols){const p=new Set(e.resizingCols);let m=this.displayedColumnsCenter;for(let S=m.length-1;S>=0;S--)if(p.has(m[S])){r=S;break}}let o=0,n=[],l=0,a=0;for(let p=0;p<this.displayedColumnsCenter.length;p++)this.displayedColumnsCenter[p].getFlex()&&p>r?(n.push(this.displayedColumnsCenter[p]),a+=this.displayedColumnsCenter[p].getFlex(),l+=(t=this.displayedColumnsCenter[p].getMinWidth())!=null?t:0):o+=this.displayedColumnsCenter[p].getActualWidth();if(!n.length)return[];let u=[];o+l>this.flexViewportWidth&&(n.forEach(p=>{var m;return p.setActualWidth((m=p.getMinWidth())!=null?m:0,s)}),u=n,n=[]);const d=[];let c;e:for(;;){c=this.flexViewportWidth-o;const p=c/a;for(let m=0;m<n.length;m++){const S=n[m],E=p*S.getFlex();let C=0;const v=S.getMinWidth(),R=S.getMaxWidth();if(V(v)&&E<v?C=v:V(R)&&E>R&&(C=R),C){S.setActualWidth(C,s),DD(n,S),a-=S.getFlex(),u.push(S),o+=S.getActualWidth();continue e}d[m]=Math.round(E)}break}let h=c;return n.forEach((p,m)=>{p.setActualWidth(Math.min(d[m],h),s),u.push(p),h-=d[m]}),e.skipSetLeft||this.setLeftValues(s),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(u,!0,s,n),n}sizeColumnsToFit(e,t="sizeColumnsToFit",s,r){var o,n,l,a,u;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(e,t,s,r));return}const d={};r&&((o=r==null?void 0:r.columnLimits)==null||o.forEach(v=>{var R=v,{key:b}=R,A=vz(R,["key"]);d[typeof b=="string"?b:b.getColId()]=A}));const c=this.getAllDisplayedColumns(),h=e===this.getWidthOfColsInList(c);if(e<=0||!c.length||h)return;const p=[],m=[];c.forEach(v=>{v.getColDef().suppressSizeToFit===!0?m.push(v):p.push(v)});const S=p.slice(0);let E=!1;const C=v=>{Ds(p,v),m.push(v)};for(p.forEach(v=>{var R,b;v.resetActualWidth(t);const A=d==null?void 0:d[v.getId()],F=(R=A==null?void 0:A.minWidth)!=null?R:r==null?void 0:r.defaultMinWidth,O=(b=A==null?void 0:A.maxWidth)!=null?b:r==null?void 0:r.defaultMaxWidth,L=v.getActualWidth();typeof F=="number"&&L<F?v.setActualWidth(F,t,!0):typeof O=="number"&&L>O&&v.setActualWidth(O,t,!0)});!E;){E=!0;const v=e-this.getWidthOfColsInList(m);if(v<=0)p.forEach(R=>{var b,A;const F=(A=(b=d==null?void 0:d[R.getId()])==null?void 0:b.minWidth)!=null?A:r==null?void 0:r.defaultMinWidth;if(typeof F=="number"){R.setActualWidth(F,t,!0);return}R.setMinimum(t)});else{const R=v/this.getWidthOfColsInList(p);let b=v;for(let A=p.length-1;A>=0;A--){const F=p[A],O=d==null?void 0:d[F.getId()],L=(n=O==null?void 0:O.minWidth)!=null?n:r==null?void 0:r.defaultMinWidth,G=(l=O==null?void 0:O.maxWidth)!=null?l:r==null?void 0:r.defaultMaxWidth,k=(a=F.getMinWidth())!=null?a:0,se=(u=F.getMaxWidth())!=null?u:Number.MAX_VALUE,j=typeof L=="number"&&L>k?L:F.getMinWidth(),Z=typeof G=="number"&&G<se?G:F.getMaxWidth();let ce=Math.round(F.getActualWidth()*R);V(j)&&ce<j?(ce=j,C(F),E=!1):V(Z)&&ce>Z?(ce=Z,C(F),E=!1):A===0&&(ce=b),F.setActualWidth(ce,t,!0),b-=ce}}}S.forEach(v=>{v.fireColumnWidthChangedEvent(t)}),this.setLeftValues(t),this.updateBodyWidths(),!s&&this.dispatchColumnResizedEvent(S,!0,t)}buildDisplayedTrees(e){const t=[],s=[],r=[];e.forEach(n=>{switch(n.getPinned()){case"left":t.push(n);break;case"right":s.push(n);break;default:r.push(n);break}});const o=new Jx;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,o,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(s,o,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(r,o,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const e=t=>{this.displayedColumnsAndGroupsMap[t.getUniqueId()]=t};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,e)}isDisplayed(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,t=>{t instanceof ci&&t.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const t=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),s=this.pivotMode?this.gridOptionsService.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gridOptionsService.get("treeData"))&&!s&&!t){const n=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(n,this.groupAutoColumns)||e)return this.groupAutoColumns=n,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gridOptionsService.get("groupDisplayType")==="custom"?!0:this.gridOptionsService.get("treeDataDisplayType")==="custom"}autoColsEqual(e,t){return ko(e,t,(s,r)=>s.getColId()===r.getColId())}getWidthOfColsInList(e){return e.reduce((t,s)=>t+s.getActualWidth(),0)}getFirstDisplayedColumn(){const e=this.gridOptionsService.get("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&t.reverse();for(let s=0;s<t.length;s++){const r=this[t[s]]();if(r.length)return e?Je(r):r[0]}return null}setColumnHeaderHeight(e,t){if(e.setAutoHeaderHeight(t)){const r={type:w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(r)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter(s=>s.isAutoHeaderHeight()).map(s=>s.getAutoHeaderHeight()||0);return Math.max(e,...t)}getHeaderHeight(){var e;return(e=this.gridOptionsService.get("headerHeight"))!=null?e:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var e;return(e=this.gridOptionsService.get("floatingFiltersHeight"))!=null?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return(e=this.gridOptionsService.get("groupHeaderHeight"))!=null?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return(e=this.gridOptionsService.get("pivotHeaderHeight"))!=null?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return(e=this.gridOptionsService.get("pivotGroupHeaderHeight"))!=null?e:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(e,t){const s=e.getUserProvidedColDef();if(!s)return!1;const r=this.columnFactory.addColumnDefaultAndTypes(s,e.getColId());return e.setColDef(r,s,t),!0}isColumnGroupingLocked(e){const t=this.gridOptionsService.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const s=this.rowGroupColumns.findIndex(r=>r.getColId()===e.getColId());return t>s}generateColumnStateForRowGroupAndPivotIndexes(e,t){let s={};const r=(o,n,l,a,u,d)=>{if(!n.length||!this.primaryColumns)return[];const c=Object.keys(o),h=new Set(c),p=new Set(c),m=new Set(n.map(F=>{const O=F.getColId();return p.delete(O),O}).concat(c)),S=[],E={};let C=0;for(let F=0;F<this.primaryColumns.length;F++){const O=this.primaryColumns[F].getColId();m.has(O)&&(S.push(O),E[O]=C++)}let v=1e3,R=!1,b=0;const A=F=>{const O=E[F];for(let L=b;L<O;L++){const G=S[L];p.has(G)&&(o[G][u]=v++,p.delete(G))}b=O};n.forEach(F=>{const O=F.getColId();if(h.has(O))A(O),o[O][u]=v++;else{const L=F.getColDef();(L[u]===null||L[u]===void 0&&L[d]==null)&&(R||(L[l]||L[l]===void 0&&L[a]?A(O):(p.forEach(se=>{o[se][u]=v+E[se]}),v+=S.length,R=!0)),s[O]||(s[O]={colId:O}),s[O][u]=v++)}})};return r(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),r(t,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(s)}onColumnsReady(){const e=this.gridOptionsService.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:s,defaultMinWidth:r,defaultMaxWidth:o}=e,n=s==null?void 0:s.map(({colId:l,minWidth:a,maxWidth:u})=>({key:l,minWidth:a,maxWidth:u}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:r,defaultMaxWidth:o,columnLimits:n})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){const e=this.gridOptionsService.get("autoSizeStrategy");if((e==null?void 0:e.type)!=="fitCellContents")return;const{colIds:t,skipHeader:s}=e;setTimeout(()=>{t?this.autoSizeColumns({columns:t,skipHeader:s,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",s)})}};g([T("expressionService")],Ri.prototype,"expressionService",2);g([T("columnFactory")],Ri.prototype,"columnFactory",2);g([T("displayedGroupCreator")],Ri.prototype,"displayedGroupCreator",2);g([T("ctrlsService")],Ri.prototype,"ctrlsService",2);g([T("autoWidthCalculator")],Ri.prototype,"autoWidthCalculator",2);g([T("columnUtils")],Ri.prototype,"columnUtils",2);g([T("columnAnimationService")],Ri.prototype,"columnAnimationService",2);g([T("autoGroupColService")],Ri.prototype,"autoGroupColService",2);g([qe("aggFuncService")],Ri.prototype,"aggFuncService",2);g([qe("valueCache")],Ri.prototype,"valueCache",2);g([qe("animationFrameService")],Ri.prototype,"animationFrameService",2);g([T("sortController")],Ri.prototype,"sortController",2);g([T("columnDefFactory")],Ri.prototype,"columnDefFactory",2);g([z],Ri.prototype,"init",1);g([ps],Ri.prototype,"destroyColumns",1);g([io(0,Fr("loggerFactory"))],Ri.prototype,"setBeans",1);Ri=g([te("columnModel")],Ri);function Rd(i){return i==="gridOptionsUpdated"?"gridOptionsChanged":i}var lR=class extends W{calculateColMinWidth(e){return e.minWidth!=null?e.minWidth:this.environment.getMinColWidth()}calculateColMaxWidth(e){return e.maxWidth!=null?e.maxWidth:Number.MAX_SAFE_INTEGER}calculateColInitialWidth(e){const t=this.calculateColMinWidth(e),s=this.calculateColMaxWidth(e);let r;const o=Rl(e.width),n=Rl(e.initialWidth);return o!=null?r=o:n!=null?r=n:r=200,Math.max(Math.min(r,s),t)}getOriginalPathForColumn(e,t){const s=[];let r=!1;const o=(n,l)=>{for(let a=0;a<n.length;a++){if(r)return;const u=n[a];u instanceof Xt?(o(u.getChildren(),l+1),s[l]=u):u===e&&(r=!0)}};return o(t,0),r?s:null}depthFirstOriginalTreeSearch(e,t,s){t&&t.forEach(r=>{r instanceof Xt&&this.depthFirstOriginalTreeSearch(r,r.getChildren(),s),s(r,e)})}depthFirstAllColumnTreeSearch(e,t){e&&e.forEach(s=>{s instanceof ci&&this.depthFirstAllColumnTreeSearch(s.getChildren(),t),t(s)})}depthFirstDisplayedColumnTreeSearch(e,t){e&&e.forEach(s=>{s instanceof ci&&this.depthFirstDisplayedColumnTreeSearch(s.getDisplayedChildren(),t),t(s)})}};lR=g([te("columnUtils")],lR);var aR=class extends W{createDisplayedGroups(e,t,s,r){const o=this.mapOldGroupsById(r),n=[];let l=e;for(;l.length;){const a=l;l=[];let u=0;const d=c=>{const h=u;u=c;const p=a[h],S=(p instanceof ci?p.getProvidedColumnGroup():p).getOriginalParent();if(S==null){for(let C=h;C<c;C++)n.push(a[C]);return}const E=this.createColumnGroup(S,t,o,s);for(let C=h;C<c;C++)E.addChild(a[C]);l.push(E)};for(let c=1;c<a.length;c++){const h=a[c],m=(h instanceof ci?h.getProvidedColumnGroup():h).getOriginalParent(),S=a[u],C=(S instanceof ci?S.getProvidedColumnGroup():S).getOriginalParent();m!==C&&d(c)}u<a.length&&d(a.length)}return this.setupParentsIntoColumns(n,null),n}createColumnGroup(e,t,s,r){const o=e.getGroupId(),n=t.getInstanceIdForKey(o),l=ci.createUniqueId(o,n);let a=s[l];return a&&a.getProvidedColumnGroup()!==e&&(a=null),V(a)?a.reset():(a=new ci(e,o,n,r),this.context.createBean(a)),a}mapOldGroupsById(e){const t={},s=r=>{r.forEach(o=>{if(o instanceof ci){const n=o;t[o.getUniqueId()]=n,s(n.getChildren())}})};return e&&s(e),t}setupParentsIntoColumns(e,t){e.forEach(s=>{if(s.setParent(t),s instanceof ci){const r=s;this.setupParentsIntoColumns(r.getChildren(),r)}})}};aR=g([te("displayedGroupCreator")],aR);var Vz={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},Pi=class{};Pi.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode"];Pi.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];Pi.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];Pi.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];Pi.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents"];Pi.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];Pi.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems"];Pi.FUNCTION_PROPERTIES=[...Pi.FUNCTIONAL_PROPERTIES,...Pi.CALLBACK_PROPERTIES];Pi.ALL_PROPERTIES=[...Pi.ARRAY_PROPERTIES,...Pi.OBJECT_PROPERTIES,...Pi.STRING_PROPERTIES,...Pi.NUMBER_PROPERTIES,...Pi.FUNCTION_PROPERTIES,...Pi.BOOLEAN_PROPERTIES];var $o=Pi,ei=class Om{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(e,t){typeof e!="object"&&(e={});const s=he({},e);return Om.getGridOptionKeys().forEach(o=>{const n=t[o];typeof n<"u"&&n!==Om.VUE_OMITTED_PROPERTY&&(s[o]=n)}),s}static processOnChange(e,t){if(!e)return;const s={};let r=!1;if(Object.keys(e).filter(n=>Om.ALL_PROPERTIES_AND_CALLBACKS_SET.has(n)).forEach(n=>{s[n]=e[n],r=!0}),!r)return;t.__internalUpdateGridOptions(s);const o={type:w.EVENT_COMPONENT_STATE_CHANGED};$i(s,(n,l)=>{o[n]=l}),t.dispatchEvent(o)}};ei.EVENTS=Oa(w);ei.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";ei.EXCLUDED_INTERNAL_EVENTS=[w.EVENT_SCROLLBAR_WIDTH_CHANGED,w.EVENT_CHECKBOX_CHANGED,w.EVENT_HEIGHT_SCALE_CHANGED,w.EVENT_BODY_HEIGHT_CHANGED,w.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,w.EVENT_SCROLL_VISIBILITY_CHANGED,w.EVENT_COLUMN_HOVER_CHANGED,w.EVENT_FLASH_CELLS,w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,w.EVENT_DISPLAYED_ROWS_CHANGED,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,w.EVENT_STORE_UPDATED,w.EVENT_COLUMN_PANEL_ITEM_DRAG_START,w.EVENT_COLUMN_PANEL_ITEM_DRAG_END,w.EVENT_FILL_START,w.EVENT_FILL_END,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,w.EVENT_FULL_WIDTH_ROW_FOCUSED,w.EVENT_HEADER_HEIGHT_CHANGED,w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,w.EVENT_CELL_FOCUS_CLEARED,w.EVENT_GRID_STYLES_CHANGED,w.EVENT_FILTER_DESTROYED,w.EVENT_ROW_DATA_UPDATE_STARTED,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,w.EVENT_DATA_TYPES_INFERRED,w.EVENT_FIELD_VALUE_CHANGED,w.EVENT_FIELD_PICKER_VALUE_SELECTED,w.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,w.EVENT_SUPPRESS_MENU_HIDE_CHANGED,w.EVENT_SUPPRESS_FIELD_DOT_NOTATION,w.EVENT_ROW_COUNT_READY,w.EVENT_SIDE_BAR_UPDATED];ei.PUBLIC_EVENTS=ei.EVENTS.filter(i=>!ar(ei.EXCLUDED_INTERNAL_EVENTS,i));ei.EVENT_CALLBACKS=ei.EVENTS.map(i=>ei.getCallbackForEvent(i));ei.STRING_PROPERTIES=$o.STRING_PROPERTIES;ei.OBJECT_PROPERTIES=$o.OBJECT_PROPERTIES;ei.ARRAY_PROPERTIES=$o.ARRAY_PROPERTIES;ei.NUMBER_PROPERTIES=$o.NUMBER_PROPERTIES;ei.BOOLEAN_PROPERTIES=$o.BOOLEAN_PROPERTIES;ei.FUNCTION_PROPERTIES=$o.FUNCTION_PROPERTIES;ei.ALL_PROPERTIES=$o.ALL_PROPERTIES;ei.ALL_PROPERTIES_AND_CALLBACKS=[...ei.ALL_PROPERTIES,...ei.EVENT_CALLBACKS];ei.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(ei.ALL_PROPERTIES_AND_CALLBACKS);var GC=ei,uR=class extends W{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(e){e&&e.forEach(t=>this.addComponent(t))}addComponent(e){const s=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[s]=e.componentClass}getComponentClass(e){return this.componentsMappedByName[e]}};uR=g([te("agStackComponentsRegistry")],uR);var s_={};Mi(s_,{getAriaCheckboxStateName:()=>hS,getAriaLabel:()=>l_,getAriaLevel:()=>Hz,getAriaPosInSet:()=>n_,getAriaSortState:()=>o_,removeAriaExpanded:()=>c_,removeAriaSort:()=>C_,setAriaActiveDescendant:()=>OD,setAriaAtomic:()=>a_,setAriaChecked:()=>Wz,setAriaColCount:()=>g_,setAriaColIndex:()=>ID,setAriaColSpan:()=>f_,setAriaControls:()=>MD,setAriaDescribedBy:()=>Bz,setAriaDisabled:()=>FD,setAriaExpanded:()=>vn,setAriaHidden:()=>qg,setAriaLabel:()=>mo,setAriaLabelledBy:()=>kC,setAriaLevel:()=>d_,setAriaLive:()=>AD,setAriaMultiSelectable:()=>h_,setAriaPosInSet:()=>cS,setAriaRelevant:()=>u_,setAriaRole:()=>Bt,setAriaRowCount:()=>p_,setAriaRowIndex:()=>LD,setAriaSelected:()=>gc,setAriaSetSize:()=>dS,setAriaSort:()=>m_});function Br(i,e,t){t==null||typeof t=="string"&&t==""?PD(i,e):Wr(i,e,t)}function Wr(i,e,t){i.setAttribute(r_(e),t.toString())}function PD(i,e){i.removeAttribute(r_(e))}function r_(i){return`aria-${i}`}function Bt(i,e){e?i.setAttribute("role",e):i.removeAttribute("role")}function o_(i){let e;return i==="asc"?e="ascending":i==="desc"?e="descending":i==="mixed"?e="other":e="none",e}function Hz(i){return parseInt(i.getAttribute("aria-level"),10)}function n_(i){return parseInt(i.getAttribute("aria-posinset"),10)}function l_(i){return i.getAttribute("aria-label")}function mo(i,e){Br(i,"label",e)}function kC(i,e){Br(i,"labelledby",e)}function Bz(i,e){Br(i,"describedby",e)}function AD(i,e){Br(i,"live",e)}function a_(i,e){Br(i,"atomic",e)}function u_(i,e){Br(i,"relevant",e)}function d_(i,e){Br(i,"level",e)}function FD(i,e){Br(i,"disabled",e)}function qg(i,e){Br(i,"hidden",e)}function OD(i,e){Br(i,"activedescendant",e)}function vn(i,e){Wr(i,"expanded",e)}function c_(i){PD(i,"expanded")}function dS(i,e){Wr(i,"setsize",e)}function cS(i,e){Wr(i,"posinset",e)}function h_(i,e){Wr(i,"multiselectable",e)}function p_(i,e){Wr(i,"rowcount",e)}function LD(i,e){Wr(i,"rowindex",e)}function g_(i,e){Wr(i,"colcount",e)}function ID(i,e){Wr(i,"colindex",e)}function f_(i,e){Wr(i,"colspan",e)}function m_(i,e){Wr(i,"sort",e)}function C_(i){PD(i,"sort")}function gc(i,e){Br(i,"selected",e)}function Wz(i,e){Wr(i,"checked",e===void 0?"mixed":e)}function MD(i,e){Br(i,"controls",e.id),kC(e,i.id)}function hS(i,e){return e===void 0?i("ariaIndeterminate","indeterminate"):e===!0?i("ariaChecked","checked"):i("ariaUnchecked","unchecked")}var v_={};Mi(v_,{browserSupportsPreventScroll:()=>GD,getBodyHeight:()=>y_,getBodyWidth:()=>w_,getMaxDivHeight:()=>S_,getSafariVersion:()=>xD,getScrollbarWidth:()=>E_,getTabIndex:()=>VC,isBrowserChrome:()=>pS,isBrowserFirefox:()=>_D,isBrowserSafari:()=>Ko,isIOSUserAgent:()=>Fn,isInvisibleScrollbar:()=>kD,isMacOsUserAgent:()=>ND});var ry,om,oy,ny,ly,ay,dR,cR;function Ko(){return ry===void 0&&(ry=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),ry}function xD(){if(om===void 0)if(Ko()){const i=navigator.userAgent.match(/version\/(\d+)/i);i&&(om=i[1]!=null?parseFloat(i[1]):0)}else om=0;return om}function pS(){if(oy===void 0){const i=window;oy=!!i.chrome&&(!!i.chrome.webstore||!!i.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return oy}function _D(){return ny===void 0&&(ny=/(firefox)/i.test(navigator.userAgent)),ny}function ND(){return ly===void 0&&(ly=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),ly}function Fn(){return ay===void 0&&(ay=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),ay}function GD(){return!Ko()||xD()>=15}function VC(i){if(!i)return null;const e=i.tabIndex,t=i.getAttribute("tabIndex");return e===-1&&(t===null||t===""&&!_D())?null:e.toString()}function S_(){if(!document.body)return-1;let i=1e6;const e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,t=document.createElement("div");for(document.body.appendChild(t);;){const s=i*2;if(t.style.height=s+"px",s>e||t.clientHeight!==s)break;i=s}return document.body.removeChild(t),i}function w_(){var i,e,t;return(t=(i=document.body)==null?void 0:i.clientWidth)!=null?t:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientWidth)||-1}function y_(){var i,e,t;return(t=(i=document.body)==null?void 0:i.clientHeight)!=null?t:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientHeight)||-1}function E_(){return cR==null&&R_(),cR}function R_(){const i=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",i.appendChild(e);let t=e.offsetWidth-e.clientWidth;t===0&&e.clientWidth===0&&(t=null),e.parentNode&&e.parentNode.removeChild(e),t!=null&&(cR=t,dR=t===0)}function kD(){return dR==null&&R_(),dR}var T_={};Mi(T_,{dateToFormattedString:()=>Nd,parseDateTimeFromString:()=>Fs,serialiseDate:()=>Ir});var D_={};Mi(D_,{cleanNumber:()=>Uz,createArrayOfNumbers:()=>b_,decToHex:()=>zz,formatNumberCommas:()=>VD,formatNumberTwoDecimalPlacesAndCommas:()=>$z,padStartWidthZeros:()=>_d,sum:()=>Kz});function _d(i,e){return i.toString().padStart(e,"0")}function b_(i,e){const t=[];for(let s=i;s<=e;s++)t.push(s);return t}function Uz(i){return typeof i=="string"&&(i=parseInt(i,10)),typeof i=="number"?Math.floor(i):null}function zz(i,e){let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(i&255),i>>>=8;return t}function $z(i,e,t){return typeof i!="number"?"":VD(Math.round(i*100)/100,e,t)}function VD(i,e,t){return typeof i!="number"?"":i.toString().replace(".",t).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function Kz(i){return i==null?null:i.reduce((e,t)=>e+t,0)}function Ir(i,e=!0,t="-"){if(!i)return null;let s=[i.getFullYear(),i.getMonth()+1,i.getDate()].map(r=>_d(r,2)).join(t);return e&&(s+=" "+[i.getHours(),i.getMinutes(),i.getSeconds()].map(r=>_d(r,2)).join(":")),s}var uy=i=>{if(i>3&&i<21)return"th";switch(i%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Nd(i,e="YYYY-MM-DD"){const t=_d(i.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>t.slice(t.length-4,t.length),YY:()=>t.slice(t.length-2,t.length),Y:()=>`${i.getFullYear()}`,MMMM:()=>s[i.getMonth()],MMM:()=>s[i.getMonth()].slice(0,3),MM:()=>_d(i.getMonth()+1,2),Mo:()=>`${i.getMonth()+1}${uy(i.getMonth()+1)}`,M:()=>`${i.getMonth()+1}`,Do:()=>`${i.getDate()}${uy(i.getDate())}`,DD:()=>_d(i.getDate(),2),D:()=>`${i.getDate()}`,dddd:()=>r[i.getDay()],ddd:()=>r[i.getDay()].slice(0,3),dd:()=>r[i.getDay()].slice(0,2),do:()=>`${i.getDay()}${uy(i.getDay())}`,d:()=>`${i.getDay()}`},n=new RegExp(Object.keys(o).join("|"),"g");return e.replace(n,l=>l in o?o[l]():l)}function Fs(i){if(!i)return null;const[e,t]=i.split(" ");if(!e)return null;const s=e.split("-").map(c=>parseInt(c,10));if(s.filter(c=>!isNaN(c)).length!==3)return null;const[r,o,n]=s,l=new Date(r,o-1,n);if(l.getFullYear()!==r||l.getMonth()!==o-1||l.getDate()!==n)return null;if(!t||t==="00:00:00")return l;const[a,u,d]=t.split(":").map(c=>parseInt(c,10));return a>=0&&a<24&&l.setHours(a),u>=0&&u<60&&l.setMinutes(u),d>=0&&d<60&&l.setSeconds(d),l}var P_={};Mi(P_,{FOCUSABLE_EXCLUDE:()=>HD,FOCUSABLE_SELECTOR:()=>A_,addOrRemoveAttribute:()=>Uo,addStylesToElement:()=>jD,bindCellRendererToHtmlElement:()=>qD,clearElement:()=>oi,copyNodeList:()=>M_,ensureDomOrder:()=>$D,formatSize:()=>gS,getAbsoluteHeight:()=>WD,getAbsoluteWidth:()=>xp,getElementRectWithOffset:()=>UD,getElementSize:()=>Vl,getInnerHeight:()=>Qg,getInnerWidth:()=>Cu,getScrollLeft:()=>Np,insertWithDomOrder:()=>O_,isElementChildOfClass:()=>Ia,isFocusableFormField:()=>BD,isHorizontalScrollShowing:()=>L_,isInDOM:()=>zD,isNodeOrElement:()=>Xg,isRtlNegativeScroll:()=>_p,isVerticalScrollShowing:()=>I_,isVisible:()=>dr,iterateNamedNodeMap:()=>x_,loadTemplate:()=>Os,nodeListForEach:()=>YD,radioCssClass:()=>hR,removeFromParent:()=>so,setDisabled:()=>fc,setDisplayed:()=>Ue,setDomChildOrder:()=>KD,setElementHeight:()=>jz,setElementWidth:()=>kp,setFixedHeight:()=>Ma,setFixedWidth:()=>Mr,setScrollLeft:()=>Gp,setVisible:()=>F_});var nm;function hR(i,e,t){const s=i.parentElement;let r=s&&s.firstChild;for(;r;)e&&r.classList.toggle(e,r===i),t&&r.classList.toggle(t,r!==i),r=r.nextSibling}var A_="[tabindex], input, select, button, textarea, [href]",HD="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function BD(i){const e=Element.prototype.matches||Element.prototype.msMatchesSelector,s=e.call(i,"input, select, button, textarea"),r=e.call(i,HD),o=dr(i);return s&&!r&&o}function Ue(i,e,t={}){const{skipAriaHidden:s}=t;i.classList.toggle("ag-hidden",!e),s||qg(i,!e)}function F_(i,e,t={}){const{skipAriaHidden:s}=t;i.classList.toggle("ag-invisible",!e),s||qg(i,!e)}function fc(i,e){const t="disabled",s=e?r=>r.setAttribute(t,""):r=>r.removeAttribute(t);s(i),YD(i.querySelectorAll("input"),r=>s(r))}function Ia(i,e,t){let s=0;for(;i;){if(i.classList.contains(e))return!0;if(i=i.parentElement,typeof t=="number"){if(++s>t)break}else if(i===t)break}return!1}function Vl(i){const{height:e,width:t,borderTopWidth:s,borderRightWidth:r,borderBottomWidth:o,borderLeftWidth:n,paddingTop:l,paddingRight:a,paddingBottom:u,paddingLeft:d,marginTop:c,marginRight:h,marginBottom:p,marginLeft:m,boxSizing:S}=window.getComputedStyle(i);return{height:parseFloat(e||"0"),width:parseFloat(t||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(n||"0"),paddingTop:parseFloat(l||"0"),paddingRight:parseFloat(a||"0"),paddingBottom:parseFloat(u||"0"),paddingLeft:parseFloat(d||"0"),marginTop:parseFloat(c||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(m||"0"),boxSizing:S}}function Qg(i){const e=Vl(i);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function Cu(i){const e=Vl(i);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function WD(i){const e=Vl(i),t=e.marginBottom+e.marginTop;return Math.ceil(i.offsetHeight+t)}function xp(i){const e=Vl(i),t=e.marginLeft+e.marginRight;return Math.ceil(i.offsetWidth+t)}function UD(i){const e=i.getBoundingClientRect(),{borderTopWidth:t,borderLeftWidth:s,borderRightWidth:r,borderBottomWidth:o}=Vl(i);return{top:e.top+(t||0),left:e.left+(s||0),right:e.right+(r||0),bottom:e.bottom+(o||0)}}function _p(){if(typeof nm=="boolean")return nm;const i=document.createElement("div");return i.style.direction="rtl",i.style.width="1px",i.style.height="1px",i.style.position="fixed",i.style.top="0px",i.style.overflow="hidden",i.dir="rtl",i.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(i),i.scrollLeft=1,nm=Math.floor(i.scrollLeft)===0,document.body.removeChild(i),nm}function Np(i,e){let t=i.scrollLeft;return e&&(t=Math.abs(t),pS()&&!_p()&&(t=i.scrollWidth-i.clientWidth-t)),t}function Gp(i,e,t){t&&(_p()?e*=-1:(Ko()||pS())&&(e=i.scrollWidth-i.clientWidth-e)),i.scrollLeft=e}function oi(i){for(;i&&i.firstChild;)i.removeChild(i.firstChild)}function so(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function zD(i){return!!i.offsetParent}function dr(i){const e=i;return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!zD(i)||window.getComputedStyle(i).visibility!=="visible")}function Os(i){const e=document.createElement("div");return e.innerHTML=(i||"").trim(),e.firstChild}function $D(i,e,t){t&&t.nextSibling===e||(t?t.nextSibling?i.insertBefore(e,t.nextSibling):i.appendChild(e):i.firstChild&&i.firstChild!==e&&i.insertAdjacentElement("afterbegin",e))}function KD(i,e){for(let t=0;t<e.length;t++){const s=e[t],r=i.children[t];r!==s&&i.insertBefore(s,r)}}function O_(i,e,t){t?t.insertAdjacentElement("afterend",e):i.firstChild?i.insertAdjacentElement("afterbegin",e):i.appendChild(e)}function jD(i,e){if(e)for(const[t,s]of Object.entries(e)){if(!t||!t.length||s==null)continue;const r=t_(t),o=s.toString(),n=o.replace(/\s*!important/g,""),l=n.length!=o.length?"important":void 0;i.style.setProperty(r,n,l)}}function L_(i){return i.clientWidth<i.scrollWidth}function I_(i){return i.clientHeight<i.scrollHeight}function kp(i,e){e==="flex"?(i.style.removeProperty("width"),i.style.removeProperty("minWidth"),i.style.removeProperty("maxWidth"),i.style.flex="1 1 auto"):Mr(i,e)}function Mr(i,e){e=gS(e),i.style.width=e.toString(),i.style.maxWidth=e.toString(),i.style.minWidth=e.toString()}function jz(i,e){e==="flex"?(i.style.removeProperty("height"),i.style.removeProperty("minHeight"),i.style.removeProperty("maxHeight"),i.style.flex="1 1 auto"):Ma(i,e)}function Ma(i,e){e=gS(e),i.style.height=e.toString(),i.style.maxHeight=e.toString(),i.style.minHeight=e.toString()}function gS(i){return typeof i=="number"?`${i}px`:i}function Xg(i){return i instanceof Node||i instanceof HTMLElement}function M_(i){if(i==null)return[];const e=[];return YD(i,t=>e.push(t)),e}function x_(i,e){if(i)for(let t=0;t<i.length;t++){const s=i[t];e(s.name,s.value)}}function Uo(i,e,t){t==null?i.removeAttribute(e):i.setAttribute(e,t.toString())}function YD(i,e){if(i!=null)for(let t=0;t<i.length;t++)e(i[t])}function qD(i,e){i.then(t=>{const s=t.getGui();s!=null&&(typeof s=="object"?e.appendChild(s):e.innerHTML=s)})}var __={};Mi(__,{fuzzyCheckStrings:()=>N_,fuzzySuggestions:()=>Jg});function N_(i,e,t){const s={},r=i.filter(o=>!e.some(n=>n===o));return r.length>0&&r.forEach(o=>s[o]=Jg(o,t).values),s}function Jg(i,e,t,s){let r=e.map((l,a)=>({value:l,relevance:Yz(i.toLowerCase(),l.toLocaleLowerCase()),idx:a}));if(r.sort((l,a)=>a.relevance-l.relevance),t&&(r=r.filter(l=>l.relevance!==0)),r.length>0&&s&&s>0){const a=r[0].relevance*s;r=r.filter(u=>a-u.relevance<0)}const o=[],n=[];for(const l of r)o.push(l.value),n.push(l.idx);return{values:o,indices:n}}function Yz(i,e){const t=i.replace(/\s/g,""),s=e.replace(/\s/g,"");let r=0,o=-1;for(let n=0;n<t.length;n++){const l=s.indexOf(t[n],o+1);l!==-1&&(o=l,r+=100-o*100/1e4*100)}return r}var G_={};Mi(G_,{createIcon:()=>wr,createIconNoSpan:()=>_t,iconNameClassMap:()=>k_});var k_={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function wr(i,e,t){const s=_t(i,e,t);if(s){const{className:o}=s;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return s}const r=document.createElement("span");return r.appendChild(s),r}function _t(i,e,t,s){let r=null;const o=t&&t.getColDef().icons;if(o&&(r=o[i]),e&&!r){const n=e.get("icons");n&&(r=n[i])}if(r){let n;if(typeof r=="function")n=r();else if(typeof r=="string")n=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof n=="string")return Os(n);if(Xg(n))return n;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{const n=document.createElement("span");let l=k_[i];return l||(s?l=i:(console.warn(`AG Grid: Did not find icon ${i}`),l="")),n.setAttribute("class",`ag-icon ag-icon-${l}`),n.setAttribute("unselectable","on"),Bt(n,"presentation"),n}}var V_={};Mi(V_,{isDeleteKey:()=>W_,isEventFromPrintableCharacter:()=>fS,isUserSuppressingHeaderKeyboardEvent:()=>H_,isUserSuppressingKeyboardEvent:()=>HC,normaliseQwertyAzerty:()=>B_});var x=class{};x.BACKSPACE="Backspace";x.TAB="Tab";x.ENTER="Enter";x.ESCAPE="Escape";x.SPACE=" ";x.LEFT="ArrowLeft";x.UP="ArrowUp";x.RIGHT="ArrowRight";x.DOWN="ArrowDown";x.DELETE="Delete";x.F2="F2";x.PAGE_UP="PageUp";x.PAGE_DOWN="PageDown";x.PAGE_HOME="Home";x.PAGE_END="End";x.A="KeyA";x.C="KeyC";x.D="KeyD";x.V="KeyV";x.X="KeyX";x.Y="KeyY";x.Z="KeyZ";var qz=65,Qz=67,Xz=86,Jz=68,Zz=90,e2=89;function fS(i){return i.altKey||i.ctrlKey||i.metaKey?!1:i.key.length===1}function HC(i,e,t,s,r){const o=s?s.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const n=i.addGridCommonParams({event:e,editing:r,column:s,node:t,data:t.data,colDef:s.getColDef()});return!!(o&&o(n))}function H_(i,e,t,s){const r=s.getDefinition(),o=r&&r.suppressHeaderKeyboardEvent;if(!V(o))return!1;const n=i.addGridCommonParams({colDef:r,column:s,headerRowIndex:t,event:e});return!!o(n)}function B_(i){const{keyCode:e}=i;let t;switch(e){case qz:t=x.A;break;case Qz:t=x.C;break;case Xz:t=x.V;break;case Jz:t=x.D;break;case Zz:t=x.Z;break;case e2:t=x.Y;break;default:t=i.code}return t}function W_(i,e=!1){return i===x.DELETE?!0:!e&&i===x.BACKSPACE?ND():!1}var U_={};Mi(U_,{areEventsNear:()=>QD});function QD(i,e,t){if(t===0)return!1;const s=Math.abs(i.clientX-e.clientX),r=Math.abs(i.clientY-e.clientY);return Math.max(s,r)<=t}var z_={};Mi(z_,{sortRowNodesByOrder:()=>t2});function t2(i,e){if(!i)return!1;const t=(n,l)=>{const a=e[n.id],u=e[l.id],d=a!==void 0,c=u!==void 0,h=d&&c,p=!d&&!c;return h?a-u:p?n.__objectId-l.__objectId:d?1:-1};let s,r,o=!1;for(let n=0;n<i.length-1;n++)if(s=i[n],r=i[n+1],t(s,r)>0){o=!0;break}return o?(i.sort(t),!0):!1}var $_={};Mi($_,{convertToSet:()=>XD});function XD(i){const e=new Set;return i.forEach(t=>e.add(t)),e}var i2=he(he(he(he(he(he(he(he(he(he(he(he(he(he(he(he(he(he({},s_),Bx),v_),T_),P_),Hx),Ix),__),Fx),G_),V_),i_),U_),D_),Ox),z_),$_),Zx),ye=i2,mc=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},Zt=class Lm{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(t=>this.onDone(t),t=>this.onReject(t))}static all(e){return new Lm(t=>{let s=e.length;const r=new Array(s);e.forEach((o,n)=>{o.then(l=>{r[n]=l,s--,s===0&&t(r)})})})}static resolve(e=null){return new Lm(t=>t(e))}then(e){return new Lm(t=>{this.status===1?t(e(this.resolution)):this.waiters.push(s=>t(e(s)))})}resolveNow(e,t){return this.status===1?t(this.resolution):e}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach(t=>t(e))}onReject(e){console.warn("TBI")}},Zg=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(r=>this.addCssClass(r));return}if(this.cssClassStates[e]!==!0&&e.length){const r=this.getGui();r&&r.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(r=>this.removeCssClass(r));return}if(this.cssClassStates[e]!==!1&&e.length){const r=this.getGui();r&&r.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const r=(e||"").split(" ");if(r.length>1){r.forEach(o=>this.addOrRemoveCssClass(o,t));return}}if(this.cssClassStates[e]!==t&&e.length){const r=this.getGui();r&&r.classList.toggle(e,t),this.cssClassStates[e]=t}}},ef=class ia extends W{constructor(e,t,s,r){super(),this.parentComp=e,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=r,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gridOptionsService.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gridOptionsService.get("tooltipMouseTrack");const e=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){const t=this.gridOptionsService.get(e);return t<0&&Ce(`${e} should not be lower than 0`),Math.max(200,t)}getTooltipDelay(e){var t,s;return e==="show"?(t=this.tooltipShowDelayOverride)!=null?t:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(s=this.tooltipHideDelayOverride)!=null?s:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gridOptionsService.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Fn()&&(ia.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;const s=e.relatedTarget,r=this.parentComp.getGui(),o=(t=this.tooltipComp)==null?void 0:t.getGui();this.isInteractingWithTooltip||r.contains(s)||this.interactionEnabled&&(o!=null&&o.contains(s))||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||ia.isLocked)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){const e=new Date().getTime(),t=ia.lastTooltipHideTime;return e-t<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=he({},this.parentComp.getTooltipParams());if(!V(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),ia.lastTooltipHideTime=new Date().getTime());const t={type:w.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(t),this.state=0}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.getContext().destroyBean(t);return}const r=t.getGui();this.tooltipComp=t,r.classList.contains("ag-tooltip")||r.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&r.classList.add("ag-tooltip-animate"),this.interactionEnabled&&r.classList.add("ag-tooltip-interactive");const o=this.localeService.getLocaleTextFunc(),n=this.popupService.addPopup({eChild:r,ariaLabel:o("ariaLabelTooltip","Tooltip")});n&&(this.tooltipPopupDestroyFunc=n.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(r,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(r,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(r,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(r,"focusout",this.onTooltipFocusOut.bind(this))||null));const l={type:w.EVENT_TOOLTIP_SHOW,tooltipGui:r,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(l),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var t;const s=this.parentComp.getGui(),r=(t=this.tooltipComp)==null?void 0:t.getGui(),o=e.relatedTarget;r!=null&&r.contains(o)||(this.isInteractingWithTooltip=!1,s.contains(o)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Pt(he({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Pt(he({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,s=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{e(),this.getContext().destroyBean(t)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){ia.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){ia.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};ef.isLocked=!1;g([T("popupService")],ef.prototype,"popupService",2);g([T("userComponentFactory")],ef.prototype,"userComponentFactory",2);g([z],ef.prototype,"postConstruct",1);var s2=ef,On=class extends W{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",s=this.ctrl.getGui();s&&(e!=null&&e!=""?s.setAttribute(t,e):s.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var e,t,s,r;if(this.tooltipManager!=null)return;const o={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new s2(o,(t=(e=this.ctrl).getTooltipShowDelayOverride)==null?void 0:t.call(e),(r=(s=this.ctrl).getTooltipHideDelayOverride)==null?void 0:r.call(s),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gridOptionsService.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?e.getColumn():void 0,s=e.getColDef?e.getColDef():void 0,r=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:s,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:r,data:r?r.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>{var o;return(o=this.tooltipManager)==null?void 0:o.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};g([T("beans")],On.prototype,"beans",2);g([z],On.prototype,"postConstruct",1);var r2=new mc,tf=class pR extends W{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=r2.next(),this.cssClassManager=new Zg(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gridOptionsService.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const{newTooltipText:t,showDelayOverride:s,hideDelayOverride:r,location:o,shouldDisplayTooltip:n}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==t&&(this.tooltipText=t);const l=()=>this.tooltipText;t!=null&&(this.tooltipFeature=this.createBean(new On({getTooltipValue:l,getGui:()=>this.getGui(),getLocation:()=>o??"UNKNOWN",getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:r!=null?()=>r:void 0,shouldDisplayTooltip:n})))}createChildComponentsFromTags(e,t){M_(e.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;const o=this.createComponentFromElement(r,n=>{n.getGui()&&this.copyAttributesFromNode(r,n.getGui())},t);if(o){if(o.addItems&&r.children.length){this.createChildComponentsFromTags(r,t);const n=Array.prototype.slice.call(r.children);o.addItems(n)}this.swapComponentForNode(o,e,r)}else r.childNodes&&this.createChildComponentsFromTags(r,t)})}createComponentFromElement(e,t,s){const r=e.nodeName,o=s?s[e.getAttribute("ref")]:void 0,n=this.agStackComponentsRegistry.getComponentClass(r);if(n){pR.elementGettingCreated=e;const l=new n(o);return l.setParentComponent(this),this.createBean(l,null,t),l}return null}copyAttributesFromNode(e,t){x_(e.attributes,(s,r)=>t.setAttribute(s,r))}swapComponentForNode(e,t,s){const r=e.getGui();t.replaceChild(r,s),t.insertBefore(document.createComment(s.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,s)}swapInComponentForQuerySelectors(e,t){const s=this;this.iterateOverQuerySelectors(r=>{s[r.attributeName]===t&&(s[r.attributeName]=e)})}iterateOverQuerySelectors(e){let t=Object.getPrototypeOf(this);for(;t!=null;){const s=t.__agComponentMetaData,r=oS(t.constructor);s&&s[r]&&s[r].querySelectors&&s[r].querySelectors.forEach(o=>e(o)),t=Object.getPrototypeOf(t)}}activateTabIndex(e){const t=this.gridOptionsService.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(s=>s.setAttribute("tabindex",t.toString()))}setTemplate(e,t){const s=Os(e);this.setTemplateFromElement(s,t)}setTemplateFromElement(e,t){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),t)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const e=this;this.iterateOverQuerySelectors(t=>{const s=o=>e[t.attributeName]=o;if(t.refSelector&&this.getAttribute("ref")===t.refSelector)s(this.eGui);else{const o=this.eGui.querySelector(t.querySelector);o&&s(o.__agComponent||o)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,t){if(e!=null)if(t||(t=this.eGui),Xg(e))t.appendChild(e);else{const s=e;t.appendChild(s.getGui())}}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:s}=t;F_(this.eGui,e,{skipAriaHidden:s})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:s}=t;Ue(this.eGui,e,{skipAriaHidden:s});const r={type:pR.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,t,s){this.eGui.addEventListener(e,t,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}getAttribute(e){const{eGui:t}=this;return t?t.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}};tf.EVENT_DISPLAYED_CHANGED="displayedChanged";g([T("agStackComponentsRegistry")],tf.prototype,"agStackComponentsRegistry",2);g([Nx],tf.prototype,"preConstructOnComponent",1);g([Nx],tf.prototype,"createChildComponentsPreConstruct",1);var De=tf;function Y(i){return o2.bind(this,`[ref=${i}]`,i)}function o2(i,e,t,s,r){if(i===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof r=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}n2(t,"querySelectors",{attributeName:s,querySelector:i,refSelector:e})}function n2(i,e,t){const s=l2(i,oS(i.constructor));s[e]||(s[e]=[]),s[e].push(t)}function l2(i,e){return i.__agComponentMetaData||(i.__agComponentMetaData={}),i.__agComponentMetaData[e]||(i.__agComponentMetaData[e]={}),i.__agComponentMetaData[e]}var JD=class extends De{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),s=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${s("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const s=t.getModelAsString(e);this.eFloatingFilterText.setValue(s)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}};g([Y("eFloatingFilterText")],JD.prototype,"eFloatingFilterText",2);g([T("columnModel")],JD.prototype,"columnModel",2);var K_=class{constructor(e,t,s,r){this.alive=!0,this.context=e,this.eParent=r,t.getDateCompDetails(s).newAgStackInstance().then(l=>{if(!this.alive){e.destroyBean(l);return}this.dateComp=l,l&&(r.appendChild(l.getGui()),l.afterGuiAttached&&l.afterGuiAttached(),this.tempValue&&l.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Ue(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var t,s;let r=!1;(t=this.dateComp)!=null&&t.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(r=!0),!r&&((s=this.dateComp)!=null&&s.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&Ce("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},j_=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],s=r=>r.some(o=>e[o]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${r}'`),!1);if(!t.every(s)){this.filterOptions=this.filterOptions.filter(r=>r===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},Y_={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},mS=class q_ extends W{constructor(e,t={}){super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks=he({shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const r=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);r&&(r.focus(),s.preventDefault())}},t)}postConstruct(){this.eFocusableElement.classList.add(q_.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",t=>{if(!(t.defaultPrevented||co(t))){if(this.callbacks.shouldStopEventPropagation(t)){fo(t);return}t.key===x.TAB?this.callbacks.onTabKeyDown(t):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(t)}})}};mS.FOCUS_MANAGED_CLASS="ag-focus-managed";g([T("focusService")],mS.prototype,"focusService",2);g([z],mS.prototype,"postConstruct",1);var Hl=mS,Q_="ag-resizer-wrapper",a2=`<div class="${Q_}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,Bc=class extends W{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,s=t/2-this.getWidth()/2,r=e/2-this.getHeight()/2;this.offsetElement(s,r)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:s,width:r,minHeight:o,height:n,x:l,y:a}=this.config;this.offsetParent||this.setOffsetParent();let u=0,d=0;const c=dr(this.element);if(c){const h=this.findBoundaryElement(),p=window.getComputedStyle(h);if(p.minWidth!=null){const m=h.offsetWidth-this.element.offsetWidth;d=parseInt(p.minWidth,10)-m}if(p.minHeight!=null){const m=h.offsetHeight-this.element.offsetHeight;u=parseInt(p.minHeight,10)-m}}if(this.minHeight=o||u,this.minWidth=s||d,r&&this.setWidth(r),n&&this.setHeight(n),(!r||!n)&&this.refreshSize(),e)this.center();else if(l||a)this.offsetElement(l,a);else if(c&&t){let h=this.boundaryEl,p=!0;if(h||(h=this.findBoundaryElement(),p=!1),h){const m=parseFloat(h.style.top),S=parseFloat(h.style.left);p?this.offsetElement(isNaN(S)?0:S,isNaN(m)?0:m):this.setPosition(S,m)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const s=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(s),this.moveElementDragListener=s):(this.dragService.removeDragSource(s),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const r=!!e[t],o=this.getResizerElement(t),n={dragStartPixels:0,eElement:o,onDragStart:l=>this.onResizeStart(l,t),onDragging:this.onResize.bind(this),onDragStop:l=>this.onResizeEnd(l,t)};(r||!this.isAlive()&&!r)&&(r?(this.dragService.addDragSource(n),this.resizeListeners.push(n),o.style.pointerEvents="all"):o.style.pointerEvents="none",this.resizable[t]=r)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,s=this.element;let r=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Ma(s,e),e=WD(s),r=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const o=this.getAvailableHeight();o&&e>o&&(e=o)}this.getHeight()!==e&&(r?(s.style.maxHeight="unset",s.style.minHeight="unset"):t?Ma(s,e):(s.style.height=`${e}px`,s.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:s}=this.offsetParent;if(!s)return null;const r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),n=e?this.position.y:r.top,l=e?0:o.top;let a=0;if(t){const d=this.element.parentElement;if(d){const{bottom:c}=d.getBoundingClientRect();a=c-r.bottom}}return s+l-n-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:s}=this.config;let r=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Mr(t,e),e=xp(t),r=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:o}=this.offsetParent,n=s?this.position.x:this.element.getBoundingClientRect().left;o&&e+n>o&&(e=o-n)}this.getWidth()!==e&&(r?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Mr(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:s}=this.config,r=s?this.boundaryEl:this.element;r&&(this.popupService.positionPopup({ePopup:r,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(r.style.left),parseFloat(r.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const s=this.getAvailableHeight();this.element.style.setProperty("max-height",`${s}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:s,isTop:r,anywhereWithin:o,topBuffer:n}=e,l=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,u=this.shouldSkipX(t,!!s,!!o,l)?0:l,d=this.shouldSkipY(t,!!r,n,a)?0:a;return{movementX:u,movementY:d}}shouldSkipX(e,t,s,r){const o=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:o.left;let u=a<=0&&n.left>=e.clientX||n.right<=e.clientX&&n.right<=l.right;return u?!0:(t?u=r<0&&e.clientX>a+n.left||r>0&&e.clientX<a+n.left:s?u=r<0&&e.clientX>l.right||r>0&&e.clientX<a+n.left:u=r<0&&e.clientX>l.right||r>0&&e.clientX<l.right,u)}shouldSkipY(e,t,s=0,r){const o=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:o.top;let u=a<=0&&n.top>=e.clientY||n.bottom<=e.clientY&&n.bottom<=l.bottom;return u?!0:(t?u=r<0&&e.clientY>a+n.top+s||r>0&&e.clientY<a+n.top:u=r<0&&e.clientY>l.bottom||r>0&&e.clientY<l.bottom,u)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const s=new DOMParser().parseFromString(a2,"text/html").body;e.appendChild(s.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${Q_}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:s,forcePopupParentAsOffsetParent:r}=this.config;!s&&!r&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(s=>!s.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,s=0;for(let r=0;r<e.length;r++){const o=e[r],n=!!o.style.flex&&o.style.flex!=="0 0 auto";if(o===this.element)continue;let l=this.minHeight||0,a=this.minWidth||0;if(n){const u=window.getComputedStyle(o);u.minHeight&&(l=parseInt(u.minHeight,10)),u.minWidth&&(a=parseInt(u.minWidth,10))}else l=o.offsetHeight,a=o.offsetWidth;t+=l,s+=a}return{height:t,width:s}}applySizeToSiblings(e){let t=null;const s=this.getSiblings();if(s){for(let r=0;r<s.length;r++){const o=s[r];o!==t&&(e?o.style.height=`${o.offsetHeight}px`:o.style.width=`${o.offsetWidth}px`,o.style.flex="0 0 auto",o===this.element&&(t=s[r+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:s}=this.config,{isTop:r,isRight:o,isBottom:n,isLeft:l}=this.currentResizer,a=o||l,u=n||r,{movementX:d,movementY:c}=this.calculateMouseMovement({e,isLeft:l,isTop:r}),h=this.position.x,p=this.position.y;let m=0,S=0;if(a&&d){const E=l?-1:1,C=this.getWidth(),v=C+d*E;let R=!1;l&&(m=C-v,(h+m<=0||v<=this.minWidth)&&(R=!0,m=0)),R||this.setWidth(v)}if(u&&c){const E=r?-1:1,C=this.getHeight(),v=C+c*E;let R=!1;r?(S=C-v,(p+S<=0||v<=this.minHeight)&&(R=!0,S=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&C<v&&this.getMinSizeOfSiblings().height+v>this.element.parentElement.offsetHeight&&(R=!0),R||this.setHeight(v)}this.updateDragStartPosition(e.clientX,e.clientY),((t||s)&&m||S)&&this.offsetElement(h+m,p+S)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;const s={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchEvent(s)}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:s}=this.position;let r;this.config.calculateTopBuffer&&(r=this.config.calculateTopBuffer());const{movementX:o,movementY:n}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:r});this.offsetElement(t+o,s+n),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};g([T("popupService")],Bc.prototype,"popupService",2);g([T("resizeObserverService")],Bc.prototype,"resizeObserverService",2);g([T("dragService")],Bc.prototype,"dragService",2);var CS=class xh extends De{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new Hl(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Bc(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const s=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(s,e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=xh.isUseApplyButton(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=xh.isUseApplyButton(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){const{buttons:e}=this.providedFilterParams,t=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(oi(this.eButtonsPanel),this.buttonListeners.forEach(o=>o==null?void 0:o()),this.buttonListeners=[]):t&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!t){this.eButtonsPanel&&so(this.eButtonsPanel);return}const s=document.createDocumentFragment(),r=o=>{let n,l;switch(o){case"apply":n=this.translate("applyFilter"),l=d=>this.onBtApply(!1,!1,d);break;case"clear":n=this.translate("clearFilter"),l=()=>this.onBtClear();break;case"reset":n=this.translate("resetFilter"),l=()=>this.onBtReset();break;case"cancel":n=this.translate("cancelFilter"),l=d=>{this.onBtCancel(d)};break;default:console.warn("AG Grid: Unknown button type specified");return}const u=Os(`<button
                    type="${o==="apply"?"submit":"button"}"
                    ref="${o}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${n}
                </button>`);this.buttonListeners.push(this.addManagedListener(u,"click",l)),s.append(u)};XD(e).forEach(o=>r(o)),this.eButtonsPanel.append(s),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=xh.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),t=os(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const s=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(s):this.resetUiToDefaults().then(s)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const s=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(s,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,s){s&&s.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:r}=this.providedFilterParams;r&&this.applyActive&&!e&&!t&&this.close(s)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,s=t&&t.key;let r;(s==="Enter"||s==="Space")&&(r={keyboardEvent:t}),this.hidePopup(r),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const s=this.isModelValid(this.getModelFromUi()),r=this.getRefElement("applyFilterButton");r&&fc(r,!s)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:s,gridOptionsService:r}=this;t?(s.restoreLastSize(),s.setResizable(r.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,t){return xh.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}refresh(e){return this.providedFilterParams=e,!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Y_[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}};g([T("rowModel")],CS.prototype,"rowModel",2);g([Y("eFilterBody")],CS.prototype,"eFilterBody",2);g([z],CS.prototype,"postConstruct",1);var BC=CS,ZD=class extends De{constructor(e,t){super(t),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:s,labelAlignment:r,disabled:o}=this.config;o!=null&&this.setDisabled(o),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),s!=null&&this.setLabelWidth(s),this.setLabelAlignment(r||this.labelAlignment),this.refreshLabel()}refreshLabel(){oi(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Ue(this.eLabel,!1),Bt(this.eLabel,"presentation")):(Ue(this.eLabel,!0),Bt(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const s=this.getGui().classList;return s.toggle("ag-label-align-left",e==="left"),s.toggle("ag-label-align-right",e==="right"),s.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(kp(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return fc(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}};g([z],ZD.prototype,"postConstruct",1);var X_=class extends ZD{constructor(e,t,s){super(e,t),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:s}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),s!=null&&this.onValueChange(s),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId();l_(e)!==null?kC(e,""):kC(e,t??"")}setAriaLabel(e){return mo(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListener(this,w.EVENT_FIELD_VALUE_CHANGED,()=>e(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Mr(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED}),this)}},u2=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,vu=class extends X_{constructor(e){if(super(e,(e==null?void 0:e.template)||u2,e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:s,variableWidth:r,minPickerWidth:o,maxPickerWidth:n}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!r,s!=null&&this.setPickerMaxHeight(s),o!=null&&this.setPickerMinWidth(o),n!=null&&this.setPickerMaxWidth(n)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));const{pickerIcon:s,inputWidth:r}=this.config;if(s){const o=_t(s,this.gridOptionsService);o&&this.eIcon.appendChild(o)}r!=null&&this.setInputWidth(r)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gridOptionsService.get("tabIndex").toString()),vn(e,!1),this.ariaRole&&Bt(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case x.UP:case x.DOWN:case x.ENTER:case x.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case x.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.gridOptionsService.getDocument(),t=this.pickerComponent.getGui();this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));const s=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:r,pickerAriaLabelValue:o,modalPicker:n=!0}=this.config,l={modal:n,eChild:t,closeOnEsc:!0,closedCallback:()=>{const m=e.activeElement===e.body;this.beforeHidePicker(),m&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:s(r,o)},a=this.popupService.addPopup(l),{maxPickerHeight:u,minPickerWidth:d,maxPickerWidth:c,variableWidth:h}=this;h?(d&&(t.style.minWidth=d),t.style.width=gS(xp(this.eWrapper)),c&&(t.style.maxWidth=c)):kp(t,c??xp(this.eWrapper));const p=u??`${Qg(this.popupService.getPopupParent())}px`;return t.style.setProperty("max-height",p),t.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,s=this.gridOptionsService.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:s,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();vn(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return kp(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}};g([T("popupService")],vu.prototype,"popupService",2);g([Y("eLabel")],vu.prototype,"eLabel",2);g([Y("eWrapper")],vu.prototype,"eWrapper",2);g([Y("eDisplayField")],vu.prototype,"eDisplayField",2);g([Y("eIcon")],vu.prototype,"eIcon",2);var vS=class Im extends De{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.options=[],this.itemEls=[]}init(){const e=this.getGui();this.addManagedListener(e,"mouseleave",()=>this.clearHighlighted()),!this.unFocusable&&this.addManagedListener(e,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){const t=e.key;switch(t){case x.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const o=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(o)}break;case x.DOWN:case x.UP:const s=t===x.DOWN;let r;if(e.preventDefault(),!this.highlightedEl)r=this.itemEls[s?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(s?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),r=this.itemEls[n]}this.highlightItem(r);break}}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:s}=e,r=s||t;return this.options.push({value:t,text:r}),this.renderOption(t,r),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{so(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,s)=>{cS(t,s+1),dS(t,e.length)})}renderOption(e,t){const s=this.gridOptionsService.getDocument(),r=s.createElement("div");Bt(r,"option"),r.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const o=s.createElement("span");r.appendChild(o),o.innerText=t,this.unFocusable||(r.tabIndex=-1),this.itemEls.push(r),this.addManagedListener(r,"mousemove",()=>this.highlightItem(r)),this.addManagedListener(r,"mousedown",n=>{n.preventDefault(),this.setValue(e)}),this.createManagedBean(new On({getTooltipValue:()=>t,getGui:()=>r,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>o.scrollWidth>o.clientWidth})),this.getGui().appendChild(r)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const s=this.options.findIndex(r=>r.value===e);if(s!==-1){const r=this.options[s];this.value=r.value,this.displayValue=r.text,this.highlightItem(this.itemEls[s]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!dr(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(Im.ACTIVE_CLASS),gc(this.highlightedEl,!0);const t=this.getGui(),s=t.getBoundingClientRect(),r=s.top+t.scrollTop,o=s.height,{offsetTop:n,offsetHeight:l}=e;(n+l>r+o||n<r)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!dr(this.highlightedEl)||(this.highlightedEl.classList.remove(Im.ACTIVE_CLASS),gc(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:Im.EVENT_ITEM_SELECTED})}};vS.EVENT_ITEM_SELECTED="selectedItem";vS.ACTIVE_CLASS="ag-active-item";g([z],vS.prototype,"init",1);var kF=vS,J_=class Z_ extends vu{constructor(e){super(he({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");const{options:e,value:t,placeholder:s}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),s&&t==null&&(this.eDisplayField.textContent=s),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new kF("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),MD(this.getAriaElement(),e),this.listComponent.addManagedListener(this.listComponent,kF.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:Z_.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,w.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}onKeyDown(e){var t;const{key:s}=e;s===x.TAB?this.hidePicker():!this.isPickerDisplayed||s!==x.ENTER&&s!==x.UP&&s!==x.DOWN?super.onKeyDown(e):(t=this.listComponent)==null||t.handleKeyDown(e)}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,t,s){if(this.value===e||!this.listComponent)return this;if(s||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let o=this.listComponent.getDisplayValue();return o==null&&this.config.placeholder&&(o=this.config.placeholder),this.eDisplayField.innerHTML=o,this.setTooltip({newTooltipText:o??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};J_.EVENT_ITEM_SELECTED="selectedItem";var SS=J_,ro=class extends X_{constructor(e,t,s="text",r="input"){super(e,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${r} ref="eInput" class="ag-input-field-input"></${r}>
                </div>
            </div>`,t),this.inputType=s,this.displayFieldTag=r}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>this.setValue(e.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return kp(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Uo(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return mo(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return fc(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Uo(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Uo(this.eInput,"autocomplete",t)}return this}};g([Y("eLabel")],ro.prototype,"eLabel",2);g([Y("eWrapper")],ro.prototype,"eWrapper",2);g([Y("eInput")],ro.prototype,"eInput",2);var wS=class extends ro{constructor(e,t="ag-checkbox",s="checkbox"){super(e,t,s),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,s){this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:t,event:s});const r=this.getInputElement(),o={type:w.EVENT_CHECKBOX_CHANGED,id:r.id,name:r.name,selected:e,previousValue:t};this.eventService.dispatchEvent(o)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),s=this.selected=e.target.checked;this.refreshSelectedClass(s),this.dispatchChange(s,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},eN=class extends wS{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,w.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},eb=class{constructor(e,t,s){this.localeService=e,this.optionsFactory=t,this.valueFormatter=s}getModelAsString(e){if(!e)return null;const t=e.operator!=null,s=this.localeService.getLocaleTextFunc();if(t){const r=e;let{conditions:o}=r;if(!o){const{condition1:a,condition2:u}=r;o=[a,u]}const n=o.map(a=>this.getModelAsString(a)),l=r.operator==="AND"?"andCondition":"orCondition";return n.join(` ${s(l,Y_[l])} `)}else{if(e.type===kt.BLANK||e.type===kt.NOT_BLANK)return s(e.type,e.type);{const r=e,o=this.optionsFactory.getCustomOption(r.type),{displayKey:n,displayName:l,numberOfInputs:a}=o||{};return n&&l&&a===0?(s(n,l),l):this.conditionToString(r,o)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){var t;return this.valueFormatter?(t=this.valueFormatter(e??null))!=null?t:"":String(e)}},gs=class td extends BC{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:r}=t;return r??1}const s=[td.EMPTY,td.NOT_BLANK,td.BLANK];return e&&s.indexOf(e)>=0?0:e===td.IN_RANGE?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,s)=>{s===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const s=!e.operator,r=!t.operator;if(!s&&r||s&&!r)return!1;let n;if(s){const l=e,a=t;n=this.areSimpleModelsEqual(l,a)}else{const l=e,a=t;n=l.operator===a.operator&&ko(l.conditions,a.conditions,(u,d)=>this.areSimpleModelsEqual(u,d))}return n}shouldRefresh(e){var t,s,r;const o=this.getModel(),n=o?(t=o.conditions)!=null?t:[o]:null,l=(r=(s=e.filterOptions)==null?void 0:s.map(u=>typeof u=="string"?u:u.displayKey))!=null?r:this.getDefaultFilterOptions();return!(!(!n||n.every(u=>l.find(d=>d===u.type)!==void 0))||typeof e.maxNumConditions=="number"&&n&&n.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let s=e;s.conditions||(s.conditions=[s.condition1,s.condition2]);const r=this.validateAndUpdateConditions(s.conditions),o=this.getNumConditions();if(r<o)this.removeConditionsAndOperators(r);else if(r>o)for(let l=o;l<r;l++)this.createJoinOperatorPanel(),this.createOption();const n=s.operator==="OR";this.eJoinOperatorsAnd.forEach(l=>l.setValue(!n,!0)),this.eJoinOperatorsOr.forEach(l=>l.setValue(n,!0)),s.conditions.forEach((l,a)=>{this.eTypes[a].setValue(l.type,!0),this.setConditionIntoUi(l,a)})}else{const s=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(s.type,!0),this.setConditionIntoUi(s,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Zt.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),Ce('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){var t;const s=this.getModel();if(s==null)return!0;const{operator:r}=s,o=[];if(r){const l=s;o.push(...(t=l.conditions)!=null?t:[])}else o.push(s);return o[r&&r==="OR"?"some":"every"](l=>this.individualConditionPasses(e,l))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new j_,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var t,s;e.suppressAndOrCondition!=null&&Ce('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),e.alwaysShowBothConditions!=null&&Ce('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(t=e.maxNumConditions)!=null?t:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(Ce('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(s=e.numAlwaysVisibleConditions)!=null?s:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(Ce('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(Ce('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new SS);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const s=this.getNumConditions()-1;this.forEachPositionInput(s,r=>this.resetInput(r)),this.addChangedListeners(e,s)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),s=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const r=this.eJoinOperatorPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(t,r,o),this.resetJoinOperatorOr(s,r,o),this.isReadOnly()||(t.onValueChange(this.listener),s.onValueChange(this.listener))}createJoinOperator(e,t,s){const r=this.createManagedBean(new eN);return e.push(r),r.addCssClass("ag-filter-condition-operator"),r.addCssClass(`ag-filter-condition-operator-${s}`),t.appendChild(r.getGui()),r}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,s=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:s?this.localeService.getLocaleTextFunc()(s.displayKey,s.displayName):this.translate(t)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){var e;let t=-1,s=!0;for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)?t=r:s=!1;if(this.shouldAddNewConditionAtEnd(s))this.createJoinOperatorPanel(),this.createOption();else{const r=(e=this.lastUiCompletePosition)!=null?e:this.getNumConditions()-2;if(t<r){this.removeConditionsAndOperators(r+1);const o=t+1,n=r-o;n>0&&this.removeConditionsAndOperators(o,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=t}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((r,o)=>{const n=this.isConditionDisabled(o,e);r.setDisabled(n||this.filterListOptions.length<=1),o===1&&(fc(this.eJoinOperatorPanels[0],n),this.eJoinOperatorsAnd[0].setDisabled(n),this.eJoinOperatorsOr[0].setDisabled(n))}),this.eConditionBodies.forEach((r,o)=>{Ue(r,this.isConditionBodyVisible(o))});const s=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((r,o)=>{r.setValue(!s,!0)}),this.eJoinOperatorsOr.forEach((r,o)=>{r.setValue(s,!0)}),this.forEachInput((r,o,n,l)=>{this.setElementDisplayed(r,o<l),this.setElementDisabled(r,this.isConditionDisabled(n,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const s=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,s,t),this.removeComponents(this.eJoinOperatorsAnd,s,t),this.removeComponents(this.eJoinOperatorsOr,s,t)}removeElements(e,t,s){this.removeItems(e,t,s).forEach(o=>so(o))}removeComponents(e,t,s){this.removeItems(e,t,s).forEach(o=>{so(o.getGui()),this.destroyBean(o)})}removeItems(e,t,s){return s==null?e.splice(t):e.splice(t,s)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const t=this.getInputs(0)[0];if(!t)return;t instanceof ro&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,s=-1,r=!1;const o=this.getJoinOperator();for(let l=this.getNumConditions()-1;l>=0;l--)if(this.isConditionUiComplete(l))t===-1&&(t=l,s=l);else{const a=l>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(l-1),u=l<t;(a||u)&&(this.removeConditionsAndOperators(l,1),r=!0,u&&s--)}let n=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),n=!0),this.shouldAddNewConditionAtEnd(s===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),n=!0),n&&this.updateConditionStatusesAndValues(s,o),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=s}getPlaceholderText(e,t){let s=this.translate(e);if(nS(this.filterPlaceholder)){const r=this.filterPlaceholder,o=this.eTypes[t].getValue(),n=this.translate(o);s=r({filterOptionKey:o,filterOption:n,placeholder:s})}else typeof this.filterPlaceholder=="string"&&(s=this.filterPlaceholder);return s}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,s,r,o)=>{if(!(t instanceof ro))return;const n=s===0&&o>1?"inRangeStart":s===0?"filterOoo":"inRangeEnd",l=s===0&&o>1?e("ariaFilterFromValue","Filter from value"):s===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(n,r)),t.setInputAriaLabel(l)})}setElementValue(e,t,s){e instanceof ro&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof De&&Ue(e.getGui(),t)}setElementDisabled(e,t){e instanceof De&&fc(e.getGui(),t)}attachElementOnChange(e,t){e instanceof ro&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,s)=>{this.forEachPositionTypeInput(s,t,e)})}forEachPositionInput(e,t){const s=this.getConditionType(e);this.forEachPositionTypeInput(e,s,t)}forEachPositionTypeInput(e,t,s){const r=this.getNumberOfInputs(t),o=this.getInputs(e);for(let n=0;n<o.length;n++){const l=o[n];l!=null&&s(l,n,e,r)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===td.EMPTY||this.getValues(e).some(s=>s==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,s)=>this.resetJoinOperatorAnd(t,s,this.joinOperatorId+s)),this.eJoinOperatorsOr.forEach((t,s)=>this.resetJoinOperatorOr(t,s,this.joinOperatorId+s)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Zt.resolve()}resetType(e){const s=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(s).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,s){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),s)}resetJoinOperatorOr(e,t,s){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),s)}resetJoinOperator(e,t,s,r,o){this.updateJoinOperatorDisabled(e.setValue(s,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${o}`).setLabel(r),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const s=this.mapValuesFromModel(e);this.forEachInput((r,o,n,l)=>{n===t&&this.setElementValue(r,s[o]!=null?s[o]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,s,r,o)=>{this.setElementValue(t,s===0&&r===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,s=>{this.attachElementOnChange(s,this.listener)}))}individualConditionPasses(e,t){const s=this.getCellValue(e.node),r=this.mapValuesFromModel(t),o=this.optionsFactory.getCustomOption(t.type),n=this.evaluateCustomFilter(o,r,s);return n??(s==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(r,s,t,e))}evaluateCustomFilter(e,t,s){if(e==null)return;const{predicate:r}=e;if(r!=null&&!t.some(o=>o==null))return r(t,s)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}};gs.EMPTY="empty";gs.BLANK="blank";gs.NOT_BLANK="notBlank";gs.EQUALS="equals";gs.NOT_EQUAL="notEqual";gs.LESS_THAN="lessThan";gs.LESS_THAN_OR_EQUAL="lessThanOrEqual";gs.GREATER_THAN="greaterThan";gs.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";gs.IN_RANGE="inRange";gs.CONTAINS="contains";gs.NOT_CONTAINS="notContains";gs.STARTS_WITH="startsWith";gs.ENDS_WITH="endsWith";var kt=gs,ui=class fi extends kt{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case fi.EQUALS:case fi.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case fi.GREATER_THAN:case fi.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case fi.LESS_THAN:case fi.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case fi.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case fi.BLANK:return!0;case fi.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,t,s){const r=this.comparator(),o=e[0]!=null?r(e[0],t):0;switch(s.type){case fi.EQUALS:return o===0;case fi.NOT_EQUAL:return o!==0;case fi.GREATER_THAN:return o>0;case fi.GREATER_THAN_OR_EQUAL:return o>=0;case fi.LESS_THAN:return o<0;case fi.LESS_THAN_OR_EQUAL:return o<=0;case fi.IN_RANGE:{const n=r(e[1],t);return this.scalarFilterParams.inRangeInclusive?o>=0&&n<=0:o>0&&n<0}case fi.BLANK:return this.isBlank(t);case fi.NOT_BLANK:return!this.isBlank(t);default:return console.warn('AG Grid: Unexpected type of filter "'+s.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},VF=1e3,HF=1/0,tN=class extends eb{constructor(e,t,s){super(t,s),this.dateFilterParams=e}conditionToString(e,t){const{type:s}=e,{numberOfInputs:r}=t||{},o=s==kt.IN_RANGE||r===2,n=Fs(e.dateFrom),l=Fs(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(o){const u=n!==null?Nd(n,a):"null",d=l!==null?Nd(l,a):"null";return`${u}-${d}`}return n!=null?Nd(n,a):`${s}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},tb=class iN extends ui{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=VF,this.maxValidYear=HF,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:s,type:r}=e||{};return[t&&Fs(t)||null,s&&Fs(s)||null].slice(0,this.getNumberOfInputs(r))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const s=t;return t==null||s<e?-1:s>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(s,r)=>{if(e[s]!=null)if(isNaN(e[s]))console.warn(`AG Grid: DateFilter ${s} is not a number`);else return e[s]==null?r:Number(e[s]);return r};this.minValidYear=t("minValidYear",VF),this.maxValidYear=t("maxValidYear",HF),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Fs(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Fs(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new tN(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new K_(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return iN.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,s,r){const o=document.createElement("div");o.classList.add(`ag-filter-${r}`),o.classList.add(`ag-filter-date-${r}`),t.push(o),e.appendChild(o),s.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,s){this.removeItems(e,t,s).forEach(o=>o.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((s,r,o,n)=>{o!==e||!t||r>=n||(t=t&&this.isValidDateValue(s.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),s={},r=this.getValues(e);return r.length>0&&(s.dateFrom=Ir(r[0])),r.length>1&&(s.dateTo=Ir(r[1])),he({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},s)}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),s=e("ariaFilterValue","Filter Value");this.forEachInput(r=>{r.setInputPlaceholder(t),r.setInputAriaLabel(s)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(s,r,o,n)=>{r<n&&t.push(s.getDate())}),t}translate(e){return e===ui.LESS_THAN?super.translate("before"):e===ui.GREATER_THAN?super.translate("after"):super.translate(e)}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!=null?t:""}};tb.DEFAULT_FILTER_OPTIONS=[ui.EQUALS,ui.NOT_EQUAL,ui.LESS_THAN,ui.GREATER_THAN,ui.IN_RANGE,ui.BLANK,ui.NOT_BLANK];g([T("userComponentFactory")],tb.prototype,"userComponentFactory",2);var sN=tb,rN=class extends De{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let s;t?s=e.conditions[0]:s=e,this.lastType=s.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const s=e;return this.isTypeEditable(s.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new j_,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const s=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(s)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:s}=t||{};return s==null||s==1}isTypeEditable(e){const t=[kt.IN_RANGE,kt.EMPTY,kt.BLANK,kt.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}},yS=class extends rN{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return sN.DEFAULT_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new tN(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const s=e;this.dateComp.setDate(Fs(s.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Ue(this.eDateWrapper,e),Ue(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=Ir(e);this.params.parentFilterInstance(s=>{if(s){const r=Fs(t);s.onFloatingFilterChanged(this.getLastType()||null,r)}})}getDateComponentParams(){const e=BC.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:os(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new K_(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gridOptionsService.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}};g([T("userComponentFactory")],yS.prototype,"userComponentFactory",2);g([Y("eReadOnlyText")],yS.prototype,"eReadOnlyText",2);g([Y("eDateWrapper")],yS.prototype,"eDateWrapper",2);var oN=class extends De{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.gridOptionsService.getDocument(),s=this.eDateInput.getInputElement();this.addManagedListener(s,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||s.focus()}),this.addManagedListener(s,"input",r=>{r.target===t.activeElement&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(e){const t=this.eDateInput.getInputElement(),s=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=s&&Ko(),t.type=s?"date":"text";const{minValidYear:r,maxValidYear:o,minValidDate:n,maxValidDate:l}=e.filterParams||{};if(n&&r&&Ce("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),l&&o&&Ce("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),n&&l){const[a,u]=[n,l].map(d=>d instanceof Date?d:Fs(d));a&&u&&a.getTime()>u.getTime()&&Ce("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}n?n instanceof Date?t.min=Nd(n):t.min=n:r&&(t.min=`${r}-01-01`),l?l instanceof Date?t.max=Nd(l):t.max=l:o&&(t.max=`${o}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Fs(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Ir(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:pS()||_D()||Ko()&&xD()>=14.1}};g([Y("eDateInput")],oN.prototype,"eDateInput",2);var Su=class extends ro{constructor(e,t="ag-text-field",s="text"){super(e,t,s)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=V(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=s=>{fS(s)&&s.key&&!e.test(s.key)&&s.preventDefault()};this.addManagedListener(this.eInput,"keydown",t),this.addManagedListener(this.eInput,"paste",s=>{var r;const o=(r=s.clipboardData)==null?void 0:r.getData("text");o&&o.split("").some(n=>!e.test(n))&&s.preventDefault()})}},ib=class extends Su{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{const o=parseFloat(this.eInput.value),n=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==n&&this.setValue(n)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";const{precision:e,min:t,max:s,step:r}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof s=="number"&&this.setMax(s),typeof r=="number"&&this.setStep(r)}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const r=parseFloat(e).toFixed(this.precision);return parseFloat(r).toString()}const s=String(e).split(".");if(s.length>1){if(s[1].length<=this.precision)return e;if(this.precision>0)return`${s[0]}.${s[1].slice(0,this.precision)}`}return s[0]}setMin(e){return this.min===e?this:(this.min=e,Uo(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Uo(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Uo(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(s=>super.setValue(s,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,s){if(V(s)){let r=this.isScientificNotation(s);if(r&&this.eInput.validity.valid)return e(s);if(!r){s=this.adjustPrecision(s);const o=this.normalizeValue(s);r=s!=o}if(r)return t(s)}return e(s)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},nN=class extends eb{conditionToString(e,t){const{numberOfInputs:s}=t||{};return e.type==kt.IN_RANGE||s===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function gR(i){const{allowedCharPattern:e}=i??{};return e??null}var lN=class aN extends ui{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:s,type:r}=e||{};return[this.processValue(t),this.processValue(s)].slice(0,this.getNumberOfInputs(r))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new nN(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return aN.DEFAULT_FILTER_OPTIONS}setElementValue(e,t,s){const r=!s&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,r)}createValueElement(){const e=gR(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Bt(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,s,r){const o=this.createManagedBean(r?new Su({allowedCharPattern:r}):new ib);o.addCssClass(`ag-filter-${s}`),o.addCssClass("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(s,r,o,n)=>{r<n&&t.push(this.processValue(this.stringToFloat(s.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=Wo(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),s={filterType:this.getFilterType(),type:t},r=this.getValues(e);return r.length>0&&(s.filter=r[0]),r.length>1&&(s.filterTo=r[1]),s}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!=null?t:""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}};lN.DEFAULT_FILTER_OPTIONS=[ui.EQUALS,ui.NOT_EQUAL,ui.GREATER_THAN,ui.GREATER_THAN_OR_EQUAL,ui.LESS_THAN,ui.LESS_THAN_OR_EQUAL,ui.IN_RANGE,ui.BLANK,ui.NOT_BLANK];var uN=lN,dN=class extends eb{conditionToString(e,t){const{numberOfInputs:s}=t||{};return e.type==kt.IN_RANGE||s===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}},Jr=class id extends kt{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){const t=e&&e.trim();return t===""?e:t}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?id.DEFAULT_FORMATTER:id.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new dN(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(ye.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:s,filterText:r})=>e(t,s,r)):this.textFilterParams.textMatcher||id.DEFAULT_MATCHER}createCondition(e){const t=this.getConditionType(e),s={filterType:this.getFilterType(),type:t},r=this.getValuesWithSideEffects(e,!0);return r.length>0&&(s.filter=r[0]),r.length>1&&(s.filterTo=r[1]),s}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const s=[];return this.forEachPositionInput(e,(r,o,n,l)=>{var a;if(o<l){let u=Wo(r.getValue());t&&this.textFilterParams.trimInput&&(u=(a=id.trimInput(u))!=null?a:null,r.setValue(u,!0)),s.push(u)}}),s}getDefaultFilterOptions(){return id.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Bt(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,s){const r=this.createManagedBean(new Su);r.addCssClass(`ag-filter-${s}`),r.addCssClass("ag-filter-filter"),t.push(r),e.appendChild(r.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:s,type:r}=e||{};return[t||null,s||null].slice(0,this.getNumberOfInputs(r))}evaluateNullValue(e){const t=[kt.NOT_EQUAL,kt.NOT_CONTAINS,kt.BLANK];return e?t.indexOf(e)>=0:!1}evaluateNonNullValue(e,t,s,r){const o=e.map(m=>this.formatter(m))||[],n=this.formatter(t),{api:l,colDef:a,column:u,columnApi:d,context:c,textFormatter:h}=this.textFilterParams;if(s.type===kt.BLANK)return this.isBlank(t);if(s.type===kt.NOT_BLANK)return!this.isBlank(t);const p={api:l,colDef:a,column:u,columnApi:d,context:c,node:r.node,data:r.data,filterOption:s.type,value:n,textFormatter:h};return o.some(m=>this.matcher(Pt(he({},p),{filterText:m})))}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!=null?t:""}};Jr.DEFAULT_FILTER_OPTIONS=[kt.CONTAINS,kt.NOT_CONTAINS,kt.EQUALS,kt.NOT_EQUAL,kt.STARTS_WITH,kt.ENDS_WITH,kt.BLANK,kt.NOT_BLANK];Jr.DEFAULT_FORMATTER=i=>i;Jr.DEFAULT_LOWERCASE_FORMATTER=i=>i==null?null:i.toString().toLowerCase();Jr.DEFAULT_MATCHER=({filterOption:i,value:e,filterText:t})=>{if(t==null)return!1;switch(i){case Jr.CONTAINS:return e.indexOf(t)>=0;case Jr.NOT_CONTAINS:return e.indexOf(t)<0;case Jr.EQUALS:return e===t;case Jr.NOT_EQUAL:return e!=t;case Jr.STARTS_WITH:return e.indexOf(t)===0;case Jr.ENDS_WITH:const s=e.lastIndexOf(t);return s>=0&&s===e.length-t.length;default:return!1}};var sb=Jr,cN=class extends W{constructor(e){super(),this.params=e,this.valueChangedListener=()=>{}}setupGui(e){var t;this.eFloatingFilterTextInput=this.createManagedBean(new Su((t=this.params)==null?void 0:t.config));const s=this.eFloatingFilterTextInput.getGui();e.appendChild(s),this.addManagedListener(s,"input",r=>this.valueChangedListener(r)),this.addManagedListener(s,"keydown",r=>this.valueChangedListener(r))}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},sf=class extends rN{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;this.params=e;const s=(t=e.browserAutoComplete)!=null?t:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:s}),this.applyActive=BC.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const r=BC.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),o=os(this.syncUpWithParentFilter.bind(this),r);this.floatingFilterInputService.setValueChangedListener(o)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();oi(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}getAriaLabel(e){const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),s=this.localeService.getLocaleTextFunc();return`${t} ${s("ariaFilterInput","Filter Input")}`}syncUpWithParentFilter(e){const t=e.key===x.ENTER;if(this.applyActive&&!t)return;let s=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(s=sb.trimInput(s),this.floatingFilterInputService.setValue(s,!0)),this.params.parentFilterInstance(r=>{r&&r.onFloatingFilterChanged(this.getLastType()||null,s||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}};g([T("columnModel")],sf.prototype,"columnModel",2);g([Y("eFloatingFilterInputContainer")],sf.prototype,"eFloatingFilterInputContainer",2);g([z],sf.prototype,"postConstruct",1);var d2=class extends W{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new ib),this.eFloatingFilterTextInput=this.createManagedBean(new Su),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),s=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(s),this.setupListeners(t,r=>this.valueChangedListener(r)),this.setupListeners(s,r=>this.valueChangedListener(r))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListener(e,"input",t),this.addManagedListener(e,"keydown",t)}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},c2=class extends sf{init(e){var t;super.init(e),this.filterModelFormatter=new nN(this.localeService,this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){gR(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return uN.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=gR(e.filterParams),this.allowedCharPattern?this.createManagedBean(new cN({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new d2)}},h2=class extends sf{init(e){super.init(e),this.filterModelFormatter=new dN(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return sb.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new cN)}},rf=class _h{constructor(e,t=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new go,this.eElement=e,this.preventMouseClick=t;const s=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",s,{passive:!0}),this.eElement.addEventListener("touchmove",r,{passive:!0}),this.eElement.addEventListener("touchend",o,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",s,{passive:!0}),this.eElement.removeEventListener("touchmove",r,{passive:!0}),this.eElement.removeEventListener("touchend",o,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.eventService.addEventListener(e,t)}removeEventListener(e,t){this.eventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const s=this.touchStart===t;if(this.touching&&s&&!this.moved){this.moved=!0;const r={type:_h.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:e};this.eventService.dispatchEvent(r)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!QD(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:_h.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>_h.DOUBLE_TAP_MILLIS){const s={type:_h.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(s),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};rf.EVENT_TAP="tap";rf.EVENT_DOUBLE_TAP="doubleTap";rf.EVENT_LONG_TAP="longTap";rf.DOUBLE_TAP_MILLIS=500;var Fi=rf,Ln=class hN extends De{constructor(e){super(),e||this.setTemplate(hN.TEMPLATE)}attachCustomElements(e,t,s,r,o){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=s,this.eSortMixed=r,this.eSortNone=o}setupSort(e,t=!1){this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),this.column.isSortable()&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,t,s){if(t==null)return;const r=_t(e,this.gridOptionsService,s);r&&t.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";Ue(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";Ue(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.get("unSortIcon"),s=e==null;Ue(this.eSortNone,!t&&s,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Ue(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;const t=this.sortController.getColumnsWithSortingOrdered(),s=(e=this.sortController.getDisplaySortIndexForColumn(this.column))!=null?e:-1,r=t.some(n=>{var l;return(l=this.sortController.getDisplaySortIndexForColumn(n))!=null?l:!1}),o=s>=0&&r;Ue(this.eSortOrder,o,{skipAriaHidden:!0}),s>=0?this.eSortOrder.textContent=(s+1).toString():oi(this.eSortOrder)}};Ln.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;g([Y("eSortOrder")],Ln.prototype,"eSortOrder",2);g([Y("eSortAsc")],Ln.prototype,"eSortAsc",2);g([Y("eSortDesc")],Ln.prototype,"eSortDesc",2);g([Y("eSortMixed")],Ln.prototype,"eSortMixed",2);g([Y("eSortNone")],Ln.prototype,"eSortNone",2);g([T("columnModel")],Ln.prototype,"columnModel",2);g([T("sortController")],Ln.prototype,"sortController",2);var rb=Ln,Qi=class pN extends De{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide?!1:(this.setDisplayName(e),!0)}workOutTemplate(){var e;let t=(e=this.params.template)!=null?e:pN.TEMPLATE;return t=t&&t.trim?t.trim():t,t}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=pi(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,s){if(t==null)return;const r=_t(e,this.gridOptionsService,s);r&&t.appendChild(r)}setupTap(){const{gridOptionsService:e}=this;if(e.get("suppressTouch"))return;const t=new Fi(this.getGui(),!0),s=this.shouldSuppressMenuHide(),r=s&&V(this.eMenu),o=r?new Fi(this.eMenu,!0):t;if(this.params.enableMenu){const n=r?"EVENT_TAP":"EVENT_LONG_TAP",l=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListener(o,Fi[n],l)}if(this.params.enableSorting){const n=l=>{var a,u;const d=l.touchStart.target;s&&((a=this.eMenu)!=null&&a.contains(d)||(u=this.eFilterButton)!=null&&u.contains(d))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(t,Fi.EVENT_TAP,n)}if(this.params.enableFilterButton){const n=new Fi(this.eFilterButton,!0);this.addManagedListener(n,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>n.destroy())}this.addDestroyFunc(()=>t.destroy()),r&&this.addDestroyFunc(()=>o.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){so(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){var t,s,r,o;const{column:n}=this.params,l=this.menuService.isLegacyMenuEnabled();if(e&&!l){if(this.menuService.isFilterMenuInHeaderEnabled(n))return this.params.showFilter((s=(t=this.eFilterButton)!=null?t:this.eMenu)!=null?s:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((o=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?o:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new rb(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,ut.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",t=>{const s=this.params.column.isMoving(),o=new Date().getTime()-this.lastMovingChanged<50;if(!(s||o)){const a=this.gridOptionsService.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}});const e=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const t=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),r=!(t==null?void 0:t.every(o=>this.params.column.getSort()==o.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0}configureFilter(e,t,s){if(!e)return so(t),!1;const{column:r}=this.params;return this.addInIcon("filter",t,r),this.addManagedListener(r,ut.EVENT_FILTER_CHANGED,s),s(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Ue(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var t,s,r,o;return e?(s=(t=this.eFilterButton)!=null?t:this.eMenu)!=null?s:this.getGui():(o=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?o:this.getGui()}};Qi.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;g([T("sortController")],Qi.prototype,"sortController",2);g([T("menuService")],Qi.prototype,"menuService",2);g([T("columnModel")],Qi.prototype,"columnModel",2);g([Y("eFilter")],Qi.prototype,"eFilter",2);g([Y("eFilterButton")],Qi.prototype,"eFilterButton",2);g([Y("eSortIndicator")],Qi.prototype,"eSortIndicator",2);g([Y("eMenu")],Qi.prototype,"eMenu",2);g([Y("eLabel")],Qi.prototype,"eLabel",2);g([Y("eText")],Qi.prototype,"eText",2);g([Y("eSortOrder")],Qi.prototype,"eSortOrder",2);g([Y("eSortAsc")],Qi.prototype,"eSortAsc",2);g([Y("eSortDesc")],Qi.prototype,"eSortDesc",2);g([Y("eSortMixed")],Qi.prototype,"eSortMixed",2);g([Y("eSortNone")],Qi.prototype,"eSortNone",2);var fR=Qi,of=class gN extends De{constructor(){super(gN.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&Ce("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const e=r=>{if(co(r))return;const o=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),o,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);const t=r=>{fo(r)};this.addManagedListener(this.eCloseIcon,"dblclick",t),this.addManagedListener(this.eOpenIcon,"dblclick",t),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();const s=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(s,Xt.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(s,Xt.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,t){const s=new Fi(e,!0);this.addManagedListener(s,Fi.EVENT_TAP,t),this.addDestroyFunc(()=>s.destroy()),this.addManagedListener(e,"click",t)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();Ue(this.eOpenIcon,t),Ue(this.eCloseIcon,!t)}else Ue(this.eOpenIcon,!1),Ue(this.eCloseIcon,!1)}addInIcon(e,t){const s=_t(e,this.gridOptionsService,null);s&&this.getRefElement(t).appendChild(s)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Ue(this.eOpenIcon,!1),Ue(this.eCloseIcon,!1);return}}setupLabel(){var e;const{displayName:t,columnGroup:s}=this.params;if(V(t)){const r=pi(t,!0);this.getRefElement("agLabel").textContent=r}this.addOrRemoveCssClass("ag-sticky-label",!((e=s.getColGroupDef())!=null&&e.suppressStickyLabel))}};of.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;g([T("columnModel")],of.prototype,"columnModel",2);g([Y("agOpened")],of.prototype,"eOpenIcon",2);g([Y("agClosed")],of.prototype,"eCloseIcon",2);var p2=of,wu=class extends De{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},ob=class fN extends wu{constructor(){super(fN.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),V(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===x.LEFT||t===x.UP||t===x.RIGHT||t===x.DOWN||e.shiftKey&&t===x.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!V(e)&&!V(this.params.value)?this.params.value:this.params.parseValue(e)}};ob.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;g([Y("eTextArea")],ob.prototype,"eTextArea",2);var g2=ob,nb=class extends wu{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueFormatterService:s,gridOptionsService:r}=this,{values:o,value:n,eventKey:l}=e;if(Se(o)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=l!=null?l===x.ENTER:!1;let a=!1;o.forEach(h=>{const p={value:h},m=s.formatValue(e.column,null,h),S=m!=null;p.text=S?m:h,t.addOption(p),a=a||n===h}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:u,valueListMaxWidth:d,valueListMaxHeight:c}=e;u!=null&&t.setPickerGap(u),c!=null&&t.setPickerMaxHeight(c),d!=null&&t.setPickerMaxWidth(d),r.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,SS.EVENT_ITEM_SELECTED,()=>e.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};g([T("valueFormatterService")],nb.prototype,"valueFormatterService",2);g([Y("eSelect")],nb.prototype,"eSelect",2);var nf=class extends wu{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`),this.cellEditorInput=e}init(e){this.params=e;const t=this.eInput;this.cellEditorInput.init(t,e);let s;if(e.cellStartedEdit){this.focusAfterAttached=!0;const r=e.eventKey;r===x.BACKSPACE||e.eventKey===x.DELETE?s="":r&&r.length===1?s=r:(s=this.cellEditorInput.getStartValue(),r!==x.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,s=this.cellEditorInput.getStartValue();s!=null&&t.setStartValue(s),this.addManagedListener(t.getGui(),"keydown",r=>{const{key:o}=r;(o===x.PAGE_UP||o===x.PAGE_DOWN)&&r.preventDefault()})}afterGuiAttached(){var e,t;const s=this.localeService.getLocaleTextFunc(),r=this.eInput;if(r.setInputAriaLabel(s("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Ko()||r.getFocusableElement().focus();const o=r.getInputElement();this.highlightAllOnFocus?o.select():(t=(e=this.cellEditorInput).setCaret)==null||t.call(e)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),s=e.getInputElement();t.focus(),s.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};g([Y("eInput")],nf.prototype,"eInput",2);var f2=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!V(e)&&!V(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=V(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},BF=class extends nf{constructor(){super(new f2)}},m2="↑",C2="↓",mN=class extends De{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const s=document.createElement("span");s.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(s),this.setTemplateFromElement(e)}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const s=Math.abs(t),r=e.formatValue(s),o=V(r)?r:s,n=t>=0;n?this.eDelta.textContent=m2+o:this.eDelta.textContent=C2+o,this.eDelta.classList.toggle("ag-value-change-delta-up",n),this.eDelta.classList.toggle("ag-value-change-delta-down",!n)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),oi(this.eDelta)}refresh(e,t=!1){const s=e.value;if(s===this.lastValue||(V(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:V(e.value)?this.eValue.textContent=s:oi(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof s=="number"&&typeof this.lastValue=="number"){const r=s-this.lastValue;this.showDelta(e,r)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=s,!0}};g([T("filterManager")],mN.prototype,"filterManager",2);var CN=class extends De{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let s=e.value;return Se(s)&&(s=""),s===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=s,V(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:V(e.value)?this.eCurrent.textContent=s:oi(this.eCurrent),!0)}};g([T("filterManager")],CN.prototype,"filterManager",2);var Ft=class vt{constructor(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=vt.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const s=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(e,s,t);this.dispatchLocalEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,s){return{type:vt.EVENT_DATA_CHANGED,node:this,oldData:t,newData:e,update:s}}createLocalRowEvent(e){return{type:e,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const e=new vt(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e}setDataAndId(e,t){const s=V(this.id)?this.createDaemonNode():null,r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);const o=this.createDataChangedEvent(e,r,!1);this.dispatchLocalEvent(o)}checkRowSelectable(){const e=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(e?e(this):!0)}setRowSelectable(e,t){if(this.selectable!==e){if(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_SELECTABLE_CHANGED)),t)return;if(this.beans.gridOptionsService.get("groupSelectsChildren")){const r=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:r??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(e){const t=this.beans.gridOptionsService.getCallback("getRowId");if(t)if(this.data){const s=this.getGroupKeys(!0);this.id=t({data:this.data,parentKeys:s.length>0?s:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(vt.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${vt.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=e}getGroupKeys(e=!1){const t=[];let s=this;for(e&&(s=s.parent);s&&s.level>=0;)t.push(s.key),s=s.parent;return t.reverse(),t}isPixelInRange(e){return!V(this.rowTop)||!V(this.rowHeight)?!1:e>=this.rowTop&&e<this.rowTop+this.rowHeight}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_TOP_CHANGED)),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_DISPLAYED_CHANGED)))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_DRAGGING_CHANGED)))}setHighlighted(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_HIGHLIGHT_CHANGED)))}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_MASTER_CHANGED)))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_GROUP_CHANGED)))}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(e,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=e,e!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=os(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,t=!0,s=0;const r=this.__autoHeights;if(r==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(l=>{let a=r[l.getId()];if(a==null)if(this.beans.columnModel.isColSpanActive()){let u=[];switch(l.getPinned()){case"left":u=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":u=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:u=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(u.includes(l)){e=!0;return}a=-1}else{e=!0;return}else t=!1;a>s&&(s=a)}),e)||((t||s<10)&&(s=this.beans.gridOptionsService.getRowHeightForNode(this).height),s==this.rowHeight))return;this.setRowHeight(s);const n=this.beans.rowModel;n.onRowHeightChangedDebounced&&n.onRowHeightChangedDebounced()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_UI_LEVEL_CHANGED)))}setExpanded(e,t){if(this.expanded===e)return;this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_EXPANDED_CHANGED));const s=Object.assign({},this.createGlobalRowEvent(w.EVENT_ROW_GROUP_OPENED),{expanded:e,event:t||null});this.beans.rowNodeEventThrottle.dispatchExpanded(s),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gridOptionsService.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(e){this.eventService&&this.eventService.dispatchEvent(e)}setDataValue(e,t,s){const o=(()=>{var a;return typeof e!="string"?e:(a=this.beans.columnModel.getGridColumn(e))!=null?a:this.beans.columnModel.getPrimaryColumn(e)})(),n=this.getValueFromValueService(o);if(this.beans.gridOptionsService.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(o,n,t,s),!1;const l=this.beans.valueService.setValue(this,o,t,s);return this.dispatchCellChangedEvent(o,t,n),this.checkRowSelectable(),l}getValueFromValueService(e){const t=this.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.group&&this.expanded&&!this.footer&&!t,o=this.beans.gridOptionsService.getGroupIncludeFooter()({node:this}),n=this.beans.gridOptionsService.get("groupSuppressBlankHeader"),l=s&&o&&!n;return this.beans.valueService.getValue(e,this,!1,l)}dispatchEventForSaveValueReadOnly(e,t,s,r){const o=this.beans.gridOptionsService.addGridCommonParams({type:w.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),data:this.data,node:this,oldValue:t,newValue:s,value:s,source:r});this.beans.eventService.dispatchEvent(o)}setGroupValue(e,t){const s=this.beans.columnModel.getGridColumn(e);Se(this.groupData)&&(this.groupData={});const r=s.getColId(),o=this.groupData[r];o!==t&&(this.groupData[r]=t,this.dispatchCellChangedEvent(s,t,o))}setAggData(e){const t=this.aggData;if(this.aggData=e,this.eventService){const s=r=>{const o=this.aggData?this.aggData[r]:void 0,n=t?t[r]:void 0;if(o===n)return;const l=this.beans.columnModel.lookupGridColumn(r);l&&this.dispatchCellChangedEvent(l,o,n)};for(const r in this.aggData)s(r);for(const r in e)r in this.aggData||s(r)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){const s=this.beans.gridOptionsService.get("treeData"),r=this.beans.gridOptionsService.get("isServerSideGroup");e=!this.stub&&!this.footer&&(s?!!r&&r(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(vt.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&Zs(this.childrenAfterGroup)}dispatchCellChangedEvent(e,t,s){const r={type:vt.EVENT_CELL_CHANGED,node:this,column:e,newValue:t,oldValue:s};this.dispatchLocalEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(t=>t.depthFirstSearch(e)),e(this)}calculateSelectedFromChildren(){var e;let t=!1,s=!1,r=!1;if(!((e=this.childrenAfterGroup)!=null&&e.length))return this.selectable?this.selected:null;for(let o=0;o<this.childrenAfterGroup.length;o++){const n=this.childrenAfterGroup[o];let l=n.isSelected();if(!n.selectable){const a=n.calculateSelectedFromChildren();if(a===null)continue;l=a}switch(l){case!0:t=!0;break;case!1:s=!0;break;default:r=!0;break}}if(!(r||t&&s))return t?!0:s?!1:this.selectable?this.selected:null}setSelectedInitialValue(e){this.selected=e}selectThisNode(e,t,s="api"){const r=!this.selectable&&e,o=this.selected===e;if(r||o)return!1;if(this.selected=e,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(vt.EVENT_ROW_SELECTED));const l=this.sibling;l&&l.footer&&l.dispatchLocalEvent(l.createLocalRowEvent(vt.EVENT_ROW_SELECTED))}const n=Pt(he({},this.createGlobalRowEvent(w.EVENT_ROW_SELECTED)),{event:t||null,source:s});return this.beans.eventService.dispatchEvent(n),!0}setSelected(e,t=!1,s="api"){if(typeof s=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:e,clearSelection:t,rangeSelect:!1,source:s})}setSelectedParams(e){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Pt(he({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(e){let t=this.parent;for(;t;){if(t===e)return!0;t=t.parent}return!1}addEventListener(e,t){var s,r;this.eventService||(this.eventService=new go),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new TD(this.beans.frameworkOverrides));const o=(r=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(t))!=null?r:t;this.eventService.addEventListener(e,o)}removeEventListener(e,t){var s,r;if(!this.eventService)return;const o=(r=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(t))!=null?r:t;this.eventService.removeEventListener(e,o),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(vt.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(vt.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(e){let t=this,s=!0,r=!1,o=null;for(;s&&!r;){const n=t.parent;V(n)&&t.firstChild?n.rowGroupColumn===e&&(r=!0,o=n):s=!1,t=n}return r?o:null}isFullWidthCell(){if(this.detail)return!0;const e=this.beans.gridOptionsService.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.key==null)return;const e=[];let t=this;for(;t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}createFooter(){if(this.sibling)return;const e=new Set(["eventService","__objectId","sticky"]),t=new vt(this.beans);Object.keys(this).forEach(s=>{e.has(s)||(t[s]=this[s])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Ft.ID_PREFIX_ROW_GROUP="row-group-";Ft.ID_PREFIX_TOP_PINNED="t-";Ft.ID_PREFIX_BOTTOM_PINNED="b-";Ft.OBJECT_ID_SEQUENCE=0;Ft.EVENT_ROW_SELECTED="rowSelected";Ft.EVENT_DATA_CHANGED="dataChanged";Ft.EVENT_CELL_CHANGED="cellChanged";Ft.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";Ft.EVENT_MASTER_CHANGED="masterChanged";Ft.EVENT_GROUP_CHANGED="groupChanged";Ft.EVENT_MOUSE_ENTER="mouseEnter";Ft.EVENT_MOUSE_LEAVE="mouseLeave";Ft.EVENT_HEIGHT_CHANGED="heightChanged";Ft.EVENT_TOP_CHANGED="topChanged";Ft.EVENT_DISPLAYED_CHANGED="displayedChanged";Ft.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";Ft.EVENT_LAST_CHILD_CHANGED="lastChildChanged";Ft.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";Ft.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";Ft.EVENT_EXPANDED_CHANGED="expandedChanged";Ft.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";Ft.EVENT_SELECTABLE_CHANGED="selectableChanged";Ft.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";Ft.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";Ft.EVENT_DRAGGING_CHANGED="draggingChanged";var _e=Ft,ES=class extends De{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),s=hS(e,t),[r,o]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],n=e(r,o);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${n} (${s})`)}onClicked(e,t,s){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:s.shiftKey,groupSelectsFiltered:t,event:s,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",r=>{fo(r)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",r=>{fo(r);const o=this.gridOptionsService.get("groupSelectsFiltered"),n=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(n,o)?this.onClicked(!0,o,r||{})===0&&this.onClicked(!1,o,r):n?this.onClicked(!1,o,r):this.onClicked(!0,o,r||{})}),this.addManagedListener(this.rowNode,_e.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||typeof this.getIsVisible()=="function"){const r=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,r),this.addManagedListener(this.rowNode,_e.EVENT_DATA_CHANGED,r),this.addManagedListener(this.rowNode,_e.EVENT_CELL_CHANGED,r),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gridOptionsService.isRowModelType("clientSide")}showOrHideSelect(){var e,t,s;let r=this.rowNode.selectable;const o=this.getIsVisible();if(r)if(typeof o=="function"){const l=(e=this.overrides)==null?void 0:e.callbackParams;if(!this.column)r=o(Pt(he({},l),{node:this.rowNode,data:this.rowNode.data}));else{const a=this.column.createColumnFunctionCallbackParams(this.rowNode);r=o(he(he({},l),a))}}else r=o??!1;if((t=this.column)==null?void 0:t.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!r),this.setVisible(!0),this.setDisplayed(!0);return}if((s=this.overrides)!=null&&s.removeHidden){this.setDisplayed(r);return}this.setVisible(r)}getIsVisible(){var e,t;return this.overrides?this.overrides.isVisible:(t=(e=this.column)==null?void 0:e.getColDef())==null?void 0:t.checkboxSelection}};g([Y("eCheckbox")],ES.prototype,"eCheckbox",2);g([z],ES.prototype,"postConstruct",1);var vN=(i=>(i[i.Left=0]="Left",i[i.Right=1]="Right",i))(vN||{}),Ae=class extends W{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=wr("columnMovePin",this.gridOptionsService,null),this.eHideIcon=wr("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=wr("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=wr("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=wr("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=wr("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=wr("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=wr("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=wr("dropNotAllowed",this.gridOptionsService,null)}addDragSource(e,t=!1){const s={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:s,dragSource:e}),this.dragService.addDragSource(s)}removeDragSource(e){const t=this.dragSourceAndParamsList.find(s=>s.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Ds(this.dragSourceAndParamsList,t))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(e,t){var s,r,o,n;const l=this.getHorizontalDirection(e),a=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);const u=this.dropTargets.filter(c=>this.isMouseOnDropTarget(e,c)),d=this.findCurrentDropTarget(e,u);if(d!==this.lastDropTarget)this.leaveLastTargetIfExists(e,l,a,t),this.lastDropTarget!==null&&d===null&&((r=(s=this.dragSource).onGridExit)==null||r.call(s,this.dragItem)),this.lastDropTarget===null&&d!==null&&((n=(o=this.dragSource).onGridEnter)==null||n.call(o,this.dragItem)),this.enterDragTargetIfExists(d,e,l,a,t),this.lastDropTarget=d;else if(d&&d.onDragging){const c=this.createDropTargetEvent(d,e,l,a,t);d.onDragging(c)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,s=[[e.getContainer()]];return t?s.concat(t):s}allContainersIntersect(e,t){for(const s of t){const r=s.getBoundingClientRect();if(r.width===0||r.height===0)return!1;const o=e.clientX>=r.left&&e.clientX<r.right,n=e.clientY>=r.top&&e.clientY<r.bottom;if(!o||!n)return!1}return!0}isMouseOnDropTarget(e,t){const s=this.getAllContainersFromDropTarget(t);let r=!1;for(const o of s)if(this.allContainersIntersect(e,o)){r=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:r&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){const s=t.length;if(s===0)return null;if(s===1)return t[0];const o=this.gridOptionsService.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(const n of o)for(const l of t)if(Kx(this.getAllContainersFromDropTarget(l)).indexOf(n)!==-1)return l;return null}enterDragTargetIfExists(e,t,s,r,o){if(e){if(e.onDragEnter){const n=this.createDropTargetEvent(e,t,s,r,o);e.onDragEnter(n)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,s,r){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const o=this.createDropTargetEvent(this.lastDropTarget,e,t,s,r);this.lastDropTarget.onDragLeave(o)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(s=>s.external).find(s=>s.getContainer()===e.getContainer())||null}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,s=e.clientX;return t===s?null:t>s?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,s=e.clientY;return t===s?null:t>s?0:1}createDropTargetEvent(e,t,s,r,o){const n=e.getContainer(),l=n.getBoundingClientRect(),{gridApi:a,columnApi:u,dragItem:d,dragSource:c}=this,h=t.clientX-l.left,p=t.clientY-l.top;return{event:t,x:h,y:p,vDirection:r,hDirection:s,dragSource:c,fromNudge:o,dragItem:d,api:a,columnApi:u,dropZoneTarget:n}}positionGhost(e){const t=this.eGhost;if(!t)return;const r=t.getBoundingClientRect().height,o=w_()-2,n=y_()-2,l=UD(t.offsetParent),{clientY:a,clientX:u}=e;let d=a-l.top-r/2,c=u-l.left-10;const h=this.gridOptionsService.getDocument(),p=h.defaultView||window,m=p.pageYOffset||h.documentElement.scrollTop,S=p.pageXOffset||h.documentElement.scrollLeft;o>0&&c+t.clientWidth>o+S&&(c=o+S-t.clientWidth),c<0&&(c=0),n>0&&d+t.clientHeight>n+m&&(d=n+m-t.clientHeight),d<0&&(d=0),t.style.left=`${c}px`,t.style.top=`${d}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Os(Ae.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:e}=this.environment.getTheme();e&&this.eGhost.classList.add(e),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const t=this.eGhost.querySelector(".ag-dnd-ghost-label");let s=this.dragSource.dragItemName;nS(s)&&(s=s()),t.innerHTML=pi(s)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const r=this.gridOptionsService.getDocument();let o=null,n=null;try{o=r.fullscreenElement}catch{}finally{o||(o=this.gridOptionsService.getRootNode());const l=o.querySelector("body");l?n=l:o instanceof ShadowRoot?n=o:o instanceof Document?n=o==null?void 0:o.documentElement:n=o}this.eGhostParent=n,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){oi(this.eGhostIcon);let s=null;switch(e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():Ae.ICON_NOT_ALLOWED),e){case Ae.ICON_PINNED:s=this.ePinnedIcon;break;case Ae.ICON_MOVE:s=this.eMoveIcon;break;case Ae.ICON_LEFT:s=this.eLeftIcon;break;case Ae.ICON_RIGHT:s=this.eRightIcon;break;case Ae.ICON_GROUP:s=this.eGroupIcon;break;case Ae.ICON_AGGREGATE:s=this.eAggregateIcon;break;case Ae.ICON_PIVOT:s=this.ePivotIcon;break;case Ae.ICON_NOT_ALLOWED:s=this.eDropNotAllowedIcon;break;case Ae.ICON_HIDE:s=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(s===this.eHideIcon&&this.gridOptionsService.get("suppressDragLeaveHidesColumns"))&&s&&this.eGhostIcon.appendChild(s)}};Ae.ICON_PINNED="pinned";Ae.ICON_MOVE="move";Ae.ICON_LEFT="left";Ae.ICON_RIGHT="right";Ae.ICON_GROUP="group";Ae.ICON_AGGREGATE="aggregate";Ae.ICON_PIVOT="pivot";Ae.ICON_NOT_ALLOWED="notAllowed";Ae.ICON_HIDE="hide";Ae.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;g([T("dragService")],Ae.prototype,"dragService",2);g([T("mouseEventService")],Ae.prototype,"mouseEventService",2);g([T("columnApi")],Ae.prototype,"columnApi",2);g([T("gridApi")],Ae.prototype,"gridApi",2);g([z],Ae.prototype,"init",1);g([ps],Ae.prototype,"clearDragSourceParamsList",1);Ae=g([te("dragAndDropService")],Ae);var Ja=class extends De{constructor(e,t,s,r,o,n){super(),this.cellValueFn=e,this.rowNode=t,this.column=s,this.customGui=r,this.dragStartPixels=o,this.suppressVisibilityChange=n,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(_t("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gridOptionsService.get("rowDragManaged")?new yN(this,this.beans,this.rowNode,this.column):new wN(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gridOptionsService.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gridOptionsService.get("rowDragManaged");this.gridOptionsService.get("treeData")&&e&&Ce("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gridOptionsService.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var s;const r=this.getDragItem(),o=((s=r.rowNodes)==null?void 0:s.length)||1,n=this.getRowDragText(this.column);return n?n(r,o):o===1?this.cellValueFn():`${o} ${t("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};g([T("beans")],Ja.prototype,"beans",2);g([z],Ja.prototype,"postConstruct",1);g([ps],Ja.prototype,"removeDragSource",1);var SN=class extends W{constructor(e,t,s){super(),this.parent=e,this.rowNode=t,this.column=s}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let s=!0,r=!1;this.column&&(s=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),r=nS(this.column.getColDef().rowDrag)),r?(this.parent.setDisplayed(!0,t),this.parent.setVisible(s,t)):(this.parent.setDisplayed(s,t),this.parent.setVisible(!0,t))}}},wN=class extends SN{constructor(e,t,s,r){super(e,s,r),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gridOptionsService.get("suppressRowDrag");this.setDisplayedOrVisible(e)}};g([z],wN.prototype,"postConstruct",1);var yN=class extends SN{constructor(e,t,s,r){super(e,s,r),this.beans=t}postConstruct(){this.addManagedListener(this.beans.eventService,w.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),s=t&&t.shouldPreventRowMove(),r=this.gridOptionsService.get("suppressRowDrag"),o=this.beans.dragAndDropService.hasExternalDropZones(),n=s&&!o||r;this.setDisplayedOrVisible(n)}};g([z],yN.prototype,"postConstruct",1);var yu=class extends W{init(e,t,s,r,o,n,l){var a,u,d,c;this.params=l,this.eGui=t,this.eCheckbox=s,this.eExpanded=r,this.eContracted=o,this.comp=e,this.compClass=n;const{node:h,value:p,colDef:m}=l,S=this.isTopLevelFooter();if(!S){if(this.isEmbeddedRowMismatch())return;if(h.footer&&this.gridOptionsService.get("groupHideOpenParents")){const C=m&&m.showRowGroup,v=h.rowGroupColumn&&h.rowGroupColumn.getColId();if(C!==v)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!S){const E=l.node.footer&&l.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(O=>{var L;return O.getColId()===((L=l.colDef)==null?void 0:L.showRowGroup)}),v=this.gridOptionsService.get("groupDisplayType")!="multipleColumns"||this.gridOptionsService.get("treeData")||this.gridOptionsService.get("showOpenedGroup")&&!l.node.footer&&(!l.node.group||l.node.rowGroupIndex!=null&&l.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(O=>{var L;return O.getColId()===((L=l.colDef)==null?void 0:L.showRowGroup)})),R=!h.group&&(((a=this.params.colDef)==null?void 0:a.field)||((u=this.params.colDef)==null?void 0:u.valueGetter)),b=this.isExpandable(),A=this.columnModel.isPivotMode()&&h.leafGroup&&((d=h.rowGroupColumn)==null?void 0:d.getColId())===((c=l.column)==null?void 0:c.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!b&&!R&&!v&&!E&&!A)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var e,t;const s=(e=this.params.colDef)==null?void 0:e.cellAriaRole,r=(t=this.params.column)==null?void 0:t.getColDef().cellAriaRole;return s||r||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:e,eGridCell:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){c_(t);return}const s=()=>{vn(t,!!e.expanded)};this.expandListener=this.addManagedListener(e,_e.EVENT_EXPANDED_CHANGED,s)||null,s()}isTopLevelFooter(){if(!this.gridOptionsService.get("groupIncludeTotalFooter")||this.params.value!=null||this.params.node.level!=-1)return!1;const e=this.params.colDef;if(e==null||e.showRowGroup===!0)return!0;const s=this.columnModel.getRowGroupColumns();return!s||s.length===0?!0:s[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gridOptionsService.get("embedFullWidthRows"))return!1;const e=this.params.pinned==="left",t=this.params.pinned==="right",s=!e&&!t;return this.gridOptionsService.get("enableRtl")?this.columnModel.isPinningLeft()?!t:!s:this.columnModel.isPinningLeft()?!e:!s}findDisplayedGroupNode(){const e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let s=t.parent;for(;s!=null;){if(s.rowGroupColumn&&e.isRowGroupDisplayed(s.rowGroupColumn.getId())){this.displayedGroupNode=s;break}s=s.parent}}Se(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){const e=this.params.node,t=this.params.column;if(!this.gridOptionsService.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!e.groupData){this.showingValueForOpenedParent=!1;return}if(e.rowGroupColumn!=null){const o=e.rowGroupColumn.getId();if(t.isRowGroupDisplayed(o)){this.showingValueForOpenedParent=!1;return}}const r=e.groupData[t.getId()]!=null;this.showingValueForOpenedParent=r}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var e;const t=this.adjustParamsWithDetailsFromRelatedColumn(),s=this.getInnerCompDetails(t),{valueFormatted:r,value:o}=t;let n=r;if(n==null){const l=this.displayedGroupNode.rowGroupColumn&&((e=this.params.column)==null?void 0:e.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&l?n=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):n=o??null}this.comp.setInnerRenderer(s,n)}adjustParamsWithDetailsFromRelatedColumn(){const e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;if(t!=null&&!t.isRowGroupDisplayed(e.getId()))return this.params;const r=this.params,{value:o,node:n}=this.params,l=this.valueFormatterService.formatValue(e,n,o);return Pt(he({},r),{valueFormatted:l})}addFooterValue(){const e=this.params.footerValueGetter;let t="";if(e){const r=ED(this.params);r.value=this.params.value,typeof e=="function"?t=e(r):typeof e=="string"?t=this.expressionService.evaluate(e,r):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else t=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(this.params.value!=null?this.params.value:"");const s=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(s,t)}getInnerCompDetails(e){if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);const t=this.userComponentFactory.getInnerRendererDetails(e,e),s=l=>l&&l.componentClass==this.compClass;if(t&&!s(t))return t;const r=this.displayedGroupNode.rowGroupColumn,o=r?r.getColDef():void 0;if(!o)return;const n=this.userComponentFactory.getCellRendererDetails(o,e);if(n&&!s(n))return n;if(s(n)&&o.cellRendererParams&&o.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(o.cellRendererParams,e)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,_e.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const e=this.displayedGroupNode.allChildrenCount,r=this.isShowRowGroupForThisRow()&&e!=null&&e>=0?`(${e})`:"";this.comp.setChildCount(r)}isShowRowGroupForThisRow(){if(this.gridOptionsService.get("treeData"))return!0;const e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;const t=this.params.column;return t==null||t.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;const t=this.params,s=_t("groupExpanded",this.gridOptionsService,null),r=_t("groupContracted",this.gridOptionsService,null);s&&this.eExpanded.appendChild(s),r&&this.eContracted.appendChild(r);const o=t.eGridCell;!(((e=this.params.column)==null?void 0:e.isCellEditable(t.node))&&this.gridOptionsService.get("enableGroupEdit"))&&this.isExpandable()&&!t.suppressDoubleClickExpand&&this.addManagedListener(o,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(o,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,_e.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const l=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,_e.EVENT_ALL_CHILDREN_COUNT_CHANGED,l),this.addManagedListener(this.displayedGroupNode,_e.EVENT_MASTER_CHANGED,l),this.addManagedListener(this.displayedGroupNode,_e.EVENT_GROUP_CHANGED,l),this.addManagedListener(this.displayedGroupNode,_e.EVENT_HAS_CHILDREN_CHANGED,l)}onExpandClicked(e){co(e)||(fo(e),this.onExpandOrContract(e))}onExpandOrContract(e){const t=this.displayedGroupNode,s=!t.expanded;!s&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(s,e)}scrollToStickyNode(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const e=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&e.leafGroup;if(!(e.isExpandable()&&!e.footer&&!t))return!1;const r=this.params.column;return r!=null&&typeof r.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){const{params:e,displayedGroupNode:t,columnModel:s}=this,{node:r}=e,o=this.isExpandable();if(o){const d=this.showingValueForOpenedParent?!0:r.expanded;this.comp.setExpandedDisplayed(d),this.comp.setContractedDisplayed(!d)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const n=s.isPivotMode(),l=n&&t.leafGroup,a=o&&!l,u=r.footer&&r.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",a),this.comp.addOrRemoveCssClass("ag-row-group",a),n?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",l):u||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!a)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const e=this.params.node;this.params.suppressPadding||(this.addManagedListener(e,_e.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gridOptionsService.get("groupHideOpenParents"))return;const e=this.params,t=e.node,s=!!e.colDef,r=this.gridOptionsService.get("treeData"),n=!s||r||e.colDef.showRowGroup===!0?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+n,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const e=new Ja(()=>this.params.value,this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}isUserWantsSelected(){const e=this.params.checkbox;return typeof e=="function"||e===!0}addCheckboxIfNeeded(){const e=this.displayedGroupNode,t=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(t){const s=new ES;this.getContext().createBean(s),s.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(s.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(s))}this.comp.setCheckboxVisible(t)}onKeyDown(e){!(e.key===x.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if(co(e))return;NC(this.eExpanded,e)||NC(this.eContracted,e)||this.onExpandOrContract(e)}};g([T("expressionService")],yu.prototype,"expressionService",2);g([T("valueFormatterService")],yu.prototype,"valueFormatterService",2);g([T("columnModel")],yu.prototype,"columnModel",2);g([T("userComponentFactory")],yu.prototype,"userComponentFactory",2);g([T("ctrlsService")],yu.prototype,"ctrlsService",2);var Eu=class EN extends De{constructor(){super(EN.TEMPLATE)}init(e){const t={setInnerRenderer:(n,l)=>this.setRenderDetails(n,l),setChildCount:n=>this.eChildCount.textContent=n,addOrRemoveCssClass:(n,l)=>this.addOrRemoveCssClass(n,l),setContractedDisplayed:n=>Ue(this.eContracted,n),setExpandedDisplayed:n=>Ue(this.eExpanded,n),setCheckboxVisible:n=>this.eCheckbox.classList.toggle("ag-invisible",!n)},s=this.createManagedBean(new yu),r=!e.colDef,o=this.getGui();s.init(t,o,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),r&&Bt(o,s.getCellAriaRole())}setRenderDetails(e,t){if(e){const s=e.newAgStackInstance();if(!s)return;s.then(r=>{if(!r)return;const o=()=>this.context.destroyBean(r);this.isAlive()?(this.eValue.appendChild(r.getGui()),this.addDestroyFunc(o)):o()})}else this.eValue.innerText=t}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};Eu.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;g([Y("eExpanded")],Eu.prototype,"eExpanded",2);g([Y("eContracted")],Eu.prototype,"eContracted",2);g([Y("eCheckbox")],Eu.prototype,"eCheckbox",2);g([Y("eValue")],Eu.prototype,"eValue",2);g([Y("eChildCount")],Eu.prototype,"eChildCount",2);var WF=Eu,RS=class RN extends De{constructor(){super(RN.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=_t("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}};RS.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;g([Y("eLoadingIcon")],RS.prototype,"eLoadingIcon",2);g([Y("eLoadingText")],RS.prototype,"eLoadingText",2);var v2=RS,TN=class DN extends De{constructor(){super()}destroy(){super.destroy()}init(e){const t=this.gridOptionsService.get("overlayLoadingTemplate");if(this.setTemplate(t??DN.DEFAULT_LOADING_OVERLAY_TEMPLATE),!t){const s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("loadingOoo","Loading...")})}}};TN.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var S2=TN,bN=class PN extends De{constructor(){super()}destroy(){super.destroy()}init(e){const t=this.gridOptionsService.get("overlayNoRowsTemplate");if(this.setTemplate(t??PN.DEFAULT_NO_ROWS_TEMPLATE),!t){const s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("noRowsToShow","No Rows To Show")})}}};bN.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var w2=bN,y2=class extends wu{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=pi(t,!0)}},E2=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const s=e.getInputElement();t.preventStepping?e.addManagedListener(s,"keydown",this.preventStepping):t.showStepperButtons&&s.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===x.UP||e.key===x.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!V(e)&&!V(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},R2=class extends nf{constructor(){super(new E2)}},T2=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!V(e)&&!V(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Ir(e,!1)}},D2=class extends nf{constructor(){super(new T2)}},b2=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!V(e)&&!V(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){var e,t;return Ir((t=this.parseDate((e=this.params.value)!=null?e:void 0))!=null?t:null,!1)}parseDate(e){return this.getDataTypeService().getDateParserFunction(this.params.column)(e)}formatDate(e){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(e)}},AN=class extends nf{constructor(){super(new b2(()=>this.dataTypeService))}};g([T("dataTypeService")],AN.prototype,"dataTypeService",2);var lb=class FN extends De{constructor(){super(FN.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),AD(t,"polite"),this.addManagedListener(t,"click",r=>{if(fo(r),this.eCheckbox.isDisabled())return;const o=this.eCheckbox.getValue();this.onCheckboxChanged(o)}),this.addManagedListener(t,"dblclick",r=>{fo(r)});const s=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",r=>{if(r.key===x.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===s.activeElement&&this.eCheckbox.toggle();const o=this.eCheckbox.getValue();this.onCheckboxChanged(o),r.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t,s,r;let o,n=!0;if(e.node.group&&e.column){const c=e.column.getColId();c.startsWith(pc)?o=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[c]!==void 0?o=(t=e.value)!=null?t:void 0:n=!1}else o=(s=e.value)!=null?s:void 0;if(!n){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(o);const l=e.disabled!=null?e.disabled:!((r=e.column)!=null&&r.isCellEditable(e.node));this.eCheckbox.setDisabled(l);const a=this.localeService.getLocaleTextFunc(),u=hS(a,o),d=l?u:`${a("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;this.eCheckbox.setInputAriaLabel(d)}onCheckboxChanged(e){const{column:t,node:s,rowIndex:r,value:o}=this.params,n={type:w.EVENT_CELL_EDITING_STARTED,column:t,colDef:t==null?void 0:t.getColDef(),data:s.data,node:s,rowIndex:r,rowPinned:s.rowPinned,value:o};this.eventService.dispatchEvent(n);const l=this.params.node.setDataValue(this.params.column,e,"edit"),a={type:w.EVENT_CELL_EDITING_STOPPED,column:t,colDef:t==null?void 0:t.getColDef(),data:s.data,node:s,rowIndex:r,rowPinned:s.rowPinned,value:o,oldValue:o,newValue:e,valueChanged:l};this.eventService.dispatchEvent(a)}};lb.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;g([Y("eCheckbox")],lb.prototype,"eCheckbox",2);var P2=lb,ON=class extends wu{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(e){var t;this.params=e;const s=(t=e.value)!=null?t:void 0;this.eCheckbox.setValue(s),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(s),this.addManagedListener(this.eCheckbox,w.EVENT_FIELD_VALUE_CHANGED,o=>this.setAriaLabel(o.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),s=hS(t,e),r=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${r} (${s})`)}};g([Y("eCheckbox")],ON.prototype,"eCheckbox",2);var A2=class extends De{constructor(){super(),this.setTemplate("<div></div>")}init(e){var t;this.params=e,this.cssClassPrefix=(t=this.params.cssClassPrefix)!=null?t:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;const e=Os(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?e.appendChild(_t("check",this.gridOptionsService)):this.params.icon&&(Xg(this.params.icon)?e.appendChild(this.params.icon):typeof this.params.icon=="string"?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}addName(){const e=Os(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=Os(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(e)}addSubMenu(){const e=Os(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),t=this.getGui();if(this.params.subMenu){const s=this.gridOptionsService.get("enableRtl")?"smallLeft":"smallRight";vn(t,!1),e.appendChild(_t(s,this.gridOptionsService))}t.appendChild(e)}getClassName(e){return`${this.cssClassPrefix}-${e}`}destroy(){super.destroy()}},Vp=class extends W{constructor(){super(...arguments),this.agGridDefaults={agDateInput:oN,agColumnHeader:fR,agColumnGroupHeader:p2,agSortIndicator:rb,agTextColumnFloatingFilter:h2,agNumberColumnFloatingFilter:c2,agDateColumnFloatingFilter:yS,agReadOnlyFloatingFilter:JD,agAnimateShowChangeCellRenderer:mN,agAnimateSlideCellRenderer:CN,agGroupCellRenderer:WF,agGroupRowRenderer:WF,agLoadingCellRenderer:v2,agCheckboxCellRenderer:P2,agCellEditor:BF,agTextCellEditor:BF,agNumberCellEditor:R2,agDateCellEditor:D2,agDateStringCellEditor:AN,agSelectCellEditor:nb,agLargeTextCellEditor:g2,agCheckboxCellEditor:ON,agTextColumnFilter:sb,agNumberColumnFilter:uN,agDateColumnFilter:sN,agLoadingOverlay:S2,agNoRowsOverlay:w2,agTooltipComponent:y2,agMenuItem:A2},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){this.gridOptions.components!=null&&$i(this.gridOptions.components,(e,t)=>this.registerJsComponent(e,t))}registerDefaultComponent(e,t){if(this.agGridDefaults[e]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const s=(a,u)=>({componentFromFramework:u,component:a}),r=this.getFrameworkOverrides().frameworkComponent(t,this.gridOptions.components);if(r!=null)return s(r,!0);const o=this.jsComps[t];if(o){const a=this.getFrameworkOverrides().isFrameworkComponent(o);return s(o,a)}const n=this.agGridDefaults[t];if(n)return s(n,!1);const l=this.enterpriseAgDefaultCompsModule[t];return l?et.__assertRegistered(l,`AG Grid '${e}' component: ${t}`,this.context.getGridId()):La(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const s=[...Object.keys(this.agGridDefaults).filter(o=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(o)),...Object.keys(this.jsComps)],r=Jg(t,s,!0,.8).values;console.warn(`AG Grid: Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),r.length>0&&console.warn(`         Did you mean: [${r.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};g([T("gridOptions")],Vp.prototype,"gridOptions",2);g([z],Vp.prototype,"init",1);Vp=g([te("userComponentRegistry")],Vp);var F2={propertyName:"dateComponent",cellRenderer:!1},O2={propertyName:"headerComponent",cellRenderer:!1},L2={propertyName:"headerGroupComponent",cellRenderer:!1},UF={propertyName:"cellRenderer",cellRenderer:!0},I2={propertyName:"cellEditor",cellRenderer:!1},zF={propertyName:"innerRenderer",cellRenderer:!0},M2={propertyName:"loadingOverlayComponent",cellRenderer:!1},x2={propertyName:"noRowsOverlayComponent",cellRenderer:!1},_2={propertyName:"tooltipComponent",cellRenderer:!1},mR={propertyName:"filter",cellRenderer:!1},N2={propertyName:"floatingFilterComponent",cellRenderer:!1},G2={propertyName:"toolPanel",cellRenderer:!1},k2={propertyName:"statusPanel",cellRenderer:!1},V2={propertyName:"fullWidthCellRenderer",cellRenderer:!0},H2={propertyName:"loadingCellRenderer",cellRenderer:!0},B2={propertyName:"groupRowRenderer",cellRenderer:!0},W2={propertyName:"detailCellRenderer",cellRenderer:!0},U2={propertyName:"menuItem",cellRenderer:!1},LN=class{static getFloatingFilterType(e){return this.filterToFloatingFilterMapping[e]}};LN.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var Fl=class extends W{getHeaderCompDetails(e,t){return this.getCompDetails(e,O2,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,L2,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,V2,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,H2,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,B2,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,W2,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,zF,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,zF,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,UF,null,t)}getCellEditorDetails(e,t){return this.getCompDetails(e,I2,"agCellEditor",t,!0)}getFilterDetails(e,t,s){return this.getCompDetails(e,mR,s,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,F2,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,M2,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,x2,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,_2,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,UF,null,t)}getFloatingFilterCompDetails(e,t,s){return this.getCompDetails(e,N2,s,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,G2,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,k2,null,t,!0)}getMenuItemCompDetails(e,t){return this.getCompDetails(e,U2,"agMenuItem",t,!0)}getCompDetails(e,t,s,r,o=!1){const{propertyName:n,cellRenderer:l}=t;let{compName:a,jsComp:u,fwComp:d,paramsFromSelector:c,popupFromSelector:h,popupPositionFromSelector:p}=this.getCompKeys(e,t,r);const m=v=>{const R=this.userComponentRegistry.retrieve(n,v);R&&(u=R.componentFromFramework?void 0:R.component,d=R.componentFromFramework?R.component:void 0)};if(a!=null&&m(a),u==null&&d==null&&s!=null&&m(s),u&&l&&!this.agComponentUtils.doesImplementIComponent(u)&&(u=this.agComponentUtils.adaptFunction(n,u)),!u&&!d){o&&console.error(`AG Grid: Could not find component ${a}, did you forget to configure this component?`);return}const S=this.mergeParamsWithApplicationProvidedParams(e,t,r,c),E=u==null,C=u||d;return{componentFromFramework:E,componentClass:C,params:S,type:t,popupFromSelector:h,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(C,E,S,t)}}getCompKeys(e,t,s){const{propertyName:r}=t;let o,n,l,a,u,d;if(e){const c=e,h=c[r+"Selector"],p=h?h(s):null,m=S=>{typeof S=="string"?o=S:S!=null&&S!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(S)?l=S:n=S)};p?(m(p.component),a=p.params,u=p.popup,d=p.popupPosition):m(c[r])}return{compName:o,jsComp:n,fwComp:l,paramsFromSelector:a,popupFromSelector:u,popupPositionFromSelector:d}}newAgStackInstance(e,t,s,r){const o=r.propertyName,n=!t;let l;if(n)l=new e;else{const u=this.componentMetadataProvider.retrieve(o);l=this.frameworkComponentWrapper.wrap(e,u.mandatoryMethodList,u.optionalMethodList,r)}const a=this.initComponent(l,s);return a==null?Zt.resolve(l):a.then(()=>l)}mergeParamsWithApplicationProvidedParams(e,t,s,r=null){const o=this.gridOptionsService.getGridCommonParams();sr(o,s);const n=e,l=n&&n[t.propertyName+"Params"];if(typeof l=="function"){const a=l(s);sr(o,a)}else typeof l=="object"&&sr(o,l);return sr(o,r),o}initComponent(e,t){if(this.context.createBean(e),e.init!=null)return e.init(t)}getDefaultFloatingFilterType(e,t){if(e==null)return null;let s=null,{compName:r,jsComp:o,fwComp:n}=this.getCompKeys(e,mR);return r?s=LN.getFloatingFilterType(r):o==null&&n==null&&e.filter===!0&&(s=t()),s}};g([T("gridOptions")],Fl.prototype,"gridOptions",2);g([T("agComponentUtils")],Fl.prototype,"agComponentUtils",2);g([T("componentMetadataProvider")],Fl.prototype,"componentMetadataProvider",2);g([T("userComponentRegistry")],Fl.prototype,"userComponentRegistry",2);g([qe("frameworkComponentWrapper")],Fl.prototype,"frameworkComponentWrapper",2);Fl=g([te("userComponentFactory")],Fl);var WC=class{};WC.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0};WC.ALL_PROPERTIES=Object.keys(WC.ColDefPropertyMap);var z2=WC,IN=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const s=t||this.shouldSkipVerticalScroll();if(s&&this.shouldSkipHorizontalScroll())return;const r=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=e.clientX<r.left+o,this.tickRight=e.clientX>r.right-o,this.tickUp=e.clientY<r.top+o&&!s,this.tickDown=e.clientY>r.bottom-o&&!s,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e;if(e=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},fr=class extends W{constructor(e){super(),this.isMultiRowDrag=!1,this.eContainer=e}postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(()=>{const e=this.ctrlsService.getGridBodyCtrl();this.autoScrollService=new IN({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:t=>e.getScrollFeature().setVerticalScrollPosition(t),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gridOptionsService.get("rowDragManaged")&&this.shouldPreventRowMove()?Ae.ICON_NOT_ALLOWED:Ae.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=this.gridOptionsService.get("rowDragMultiRow"),s=[...this.selectionService.getSelectedNodes()].sort((o,n)=>o.rowIndex==null||n.rowIndex==null?0:this.getRowIndexNumber(o)-this.getRowIndexNumber(n)),r=e.dragItem.rowNode;return t&&s.indexOf(r)!==-1?(this.isMultiRowDrag=!0,s):(this.isMultiRowDrag=!1,[r])}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(w.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gridOptionsService.getDomDataKey()}isDropZoneWithinThisGrid(e){const s=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:r}=e;return!s.contains(r)}onEnterOrDragging(e){this.dispatchGridEvent(w.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsService.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const s=this.isFromThisGrid(e),r=this.gridOptionsService.get("rowDragManaged"),o=e.dragItem.rowNodes;r&&this.shouldPreventRowMove()||(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!s?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(o[0],t):this.moveRows(o,t))}getRowIndexNumber(e){return parseInt(Je(e.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),s=t&&t.highlighted===1,r=this.mouseEventService.getNormalisedPosition(e).y,o=e.dragItem.rowNodes;let n=s?1:0;if(this.isFromThisGrid(e))o.forEach(l=>{l.rowTop<r&&(n-=1)}),this.moveRows(o,r,n);else{const l=this.gridOptionsService.getCallback("getRowId");let a=this.clientSideRowModel.getRowIndexAtPixel(r)+1;this.clientSideRowModel.getHighlightPosition(r)===0&&a--,this.clientSideRowModel.updateRowData({add:o.map(u=>u.data).filter(u=>!this.clientSideRowModel.getRowNode(l?l({data:u,level:0}):u.id)),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,s=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,s)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){Ce("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=s=>{e.onDragEnter(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_ENTER,s))}),e.onDragLeave&&(t.onDragLeave=s=>{e.onDragLeave(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_LEAVE,s))}),e.onDragging&&(t.onDragging=s=>{e.onDragging(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_MOVE,s))}),e.onDragStop&&(t.onDragStop=s=>{e.onDragStop(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_END,s))})),this.dragAndDropService.addDropTarget(he({isInterestedIn:s=>s===2,getIconName:()=>Ae.ICON_MOVE,external:!0},t))}getRowDropZone(e){const t=this.getContainer.bind(this),s=this.onDragEnter.bind(this),r=this.onDragLeave.bind(this),o=this.onDragging.bind(this),n=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?l=>{s(l),e.onDragEnter(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_ENTER,l))}:s,onDragLeave:e.onDragLeave?l=>{r(l),e.onDragLeave(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_LEAVE,l))}:r,onDragging:e.onDragging?l=>{o(l),e.onDragging(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_MOVE,l))}:o,onDragStop:e.onDragStop?l=>{n(l),e.onDragStop(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_END,l))}:n,fromGrid:!0}:{getContainer:t,onDragEnter:s,onDragLeave:r,onDragging:o,onDragStop:n,fromGrid:!0}}draggingToRowDragEvent(e,t){const s=this.mouseEventService.getNormalisedPosition(t).y,r=s>this.paginationProxy.getCurrentPageHeight();let o=-1,n;r||(o=this.rowModel.getRowIndexAtPixel(s),n=this.rowModel.getRow(o));let l;switch(t.vDirection){case 1:l="down";break;case 0:l="up";break;default:l=null;break}return this.gridOptionsService.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:o,overNode:n,y:s,vDirection:l})}dispatchGridEvent(e,t){const s=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(s)}onDragLeave(e){this.dispatchGridEvent(w.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.get("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)}onDragStop(e){this.dispatchGridEvent(w.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.get("rowDragManaged")&&(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}};g([T("dragAndDropService")],fr.prototype,"dragAndDropService",2);g([T("rowModel")],fr.prototype,"rowModel",2);g([T("paginationProxy")],fr.prototype,"paginationProxy",2);g([T("columnModel")],fr.prototype,"columnModel",2);g([T("focusService")],fr.prototype,"focusService",2);g([T("sortController")],fr.prototype,"sortController",2);g([T("filterManager")],fr.prototype,"filterManager",2);g([T("selectionService")],fr.prototype,"selectionService",2);g([T("mouseEventService")],fr.prototype,"mouseEventService",2);g([T("ctrlsService")],fr.prototype,"ctrlsService",2);g([qe("rangeService")],fr.prototype,"rangeService",2);g([z],fr.prototype,"postConstruct",1);var Hp=class extends W{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(e){const t=e.dragSource.eElement,s=e.mouseDownListener;if(t.removeEventListener("mousedown",s),e.touchEnabled){const r=e.touchStartListener;t.removeEventListener("touchstart",r,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(s=>s.dragSource===e);t&&(this.removeListener(t),Ds(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:s,includeTouch:r,stopPropagationForTouch:o}=e;s.addEventListener("mousedown",t);let n=null;const l=this.gridOptionsService.get("suppressTouch");r&&!l&&(n=a=>{BD(a.target)||(a.cancelable&&(a.preventDefault(),o&&a.stopPropagation()),this.onTouchStart(e,a))},s.addEventListener("touchstart",n,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:n,touchEnabled:!!r})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const s=t.touches[0];this.touchLastTime=s,this.touchStart=s;const r=u=>this.onTouchMove(u,e.eElement),o=u=>this.onTouchUp(u,e.eElement),n=u=>{u.cancelable&&u.preventDefault()},l=t.target,a=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:n,options:{passive:!1}},{target:l,type:"touchmove",listener:r,options:{passive:!0}},{target:l,type:"touchend",listener:o,options:{passive:!0}},{target:l,type:"touchcancel",listener:o,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(s,this.touchStart,e.eElement)}onMouseDown(e,t){const s=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||s._alreadyProcessedByDragService||(s._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const r=u=>this.onMouseMove(u,e.eElement),o=u=>this.onMouseUp(u,e.eElement),n=u=>u.preventDefault(),l=this.gridOptionsService.getRootNode(),a=[{target:l,type:"mousemove",listener:r},{target:l,type:"mouseup",listener:o},{target:l,type:"contextmenu",listener:n}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:s,type:r,listener:o,options:n}=t;s.addEventListener(r,o,n)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:s,type:r,listener:o,options:n}=t;s.removeEventListener(r,o,n)})})}isEventNearStartEvent(e,t){const{dragStartPixels:s}=this.currentDragParams,r=V(s)?s:4;return QD(e,t,r)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,s){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;const r={type:w.EVENT_DRAG_STARTED,target:s};this.eventService.dispatchEvent(r),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){const s=this.getFirstActiveTouch(e.touches);s&&this.onCommonMove(s,this.touchStart,t)}onMouseMove(e,t){var s;Ko()&&((s=this.gridOptionsService.getDocument().getSelection())==null||s.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gridOptionsService.get("enableCellTextSelection"),s=e.type==="mousemove";return t&&s&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,s=t==null?void 0:t.tagName.toLocaleLowerCase();return!!(s!=null&&s.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let s=this.getFirstActiveTouch(e.changedTouches);s||(s=this.touchLastTime),this.onUpCommon(s,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);const s={type:w.EVENT_DRAG_STOPPED,target:t};this.eventService.dispatchEvent(s)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(s=>s()),this.dragEndFunctions.length=0}};g([T("mouseEventService")],Hp.prototype,"mouseEventService",2);g([ps],Hp.prototype,"removeAllListeners",1);Hp=g([te("dragService")],Hp);var dy="ag-list-item-hovered",MN=class extends W{constructor(e,t,s){super(),this.comp=e,this.virtualList=t,this.params=s,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){const e={isInterestedIn:t=>t===this.params.dragSourceType,getIconName:()=>this.moveBlocked?Ae.ICON_PINNED:Ae.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:t=>this.onDragging(t),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(e)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new IN({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),s=this.virtualList.getComponentAt(t.rowIndex);if(!s)return;const r=s.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,hR(r,dy),hR(r,`ag-item-highlight-${t.position}`))}getListDragItem(e){const t=this.virtualList.getGui(),s=parseFloat(window.getComputedStyle(t).paddingTop),r=this.virtualList.getRowHeight(),o=this.virtualList.getScrollTop(),n=Math.max(0,(e.y-s+o)/r),l=this.params.getNumRows(this.comp)-1,a=Math.min(l,n)|0;return{rowIndex:a,position:Math.round(n)>n||n>l?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${dy}`).forEach(t=>{[dy,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(s=>{t.classList.remove(s)})}),this.lastHoveredListItem=null}};g([T("dragAndDropService")],MN.prototype,"dragAndDropService",2);g([z],MN.prototype,"postConstruct",1);function ma(i){const e=i;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():i}var ke=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()})}__getAlignedGridService(){return this.alignedGridsService}__getContext(){return this.context}__getModel(){return this.rowModel}getGridId(){return this.context.getGridId()}addDetailGridInfo(e,t){this.detailGridInfoMap[e]=t}removeDetailGridInfo(e){this.detailGridInfoMap[e]=void 0}getDetailGridInfo(e){return this.detailGridInfoMap[e]}forEachDetailGridInfo(e){let t=0;$i(this.detailGridInfoMap,(s,r)=>{V(r)&&(e(r,t),t++)})}getDataAsCsv(e){if(et.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(e)}exportDataAsCsv(e){et.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(e)}assertNotExcelMultiSheet(e,t){return et.__assertRegistered("@ag-grid-enterprise/excel-export","api."+e,this.context.getGridId())?this.excelCreator.getFactoryMode()===1?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1}getDataAsExcel(e){if(this.assertNotExcelMultiSheet("getDataAsExcel",e))return this.excelCreator.getDataAsExcel(e)}exportDataAsExcel(e){this.assertNotExcelMultiSheet("exportDataAsExcel",e)&&this.excelCreator.exportDataAsExcel(e)}getSheetDataForExcel(e){if(et.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(e)}getMultipleSheetsAsExcel(e){if(et.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(e)}exportMultipleSheetsAsExcel(e){et.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(e)}setGridAriaProperty(e,t){if(!e)return;const s=this.ctrlsService.getGridBodyCtrl().getGui(),r=`aria-${e}`;t===null?s.removeAttribute(r):s.setAttribute(r,t)}logMissingRowModel(e,...t){console.error(`AG Grid: api.${e} can only be called when gridOptions.rowModelType is ${t.join(" or ")}`)}logDeprecation(e,t,s,r){Ce(`Since ${e} api.${t} is deprecated. Please use ${s} instead. ${r}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.pinnedRowModel.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.pinnedRowModel.getPinnedBottomRow(e)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(e={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(e))}flashCells(e={}){const t=s=>Ce(`Since v31.1 api.flashCells parameter '${s}Delay' is deprecated. Please use '${s}Duration' instead.`);V(e.fadeDelay)&&t("fade"),V(e.flashDelay)&&t("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(e))}redrawRows(e={}){const t=e?e.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(t))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(e=>e.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return Ce("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(e,t,s){this.expansionService.setRowNodeExpanded(e,t,s)}onGroupExpandedOrCollapsed(){if(Se(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(e){if(Se(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(e)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(e){return this.rowModel.getRowNode(e)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(e,t,s){this.rowRenderer.addRenderedRowListener(e,t,s)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return et.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(e){this.filterManager.setAdvancedFilterModel(e)}showAdvancedFilterBuilder(){et.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(e){if(!e.nodes.every(l=>l.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):l.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;const{nodes:s,source:r,newValue:o}=e,n=s;this.selectionService.setNodesSelected({nodes:n,source:r??"api",newValue:o})}selectAll(e="apiSelectAll"){this.selectionService.selectAllRowNodes({source:e})}deselectAll(e="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:e})}selectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:e,justFiltered:!0})}deselectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:e,justFiltered:!0})}getServerSideSelectionState(){return Se(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(e){if(Se(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(e,"api")}selectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:e,justCurrentPage:!0})}deselectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:e,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(Se(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(e,t="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(e,t),"ensureVisible")}ensureIndexVisible(e,t){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e,t),"ensureVisible")}ensureNodeVisible(e,t=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(e,t),"ensureVisible")}forEachLeafNode(e){if(Se(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(e)}forEachNode(e,t){this.rowModel.forEachNode(e,t)}forEachNodeAfterFilter(e){if(Se(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(e)}forEachNodeAfterFilterAndSort(e){if(Se(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)}getFilterInstance(e,t){return Ce("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.filterManager.getColumnFilterInstance(e)}destroyFilter(e){const t=this.columnModel.getPrimaryColumn(e);if(t)return this.filterManager.destroyFilter(t,"api")}getStatusPanel(e){if(!et.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;const t=this.statusBarService.getStatusPanel(e);return ma(t)}getColumnDef(e){const t=this.columnModel.getPrimaryColumn(e);return t?t.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(e="api"){this.filterManager.onFilterChanged({source:e})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(e){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(e))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(e){return this.filterManager.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.filterManager.setColumnFilterModel(e,t)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(e,t,s){this.focusService.setFocusedCell({rowIndex:e,column:t,rowPinned:s,forceBrowserFocus:!0})}addRowDropZone(e){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(e)}removeRowDropZone(e){const t=this.dragAndDropService.findExternalZone(e);t&&this.dragAndDropService.removeDropTarget(t)}getRowDropZoneParams(e){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(e)}assertSideBarLoaded(e){return et.__assertRegistered("@ag-grid-enterprise/side-bar","api."+e,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(e){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(e)}setSideBarPosition(e){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(e)}openToolPanel(e){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(e,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(e){if(this.assertSideBarLoaded("getToolPanelInstance")){const t=this.sideBarService.getSideBarComp().getToolPanelInstance(e);return ma(t)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(V(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setRowCount(e,t){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(e,t);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(e,t);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(e,t){let s=this.columnModel.getPrimaryColumn(e);return Se(s)&&(s=this.columnModel.getGridColumn(e)),Se(s)?null:this.valueService.getValue(s,t)}addEventListener(e,t){this.apiEventService.addEventListener(e,t)}addGlobalListener(e){this.apiEventService.addGlobalListener(e)}removeEventListener(e,t){this.apiEventService.removeEventListener(e,t)}removeGlobalListener(e){this.apiEventService.removeGlobalListener(e)}dispatchEvent(e){this.eventService.dispatchEvent(e)}destroy(){const e=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;const t={type:w.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(t),this.destroyCalled=!0;const s=this.ctrlsService.getGridCtrl();s&&s.destroyGridUi(),this.context.destroy(),Lx(this,["isDestroyed"],e)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(et.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(e){if(this.rangeService){this.rangeService.addCellRange(e);return}et.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),et.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(e,t){if(et.__assertRegistered("@ag-grid-enterprise/charts","api."+e,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>t())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(e){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(e))}getChartImageDataURL(e){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(e))}downloadChart(e){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(e))}openChartToolPanel(e){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(e))}closeChartToolPanel(e){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(e.chartId))}createRangeChart(e){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(e))}createPivotChart(e){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(e))}createCrossFilterChart(e){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(e))}updateChart(e){return this.assertChart("updateChart",()=>this.chartService.updateChart(e))}restoreChart(e,t){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(e,t))}assertClipboard(e,t){et.__assertRegistered("@ag-grid-enterprise/clipboard","api"+e,this.context.getGridId())&&t()}copyToClipboard(e){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(e))}cutToClipboard(e){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(e))}copySelectedRowsToClipboard(e){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(e))}copySelectedRangeToClipboard(e){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(e))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(e,t){Ce("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");const s=this.columnModel.getGridColumn(e);this.menuService.showColumnMenu({column:s,buttonElement:t,positionBy:"button"})}showColumnMenuAfterMouseClick(e,t){Ce("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let s=this.columnModel.getGridColumn(e);if(s||(s=this.columnModel.getPrimaryColumn(e)),!s){console.error(`AG Grid: column '${e}' not found`);return}this.menuService.showColumnMenu({column:s,mouseEvent:t,positionBy:"mouse"})}showColumnChooser(e){this.menuService.showColumnChooser({chooserParams:e})}showColumnFilter(e){const t=this.columnModel.getGridColumn(e);if(!t){console.error(`AG Grid: column '${e}' not found`);return}this.menuService.showFilterMenu({column:t,containerType:"columnFilter",positionBy:"auto"})}showColumnMenu(e){const t=this.columnModel.getGridColumn(e);if(!t){console.error(`AG Grid: column '${e}' not found`);return}this.menuService.showColumnMenu({column:t,positionBy:"auto"})}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(e){return this.navigationService.tabToNextCell(!1,e)}tabToPreviousCell(e){return this.navigationService.tabToNextCell(!0,e)}getCellRendererInstances(e={}){return this.rowRenderer.getCellRendererInstances(e).map(ma)}getCellEditorInstances(e={}){return this.rowRenderer.getCellEditorInstances(e).map(ma)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(e=!1){this.rowRenderer.stopEditing(e)}startEditingCell(e){const t=this.columnModel.getGridColumn(e.colKey);if(!t){console.warn(`AG Grid: no column found for ${e.colKey}`);return}const s={rowIndex:e.rowIndex,rowPinned:e.rowPinned||null,column:t};e.rowPinned==null&&this.ensureIndexVisible(e.rowIndex),this.ensureColumnVisible(e.colKey);const o=this.navigationService.getCellByPosition(s);o&&(this.focusService.isCellFocused(s)||this.focusService.setFocusedCell(s),o.startRowOrCellEdit(e.key))}addAggFunc(e,t){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:t})}addAggFuncs(e){this.aggFuncService&&this.aggFuncService.addAggFuncs(e)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(e)}applyServerSideTransactionAsync(e,t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(e,t)}applyServerSideRowData(e){var t,s;const r=(t=e.startRow)!=null?t:0,o=(s=e.route)!=null?s:[];if(r<0){console.warn(`AG Grid: invalid value ${e.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(e.successParams,r,o):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(e))}applyTransactionAsync(e,t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(e,t))}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions())}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(e){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(e)}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(e){return this.rowModel.getRow(e)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(e){this.paginationProxy.goToPage(e)}sizeColumnsToFit(e){typeof e=="number"?this.columnModel.sizeColumnsToFit(e,"api"):this.gridBodyCtrl.sizeColumnsToFit(e)}setColumnGroupOpened(e,t){this.columnModel.setColumnGroupOpened(e,t,"api")}getColumnGroup(e,t){return this.columnModel.getColumnGroup(e,t)}getProvidedColumnGroup(e){return this.columnModel.getProvidedColumnGroup(e)}getDisplayNameForColumn(e,t){return this.columnModel.getDisplayNameForColumn(e,t)||""}getDisplayNameForColumnGroup(e,t){return this.columnModel.getDisplayNameForColumnGroup(e,t)||""}getColumn(e){return this.columnModel.getPrimaryColumn(e)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(e){return this.columnModel.applyColumnState(e,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(e){this.columnModel.setColumnGroupState(e,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(e){return this.columnModel.getDisplayedColAfter(e)}getDisplayedColBefore(e){return this.columnModel.getDisplayedColBefore(e)}setColumnVisible(e,t){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([e],t,"api")}setColumnsVisible(e,t){this.columnModel.setColumnsVisible(e,t,"api")}setColumnPinned(e,t){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([e],t,"api")}setColumnsPinned(e,t){this.columnModel.setColumnsPinned(e,t,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(e,t){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([e],t,"api")}moveColumnByIndex(e,t){this.columnModel.moveColumnByIndex(e,t,"api")}moveColumns(e,t){this.columnModel.moveColumns(e,t,"api")}moveRowGroupColumn(e,t){this.columnModel.moveRowGroupColumn(e,t,"api")}setColumnAggFunc(e,t){this.columnModel.setColumnAggFunc(e,t,"api")}setColumnWidth(e,t,s=!0,r="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:e,newWidth:t}],!1,s,r)}setColumnWidths(e,t=!0,s="api"){this.columnModel.setColumnWidths(e,!1,t,s)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(e,t){return this.columnModel.getSecondaryPivotColumn(e,t)}setValueColumns(e){this.columnModel.setValueColumns(e,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(e){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([e],"api")}removeValueColumns(e){this.columnModel.removeValueColumns(e,"api")}addValueColumn(e){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([e],"api")}addValueColumns(e){this.columnModel.addValueColumns(e,"api")}setRowGroupColumns(e){this.columnModel.setRowGroupColumns(e,"api")}removeRowGroupColumn(e){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([e],"api")}removeRowGroupColumns(e){this.columnModel.removeRowGroupColumns(e,"api")}addRowGroupColumn(e){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([e],"api")}addRowGroupColumns(e){this.columnModel.addRowGroupColumns(e,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(e){this.columnModel.setPivotColumns(e,"api")}removePivotColumn(e){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([e],"api")}removePivotColumns(e){this.columnModel.removePivotColumns(e,"api")}addPivotColumn(e){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([e],"api")}addPivotColumns(e){this.columnModel.addPivotColumns(e,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(e,t){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[e],skipHeader:t,source:"api"})}autoSizeColumns(e,t){this.columnModel.autoSizeColumns({columns:e,skipHeader:t,source:"api"})}autoSizeAllColumns(e){this.columnModel.autoSizeAllColumns("api",e)}setPivotResultColumns(e){this.columnModel.setSecondaryColumns(e,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(e){return this.gos.get(e)}setGridOption(e,t){this.updateGridOptions({[e]:t})}updateGridOptions(e){this.gos.updateGridOptions({options:e})}__internalUpdateGridOptions(e){this.gos.updateGridOptions({options:e,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(e,t){Ce(`set${e.charAt(0).toUpperCase()}${e.slice(1,e.length)} is deprecated. Please use 'api.setGridOption('${e}', newValue)' or 'api.updateGridOptions({ ${e}: newValue })' instead.`),this.setGridOption(e,t)}setPivotMode(e){this.deprecatedUpdateGridOption("pivotMode",e)}setPinnedTopRowData(e){this.deprecatedUpdateGridOption("pinnedTopRowData",e)}setPinnedBottomRowData(e){this.deprecatedUpdateGridOption("pinnedBottomRowData",e)}setPopupParent(e){this.deprecatedUpdateGridOption("popupParent",e)}setSuppressModelUpdateAfterUpdateTransaction(e){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",e)}setDataTypeDefinitions(e){this.deprecatedUpdateGridOption("dataTypeDefinitions",e)}setPagination(e){this.deprecatedUpdateGridOption("pagination",e)}paginationSetPageSize(e){this.deprecatedUpdateGridOption("paginationPageSize",e)}setSideBar(e){this.deprecatedUpdateGridOption("sideBar",e)}setSuppressClipboardPaste(e){this.deprecatedUpdateGridOption("suppressClipboardPaste",e)}setGroupRemoveSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",e)}setGroupRemoveLowestSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",e)}setGroupDisplayType(e){this.deprecatedUpdateGridOption("groupDisplayType",e)}setGroupIncludeFooter(e){this.deprecatedUpdateGridOption("groupIncludeFooter",e)}setGroupIncludeTotalFooter(e){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",e)}setRowClass(e){this.deprecatedUpdateGridOption("rowClass",e)}setDeltaSort(e){this.deprecatedUpdateGridOption("deltaSort",e)}setSuppressRowDrag(e){this.deprecatedUpdateGridOption("suppressRowDrag",e)}setSuppressMoveWhenRowDragging(e){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",e)}setSuppressRowClickSelection(e){this.deprecatedUpdateGridOption("suppressRowClickSelection",e)}setEnableAdvancedFilter(e){this.deprecatedUpdateGridOption("enableAdvancedFilter",e)}setIncludeHiddenColumnsInAdvancedFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",e)}setAdvancedFilterParent(e){this.deprecatedUpdateGridOption("advancedFilterParent",e)}setAdvancedFilterBuilderParams(e){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",e)}setQuickFilter(e){Ce("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:e}})}setExcludeHiddenColumnsFromQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!e)}setIncludeHiddenColumnsInQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",e)}setQuickFilterParser(e){this.deprecatedUpdateGridOption("quickFilterParser",e)}setQuickFilterMatcher(e){this.deprecatedUpdateGridOption("quickFilterMatcher",e)}setAlwaysShowHorizontalScroll(e){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",e)}setAlwaysShowVerticalScroll(e){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",e)}setFunctionsReadOnly(e){this.deprecatedUpdateGridOption("functionsReadOnly",e)}setColumnDefs(e,t="api"){Ce("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:e},source:t})}setAutoGroupColumnDef(e,t="api"){Ce("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:e},source:t})}setDefaultColDef(e,t="api"){Ce("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:e},source:t})}setColumnTypes(e,t="api"){Ce("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:e},source:t})}setTreeData(e){this.deprecatedUpdateGridOption("treeData",e)}setServerSideDatasource(e){this.deprecatedUpdateGridOption("serverSideDatasource",e)}setCacheBlockSize(e){this.deprecatedUpdateGridOption("cacheBlockSize",e)}setDatasource(e){this.deprecatedUpdateGridOption("datasource",e)}setViewportDatasource(e){this.deprecatedUpdateGridOption("viewportDatasource",e)}setRowData(e){this.deprecatedUpdateGridOption("rowData",e)}setEnableCellTextSelection(e){this.deprecatedUpdateGridOption("enableCellTextSelection",e)}setHeaderHeight(e){this.deprecatedUpdateGridOption("headerHeight",e)}setDomLayout(e){this.deprecatedUpdateGridOption("domLayout",e)}setFillHandleDirection(e){this.deprecatedUpdateGridOption("fillHandleDirection",e)}setGroupHeaderHeight(e){this.deprecatedUpdateGridOption("groupHeaderHeight",e)}setFloatingFiltersHeight(e){this.deprecatedUpdateGridOption("floatingFiltersHeight",e)}setPivotHeaderHeight(e){this.deprecatedUpdateGridOption("pivotHeaderHeight",e)}setPivotGroupHeaderHeight(e){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",e)}setAnimateRows(e){this.deprecatedUpdateGridOption("animateRows",e)}setIsExternalFilterPresent(e){this.deprecatedUpdateGridOption("isExternalFilterPresent",e)}setDoesExternalFilterPass(e){this.deprecatedUpdateGridOption("doesExternalFilterPass",e)}setNavigateToNextCell(e){this.deprecatedUpdateGridOption("navigateToNextCell",e)}setTabToNextCell(e){this.deprecatedUpdateGridOption("tabToNextCell",e)}setTabToNextHeader(e){this.deprecatedUpdateGridOption("tabToNextHeader",e)}setNavigateToNextHeader(e){this.deprecatedUpdateGridOption("navigateToNextHeader",e)}setRowGroupPanelShow(e){this.deprecatedUpdateGridOption("rowGroupPanelShow",e)}setGetGroupRowAgg(e){this.deprecatedUpdateGridOption("getGroupRowAgg",e)}setGetBusinessKeyForNode(e){this.deprecatedUpdateGridOption("getBusinessKeyForNode",e)}setGetChildCount(e){this.deprecatedUpdateGridOption("getChildCount",e)}setProcessRowPostCreate(e){this.deprecatedUpdateGridOption("processRowPostCreate",e)}setGetRowId(e){Ce("getRowId is a static property and can no longer be updated.")}setGetRowClass(e){this.deprecatedUpdateGridOption("getRowClass",e)}setIsFullWidthRow(e){this.deprecatedUpdateGridOption("isFullWidthRow",e)}setIsRowSelectable(e){this.deprecatedUpdateGridOption("isRowSelectable",e)}setIsRowMaster(e){this.deprecatedUpdateGridOption("isRowMaster",e)}setPostSortRows(e){this.deprecatedUpdateGridOption("postSortRows",e)}setGetDocument(e){this.deprecatedUpdateGridOption("getDocument",e)}setGetContextMenuItems(e){this.deprecatedUpdateGridOption("getContextMenuItems",e)}setGetMainMenuItems(e){this.deprecatedUpdateGridOption("getMainMenuItems",e)}setProcessCellForClipboard(e){this.deprecatedUpdateGridOption("processCellForClipboard",e)}setSendToClipboard(e){this.deprecatedUpdateGridOption("sendToClipboard",e)}setProcessCellFromClipboard(e){this.deprecatedUpdateGridOption("processCellFromClipboard",e)}setProcessPivotResultColDef(e){this.deprecatedUpdateGridOption("processPivotResultColDef",e)}setProcessPivotResultColGroupDef(e){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",e)}setPostProcessPopup(e){this.deprecatedUpdateGridOption("postProcessPopup",e)}setInitialGroupOrderComparator(e){this.deprecatedUpdateGridOption("initialGroupOrderComparator",e)}setGetChartToolbarItems(e){this.deprecatedUpdateGridOption("getChartToolbarItems",e)}setPaginationNumberFormatter(e){this.deprecatedUpdateGridOption("paginationNumberFormatter",e)}setGetServerSideGroupLevelParams(e){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",e)}setIsServerSideGroupOpenByDefault(e){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",e)}setIsApplyServerSideTransaction(e){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",e)}setIsServerSideGroup(e){this.deprecatedUpdateGridOption("isServerSideGroup",e)}setGetServerSideGroupKey(e){this.deprecatedUpdateGridOption("getServerSideGroupKey",e)}setGetRowStyle(e){this.deprecatedUpdateGridOption("getRowStyle",e)}setGetRowHeight(e){this.deprecatedUpdateGridOption("getRowHeight",e)}};g([qe("csvCreator")],ke.prototype,"csvCreator",2);g([qe("excelCreator")],ke.prototype,"excelCreator",2);g([T("rowRenderer")],ke.prototype,"rowRenderer",2);g([T("navigationService")],ke.prototype,"navigationService",2);g([T("filterManager")],ke.prototype,"filterManager",2);g([T("columnModel")],ke.prototype,"columnModel",2);g([T("selectionService")],ke.prototype,"selectionService",2);g([T("gridOptionsService")],ke.prototype,"gos",2);g([T("valueService")],ke.prototype,"valueService",2);g([T("alignedGridsService")],ke.prototype,"alignedGridsService",2);g([T("eventService")],ke.prototype,"eventService",2);g([T("pinnedRowModel")],ke.prototype,"pinnedRowModel",2);g([T("context")],ke.prototype,"context",2);g([T("rowModel")],ke.prototype,"rowModel",2);g([T("sortController")],ke.prototype,"sortController",2);g([T("paginationProxy")],ke.prototype,"paginationProxy",2);g([T("focusService")],ke.prototype,"focusService",2);g([T("dragAndDropService")],ke.prototype,"dragAndDropService",2);g([qe("rangeService")],ke.prototype,"rangeService",2);g([qe("clipboardService")],ke.prototype,"clipboardService",2);g([qe("aggFuncService")],ke.prototype,"aggFuncService",2);g([T("menuService")],ke.prototype,"menuService",2);g([T("valueCache")],ke.prototype,"valueCache",2);g([T("animationFrameService")],ke.prototype,"animationFrameService",2);g([qe("statusBarService")],ke.prototype,"statusBarService",2);g([qe("chartService")],ke.prototype,"chartService",2);g([qe("undoRedoService")],ke.prototype,"undoRedoService",2);g([qe("rowNodeBlockLoader")],ke.prototype,"rowNodeBlockLoader",2);g([qe("ssrmTransactionManager")],ke.prototype,"serverSideTransactionManager",2);g([T("ctrlsService")],ke.prototype,"ctrlsService",2);g([T("overlayService")],ke.prototype,"overlayService",2);g([qe("sideBarService")],ke.prototype,"sideBarService",2);g([T("stateService")],ke.prototype,"stateService",2);g([T("expansionService")],ke.prototype,"expansionService",2);g([T("apiEventService")],ke.prototype,"apiEventService",2);g([T("frameworkOverrides")],ke.prototype,"frameworkOverrides",2);g([z],ke.prototype,"init",1);ke=g([te("gridApi")],ke);var Ls=class extends W{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,()=>{this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",e=>this.setQuickFilter(e.currentValue)),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",()=>this.onIncludeHiddenColumnsInQuickFilterChanged()),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gridOptionsService.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(s=>t?this.doesRowPassQuickFilterCache(e,s):this.doesRowPassQuickFilterNoCache(e,s))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return V(e)?this.gridOptionsService.isRowModelType("clientSide")?e.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){console.warn(`AG Grid - Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchEvent({type:Ls.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){const e=this.gridOptionsService.get("quickFilterParser"),t=this.gridOptionsService.get("quickFilterMatcher"),s=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,s&&(this.setQuickFilterParts(),this.dispatchEvent({type:Ls.EVENT_QUICK_FILTER_CHANGED}))}onIncludeHiddenColumnsInQuickFilterChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:Ls.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(e,t){return this.columnModel.getAllColumnsForQuickFilter().some(r=>{const o=this.getQuickFilterTextForColumn(r,e);return V(o)&&o.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let s;e?(this.checkGenerateQuickFilterAggregateText(t),s=t.quickFilterAggregateText):s=this.getQuickFilterAggregateText(t);const{quickFilterParts:r,matcher:o}=this;return o(r,s)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let s=this.valueService.getValue(e,t,!0);const r=e.getColDef();if(r.getQuickFilterText){const o=this.gridOptionsService.addGridCommonParams({value:s,node:t,data:t.data,column:e,colDef:r});s=r.getQuickFilterText(o)}return V(s)?s.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(r=>{const o=this.getQuickFilterTextForColumn(r,e);V(o)&&t.push(o)}),t.join(Ls.QUICK_FILTER_SEPARATOR)}};Ls.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";Ls.QUICK_FILTER_SEPARATOR=`
`;g([T("valueService")],Ls.prototype,"valueService",2);g([T("columnModel")],Ls.prototype,"columnModel",2);g([T("rowModel")],Ls.prototype,"rowModel",2);g([z],Ls.prototype,"postConstruct",1);Ls=g([te("quickFilterService")],Ls);var kr=class extends W{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var e,t,s;this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,w.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",r=>this.setAdvancedFilterModel(r.currentValue)),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:r})=>this.onAdvancedFilterEnabledChanged(r)),this.addManagedListener(this.eventService,w.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,Ls.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=he({},(s=(t=(e=this.gridOptionsService.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)!=null?s:{})}isExternalFilterPresentCallback(){const e=this.gridOptionsService.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gridOptionsService.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const s=[],r=this.getFilterModel();if(e){const o=XD(Object.keys(e));this.allColumnFilters.forEach((n,l)=>{const a=e[l];s.push(this.setModelOnFilterWrapper(n.filterPromise,a)),o.delete(l)}),o.forEach(n=>{const l=this.columnModel.getPrimaryColumn(n)||this.columnModel.getGridColumn(n);if(!l){console.warn("AG Grid: setFilterModel() - no column found for colId: "+n);return}if(!l.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+n);return}const a=this.getOrCreateFilterWrapper(l,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+n);return}s.push(this.setModelOnFilterWrapper(a.filterPromise,e[n]))})}else this.allColumnFilters.forEach(o=>{s.push(this.setModelOnFilterWrapper(o.filterPromise,null))});Zt.all(s).then(()=>{const o=this.getFilterModel(),n=[];this.allColumnFilters.forEach((l,a)=>{const u=r?r[a]:null,d=o?o[a]:null;ye.jsonEquals(u,d)||n.push(l.column)}),n.length>0&&this.onFilterChanged({columns:n,source:t})})}setModelOnFilterWrapper(e,t){return new Zt(s=>{e.then(r=>{typeof r.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),s()),(r.setModel(t)||Zt.resolve()).then(()=>s())})})}getFilterModel(){const e={};return this.allColumnFilters.forEach((t,s)=>{const r=this.getModelFromFilterWrapper(t);V(r)&&(e[s]=r)}),e}getModelFromFilterWrapper(e){var t;const r=e.filterPromise.resolveNow(null,o=>o);return r==null?(t=this.initialFilterModel[e.column.getColId()])!=null?t:null:typeof r.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):r.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach(s=>this.disposeFilterWrapper(s,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):(t=this.advancedFilterService)!=null&&t.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!((e=this.advancedFilterService)!=null&&e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const e=r=>r?r.isFilterActive?r.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,t=!!this.gridOptionsService.getGroupAggFiltering(),s=r=>{if(!r.isPrimary())return!0;const n=!this.columnModel.isPivotActive();return!r.isValueActive()||!n?!1:this.columnModel.isPivotMode()?!0:t};this.allColumnFilters.forEach(r=>{if(r.filterPromise.resolveNow(!1,e)){const o=r.filterPromise.resolveNow(null,n=>n);s(r.column)?this.activeAggregateFilters.push(o):this.activeColumnFilters.push(o)}})}updateFilterFlagInColumns(e,t){this.allColumnFilters.forEach(s=>{const r=s.filterPromise.resolveNow(!1,o=>o.isFilterActive());s.column.setFilterActive(r,e,t)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(e,t,s){const{data:r,aggData:o}=e,n=s?this.activeAggregateFilters:this.activeColumnFilters,l=s?o:r;for(let a=0;a<n.length;a++){const u=n[a];if(!(u==null||u===t)){if(typeof u.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!u.doesFilterPass({node:e,data:l}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(e){const t=()=>this.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}onFilterChanged(e={}){const{source:t,filterInstance:s,additionalEventAttributes:r,columns:o}=e;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",r),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(l=>{l.filterPromise&&l.filterPromise.then(a=>{a&&a!==s&&a.onAnyFilterChanged&&a.onAnyFilterChanged()})});const n={source:t,type:w.EVENT_FILTER_CHANGED,columns:o||[]};r&&sr(n,r),this.processingFilterChange=!0,this.eventService.dispatchEvent(n),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var e;return!((e=this.gridOptionsService.get("allowShowChangeAfterFilter"))!=null?e:!1)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}onNewRowsLoaded(e){this.allColumnFilters.forEach(t=>{t.filterPromise.then(s=>{s.onNewRowsLoaded&&s.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,s)=>{const r=s?this.columnModel.getGridColumn(s):e;return r?this.valueService.getValue(r,t,!0):void 0}}getFilterComponent(e,t,s=!0){var r;if(s)return((r=this.getOrCreateFilterWrapper(e,t))==null?void 0:r.filterPromise)||null;const o=this.cachedFilter(e);return o?o.filterPromise:null}isFilterActive(e){const t=this.cachedFilter(e);return!!t&&t.filterPromise.resolveNow(!1,s=>s.isFilterActive())}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return null;let s=this.cachedFilter(e);return s?t!=="NO_UI"&&this.putIntoGui(s,t):(s=this.createFilterWrapper(e,t),this.setColumnFilterWrapper(e,s)),s}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(et.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFilter";else{const s=this.dataTypeService.getBaseDataType(e);s==="number"?t="agNumberColumnFilter":s==="date"||s==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(et.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFloatingFilter";else{const s=this.dataTypeService.getBaseDataType(e);s==="number"?t="agNumberColumnFloatingFilter":s==="date"||s==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e){const t=this.getDefaultFilter(e),s=e.getColDef();let r;const o=Pt(he({},this.createFilterParams(e,s)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(r,e)(),filterChangedCallback:l=>this.filterChangedCallbackFactory(r,e)(l),doesRowPassOtherFilter:l=>this.doesRowPassOtherFilters(r,l)}),n=this.userComponentFactory.getFilterDetails(s,o,t);return n?{filterPromise:()=>{const l=n.newAgStackInstance();return l&&l.then(a=>r=a),l},compDetails:n}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gridOptionsService.addGridCommonParams({column:e,colDef:ED(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e,t){var s;const r={column:e,filterPromise:null,compiledElement:null,guiPromise:Zt.resolve(null),compDetails:null},{filterPromise:o,compDetails:n}=this.createFilterInstance(e);return r.filterPromise=(s=o==null?void 0:o())!=null?s:null,r.compDetails=n,o&&this.putIntoGui(r,t),r}putIntoGui(e,t){const s=document.createElement("div");s.className="ag-filter",e.guiPromise=new Zt(r=>{e.filterPromise.then(o=>{let n=o.getGui();V(n)||console.warn(`AG Grid: getGui method from filter returned ${n}, it should be a DOM element or an HTML template string.`),typeof n=="string"&&(n=Os(n)),s.appendChild(n),r(s);const l={type:w.EVENT_FILTER_OPENED,column:e.column,source:t,eGui:s};this.eventService.dispatchEvent(l)})})}onColumnsChanged(){const e=[];this.allColumnFilters.forEach((t,s)=>{let r;t.column.isPrimary()?r=this.columnModel.getPrimaryColumn(s):r=this.columnModel.getGridColumn(s),!r&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(s))}),e.length>0?this.onFilterChanged({columns:e,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){const e=this.columnModel.getGroupAutoColumns();e==null||e.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t,"NO_UI")})}isFilterAllowed(e){var t,s;if(this.isAdvancedFilterEnabled()||!e.isFilterAllowed())return!1;const o=this.allColumnFilters.get(e.getColId());return(s=(t=o==null?void 0:o.filterPromise)==null?void 0:t.resolveNow(!0,n=>typeof(n==null?void 0:n.isFilterAllowed)=="function"?n==null?void 0:n.isFilterAllowed():!0))!=null?s:!0}getFloatingFilterCompDetails(e,t){const s=u=>{const d=this.getFilterComponent(e,"NO_UI");d!=null&&d.then(c=>{u(ma(c))})},r=e.getColDef(),o=Pt(he({},this.createFilterParams(e,r)),{filterChangedCallback:()=>s(u=>this.filterChangedCallbackFactory(u,e)())}),n=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(r,mR,o);let l=this.userComponentFactory.getDefaultFloatingFilterType(r,()=>this.getDefaultFloatingFilter(e));l==null&&(l="agReadOnlyFloatingFilter");const a={column:e,filterParams:n,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:s,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(r,a,l)}getCurrentFloatingFilterParentModel(e){const t=this.getFilterComponent(e,"NO_UI",!1);return t?t.resolveNow(null,s=>s&&s.getModel()):null}destroyFilter(e,t="api"){const s=e.getColId(),r=this.allColumnFilters.get(s);this.disposeColumnListener(s),delete this.initialFilterModel[s],r&&(this.disposeFilterWrapper(r,t),this.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(s=>{this.getContext().destroyBean(s),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());const r={type:w.EVENT_FILTER_DESTROYED,source:t,column:e.column};this.eventService.dispatchEvent(r)})}filterModifiedCallbackFactory(e,t){return()=>{const s={type:w.EVENT_FILTER_MODIFIED,column:t,filterInstance:e};this.eventService.dispatchEvent(s)}}filterChangedCallbackFactory(e,t){return s=>{var r;const o=(r=s==null?void 0:s.source)!=null?r:"api",n={filter:e,additionalEventAttributes:s,columns:[t],source:o};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const s=t.column,{compDetails:r}=s.isFilterAllowed()?this.createFilterInstance(s):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,r)){this.destroyFilter(s,"paramsUpdated");return}const o=s.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(s,"paramsUpdated");return}t.filterPromise.then(n=>{(n!=null&&n.refresh?n.refresh(he(Pt(he({},this.createFilterParams(s,s.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(n,s),filterChangedCallback:this.filterChangedCallbackFactory(n,s),doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(n,a)}),o)):!0)===!1&&this.destroyFilter(s,"paramsUpdated")})}setColumnFilterWrapper(e,t){const s=e.getColId();this.allColumnFilters.set(s,t),this.allColumnListeners.set(s,this.addManagedListener(e,ut.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(s)))}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:s}=e,{componentClass:r}=t;return!(s===r||(s==null?void 0:s.render)&&(r==null?void 0:r.render)&&s.render===r.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(e){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(e,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:this.columnModel.getAllGridColumns().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}const s=this.getFilterInstanceImpl(e,o=>{if(!t)return;const n=ma(o);t(n)});return ma(s)}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstance(e,s=>{t(s)})})}getFilterInstanceImpl(e,t){const s=this.columnModel.getPrimaryColumn(e);if(!s)return;const r=this.getFilterComponent(s,"NO_UI"),o=r&&r.resolveNow(null,n=>n);return o?setTimeout(t,0,o):r&&r.then(n=>{t(n)}),o}warnAdvancedFilters(){Ce("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:s})=>{this.setColumnFilterModel(e,t).then(()=>s())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let n=()=>{};const l=new Promise(a=>{n=a});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:n}),l}const s=this.columnModel.getPrimaryColumn(e),r=s?this.getOrCreateFilterWrapper(s,"NO_UI"):null;return r?(n=>new Promise(l=>{n.then(a=>l(a))}))(this.setModelOnFilterWrapper(r.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){var t;const s=this.columnModel.getPrimaryColumn(e);return s&&(t=this.cachedFilter(s))!=null?t:null}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};g([T("valueService")],kr.prototype,"valueService",2);g([T("columnModel")],kr.prototype,"columnModel",2);g([T("rowModel")],kr.prototype,"rowModel",2);g([T("userComponentFactory")],kr.prototype,"userComponentFactory",2);g([T("rowRenderer")],kr.prototype,"rowRenderer",2);g([T("dataTypeService")],kr.prototype,"dataTypeService",2);g([T("quickFilterService")],kr.prototype,"quickFilterService",2);g([qe("advancedFilterService")],kr.prototype,"advancedFilterService",2);g([z],kr.prototype,"init",1);kr=g([te("filterManager")],kr);var ab=class extends De{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},Ru=class xN extends ab{constructor(e){super(xN.TEMPLATE,e)}postConstruct(){const e=this.getGui(),t={addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),addOrRemoveBodyCssClass:(s,r)=>this.eFloatingFilterBody.classList.toggle(s,r),setButtonWrapperDisplayed:s=>Ue(this.eButtonWrapper,s),setCompDetails:s=>this.setCompDetails(s),getFloatingFilterComp:()=>this.compPromise,setWidth:s=>e.style.width=s,setMenuIcon:s=>this.eButtonShowMainFilter.appendChild(s)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}};Ru.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;g([Y("eFloatingFilterBody")],Ru.prototype,"eFloatingFilterBody",2);g([Y("eButtonWrapper")],Ru.prototype,"eButtonWrapper",2);g([Y("eButtonShowMainFilter")],Ru.prototype,"eButtonShowMainFilter",2);g([z],Ru.prototype,"postConstruct",1);g([ps],Ru.prototype,"destroyFloatingFilterComp",1);var $2=Ru,TS=class extends W{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},s=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(s,t)}getDomLayout(){var e;const t=(e=this.gridOptionsService.get("domLayout"))!=null?e:"normal";return["normal","print","autoHeight"].indexOf(t)===-1?(Ce(`${t} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):t}};g([z],TS.prototype,"postConstruct",1);var In=class extends W{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=os(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=os(()=>this.lastScrollSource[0]=null,500)}postConstruct(){this.enableRtl=this.gridOptionsService.get("enableRtl"),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const e=this.ctrlsService.getFakeHScrollComp(),t=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));const s=this.gridOptionsService.get("debounceVerticalScrollbar"),r=s?os(this.onVScroll.bind(this),100):this.onVScroll.bind(this),o=s?os(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",r),t.onScrollCallback(o)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowContainerCtrl==null)return;e===void 0&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());const s=this.enableRtl?e:-e,r=this.ctrlsService.getTopCenterRowContainerCtrl(),o=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),n=this.ctrlsService.getBottomCenterRowContainerCtrl(),l=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-s),n.setContainerTranslateX(s),r.setContainerTranslateX(s),o.setContainerTranslateX(s);const u=this.centerRowContainerCtrl.getViewportElement(),d=this.lastScrollSource[1]===0;e=Math.abs(e),d?l.setScrollPosition(e):Gp(u,e,this.enableRtl)}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(e){const t=this.centerRowContainerCtrl.getViewportElement(),{scrollLeft:s}=t;if(this.shouldBlockScrollUpdate(1,s,!0))return;let r;e===0?r=Np(t,this.enableRtl):r=this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(r)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(e){let t;e===0?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===0?this.ctrlsService.getFakeVScrollComp().setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gridOptionsService.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:w.EVENT_BODY_SCROLL,direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const s=Pt(he({},t),{type:w.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(s)},100)}shouldBlockScrollUpdate(e,t,s=!1){return s&&!Fn()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=Qg(this.eBodyViewport),{scrollHeight:s}=this.eBodyViewport;return e<0||e+t>s}shouldBlockHorizontalScroll(e){const t=this.centerRowContainerCtrl.getCenterWidth(),{scrollWidth:s}=this.centerRowContainerCtrl.getViewportElement();if(this.enableRtl&&_p()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>s}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const r=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&_p()?e=e>0?0:r:e=Math.min(Math.max(e,0),r)),Gp(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowContainerCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const s=this.rowModel.getRowCount();let r=-1;for(let o=0;o<s;o++){const n=this.rowModel.getRow(o);if(typeof e=="function"){if(n&&e(n)){r=o;break}}else if(e===n||e===n.data){r=o;break}}r>=0&&this.ensureIndexVisible(r,t)}ensureIndexVisible(e,t){if(this.gridOptionsService.isDomLayout("print"))return;const s=this.paginationProxy.getRowCount();if(typeof e!="number"||e<0||e>=s){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);return}const o=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{o||this.paginationProxy.goToPageWithIndex(e);const l=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),a=this.paginationProxy.getRow(e);let u;do{const d=a.rowTop,c=a.rowHeight,h=this.paginationProxy.getPixelOffset(),p=a.rowTop-h,m=p+a.rowHeight,S=this.getVScrollPosition(),E=this.heightScaler.getDivStretchOffset(),C=S.top+E,v=S.bottom+E,R=v-C,b=this.heightScaler.getScrollPositionForPixel(p),A=this.heightScaler.getScrollPositionForPixel(m-R),F=Math.min((b+A)/2,p),O=C+l>p,L=v<m;let G=null;t==="top"?G=b:t==="bottom"?G=A:t==="middle"?G=F:O?G=b-l:L&&(G=A),G!==null&&(this.setVerticalScrollPosition(G),this.rowRenderer.redraw({afterScroll:!0})),u=d!==a.rowTop||c!==a.rowHeight}while(u);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const s=this.columnModel.getGridColumn(e);if(!s||s.isPinned()||!this.columnModel.isColumnDisplayed(s))return;const r=this.getPositionedHorizontalScroll(s,t);this.getFrameworkOverrides().wrapIncoming(()=>{r!==null&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(r),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowContainerCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:s,columnAfterEnd:r}=this.isColumnOutsideViewport(e),o=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),n=this.centerRowContainerCtrl.getCenterWidth(),l=this.enableRtl;let a=(l?s:r)||o,u=l?r:s;t!=="auto"&&(a=t==="start",u=t==="end");const d=t==="middle";if(a||u||d){const{colLeft:c,colMiddle:h,colRight:p}=this.getColumnBounds(e);return d?h-n/2:a?l?p:c:l?c-n:p-n}return null}isColumnOutsideViewport(e){const{start:t,end:s}=this.getViewportBounds(),{colLeft:r,colRight:o}=this.getColumnBounds(e),n=this.enableRtl,l=n?t>o:s<o,a=n?s<r:t>r;return{columnBeforeStart:l,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,s=this.columnModel.getBodyContainerWidth(),r=e.getActualWidth(),o=e.getLeft(),n=t?-1:1,l=t?s-o:o,a=l+r*n,u=l+r/2*n;return{colLeft:l,colMiddle:u,colRight:a}}getViewportBounds(){const e=this.centerRowContainerCtrl.getCenterWidth(),t=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),s=t,r=e+t;return{start:s,end:r,width:e}}};g([T("ctrlsService")],In.prototype,"ctrlsService",2);g([T("animationFrameService")],In.prototype,"animationFrameService",2);g([T("paginationProxy")],In.prototype,"paginationProxy",2);g([T("rowModel")],In.prototype,"rowModel",2);g([T("rowContainerHeightService")],In.prototype,"heightScaler",2);g([T("rowRenderer")],In.prototype,"rowRenderer",2);g([T("columnModel")],In.prototype,"columnModel",2);g([z],In.prototype,"postConstruct",1);var _N="ag-force-vertical-scroll",K2="ag-selectable",j2="ag-column-moving",Xi=class extends W{constructor(){super(...arguments),this.stickyTopHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,s,r,o,n){this.comp=e,this.eGridBody=t,this.eBodyViewport=s,this.eTop=r,this.eBottom=o,this.eStickyTop=n,this.setCellTextSelection(this.gridOptionsService.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",l=>this.setCellTextSelection(l.currentValue)),this.createManagedBean(new TS(this.comp)),this.bodyScrollFeature=this.createManagedBean(new In(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([r,s,o,n]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(r),this.ctrlsService.registerGridBodyCtrl(this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(e){e.forEach(t=>{this.addManagedListener(t,"focusin",s=>{const{target:r}=s,o=Ia(r,"ag-root",t);t.classList.toggle("ag-has-focus",!o)}),this.addManagedListener(t,"focusout",s=>{const{target:r,relatedTarget:o}=s,n=t.contains(o),l=Ia(o,"ag-root",t);Ia(r,"ag-root",t)||(!n||l)&&t.classList.remove("ag-has-focus")})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(j2,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(K2,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e);const t=e&&this.gridOptionsService.getScrollbarWidth()||0,s=kD()?16:0,r=`calc(100% + ${t+s}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(r))}onGridColumnsChanged(){const e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gridOptionsService.get("stopEditingWhenCellsLoseFocus"))return;const e=s=>{const r=s.relatedTarget;if(VC(r)===null){this.rowRenderer.stopEditing();return}let o=t.some(n=>n.contains(r))&&this.mouseEventService.isElementInThisGrid(r);if(!o){const n=this.popupService;o=n.getActivePopups().some(l=>l.contains(r))||n.isElementWithinCustomPopup(r)}o||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];t.forEach(s=>this.addManagedListener(s,"focusout",e))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,s=t===-1?-1:e+t;this.comp.setRowCount(s)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gridOptionsService.get("alwaysShowVerticalScroll"),t=e?_N:null,s=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||s&&I_(this.eBodyViewport)}setupRowAnimationCssClass(){const e=()=>{const t=this.gridOptionsService.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),s=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(s,t)};e(),this.addManagedListener(this.eventService,w.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedListener(e,"wheel",s=>this.onFullWidthContainerWheel(s,t))}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,s){if(!e&&!s)return;this.gridOptionsService.get("preventDefaultOnContextMenu")&&(e||s).preventDefault();const{target:r}=e||t;(r===this.eBodyViewport||r===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:s,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Fn())return;const t=new Fi(this.eBodyViewport),s=r=>{e(void 0,r.touchStart,r.touchEvent)};this.addManagedListener(t,Fi.EVENT_LONG_TAP,s),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyTopWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new fr(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:e}=this;let t=e.getPinnedTopTotalHeight(),s=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(s),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(s?"inherit":"none"),this.setStickyTopOffsetTop()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyTopWidth(e){if(!e)this.comp.setStickyTopWidth("100%");else{const t=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const t=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight()+this.filterManager.getHeaderHeight(),s=this.pinnedRowModel.getPinnedTopTotalHeight();let r=0;t>0&&(r+=t+1),s>0&&(r+=s+1),this.comp.setStickyTopTop(`${r}px`)}sizeColumnsToFit(e,t){const r=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,n=Cu(this.eGridBody)-r;if(n>0){this.columnModel.sizeColumnsToFit(n,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};g([T("animationFrameService")],Xi.prototype,"animationFrameService",2);g([T("rowContainerHeightService")],Xi.prototype,"rowContainerHeightService",2);g([T("ctrlsService")],Xi.prototype,"ctrlsService",2);g([T("columnModel")],Xi.prototype,"columnModel",2);g([T("scrollVisibleService")],Xi.prototype,"scrollVisibleService",2);g([T("menuService")],Xi.prototype,"menuService",2);g([T("headerNavigationService")],Xi.prototype,"headerNavigationService",2);g([T("dragAndDropService")],Xi.prototype,"dragAndDropService",2);g([T("pinnedRowModel")],Xi.prototype,"pinnedRowModel",2);g([T("rowRenderer")],Xi.prototype,"rowRenderer",2);g([T("popupService")],Xi.prototype,"popupService",2);g([T("mouseEventService")],Xi.prototype,"mouseEventService",2);g([T("rowModel")],Xi.prototype,"rowModel",2);g([T("filterManager")],Xi.prototype,"filterManager",2);var Dh="ag-cell-range-selected",Y2="ag-cell-range-chart",q2="ag-cell-range-single-cell",Q2="ag-cell-range-chart-category",X2="ag-cell-range-handle",J2="ag-cell-range-top",Z2="ag-cell-range-right",e$="ag-cell-range-bottom",t$="ag-cell-range-left",i$=class{constructor(e,t){this.beans=e,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Dh,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${Dh}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${Dh}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${Dh}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${Dh}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(Y2,this.hasChartRange),gc(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(q2,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),s=!t&&e.top,r=!t&&e.right,o=!t&&e.bottom,n=!t&&e.left;this.cellComp.addOrRemoveCssClass(J2,s),this.cellComp.addOrRemoveCssClass(Z2,r),this.cellComp.addOrRemoveCssClass(e$,o),this.cellComp.addOrRemoveCssClass(t$,n)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(s=>ar([1,0],s.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gridOptionsService.get("enableRtl");let t=!1,s=!1,r=!1,o=!1;const n=this.cellCtrl.getCellPosition().column,{rangeService:l,columnModel:a}=this.beans;let u,d;e?(u=a.getDisplayedColAfter(n),d=a.getDisplayedColBefore(n)):(u=a.getDisplayedColBefore(n),d=a.getDisplayedColAfter(n));const c=l.getCellRanges().filter(h=>l.isCellInSpecificRange(this.cellCtrl.getCellPosition(),h));u||(o=!0),d||(s=!0);for(let h=0;h<c.length&&!(t&&s&&r&&o);h++){const p=c[h],m=l.getRangeStartRow(p),S=l.getRangeEndRow(p);!t&&this.beans.rowPositionUtils.sameRow(m,this.cellCtrl.getCellPosition())&&(t=!0),!r&&this.beans.rowPositionUtils.sameRow(S,this.cellCtrl.getCellPosition())&&(r=!0),!o&&u&&p.columns.indexOf(u)<0&&(o=!0),!s&&d&&p.columns.indexOf(d)<0&&(s=!0)}return{top:t,right:s,bottom:r,left:o}}refreshHandle(){if(!this.beans.rangeService||this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(X2,!!this.selectionHandle)}shouldHaveSelectionHandle(){const{gridOptionsService:e,rangeService:t}=this.beans,s=t.getCellRanges(),r=s.length;if(this.rangeCount<1||r<1)return!1;const o=Je(s),n=this.cellCtrl.getCellPosition(),l=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),a=e.get("enableRangeHandle");let u=r===1&&!this.cellCtrl.isEditing()&&(l||a);if(this.hasChartRange){const c=s[0].type===1&&t.isCellInSpecificRange(n,s[0]);this.cellComp.addOrRemoveCssClass(Q2,c),u=o.type===0}return u&&o.endRow!=null&&t.isContiguousRange(o)&&t.isBottomRightCell(o,n)}addSelectionHandle(){const{gridOptionsService:e,rangeService:t}=this.beans,s=Je(t.getCellRanges()).type,o=e.get("enableFillHandle")&&Se(s)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==o&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(o)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},s$=class extends W{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,w.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();ko(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let s=this.column;const r=this.column.getPinned();for(let o=0;s&&o<e&&(t.push(s),s=this.beans.columnModel.getDisplayedColAfter(s),!(!s||Se(s)||r!==s.getPinned()));o++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?e=Je(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){const s=this.beans.columnModel.getBodyContainerWidth();return t+s+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const s=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${s}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},r$=class extends W{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,s=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,s,r=>this.cellComp.addOrRemoveCssClass(r,!0),r=>this.cellComp.addOrRemoveCssClass(r,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const s=this.beans.gridOptionsService.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),r=e.cellStyle;t=r(s)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(s=>this.cellComp.addOrRemoveCssClass(s,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(s=>this.cellComp.addOrRemoveCssClass(s,!0))}destroy(){super.destroy()}},Te=class{postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};g([T("resizeObserverService")],Te.prototype,"resizeObserverService",2);g([T("paginationProxy")],Te.prototype,"paginationProxy",2);g([T("context")],Te.prototype,"context",2);g([T("columnApi")],Te.prototype,"columnApi",2);g([T("gridApi")],Te.prototype,"gridApi",2);g([T("gridOptionsService")],Te.prototype,"gridOptionsService",2);g([T("expressionService")],Te.prototype,"expressionService",2);g([T("environment")],Te.prototype,"environment",2);g([T("rowRenderer")],Te.prototype,"rowRenderer",2);g([T("templateService")],Te.prototype,"templateService",2);g([T("valueService")],Te.prototype,"valueService",2);g([T("eventService")],Te.prototype,"eventService",2);g([T("columnModel")],Te.prototype,"columnModel",2);g([T("headerNavigationService")],Te.prototype,"headerNavigationService",2);g([T("navigationService")],Te.prototype,"navigationService",2);g([T("columnAnimationService")],Te.prototype,"columnAnimationService",2);g([qe("rangeService")],Te.prototype,"rangeService",2);g([T("focusService")],Te.prototype,"focusService",2);g([T("popupService")],Te.prototype,"popupService",2);g([T("valueFormatterService")],Te.prototype,"valueFormatterService",2);g([T("stylingService")],Te.prototype,"stylingService",2);g([T("columnHoverService")],Te.prototype,"columnHoverService",2);g([T("userComponentFactory")],Te.prototype,"userComponentFactory",2);g([T("userComponentRegistry")],Te.prototype,"userComponentRegistry",2);g([T("animationFrameService")],Te.prototype,"animationFrameService",2);g([T("dragService")],Te.prototype,"dragService",2);g([T("dragAndDropService")],Te.prototype,"dragAndDropService",2);g([T("sortController")],Te.prototype,"sortController",2);g([T("filterManager")],Te.prototype,"filterManager",2);g([T("rowContainerHeightService")],Te.prototype,"rowContainerHeightService",2);g([T("frameworkOverrides")],Te.prototype,"frameworkOverrides",2);g([T("cellPositionUtils")],Te.prototype,"cellPositionUtils",2);g([T("rowPositionUtils")],Te.prototype,"rowPositionUtils",2);g([T("selectionService")],Te.prototype,"selectionService",2);g([qe("selectionHandleFactory")],Te.prototype,"selectionHandleFactory",2);g([T("rowCssClassCalculator")],Te.prototype,"rowCssClassCalculator",2);g([T("rowModel")],Te.prototype,"rowModel",2);g([T("ctrlsService")],Te.prototype,"ctrlsService",2);g([T("ctrlsFactory")],Te.prototype,"ctrlsFactory",2);g([T("agStackComponentsRegistry")],Te.prototype,"agStackComponentsRegistry",2);g([T("valueCache")],Te.prototype,"valueCache",2);g([T("rowNodeEventThrottle")],Te.prototype,"rowNodeEventThrottle",2);g([T("localeService")],Te.prototype,"localeService",2);g([T("valueParserService")],Te.prototype,"valueParserService",2);g([T("syncService")],Te.prototype,"syncService",2);g([T("ariaAnnouncementService")],Te.prototype,"ariaAnnouncementService",2);g([z],Te.prototype,"postConstruct",1);Te=g([te("beans")],Te);var o$=class extends Te{constructor(e,t,s){super(),this.cellCtrl=e,this.beans=t,this.column=s}onMouseEvent(e,t){if(!co(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:s,gridOptionsService:r}=this.beans,o=e.ctrlKey||e.metaKey;s&&o&&s.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&s.intersectLastRange(!0);const n=this.cellCtrl.createEvent(e,w.EVENT_CELL_CLICKED);t.dispatchEvent(n);const l=this.column.getColDef();l.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{l.onCellClicked(n)})},0),(r.get("singleClickEdit")||l.singleClickEdit)&&!r.get("suppressClickEdit")&&!(e.shiftKey&&(s==null?void 0:s.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Fn()||bD("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const t=this.column.getColDef(),s=this.cellCtrl.createEvent(e,w.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(s),typeof t.onCellDoubleClicked=="function"&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{t.onCellDoubleClicked(s)})},0),!this.beans.gridOptionsService.get("singleClickEdit")&&!this.beans.gridOptionsService.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:s,shiftKey:r}=e,o=e.target,{cellCtrl:n,beans:l}=this,{eventService:a,rangeService:u,focusService:d}=l;if(this.isRightClickInExistingRange(e))return;const c=u&&u.getCellRanges().length!=0;if(!r||!c){const h=Ko()&&!n.isEditing()&&!BD(o);n.focusCell(h)}if(r&&c&&!d.isCellFocused(n.getCellPosition())){e.preventDefault();const h=d.getFocusedCell();if(h){const{column:p,rowIndex:m,rowPinned:S}=h,E=l.rowRenderer.getRowByPosition({rowIndex:m,rowPinned:S}),C=E==null?void 0:E.getCellCtrl(p);C!=null&&C.isEditing()&&C.stopEditing(),d.setFocusedCell({column:p,rowIndex:m,rowPinned:S,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(o)){if(u){const h=this.cellCtrl.getCellPosition();if(r)u.extendLatestRangeToCell(h);else{const p=t||s;u.setRangeToCell(h,p)}}a.dispatchEvent(this.cellCtrl.createEvent(e,w.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const s=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),r=e.button===2||e.ctrlKey&&this.beans.gridOptionsService.get("allowContextMenuWithControlKey");if(s&&r)return!0}return!1}containsWidget(e){return Ia(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,w.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,w.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),s=t.contains(e.target),r=t.contains(e.relatedTarget);return s&&r}destroy(){}},n$=class extends W{constructor(e,t,s,r,o){super(),this.cellCtrl=e,this.beans=t,this.rowNode=r,this.rowCtrl=o}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case x.ENTER:this.onEnterKeyDown(e);break;case x.F2:this.onF2KeyDown(e);break;case x.ESCAPE:this.onEscapeKeyDown(e);break;case x.TAB:this.onTabKeyDown(e);break;case x.BACKSPACE:case x.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case x.DOWN:case x.UP:case x.RIGHT:case x.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:s,beans:r,rowNode:o}=this,{gridOptionsService:n,rangeService:l,eventService:a}=r;s.isEditing()||(a.dispatchEvent({type:w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),W_(e,n.get("enableCellEditingOnBackspace"))?l&&n.get("enableRangeSelection")?l.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):s.isCellEditable()&&o.setDataValue(s.getColumn(),null,"cellClear"):s.startRowOrCellEdit(e,t),a.dispatchEvent({type:w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gridOptionsService.get("enterNavigatesVertically")){const t=e.shiftKey?x.UP:x.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(x.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(x.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const r=e.key;r===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(r,e),e.preventDefault())}onSpaceKeyDown(e){const{gridOptionsService:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){const s=this.rowNode.isSelected(),r=!s;if(r||!t.get("suppressRowDeselection")){const o=this.beans.gridOptionsService.get("groupSelectsFiltered"),n=this.rowNode.setSelectedParams({newValue:r,rangeSelect:e.shiftKey,groupSelectsFiltered:o,event:e,source:"spaceKey"});s===void 0&&n===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:o,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}},NN=class extends De{constructor(e,t,s){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=s}postConstruct(){this.getGui().appendChild(_t("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const s=()=>{try{const r=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",r),e.dataTransfer.setData("text/plain",r)}catch{}};if(t){const r=this.gridOptionsService.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(r)}else s()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};g([z],NN.prototype,"postConstruct",1);var l$="ag-column-first",a$="ag-column-last",DS=class{static getHeaderClassesFromColDef(e,t,s,r){return Se(e)?[]:this.getColumnClassesFromCollDef(e.headerClass,e,t,s,r)}static getToolPanelClassesFromColDef(e,t,s,r){return Se(e)?[]:this.getColumnClassesFromCollDef(e.toolPanelClass,e,t,s,r)}static refreshFirstAndLastStyles(e,t,s){e.addOrRemoveCssClass(l$,s.isColumnAtEdge(t,"first")),e.addOrRemoveCssClass(a$,s.isColumnAtEdge(t,"last"))}static getClassParams(e,t,s,r){return t.addGridCommonParams({colDef:e,column:s,columnGroup:r})}static getColumnClassesFromCollDef(e,t,s,r,o){if(Se(e))return[];let n;if(typeof e=="function"){const l=this.getClassParams(t,s,r,o);n=e(l)}else n=e;return typeof n=="string"?[n]:Array.isArray(n)?[...n]:[]}},u$="ag-cell",d$="ag-cell-auto-height",c$="ag-cell-normal-height",h$="ag-cell-focus",p$="ag-cell-first-right-pinned",g$="ag-cell-last-left-pinned",f$="ag-cell-not-inline-editing",m$="ag-column-hover",C$="ag-cell-wrap-text",v$=0,GN=class CR extends W{constructor(e,t,s,r){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=e,this.rowNode=t,this.beans=s,this.rowCtrl=r,this.instanceId=e.getId()+"-"+v$++,this.colIdSanitised=pi(this.column.getId()),s.gridOptionsService.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new s$(this,this.beans),this.addDestroyFunc(()=>{var t;(t=this.cellPositionFeature)==null||t.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new r$(this,this.beans),this.addDestroyFunc(()=>{var t;(t=this.cellCustomStyleFeature)==null||t.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new o$(this,this.beans,this.column),this.addDestroyFunc(()=>{var t;(t=this.cellMouseListenerFeature)==null||t.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new n$(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var t;(t=this.cellKeyboardListenerFeature)==null||t.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gridOptionsService.get("enableRangeSelection")&&(this.cellRangeFeature=new i$(this.beans,this),this.addDestroyFunc(()=>{var t;(t=this.cellRangeFeature)==null||t.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(e,t){const s=()=>{const n=this.column.getColDef(),l=this.rowNode.data;if(n.tooltipField&&V(l))return xd(l,n.tooltipField,this.column.isTooltipFieldContainsDots());const a=n.tooltipValueGetter;return a?a(this.beans.gridOptionsService.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},r=this.beans.gridOptionsService.get("tooltipShowMode")==="whenTruncated";!t&&r&&!this.isCellRenderer()&&(t=()=>{const n=this.getGui(),l=n.children.length===0?n:n.querySelector(".ag-cell-value");return l?l.scrollWidth>l.clientWidth:!0});const o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:e!=null?()=>e:s,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:t};this.tooltipFeature=new On(o,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(e,t,s,r,o){var n,l,a,u;this.cellComp=e,this.eGui=t,this.printLayout=r,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(n=this.cellPositionFeature)==null||n.setComp(t),(l=this.cellCustomStyleFeature)==null||l.setComp(e),(a=this.tooltipFeature)==null||a.refreshToolTip(),(u=this.cellKeyboardListenerFeature)==null||u.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,t),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(d=>d()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;const t=e.parentElement,s=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,r=l=>{if(this.editing||!this.isAlive())return;const{paddingTop:a,paddingBottom:u,borderBottomWidth:d,borderTopWidth:c}=Vl(t),h=a+u+d+c,m=e.offsetHeight+h;if(l<5){const E=this.beans.gridOptionsService.getDocument(),C=!E||!E.contains(e),v=m==0;if(C||v){window.setTimeout(()=>r(l+1),0);return}}const S=Math.max(m,s);this.rowNode.setRowAutoHeight(S,this.column)},o=()=>r(0);o();const n=this.beans.resizeObserverService.observeResize(e,o);this.addDestroyFunc(()=>{n(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var e;return(e=this.column.getColDef().cellAriaRole)!=null?e:"gridcell"}getInstanceId(){return this.instanceId}getIncludeSelection(){return this.includeSelection}getIncludeRowDrag(){return this.includeRowDrag}getIncludeDndSource(){return this.includeDndSource}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted!=null?this.valueFormatted:this.value}showValue(e=!1){const t=this.getValueToDisplay();let s;if(this.isCellRenderer()){const r=this.createCellRendererParams();s=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),r)}this.cellComp.setRenderDetails(s,t,e),this.refreshHandle()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gridOptionsService.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),s=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource);return t||s||r}startEditing(e=null,t=!1,s=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(e,t,s)});return}const r=this.createCellEditorParams(e,t),o=this.column.getColDef(),n=this.beans.userComponentFactory.getCellEditorDetails(o,r);this.editCompDetails=n;const l=(n==null?void 0:n.popupFromSelector)!=null?n.popupFromSelector:!!o.cellEditorPopup,a=(n==null?void 0:n.popupPositionFromSelector)!=null?n.popupPositionFromSelector:o.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(n,l,a,this.beans.gridOptionsService.get("reactiveCustomComponents"));const u=this.createEvent(s,w.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(u)}setEditing(e){this.editing!==e&&(this.editing=e,this.refreshHandle())}stopRowOrCellEdit(e=!1){this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(e){const t={newValueExists:!1};if(e)return t;const s=this.cellComp.getCellEditor();return!s||s.isCancelAfterEnd&&s.isCancelAfterEnd()?t:{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,t){if(t===e)return!1;this.suppressRefreshCell=!0;const s=this.rowNode.setDataValue(this.column,t,"edit");return this.suppressRefreshCell=!1,s}stopEditing(e=!1){if(!this.editing)return!1;const{newValue:t,newValueExists:s}=this.takeValueFromCellEditor(e),r=this.rowNode.getValueFromValueService(this.column);let o=!1;return s&&(o=this.saveNewValue(r,t)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(r,t,!e&&!!o),o}dispatchEditingStoppedEvent(e,t,s){const r=Pt(he({},this.createEvent(null,w.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:t,valueChanged:s});this.beans.eventService.dispatchEvent(r)}createCellEditorParams(e,t){return this.beans.gridOptionsService.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:t,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gridOptionsService.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:t=>this.beans.valueService.setValue(this.rowNode,this.column,t),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(t,s,r,o)=>this.registerRowDragger(t,s,o),setTooltip:(t,s)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(t,s),this.refreshToolTip()}})}parseValue(e){return this.beans.valueParserService.parseValue(this.column,this.rowNode,e,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?(t=this.rowCtrl)==null||t.refreshCell(this):this.refreshCell(e)}refreshCell(e){var t,s,r;if(this.suppressRefreshCell||this.editing)return;const o=this.column.getColDef(),n=e!=null&&!!e.newData,l=e!=null&&!!e.suppressFlash||!!o.suppressCellFlash,a=o.field==null&&o.valueGetter==null&&o.showRowGroup==null,u=e&&e.forceRefresh||a||n,d=!!this.cellComp,c=this.updateAndFormatValue(d),h=u||c;if(d){if(h){this.showValue(n);const p=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!p&&(this.beans.gridOptionsService.get("enableCellChangeFlash")||o.enableCellChangeFlash)&&this.flashCell(),(t=this.cellCustomStyleFeature)==null||t.applyUserStyles(),(s=this.cellCustomStyleFeature)==null||s.applyClassesFromColDef()}this.refreshToolTip(),(r=this.cellCustomStyleFeature)==null||r.applyCellClassRules()}}stopEditingAndFocus(e=!1,t=!1){this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(t)}navigateAfterEdit(e){if(this.beans.gridOptionsService.get("enterNavigatesVerticallyAfterEdit")){const s=e?x.UP:x.DOWN;this.beans.navigationService.navigateToNextCell(null,s,this.getCellPosition(),!1)}}flashCell(e){var t,s;const r=(t=e==null?void 0:e.flashDuration)!=null?t:e==null?void 0:e.flashDelay,o=(s=e==null?void 0:e.fadeDuration)!=null?s:e==null?void 0:e.fadeDelay;this.animateCell("data-changed",r,o)}animateCell(e,t,s){if(!this.cellComp)return;const r=`ag-cell-${e}`,o=`ag-cell-${e}-animation`,{gridOptionsService:n}=this.beans;t||(t=n.get("cellFlashDuration")),V(s)||(s=n.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(o,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(o,!0),this.eGui.style.transition=`background-color ${s}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.eGui.style.transition="")},s))},t)})}onFlashCells(e){if(!this.cellComp)return;const t=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[t]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){var t;return(t=this.callValueFormatter(e))!=null?t:e}callValueFormatter(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,s=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(e,t){const s=this.column.getColDef();return s.equals?s.equals(e,t):e===t}getComp(){return this.cellComp}getValue(){return this.value}getValueFormatted(){return this.valueFormatted}addDomData(){const e=this.getGui();this.beans.gridOptionsService.setDomData(e,CR.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gridOptionsService.setDomData(e,CR.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,t){return this.beans.gridOptionsService.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){var t;(t=this.cellKeyboardListenerFeature)==null||t.processCharacter(e)}onKeyDown(e){var t;(t=this.cellKeyboardListenerFeature)==null||t.onKeyDown(e)}onMouseEvent(e,t){var s;(s=this.cellMouseListenerFeature)==null||s.onMouseEvent(e,t)}getGui(){return this.eGui}refreshToolTip(){var e;(e=this.tooltipFeature)==null||e.refreshToolTip()}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&((e=this.cellPositionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:e,column:t,beans:s}=this;DS.refreshFirstAndLastStyles(e,t,s.columnModel)}refreshAriaColIndex(){const e=this.beans.columnModel.getAriaColumnIndex(this.column);ID(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return(e=this.cellPositionFeature)==null?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}getBeans(){return this.beans}isPrintLayout(){return this.printLayout}appendChild(e){this.eGui.appendChild(e)}refreshHandle(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,t=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,t)});return}this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,t)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(p$,e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(g$,e)}onCellFocused(e){if(this.beans.gridOptionsService.get("suppressCellFocus"))return;const t=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){t&&(e!=null&&e.forceBrowserFocus)&&(this.focusEventToRestore=e);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(h$,t),t&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});const s=this.beans.gridOptionsService.get("editType")==="fullRow";!t&&!s&&this.editing&&this.stopRowOrCellEdit(),t&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Wo(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(u$,!0),this.cellComp.addOrRemoveCssClass(f$,!0);const e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(d$,e),this.cellComp.addOrRemoveCssClass(c$,!e)}onColumnHover(){if(!this.cellComp||!this.beans.gridOptionsService.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(m$,e)}onColDefChanged(){var e;if(!this.cellComp)return;if(this.column.isAutoHeight()!==this.isAutoHeight&&((e=this.rowCtrl)==null||e.refreshCell(this)),this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{const r=this.getCellEditor();if(r!=null&&r.refresh){const{eventKey:o,cellStartedEdit:n}=this.editCompDetails.params,l=this.createCellEditorParams(o,n),a=this.column.getColDef(),u=this.beans.userComponentFactory.getCellEditorDetails(a,l);r.refresh(u.params)}}}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(C$,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),s=this.createEvent(e,w.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(s),t.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(s)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new ES;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new NN(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,t,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const r=this.createRowDragComp(e,t,s);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(e,t,s){const r=this.beans.gridOptionsService.get("pagination"),o=this.beans.gridOptionsService.get("rowDragManaged"),n=this.beans.gridOptionsService.isRowModelType("clientSide");if(o){if(!n){Ce("managed row dragging is only allowed in the Client Side Row Model");return}if(r){Ce("managed row dragging is not possible when doing pagination");return}}const l=new Ja(()=>this.value,this.rowNode,this.column,e,t,s);return this.beans.context.createBean(l),l}};GN.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var xa=GN,S$=0,kN=class vR extends W{constructor(e,t,s,r,o){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=t,this.gridOptionsService=t.gridOptionsService,this.rowNode=e,this.paginationPage=t.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=r,this.printLayout=o,this.suppressRowTransform=this.gridOptionsService.get("suppressRowTransform"),this.instanceId=e.id+"-"+S$++,this.rowId=pi(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gridOptionsService.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=pi(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getBeans(){return this.beans}getInstanceId(){return this.instanceId}setComp(e,t,s){const r={rowComp:e,element:t,containerType:s};this.allRowGuis.push(r),s==="left"?this.leftGui=r:s==="right"?this.rightGui=r:s==="fullWidth"?this.fullWidthGui=r:this.centerGui=r,this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){switch(this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),e){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0;break}}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gridOptionsService.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach(s=>s.element.style.display=t)}initialiseRowComp(e){const t=this.gridOptionsService;this.listenOnDomOrder(e),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),t.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(o=>s.addOrRemoveCssClass(o,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&vn(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),t.setDomData(e.element,vR.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>t.setDomData(e.element,vR.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=pi(this.rowNode.id),this.rowId!=null&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(iR(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(iR(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){if(this.gridOptionsService.get("enableRangeSelection")){Ce("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}const t=this.beans.localeService.getLocaleTextFunc(),s=new Ja(()=>`1 ${t("rowDragRow","row")}`,this.rowNode,void 0,e.element,void 0,!0),r=this.createBean(s,this.beans.context);this.rowDragComps.push(r)}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType);if(this.rowType=="FullWidthDetail"&&!et.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;const s=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var e,t;return this.gridOptionsService.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var r;return(r=s==null?void 0:s.rowComp)==null?void 0:r.getFullWidthCellRenderer()}):[(t=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:t.getFullWidthCellRenderer()]}getCellElement(e){const t=this.getCellCtrl(e);return t?t.getGui():null}executeProcessRowPostCreateFunc(){const e=this.gridOptionsService.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),t=!!this.centerGui,s=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&t&&s}setRowType(){const e=this.rowNode.stub,t=this.rowNode.isFullWidthCell(),s=this.gridOptionsService.get("masterDetail")&&this.rowNode.detail,r=this.beans.columnModel.isPivotMode(),n=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(r);e?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":n?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;if(e||this.gridOptionsService.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,t,s=null){const r={list:[],map:{}},o=(n,l)=>{r.list.push(l),r.map[n]=l};return t.forEach(n=>{const l=n.getInstanceId();let a=e.map[l];a||(a=new xa(n,this.rowNode,this.beans,this)),o(l,a)}),e.list.forEach(n=>{if(r.map[n.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(n,s)){o(n.getColumn().getInstanceId(),n);return}n.destroy()}),r}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{const s=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(s,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:const t=e;throw new Error(`Unhandled case: ${t}`)}}createAllCellCtrls(){const e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const t=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t);const s=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const r=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,t){if(e.getColumn().getPinned()!=t)return!0;const n=e.isEditing(),l=this.beans.focusService.isCellFocused(e.getCellPosition());if(n||l){const u=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(u)>=0)}return!0}getDomOrder(){return this.gridOptionsService.get("ensureDomOrder")||this.gridOptionsService.isDomLayout("print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",t),this.addManagedPropertyListener("ensureDomOrder",t)}setAnimateFlags(e){if(this.isSticky()||!e)return;const t=V(this.rowNode.oldRowTop),s=this.beans.columnModel.isPinningLeft(),r=this.beans.columnModel.isPinningRight();if(t){if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=s,this.slideInAnimation.right=r}else{if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=s,this.fadeInAnimation.right=r}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}getRowType(){return this.rowType}refreshFullWidth(){const e=(l,a)=>l?l.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(l.element,a).params):!0,t=e(this.fullWidthGui,null),s=e(this.centerGui,null),r=e(this.leftGui,"left"),o=e(this.rightGui,"right");return t&&s&&r&&o}addListeners(){this.addManagedListener(this.rowNode,_e.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,_e.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,_e.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,_e.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,_e.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const e=this.beans.eventService;this.addManagedListener(e,w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,w.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,w.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,w.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,w.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,w.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,w.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(e,w.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gridOptionsService.get("rowDragEntireRow")){this.allRowGuis.forEach(s=>{this.addRowDraggerToRow(s)});return}this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[]}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,_e.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())}),this.addManagedListener(this.rowNode,_e.EVENT_CELL_CHANGED,e=>{this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(s=>s.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(s=>{this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach(t=>{const s=e===0,r=e===1;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",s),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",r)})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}updateExpandedCss(){const e=this.rowNode.isExpandable(),t=this.rowNode.expanded==!0;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass("ag-row-group",e),s.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&t),s.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!t),vn(s.element,e&&t)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Wo(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.allRowGuis.find(a=>a.element.contains(e.target));if(!((t?t.element:null)===e.target))return;const o=this.rowNode,n=this.beans.focusService.getFocusedCell(),l={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:n&&n.column};this.beans.navigationService.navigateToNextCell(e,e.key,l,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||co(e))return;const t=this.allRowGuis.find(n=>n.element.contains(e.target)),s=t?t.element:null,r=s===e.target;let o=null;r||(o=this.beans.focusService.findNextFocusableElement(s,!1,e.shiftKey)),(this.isFullWidth()&&r||!o)&&this.beans.navigationService.onTabKeyDown(this,e)}onFullWidthRowFocused(e){var t;const s=this.rowNode,r=e?this.isFullWidth()&&e.rowIndex===s.rowIndex&&e.rowPinned==s.rowPinned:!1,o=this.fullWidthGui?this.fullWidthGui.element:(t=this.centerGui)==null?void 0:t.element;o&&(o.classList.toggle("ag-full-width-focus",r),r&&o.focus({preventScroll:!0}))}refreshCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()}removeCellCtrl(e,t){const s={list:[],map:{}};return e.list.forEach(r=>{r!==t&&(s.list.push(r),s.map[r.getInstanceId()]=r)}),s}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){return this.gridOptionsService.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:t})}createRowEventWithSource(e,t){const s=this.createRowEvent(e,t);return s.source=this,s}onRowDblClick(e){if(co(e))return;const t=this.createRowEventWithSource(w.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(t)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Ia(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,s=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:s.getAllDisplayedColumns()[0],rowPinned:t.rowPinned,forceBrowserFocus:!0})}onRowClick(e){if(co(e)||this.lastMouseDownOnDragger)return;const s=this.createRowEventWithSource(w.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(s);const r=e.ctrlKey||e.metaKey,o=e.shiftKey;if(this.gridOptionsService.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gridOptionsService.get("suppressRowClickSelection"))return;const l=this.gridOptionsService.get("rowMultiSelectWithClick"),a=!this.gridOptionsService.get("suppressRowDeselection"),u="rowClicked";if(this.rowNode.isSelected())l?this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):r?a&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!o,rangeSelect:o,event:e,source:u});else{const d=l?!1:!r;this.rowNode.setSelectedParams({newValue:!0,clearSelection:d,rangeSelect:o,event:e,source:u})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()}setupDetailRowAutoHeight(e){if(this.rowType!=="FullWidthDetail"||!this.gridOptionsService.get("detailRowAutoHeight"))return;const t=()=>{const r=e.clientHeight;if(r!=null&&r>0){const o=()=>{this.rowNode.setRowHeight(r),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(o,0)}},s=this.beans.resizeObserverService.observeResize(e,t);this.addDestroyFunc(s),t()}createFullWidthCompDetails(e,t){const s=this.gridOptionsService.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,o,n,l)=>this.addFullWidthRowDragging(r,o,n,l),setTooltip:(r,o)=>this.refreshRowTooltip(r,o)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(s);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(s);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(s);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(s)}}refreshRowTooltip(e,t){if(!this.fullWidthGui)return;const s={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:t};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new On(s,this.beans))}addFullWidthRowDragging(e,t,s="",r){if(!this.isFullWidth())return;const o=new Ja(()=>s,this.rowNode,void 0,e,t,r);this.createBean(o,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(o,this.beans.context)})}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,s="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass(t,!0),r.rowComp.addOrRemoveCssClass(s,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-last",t)))}stopEditing(e=!1){if(this.stoppingRowEdit)return;const t=this.getAllCellCtrls(),s=this.editingRow;this.stoppingRowEdit=!0;let r=!1;for(const o of t){const n=o.stopEditing(e);s&&!e&&!r&&n&&(r=!0)}if(r){const o=this.createRowEvent(w.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(o)}s&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(e){this.allRowGuis.forEach(t=>{t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})}setEditingRow(e){this.editingRow=e,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-editing",e));const t=e?this.createRowEvent(w.EVENT_ROW_EDITING_STARTED):this.createRowEvent(w.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(t)}startRowEditing(e=null,t=null,s=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((o,n)=>{const l=n===t;return l?n.startEditing(e,l,s):n.startEditing(null,l,s),o?!0:n.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!e||!e.length||e.forEach(t=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(t,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"?"left":e==="right"?"right":null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)}processStylesFromGridOptions(){const e=this.gridOptionsService.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const t=this.gridOptionsService.getCallback("getRowStyle");let s;if(t){const r={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};s=t(r)}return s||e?Object.assign({},e,s):this.emptyStyle}onRowSelected(e){const t=this.beans.gridOptionsService.getDocument(),s=!!this.rowNode.isSelected();this.forEachGui(e,r=>{r.rowComp.addOrRemoveCssClass("ag-row-selected",s),gc(r.element,s),r.element.contains(t.activeElement)&&(r===this.centerGui||r===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const e=this.rowNode.isSelected();if(e&&this.beans.gridOptionsService.get("suppressRowDeselection"))return;const s=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(s)}isUseAnimationFrameForCreate(){return this.useAnimationFrameForCreate}addHoverFunctionality(e){this.active&&(this.addManagedListener(e,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,_e.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gridOptionsService.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,_e.EVENT_MOUSE_LEAVE,()=>{e.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(e){const t=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(t.top,!0)-100,r=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(s,e),r)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),o=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,n=o?`${Math.min(s,o)-2}px`:void 0;this.forEachGui(e,l=>{l.element.style.height=`${t}px`,n&&l.element.style.setProperty("--ag-line-height",n)})}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}destroyFirstPass(e=!1){if(this.active=!1,!e&&this.gridOptionsService.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){const r=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(r)}else this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const t=this.createRowEvent(w.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(t),this.beans.eventService.dispatchEvent(t),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const e=t=>(t.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),t.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const s=this.beans.paginationProxy.getPixelOffset();return e+s*(t?1:-1)}setRowTop(e){if(!this.printLayout&&V(e)){const t=this.applyPaginationOffset(e),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeightService.getRealPixelPosition(t)}px`;this.setRowTopStyle(o)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let t;if(this.isSticky())t=this.rowNode.stickyRowTop;else{const s=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,r=this.applyPaginationOffset(s);t=this.rowNode.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return t+"px"}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getRowNode(){return this.rowNode}getCellCtrl(e){let t=null;return this.getAllCellCtrls().forEach(s=>{s.getColumn()==e&&(t=s)}),t!=null||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(e)>=0&&(t=s)}),t}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){const t=this.rowNode.getRowIndexString(),s=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),r=this.rowNode.rowIndex%2===0,o=s+this.rowNode.rowIndex+1;this.forEachGui(e,n=>{n.rowComp.setRowIndex(t),n.rowComp.addOrRemoveCssClass("ag-row-even",r),n.rowComp.addOrRemoveCssClass("ag-row-odd",!r),LD(n.element,o)})}};kN.DOM_DATA_KEY_ROW_CTRL="renderedRow";var _a=kN,Gs=class extends W{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,t)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",bD("touchstart")?"touchstart":"mousedown"].forEach(s=>{const r=this.processMouseEvent.bind(this,s);this.addManagedListener(this.element,s,r)})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||co(t))return;const s=this.getRowForEvent(t),r=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,s,r):(r&&r.onMouseEvent(e,t),s&&s.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Fn())return;const e=new Fi(this.element),t=s=>{const r=this.getRowForEvent(s.touchEvent),o=this.mouseEventService.getRenderedCellForEvent(s.touchEvent);this.handleContextMenuMouseEvent(void 0,s.touchEvent,r,o)};this.addManagedListener(e,Fi.EVENT_LONG_TAP,t),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const s=this.gridOptionsService.getDomData(t,_a.DOM_DATA_KEY_ROW_CTRL);if(s)return s;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,s,r){const o=s?s.getRowNode():null,n=r?r.getColumn():null;let l=null;if(n){const d=e||t;r.dispatchCellContextMenuEvent(d??null),l=this.valueService.getValue(n,o)}const a=this.ctrlsService.getGridBodyCtrl(),u=r?r.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:o,column:n,value:l,anchorToElement:u})}getControlsForEventTarget(e){return{cellCtrl:_C(this.gridOptionsService,e,xa.DOM_DATA_KEY_CELL_CTRL),rowCtrl:_C(this.gridOptionsService,e,_a.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:s,rowCtrl:r}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(s?this.processCellKeyboardEvent(s,e,t):r&&r.isFullWidth()&&this.processFullWidthRowKeyboardEvent(r,e,t))}processCellKeyboardEvent(e,t,s){const r=e.getRowNode(),o=e.getColumn(),n=e.isEditing();if(!HC(this.gridOptionsService,s,r,o,n)&&t==="keydown"&&(!n&&this.navigationService.handlePageScrollingKey(s)||e.onKeyDown(s),this.doGridOperations(s,e.isEditing()),fS(s)&&e.processCharacter(s)),t==="keydown"){const a=e.createEvent(s,w.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(e,t,s){const r=e.getRowNode(),o=this.focusService.getFocusedCell(),n=o&&o.column;if(!HC(this.gridOptionsService,s,r,n,!1)){const a=s.key;if(t==="keydown")switch(a){case x.PAGE_HOME:case x.PAGE_END:case x.PAGE_UP:case x.PAGE_DOWN:this.navigationService.handlePageScrollingKey(s,!0);break;case x.UP:case x.DOWN:e.onKeyboardNavigate(s);break;case x.TAB:e.onTabKeyDown(s);break}}if(t==="keydown"){const a=e.createRowEvent(w.EVENT_CELL_KEY_DOWN,s);this.eventService.dispatchEvent(a)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const s=B_(e);if(s===x.A)return this.onCtrlAndA(e);if(s===x.C)return this.onCtrlAndC(e);if(s===x.D)return this.onCtrlAndD(e);if(s===x.V)return this.onCtrlAndV(e);if(s===x.X)return this.onCtrlAndX(e);if(s===x.Y)return this.onCtrlAndY();if(s===x.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,paginationProxy:s,rangeService:r}=this;if(r&&s.isRowsToRender()){const[o,n]=[t.isEmpty("top"),t.isEmpty("bottom")],l=o?null:"top";let a,u;n?(a=null,u=this.paginationProxy.getRowCount()-1):(a="bottom",u=t.getPinnedBottomRowData().length-1);const d=this.columnModel.getAllDisplayedColumns();if(Zs(d))return;r.setCellRange({rowStartIndex:0,rowStartPinned:l,rowEndIndex:u,rowEndPinned:a,columnStart:d[0],columnEnd:Je(d)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:s}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||s!=null&&s.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection")||this.gridOptionsService.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:s}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||s!=null&&s.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:s}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||s!=null&&s.isEditing()||this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gridOptionsService.get("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};g([T("mouseEventService")],Gs.prototype,"mouseEventService",2);g([T("valueService")],Gs.prototype,"valueService",2);g([T("menuService")],Gs.prototype,"menuService",2);g([T("ctrlsService")],Gs.prototype,"ctrlsService",2);g([T("navigationService")],Gs.prototype,"navigationService",2);g([T("focusService")],Gs.prototype,"focusService",2);g([T("undoRedoService")],Gs.prototype,"undoRedoService",2);g([T("columnModel")],Gs.prototype,"columnModel",2);g([T("paginationProxy")],Gs.prototype,"paginationProxy",2);g([T("pinnedRowModel")],Gs.prototype,"pinnedRowModel",2);g([qe("rangeService")],Gs.prototype,"rangeService",2);g([qe("clipboardService")],Gs.prototype,"clipboardService",2);g([z],Gs.prototype,"postConstruct",1);var Wc=class extends W{constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.listenForResize()}),this.addManagedListener(this.eventService,w.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=Cu(e);if(t<=50)return;let s=this.getPinnedColumnsOverflowingViewport(t-50);const r=this.gridOptionsService.getCallback("processUnpinnedColumns");s.length&&(r&&(s=r({columns:s,viewportWidth:t})),this.columnModel.setColumnsPinned(s,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),s=this.pinnedWidthService.getPinnedLeftWidth(),r=t+s;if(r<e)return[];const o=[...this.columnModel.getDisplayedLeftColumns()],n=[...this.columnModel.getDisplayedRightColumns()];let l=0,a=0,u=0;const d=[];let c=r-u-e;for(;(a<o.length||l<n.length)&&c>0;){if(l<n.length){const h=n[l++];c-=h.getActualWidth(),d.push(h)}if(a<o.length&&c>0){const h=o[a++];c-=h.getActualWidth(),d.push(h)}}return d}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=Qg(e);if(this.bodyHeight!==t){this.bodyHeight=t;const s={type:w.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(s)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,t)}};g([T("ctrlsService")],Wc.prototype,"ctrlsService",2);g([T("pinnedWidthService")],Wc.prototype,"pinnedWidthService",2);g([T("columnModel")],Wc.prototype,"columnModel",2);g([T("scrollVisibleService")],Wc.prototype,"scrollVisibleService",2);g([z],Wc.prototype,"postConstruct",1);var ub=class extends W{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Ue(this.element,t),Mr(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};g([T("pinnedWidthService")],ub.prototype,"pinnedWidthService",2);g([z],ub.prototype,"postConstruct",1);var db=class extends W{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Ue(this.element,t),Mr(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};g([T("pinnedWidthService")],db.prototype,"pinnedWidthService",2);g([z],db.prototype,"postConstruct",1);var bS=class extends W{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}};g([T("rowContainerHeightService")],bS.prototype,"maxDivHeightScaler",2);g([z],bS.prototype,"postConstruct",1);var PS=class extends W{constructor(e){super(),this.eContainer=e}postConstruct(){if(Se(this.rangeService))return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",t=>{if(t.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gridOptionsService.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};g([qe("rangeService")],PS.prototype,"rangeService",2);g([T("dragService")],PS.prototype,"dragService",2);g([z],PS.prototype,"postConstruct",1);var Uc=class extends W{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,w.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()}setWidth(){const{columnModel:e}=this,t=this.gridOptionsService.isDomLayout("print"),s=e.getBodyContainerWidth(),r=e.getDisplayedColumnsLeftWidth(),o=e.getDisplayedColumnsRightWidth();let n;t?n=s+r+o:(n=s,this.addSpacer&&(this.gridOptionsService.get("enableRtl")?r:o)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.gridOptionsService.getScrollbarWidth())),this.callback(n)}};g([T("columnModel")],Uc.prototype,"columnModel",2);g([T("scrollVisibleService")],Uc.prototype,"scrollVisibleService",2);g([z],Uc.prototype,"postConstruct",1);var ii=(i=>(i.LEFT="left",i.RIGHT="right",i.CENTER="center",i.FULL_WIDTH="fullWidth",i.TOP_LEFT="topLeft",i.TOP_RIGHT="topRight",i.TOP_CENTER="topCenter",i.TOP_FULL_WIDTH="topFullWidth",i.STICKY_TOP_LEFT="stickyTopLeft",i.STICKY_TOP_RIGHT="stickyTopRight",i.STICKY_TOP_CENTER="stickyTopCenter",i.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",i.BOTTOM_LEFT="bottomLeft",i.BOTTOM_RIGHT="bottomRight",i.BOTTOM_CENTER="bottomCenter",i.BOTTOM_FULL_WIDTH="bottomFullWidth",i))(ii||{});function VN(i){switch(i){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var w$=el([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),y$=el([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"]]),Tu=class HN extends W{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name==="topFullWidth"||this.name==="stickyTopFullWidth"||this.name==="bottomFullWidth"||this.name==="fullWidth"}static getRowContainerCssClasses(e){const t=w$.get(e),s=y$.get(e);return{container:t,viewport:s}}static getPinned(e){switch(e){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gridOptionsService.get("enableRtl"),this.forContainers(["center"],()=>this.viewportSizeFeature=this.createManagedBean(new Wc(this)))}registerWithCtrlsService(){switch(this.name){case"center":this.ctrlsService.registerCenterRowContainerCtrl(this);break;case"left":this.ctrlsService.registerLeftRowContainerCtrl(this);break;case"right":this.ctrlsService.registerRightRowContainerCtrl(this);break;case"topCenter":this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case"topLeft":this.ctrlsService.registerTopLeftRowContainerCon(this);break;case"topRight":this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case"stickyTopCenter":this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case"stickyTopLeft":this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case"stickyTopRight":this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case"bottomCenter":this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case"bottomLeft":this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case"bottomRight":this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,s){this.comp=e,this.eContainer=t,this.eViewport=s,this.createManagedBean(new Gs(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const r=["topCenter","topLeft","topRight"],o=["stickyTopCenter","stickyTopLeft","stickyTopRight"],n=["bottomCenter","bottomLeft","bottomRight"],l=["center","left","right"],a=[...r,...n,...l,...o],u=["center","left","right","fullWidth"],d=["center","topCenter","stickyTopCenter","bottomCenter"],c=["left","bottomLeft","topLeft","stickyTopLeft"],h=["right","bottomRight","topRight","stickyTopRight"];this.forContainers(c,()=>{this.pinnedWidthFeature=this.createManagedBean(new ub(this.eContainer)),this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(h,()=>{this.pinnedWidthFeature=this.createManagedBean(new db(this.eContainer)),this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(u,()=>this.createManagedBean(new bS(this.eContainer,this.name==="center"?s:void 0))),this.forContainers(a,()=>this.createManagedBean(new PS(this.eContainer))),this.forContainers(d,()=>this.createManagedBean(new Uc(p=>this.comp.setContainerWidth(`${p}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth"].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const s=()=>{const r=this.gridOptionsService.get("ensureDomOrder"),o=this.gridOptionsService.isDomLayout("print");this.comp.setDomOrder(r||o)};this.addManagedPropertyListener("domLayout",s),s()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter"],()=>{const e=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",e)})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),s=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(t,s,e)}getCenterWidth(){return Cu(this.eViewport)}getCenterViewportScrollLeft(){return Np(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return zD(this.eViewport)}getViewportScrollLeft(){return Np(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gridOptionsService.get("alwaysShowHorizontalScroll")||L_(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Gp(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!HN.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){if(!this.visible){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const t=this.gridOptionsService.isDomLayout("print"),r=this.gridOptionsService.get("embedFullWidthRows")||t,o=this.getRowCtrls().filter(n=>{const l=n.isFullWidth();return this.isFullWithContainer?!r&&l:r||!l});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};g([T("dragService")],Tu.prototype,"dragService",2);g([T("ctrlsService")],Tu.prototype,"ctrlsService",2);g([T("columnModel")],Tu.prototype,"columnModel",2);g([T("resizeObserverService")],Tu.prototype,"resizeObserverService",2);g([T("rowRenderer")],Tu.prototype,"rowRenderer",2);g([z],Tu.prototype,"postConstruct",1);var UC=Tu,E$=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="topLeft"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="topCenter"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="topRight"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="topFullWidth"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="left"></ag-row-container>
                <ag-row-container ref="centerContainer" name="center"></ag-row-container>
                <ag-row-container ref="rightContainer" name="right"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="fullWidth"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="stickyTopLeft"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="stickyTopCenter"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="stickyTopRight"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="stickyTopFullWidth"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="bottomLeft"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="bottomCenter"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="bottomRight"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="bottomFullWidth"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,en=class extends De{constructor(){super(E$)}init(){const e=(s,r)=>{const o=`${s}px`;r.style.minHeight=o,r.style.height=o},t={setRowAnimationCssOnBodyViewport:(s,r)=>this.setRowAnimationCssOnBodyViewport(s,r),setColumnCount:s=>g_(this.getGui(),s),setRowCount:s=>p_(this.getGui(),s),setTopHeight:s=>e(s,this.eTop),setBottomHeight:s=>e(s,this.eBottom),setTopDisplay:s=>this.eTop.style.display=s,setBottomDisplay:s=>this.eBottom.style.display=s,setStickyTopHeight:s=>this.eStickyTop.style.height=s,setStickyTopTop:s=>this.eStickyTop.style.top=s,setStickyTopWidth:s=>this.eStickyTop.style.width=s,setColumnMovingCss:(s,r)=>this.addOrRemoveCssClass(s,r),updateLayoutClasses:(s,r)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(n=>{n.toggle("ag-layout-auto-height",r.autoHeight),n.toggle("ag-layout-normal",r.normal),n.toggle("ag-layout-print",r.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",r.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",r.normal),this.addOrRemoveCssClass("ag-layout-print",r.print)},setAlwaysVerticalScrollClass:(s,r)=>this.eBodyViewport.classList.toggle(_N,r),registerBodyViewportResizeListener:s=>{const r=this.resizeObserverService.observeResize(this.eBodyViewport,s);this.addDestroyFunc(()=>r())},setPinnedTopBottomOverflowY:s=>this.eTop.style.overflowY=this.eBottom.style.overflowY=s,setCellSelectableCss:(s,r)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(o=>o.classList.toggle(s,r))},setBodyViewportWidth:s=>this.eBodyViewport.style.width=s};this.ctrl=this.createManagedBean(new Xi),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService&&this.gridOptionsService.get("enableRangeSelection")||this.gridOptionsService.get("rowSelection")==="multiple")&&h_(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const s=this.eBodyViewport.classList;s.toggle("ag-row-animation",t),s.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};g([T("resizeObserverService")],en.prototype,"resizeObserverService",2);g([qe("rangeService")],en.prototype,"rangeService",2);g([Y("eBodyViewport")],en.prototype,"eBodyViewport",2);g([Y("eStickyTop")],en.prototype,"eStickyTop",2);g([Y("eTop")],en.prototype,"eTop",2);g([Y("eBottom")],en.prototype,"eBottom",2);g([Y("gridHeader")],en.prototype,"headerRootComp",2);g([Y("eBody")],en.prototype,"eBody",2);g([z],en.prototype,"init",1);var Cc=class extends W{postConstruct(){this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){const e=this.ctrlsService.getCenterRowContainerCtrl();if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;const s={type:w.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(s)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};g([T("ctrlsService")],Cc.prototype,"ctrlsService",2);g([T("columnAnimationService")],Cc.prototype,"columnAnimationService",2);g([z],Cc.prototype,"postConstruct",1);Cc=g([te("scrollVisibleService")],Cc);var pn=class extends W{constructor(){super(...arguments),this.gridInstanceId=pn.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(e){e[pn.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(e){return _C(this.gridOptionsService,e.target,xa.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const s=t[pn.GRID_DOM_KEY];if(V(s))return s===this.gridInstanceId;t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=this.gridOptionsService.isDomLayout("normal"),s=e;let r,o;if(s.clientX!=null||s.clientY!=null?(r=s.clientX,o=s.clientY):(r=s.x,o=s.y),t){const n=this.ctrlsService.getGridBodyCtrl(),l=n.getScrollFeature().getVScrollPosition(),a=n.getScrollFeature().getHScrollPosition();r+=a.left,o+=l.top}return{x:r,y:o}}};pn.gridInstanceSequence=new mc;pn.GRID_DOM_KEY="__ag_grid_instance";g([T("ctrlsService")],pn.prototype,"ctrlsService",2);pn=g([te("mouseEventService")],pn);var ji=class extends W{constructor(){super(),this.onPageDown=sR(this.onPageDown,100),this.onPageUp=sR(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const s=e.key,r=e.altKey,o=e.ctrlKey||e.metaKey,n=!!this.rangeService&&e.shiftKey,l=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(s){case x.PAGE_HOME:case x.PAGE_END:!o&&!r&&(this.onHomeOrEndKey(s),a=!0);break;case x.LEFT:case x.RIGHT:case x.UP:case x.DOWN:if(!l)return!1;o&&!r&&!n&&(this.onCtrlUpDownLeftRight(s,l),a=!0);break;case x.PAGE_DOWN:case x.PAGE_UP:!o&&!r&&(a=this.handlePageUpDown(s,l,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,s){return s&&(t=this.focusService.getFocusedCell()),t?(e===x.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){const{scrollIndex:t,scrollType:s,scrollColumn:r,focusIndex:o,focusColumn:n}=e;if(V(r)&&!r.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(r),V(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,s),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(o),this.focusService.setFocusedCell({rowIndex:o,column:n,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){const l={rowIndex:o,rowPinned:null,column:n};this.rangeService.setRangeToCell(l)}}onPageDown(e){const s=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.getViewportHeight(),o=this.paginationProxy.getPixelOffset(),n=s.top+r,l=this.paginationProxy.getRowIndexAtPixel(n+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,l):this.navigateToNextPage(e,l)}onPageUp(e){const s=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.paginationProxy.getPixelOffset(),o=s.top,n=this.paginationProxy.getRowIndexAtPixel(o+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,n,!0):this.navigateToNextPage(e,n,!0)}navigateToNextPage(e,t,s=!1){const r=this.getViewportHeight(),o=this.paginationProxy.getPageFirstRow(),n=this.paginationProxy.getPageLastRow(),l=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRow(e.rowIndex),u=s?(a==null?void 0:a.rowHeight)-r-l:r-l,d=(a==null?void 0:a.rowTop)+u;let c=this.paginationProxy.getRowIndexAtPixel(d+l);if(c===e.rowIndex){const p=s?-1:1;t=c=e.rowIndex+p}let h;s?(h="bottom",c<o&&(c=o),t<o&&(t=o)):(h="top",c>n&&(c=n),t>n&&(t=n)),this.isRowTallerThanView(c)&&(t=c,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:c,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,s=!1){this.navigateTo({scrollIndex:t,scrollType:s?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const r=this.getNextFocusIndexForAutoHeight(e,s);this.navigateTo({scrollIndex:t,scrollType:s?"bottom":"top",scrollColumn:null,focusIndex:r,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){var s;const r=t?-1:1,o=this.getViewportHeight(),n=this.paginationProxy.getPageLastRow();let l=0,a=e.rowIndex;for(;a>=0&&a<=n;){const u=this.paginationProxy.getRow(a);if(u){const d=(s=u.rowHeight)!=null?s:0;if(l+d>o)break;l+=d}a+=r}return Math.max(0,Math.min(a,n))}getViewportHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.gridOptionsService.getScrollbarWidth();let r=t.bottom-t.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(r-=s),r}isRowTallerThanView(e){const t=this.paginationProxy.getRow(e);if(!t)return!1;const s=t.rowHeight;return typeof s!="number"?!1:s>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const s=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:r,column:o}=s;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:o,focusIndex:r,focusColumn:o})}onHomeOrEndKey(e){const t=e===x.PAGE_HOME,s=this.columnModel.getAllDisplayedColumns(),r=t?s[0]:Je(s),o=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:r,focusIndex:o,focusColumn:r})}onTabKeyDown(e,t){const s=t.shiftKey;if(this.tabToNextCellCommon(e,s,t)){t.preventDefault();return}if(s){const{rowIndex:o,rowPinned:n}=e.getRowPosition();(n?o===0:o===this.paginationProxy.getPageFirstRow())&&(this.gridOptionsService.get("headerHeight")===0||this.gridOptionsService.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof xa&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(s)&&t.preventDefault()}tabToNextCell(e,t){const s=this.focusService.getFocusedCell();if(!s)return!1;let r=this.getCellByPosition(s);return!r&&(r=this.rowRenderer.getRowByPosition(s),!r||!r.isFullWidth())?!1:this.tabToNextCellCommon(r,e,t)}tabToNextCellCommon(e,t,s){let r=e.isEditing();if(!r&&e instanceof xa){const l=e.getRowCtrl();l&&(r=l.isEditing())}let o;return r?this.gridOptionsService.get("editType")==="fullRow"?o=this.moveToNextEditingRow(e,t,s):o=this.moveToNextEditingCell(e,t,s):o=this.moveToNextCellNotEditing(e,t),o||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,s=null){const r=e.getCellPosition();e.getGui().focus(),e.stopEditing();const o=this.findNextCellToFocusOn(r,t,!0);return o==null?!1:(o.startEditing(null,!0,s),o.focusCell(!1),!0)}moveToNextEditingRow(e,t,s=null){const r=e.getCellPosition(),o=this.findNextCellToFocusOn(r,t,!0);if(o==null)return!1;const n=o.getCellPosition(),l=this.isCellEditable(r),a=this.isCellEditable(n),u=n&&r.rowIndex===n.rowIndex&&r.rowPinned===n.rowPinned;return l&&e.setFocusOutOnEditor(),u||(e.getRowCtrl().stopEditing(),o.getRowCtrl().startRowEditing(void 0,void 0,s)),a?(o.setFocusInOnEditor(),o.focusCell()):o.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const s=this.columnModel.getAllDisplayedColumns();let r;e instanceof _a?r=Pt(he({},e.getRowPosition()),{column:t?s[0]:Je(s)}):r=e.getCellPosition();const o=this.findNextCellToFocusOn(r,t,!1);if(o instanceof xa)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o.getRowPosition(),t);return V(o)}findNextCellToFocusOn(e,t,s){let r=e;for(;;){e!==r&&(e=r),t||(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextTabbedCell(r,t);const o=this.gridOptionsService.getCallback("tabToNextCell");if(V(o)){const u=o({backwards:t,editing:s,previousCellPosition:e,nextCellPosition:r||null});V(u)?(u.floating&&(Ce("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),u.rowPinned=u.floating),r={rowIndex:u.rowIndex,column:u.column,rowPinned:u.rowPinned}):r=null}if(!r)return null;if(r.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+r.rowIndex,column:r.column},fromCell:!0}),null}const n=this.gridOptionsService.get("editType")==="fullRow";if(s&&!n&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);const l=this.getCellByPosition(r);if(!l){const a=this.rowRenderer.getRowByPosition(r);if(!a||!a.isFullWidth()||s)continue;return a}if(!l.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(r),l}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)}navigateToNextCell(e,t,s,r){let o=s,n=!1;for(;o&&(o===s||!this.isValidNavigateCell(o));)this.gridOptionsService.get("enableRtl")?t===x.LEFT&&(o=this.getLastCellOfColSpan(o)):t===x.RIGHT&&(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextCellToFocus(t,o),n=Se(o);if(n&&e&&e.key===x.UP&&(o={rowIndex:-1,rowPinned:null,column:s.column}),r){const a=this.gridOptionsService.getCallback("navigateToNextCell");if(V(a)){const d=a({key:t,previousCellPosition:s,nextCellPosition:o||null,event:e});V(d)?(d.floating&&(Ce("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),d.rowPinned=d.floating),o={rowPinned:d.rowPinned,rowIndex:d.rowIndex,column:d.column}):o=null}}if(!o)return;if(o.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+o.rowIndex,column:s.column},event:e||void 0,fromCell:!0});return}const l=this.getNormalisedPosition(o);l?this.focusPosition(l):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){const s=this.columnModel.getAllDisplayedColumns(),r=this.rowRenderer.getRowByPosition(e);if(!r||!r.isFullWidth())return!1;const o=this.focusService.getFocusedCell(),n={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Je(s):s[0])};this.focusPosition(n);const l=o!=null?this.rowPositionUtils.before(n,o):!1,a={type:w.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:n.column,isFullWidthCell:!0,floating:n.rowPinned,fromBelow:l};return this.eventService.dispatchEvent(a),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const s=t.getColSpanningList();return s.length===1?e:{rowIndex:e.rowIndex,column:Je(s),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=this.gridOptionsService.isGroupRowsSticky(),s=this.rowModel.getRow(e.rowIndex);!(t&&(s==null?void 0:s.sticky))&&Se(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}};g([T("mouseEventService")],ji.prototype,"mouseEventService",2);g([T("paginationProxy")],ji.prototype,"paginationProxy",2);g([T("focusService")],ji.prototype,"focusService",2);g([qe("rangeService")],ji.prototype,"rangeService",2);g([T("columnModel")],ji.prototype,"columnModel",2);g([T("rowModel")],ji.prototype,"rowModel",2);g([T("ctrlsService")],ji.prototype,"ctrlsService",2);g([T("rowRenderer")],ji.prototype,"rowRenderer",2);g([T("headerNavigationService")],ji.prototype,"headerNavigationService",2);g([T("rowPositionUtils")],ji.prototype,"rowPositionUtils",2);g([T("cellNavigationService")],ji.prototype,"cellNavigationService",2);g([T("pinnedRowModel")],ji.prototype,"pinnedRowModel",2);g([z],ji.prototype,"postConstruct",1);ji=g([te("navigationService")],ji);var cb=class BN extends wu{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gridOptionsService.setDomData(this.getGui(),BN.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,s=r=>{HC(this.gridOptionsService,r,t.node,t.column,!0)||t.onKeyDown(r)};this.addManagedListener(e,"keydown",s)}};cb.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";g([z],cb.prototype,"postConstruct",1);var WN=cb,R$=class extends De{constructor(e,t,s,r,o){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=r,this.cellCtrl=t;const n=document.createElement("div");n.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(n);const l=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);const a=(c,h)=>{h!=null&&h!=""?l.setAttribute(c,h):l.removeAttribute(c)};Bt(l,t.getCellAriaRole()),a("col-id",t.getColumnIdSanitised());const u=t.getTabIndex();u!==void 0&&a("tabindex",u.toString());const d={addOrRemoveCssClass:(c,h)=>this.addOrRemoveCssClass(c,h),setUserStyles:c=>jD(l,c),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:c=>this.includeSelection=c,setIncludeRowDrag:c=>this.includeRowDrag=c,setIncludeDndSource:c=>this.includeDndSource=c,setRenderDetails:(c,h,p)=>this.setRenderDetails(c,h,p),setEditDetails:(c,h,p)=>this.setEditDetails(c,h,p),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(d,this.getGui(),this.eCellWrapper,s,o)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,s){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const o=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(s||o)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,s){e?this.createCellEditorInstance(e,t,s):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,s=t||this.forceWrapper,r=s&&this.eCellWrapper==null;if(r){const d=document.createElement("div");d.setAttribute("role","presentation"),d.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=d,this.getGui().appendChild(this.eCellWrapper)}const o=!s&&this.eCellWrapper!=null;o&&(so(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!s);const n=!e&&s,l=n&&this.eCellValue==null;if(l){const d=document.createElement("span");d.setAttribute("role","presentation"),d.setAttribute("class","ag-cell-value"),this.eCellValue=d,this.eCellWrapper.appendChild(this.eCellValue)}const a=!n&&this.eCellValue!=null;a&&(so(this.eCellValue),this.eCellValue=void 0);const u=r||o||l||a;return u&&this.removeControls(),e||t&&this.addControls(),u}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,s){const r=this.editorVersion,o=e.newAgStackInstance();if(!o)return;const{params:n}=e;o.then(a=>this.afterCellEditorCreated(r,a,n,t,s)),Se(this.cellEditor)&&n.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();oi(t);const s=e!=null?pi(e,!0):null;s!=null&&(t.textContent=s)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),so(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),so(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){const s=!this.beans.gridOptionsService.get("suppressAnimationFrame"),r=this.rendererVersion,{componentClass:o}=e,n=()=>{if(this.rendererVersion!==r||!this.isAlive())return;const a=e.newAgStackInstance(),u=this.afterCellRendererCreated.bind(this,r,o);a&&a.then(u)};s&&this.firstRender?this.beans.animationFrameService.createTask(n,this.rowNode.rowIndex,"createTasksP2"):n()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,s){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(s);return}if(this.cellRenderer=s,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const o=this.getParentOfValue();oi(o),o.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,s,r,o){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();const a=r||t.isPopup!==void 0&&t.isPopup();a?this.addPopupCellEditor(s,o):this.addInCellEditor(),this.refreshEditStyles(!0,a),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(e,t){var s;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),(s=this.rowCtrl)==null||s.setInlineEditingCss(e)}addInCellEditor(){const e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gridOptionsService.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const s=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new WN(e));const r=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&r.appendChild(this.cellEditorGui);const o=this.beans.popupService,n=this.beans.gridOptionsService.get("stopEditingWhenCellsLoseFocus"),l=t??(s.getPopupPosition?s.getPopupPosition():"over"),a=this.beans.gridOptionsService.get("enableRtl"),u={ePopup:r,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:l,alignSide:a?"right":"left",keepWithinBounds:!0},d=o.positionPopupByComponent.bind(o,u),c=this.beans.localeService.getLocaleTextFunc(),h=o.addPopup({modal:n,eChild:r,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:d,ariaLabel:c("ariaLabelCellEditor","Cell Editor")});h&&(this.hideEditorPopup=h.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&GD()&&e.focus({preventScroll:!0}),oi(this.getParentOfValue())}},T$=class extends De{constructor(e,t,s){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;const r=document.createElement("div");r.setAttribute("comp-id",`${this.getCompId()}`),r.setAttribute("style",this.getInitialStyle(s)),this.setTemplateFromElement(r);const o=this.getGui(),n=o.style;this.domOrder=this.rowCtrl.getDomOrder(),Bt(o,"row");const l=this.rowCtrl.getTabIndex();l!=null&&o.setAttribute("tabindex",l.toString());const a={setDomOrder:u=>this.domOrder=u,setCellCtrls:u=>this.setCellCtrls(u),showFullWidth:u=>this.showFullWidth(u),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(u,d)=>this.addOrRemoveCssClass(u,d),setUserStyles:u=>jD(o,u),setTop:u=>n.top=u,setTransform:u=>n.transform=u,setRowIndex:u=>o.setAttribute("row-index",u),setRowId:u=>o.setAttribute("row-id",u),setRowBusinessKey:u=>o.setAttribute("row-business-key",u),refreshFullWidth:u=>this.refreshFullWidth(u)};e.setComp(a,this.getGui(),s),this.addDestroyFunc(()=>{e.unsetComp(s)})}getInitialStyle(e){const t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){const t=r=>{if(this.isAlive()){const o=r.getGui();this.getGui().appendChild(o),this.rowCtrl.setupDetailRowAutoHeight(o),this.setFullWidthRowComp(r)}else this.beans.context.destroyBean(r)},s=e.newAgStackInstance();s&&s.then(t)}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach(r=>{const o=r.getInstanceId();this.cellComps[o]==null?this.newCellComp(r):t[o]=null});const s=Al(t).filter(r=>r!=null);this.destroyCells(s),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach(s=>{const r=this.cellComps[s.getInstanceId()];r&&t.push(r.getGui())}),KD(this.getGui(),t)}newCellComp(e){const t=new R$(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=Al(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(t=>{if(!t)return;const s=t.getCtrl().getInstanceId();this.cellComps[s]===t&&(t.detach(),t.destroy(),this.cellComps[s]=null)})}refreshFullWidth(e){const{fullWidthCellRenderer:t}=this;if(!t||!t.refresh)return!1;const s=e();return t.refresh(s)}};function D$(){const i=De.elementGettingCreated.getAttribute("name"),e=UC.getRowContainerCssClasses(i);let t;return i==="center"||i==="topCenter"||i==="stickyTopCenter"||i==="bottomCenter"?t=`<div class="${e.viewport}" ref="eViewport" role="presentation">
                <div class="${e.container}" ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" ref="eContainer"></div>`,t}var zc=class extends De{constructor(){super(D$()),this.rowComps={},this.name=De.elementGettingCreated.getAttribute("name"),this.type=VN(this.name)}postConstruct(){const e={setViewportHeight:s=>this.eViewport.style.height=s,setRowCtrls:({rowCtrls:s})=>this.setRowCtrls(s),setDomOrder:s=>{this.domOrder=s},setContainerWidth:s=>this.eContainer.style.width=s};this.createManagedBean(new UC(this.name)).setComp(e,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(e){const t=he({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;const s=r=>{const o=r.getInstanceId(),n=t[o];if(n)this.rowComps[o]=n,delete t[o],this.ensureDomOrder(n.getGui());else{if(!r.getRowNode().displayed)return;const l=new T$(r,this.beans,this.type);this.rowComps[o]=l,this.appendRow(l.getGui())}};e.forEach(s),Al(t).forEach(r=>{this.eContainer.removeChild(r.getGui()),r.destroy()}),Bt(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?O_(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&($D(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}};g([T("beans")],zc.prototype,"beans",2);g([Y("eViewport")],zc.prototype,"eViewport",2);g([Y("eContainer")],zc.prototype,"eContainer",2);g([z],zc.prototype,"postConstruct",1);g([ps],zc.prototype,"preDestroy",1);var hb=class{constructor(e){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}onDragEnter(e){if(this.clearColumnsList(),this.gridOptionsService.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(s=>{s.isPrimary()&&(s.isAnyFunctionActive()||(s.isAllowValue()?this.columnsToAggregate.push(s):s.isAllowRowGroup()?this.columnsToGroup.push(s):s.isAllowPivot()&&this.columnsToPivot.push(s)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Ae.ICON_PINNED:Ae.ICON_MOVE:null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};g([T("columnModel")],hb.prototype,"columnModel",2);g([T("gridOptionsService")],hb.prototype,"gridOptionsService",2);var Na=class{static attemptMoveColumns(e){const{isFromHeader:t,hDirection:s,xPosition:r,fromEnter:o,fakeEvent:n,pinned:l,gridOptionsService:a,columnModel:u}=e,d=s===0,c=s===1;let{allMovingColumns:h}=e;if(t){let A=[];h.forEach(F=>{var O;let L=null,G=F.getParent();for(;G!=null&&G.getDisplayedLeafColumns().length===1;)L=G,G=G.getParent();L!=null?(!!((O=L.getColGroupDef())!=null&&O.marryChildren)?L.getProvidedColumnGroup().getLeafColumns():L.getLeafColumns()).forEach(j=>{A.includes(j)||A.push(j)}):A.includes(F)||A.push(F)}),h=A}const p=h.slice();u.sortColumnsLikeGridColumns(p);const m=this.calculateValidMoves({movingCols:p,draggingRight:c,xPosition:r,pinned:l,gridOptionsService:a,columnModel:u}),S=this.calculateOldIndex(p,u);if(m.length===0)return;const E=m[0];let C=S!==null&&!o;if(t&&(C=S!==null),C&&!n&&(d&&E>=S||c&&E<=S))return;const v=u.getAllDisplayedColumns();let R=[],b=null;for(let A=0;A<m.length;A++){const F=m[A],O=u.getProposedColumnOrder(p,F);if(!u.doesOrderPassRules(O))continue;const L=O.filter(k=>v.includes(k));if(b===null)b=L;else if(!ko(L,b))break;const G=this.groupFragCount(O);R.push({move:F,fragCount:G})}if(R.length!==0)return R.sort((A,F)=>A.fragCount-F.fragCount),this.moveColumns(h,R[0].move,"uiColumnMoved",!1,u)}static moveColumns(e,t,s,r,o){return o.moveColumns(e,t,s,r),r?null:{columns:e,toIndex:t}}static calculateOldIndex(e,t){const s=t.getAllGridColumns(),r=Ux(e.map(u=>s.indexOf(u))),o=r[0];return Je(r)-o!==r.length-1?null:o}static groupFragCount(e){function t(r){let o=[],n=r.getOriginalParent();for(;n!=null;)o.push(n),n=n.getOriginalParent();return o}let s=0;for(let r=0;r<e.length-1;r++){let o=t(e[r]),n=t(e[r+1]);[o,n]=o.length>n.length?[o,n]:[n,o],o.forEach(l=>{n.indexOf(l)===-1&&s++})}return s}static calculateValidMoves(e){const{movingCols:t,draggingRight:s,xPosition:r,pinned:o,gridOptionsService:n,columnModel:l}=e;if(n.get("suppressMovableColumns")||t.some(R=>R.getColDef().suppressMovable))return[];const u=l.getDisplayedColumns(o),d=l.getAllGridColumns(),c=u.filter(R=>ar(t,R)),h=u.filter(R=>!ar(t,R)),p=d.filter(R=>!ar(t,R));let m=0,S=r;if(s){let R=0;c.forEach(b=>R+=b.getActualWidth()),S-=R}if(S>0){for(let R=0;R<h.length;R++){const b=h[R];if(S-=b.getActualWidth(),S<0)break;m++}s&&m++}let E;if(m>0){const R=h[m-1];E=p.indexOf(R)+1}else E=p.indexOf(h[0]),E===-1&&(E=0);const C=[E],v=(R,b)=>R-b;if(s){let R=E+1;const b=d.length-1;for(;R<=b;)C.push(R),R++;C.sort(v)}else{let R=E;const b=d.length-1;let A=d[R];for(;R<=b&&u.indexOf(A)<0;)R++,C.push(R),A=d[R];R=E-1;const F=0;for(;R>=F;)C.push(R),R--;C.sort(v).reverse()}return C}static normaliseX(e,t,s,r,o){const n=o.getHeaderRowContainerCtrl(t).getViewport();return s&&(e-=n.getBoundingClientRect().left),r.get("enableRtl")&&(e=n.clientWidth-e),t==null&&(e+=o.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),e}},$c=class{constructor(e,t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.eContainer=t,this.centerContainer=!V(e)}init(){this.ctrlsService.whenReady(()=>{this.gridBodyCon=this.ctrlsService.getGridBodyCtrl()})}getIconName(){return this.pinned?Ae.ICON_PINNED:Ae.ICON_MOVE}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const r=e.dragItem.visibleState,o=(t||[]).filter(n=>r[n.getId()]);this.setColumnsVisible(o,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,s){if(e){const r=e.filter(o=>!o.getColDef().lockVisible);this.columnModel.setColumnsVisible(r,t,s)}}setColumnsPinned(e,t,s){if(e){const r=e.filter(o=>!o.getColDef().lockPinned);this.columnModel.setColumnsPinned(r,t,s)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.centerContainer){const t=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),s=t+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.get("enableRtl")?(this.needToMoveRight=e<t+50,this.needToMoveLeft=e>s-50):(this.needToMoveLeft=e<t+50,this.needToMoveRight=e>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,s=!1,r=!1){var o;if(r){if(this.lastMovedInfo){const{columns:c,toIndex:h}=this.lastMovedInfo;Na.moveColumns(c,h,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=e,Se(e.hDirection))return;const n=Na.normaliseX(e.x,this.pinned,!1,this.gridOptionsService,this.ctrlsService);t||this.checkCenterForScrolling(n);const l=this.normaliseDirection(e.hDirection),a=e.dragSource.type,u=((o=e.dragSource.getDragItem().columns)==null?void 0:o.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0))||[],d=Na.attemptMoveColumns({allMovingColumns:u,isFromHeader:a===1,hDirection:l,xPosition:n,pinned:this.pinned,fromEnter:t,fakeEvent:s,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel});d&&(this.lastMovedInfo=d)}normaliseDirection(e){if(this.gridOptionsService.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0;default:console.error(`AG Grid: Unknown direction ${e}`)}else return e}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(Ae.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(Ae.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Ae.ICON_MOVE))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let t=null;const s=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=s.scrollHorizontally(-e):this.needToMoveRight&&(t=s.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const o=this.lastDraggingEvent.dragItem.columns.filter(n=>!n.getColDef().lockPinned);if(o.length>0&&(this.dragAndDropService.setGhostIcon(Ae.ICON_PINNED),this.failedMoveAttempts>7)){const n=this.needToMoveLeft?"left":"right";this.setColumnsPinned(o,n,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};g([T("columnModel")],$c.prototype,"columnModel",2);g([T("dragAndDropService")],$c.prototype,"dragAndDropService",2);g([T("gridOptionsService")],$c.prototype,"gridOptionsService",2);g([T("ctrlsService")],$c.prototype,"ctrlsService",2);g([z],$c.prototype,"init",1);var Kc=class extends W{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.leftRowContainerCtrl.getContainerElement()],[e.bottomLeftRowContainerCtrl.getContainerElement()],[e.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.rightRowContainerCtrl.getContainerElement()],[e.bottomRightRowContainerCtrl.getContainerElement()],[e.topRightRowContainerCtrl.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.centerRowContainerCtrl.getViewportElement()],[e.bottomCenterRowContainerCtrl.getViewportElement()],[e.topCenterRowContainerCtrl.getViewportElement()]];break}})}isInterestedIn(e){return e===1||e===0&&this.gridOptionsService.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new $c(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new hb(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}};g([T("dragAndDropService")],Kc.prototype,"dragAndDropService",2);g([T("columnModel")],Kc.prototype,"columnModel",2);g([T("ctrlsService")],Kc.prototype,"ctrlsService",2);g([z],Kc.prototype,"postConstruct",1);g([z],Kc.prototype,"init",1);var jc=class UN extends ab{constructor(e){super(UN.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui();((o,n)=>{n!=null&&n!=""?e.setAttribute(o,n):e.removeAttribute(o)})("col-id",this.column.getColId());const s={setWidth:o=>e.style.width=o,addOrRemoveCssClass:(o,n)=>this.addOrRemoveCssClass(o,n),setAriaSort:o=>o?m_(e,o):C_(e),setUserCompDetails:o=>this.setUserCompDetails(o),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(s,this.getGui(),this.eResize,this.eHeaderCompWrapper);const r=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",r)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(s=>this.afterCompCreated(t,s))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};jc.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;g([Y("eResize")],jc.prototype,"eResize",2);g([Y("eHeaderCompWrapper")],jc.prototype,"eHeaderCompWrapper",2);g([z],jc.prototype,"postConstruct",1);g([ps],jc.prototype,"destroyHeaderComp",1);var b$=jc,AS=class zN extends ab{constructor(e){super(zN.TEMPLATE,e)}postConstruct(){const e=this.getGui(),t=(r,o)=>o!=null?e.setAttribute(r,o):e.removeAttribute(r);e.setAttribute("col-id",this.ctrl.getColId());const s={addOrRemoveCssClass:(r,o)=>this.addOrRemoveCssClass(r,o),setResizableDisplayed:r=>Ue(this.eResize,r),setWidth:r=>e.style.width=r,setAriaExpanded:r=>t("aria-expanded",r),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(s,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}const s=this.getGui(),r=e.getGui();s.appendChild(r),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(s)}};AS.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;g([Y("eResize")],AS.prototype,"eResize",2);g([z],AS.prototype,"postConstruct",1);var P$=AS,SR=(i=>(i.COLUMN_GROUP="group",i.COLUMN="column",i.FLOATING_FILTER="filter",i))(SR||{}),pb=class extends De{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){LD(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,s)=>this.setHeaderCtrls(t,s),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(e,t){if(!this.isAlive())return;const s=this.headerComps;if(this.headerComps={},e.forEach(r=>{const o=r.getInstanceId();let n=s[o];delete s[o],n==null&&(n=this.createHeaderComp(r),this.getGui().appendChild(n.getGui())),this.headerComps[o]=n}),$i(s,(r,o)=>{this.getGui().removeChild(o.getGui()),this.destroyBean(o)}),t){const r=Al(this.headerComps);r.sort((n,l)=>{const a=n.getCtrl().getColumnGroupChild().getLeft(),u=l.getCtrl().getColumnGroupChild().getLeft();return a-u});const o=r.map(n=>n.getGui());KD(this.getGui(),o)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new P$(e);break;case"filter":t=new $2(e);break;default:t=new b$(e);break}return this.createBean(t),t.setParentComponent(this),t}};g([z],pb.prototype,"init",1);g([ps],pb.prototype,"destroyHeaderCtrls",1);var A$=0,Mn=class $N extends W{constructor(e,t,s){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=s,this.beans=t,this.instanceId=e.getUniqueId()+"-"+A$++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(e){const{headerRowIndex:t,column:s}=this.focusService.getFocusedHeader();return H_(this.gridOptionsService,e,t,s)}getWrapperHasFocus(){return this.gridOptionsService.getDocument().activeElement===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListener(this.beans.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:s}=this;DS.refreshFirstAndLastStyles(e,t,s.columnModel)}refreshAriaColIndex(){const{beans:e,column:t}=this,s=e.columnModel.getAriaColumnIndex(t);ID(this.eGui,s)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gridOptionsService.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){var t;const r=this.gridOptionsService.getDocument().activeElement,o=e.key===x.LEFT||e.key===x.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),r!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||o)&&(e.preventDefault(),e.stopImmediatePropagation()),!o))return;const n=e.key===x.LEFT!==this.gridOptionsService.get("enableRtl"),l=vN[n?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(a,e.shiftKey),(t=this.resizeFeature)==null||t.toggleColumnResizing(!0)}else this.moveHeader(l)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e);if(this.column.getPinned()){const r=this.pinnedWidthService.getPinnedLeftWidth(),o=this.pinnedWidthService.getPinnedRightWidth(),n=Cu(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(r+o+t>n)if(n>r+o)t=n-r-o;else return 0}return t}getResizeDiff(e){let t=e.key===x.LEFT!==this.gridOptionsService.get("enableRtl");const s=this.column.getPinned(),r=this.gridOptionsService.get("enableRtl");return s&&r!==(s==="right")&&(t=!t),(t?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case x.PAGE_DOWN:case x.PAGE_UP:case x.PAGE_HOME:case x.PAGE_END:t&&e.preventDefault()}}addDomData(){const e=$N.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gridOptionsService.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,s){const r=e??t;this.gridOptionsService.get("preventDefaultOnContextMenu")&&r.preventDefault();const o=s instanceof ut?s:void 0;this.menuService.isHeaderContextMenuEnabled(o)&&this.menuService.showHeaderContextMenu(o,e,t),this.dispatchColumnMouseEvent(w.EVENT_COLUMN_HEADER_CONTEXT_MENU,s)}dispatchColumnMouseEvent(e,t){const s={type:e,column:t};this.eventService.dispatchEvent(s)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};Mn.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";g([T("pinnedWidthService")],Mn.prototype,"pinnedWidthService",2);g([T("focusService")],Mn.prototype,"focusService",2);g([T("userComponentFactory")],Mn.prototype,"userComponentFactory",2);g([T("ctrlsService")],Mn.prototype,"ctrlsService",2);g([T("dragAndDropService")],Mn.prototype,"dragAndDropService",2);g([T("menuService")],Mn.prototype,"menuService",2);g([z],Mn.prototype,"postConstruct",1);var FS=Mn,OS=class extends W{constructor(e,t,s,r){super(),this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=r,this.beans=s}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?Je(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,ut.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const e=this.beans.gridOptionsService.get("suppressColumnMoveAnimation"),t=V(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),s=e.getOldLeft(),r=this.modifyLeftForPrintLayout(e,s),o=this.modifyLeftForPrintLayout(e,t);this.setLeft(r),this.actualLeft=o,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===o&&this.setLeft(o)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gridOptionsService.isDomLayout("print")||e.getPinned()==="left")return t;const r=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(e.getPinned()==="right"){const o=this.beans.columnModel.getBodyContainerWidth();return r+o+t}return r+t}setLeft(e){if(V(e)&&(this.eCell.style.left=`${e}px`),this.columnOrGroup instanceof ut)this.columnOrGroup;else{const s=this.columnOrGroup.getLeafColumns();if(!s.length)return;s.length>1&&f_(this.ariaEl,s.length),s[0]}}};g([z],OS.prototype,"postConstruct",1);var lf=class extends W{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gridOptionsService.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};g([T("columnHoverService")],lf.prototype,"columnHoverService",2);g([z],lf.prototype,"postConstruct",1);var F$=class extends FS{constructor(e,t,s){super(e,t,s),this.iconCreated=!1,this.column=e}setComp(e,t,s,r){this.comp=e,this.eButtonShowMainFilter=s,this.eFloatingFilterBody=r,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,ut.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,s=!!e.floatingFilter;this.active=t&&s}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=_t("filter",this.gridOptionsService,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new Hl(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();mo(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gridOptionsService.getDocument().activeElement===this.eGui)return;const o=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(o){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),o.focus();return}const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.columnModel;let s=this.column;do if(s=e?t.getDisplayedColBefore(s):t.getDisplayedColAfter(s),!s)break;while(!s.getColDef().filter||!s.getColDef().floatingFilter);return s}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case x.UP:case x.DOWN:t||e.preventDefault();case x.LEFT:case x.RIGHT:if(t)return;e.stopPropagation();case x.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case x.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const s=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),r=!!e.relatedTarget&&Ia(e.relatedTarget,"ag-floating-filter");if(s&&r&&e.target===this.eGui){const n=this.lastFocusEvent,l=!!(n&&n.key===x.TAB);if(n&&l){const a=n.shiftKey;this.focusService.focusInto(this.eGui,a)}}const o=this.getRowIndex();this.beans.focusService.setFocusedHeader(o,this.column)}setupHover(){this.createManagedBean(new lf([this.column],this.eGui));const e=()=>{if(!this.gridOptionsService.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,w.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupLeft(){const e=new OS(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:e}=this.beans,t=s=>{const r=this.comp.getFloatingFilterComp();r&&r.then(o=>{if(o){const n=e.getCurrentFloatingFilterParentModel(this.column);o.onParentModelChanged(n,s)}})};this.destroySyncListener=this.addManagedListener(this.column,ut.EVENT_FILTER_CHANGED,t),e.isFilterActive(this.column)&&t(null)}setupWidth(){const e=()=>{const t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListener(this.column,ut.EVENT_WIDTH_CHANGED,e),e()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,ut.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var e,t;const s=this.active;this.setupActive();const r=!s&&this.active;s&&!this.active&&((e=this.destroySyncListener)==null||e.call(this),(t=this.destroyFilterChangedListener)==null||t.call(this));const o=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!o?this.updateCompDetails(o,r):n.then(l=>{var a;!l||this.beans.filterManager.areFilterCompsDifferent((a=this.userCompDetails)!=null?a:null,o)?this.updateCompDetails(o,r):this.updateFloatingFilterParams(o)})}updateCompDetails(e,t){this.isAlive()&&(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){var t;if(!e)return;const s=e.params;(t=this.comp.getFloatingFilterComp())==null||t.then(r=>{let o=!1;r!=null&&r.refresh&&typeof r.refresh=="function"&&r.refresh(s)!==null&&(o=!0),!o&&(r!=null&&r.onParamsUpdated)&&typeof r.onParamsUpdated=="function"&&r.onParamsUpdated(s)!==null&&Ce("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},Yc=class extends W{constructor(e,t,s,r,o){super(),this.pinned=e,this.column=t,this.eResize=s,this.comp=r,this.ctrl=o}postConstruct(){const e=[];let t,s;const r=()=>{if(Ue(this.eResize,t),!t)return;const l=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(l),s){const a=this.gridOptionsService.get("skipHeaderOnAutoSize"),u=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",u);const d=new Fi(this.eResize);d.addEventListener(Fi.EVENT_DOUBLE_TAP,u),e.push(()=>{this.eResize.removeEventListener("dblclick",u),d.removeEventListener(Fi.EVENT_DOUBLE_TAP,u),d.destroy()})}},o=()=>{e.forEach(l=>l()),e.length=0},n=()=>{const l=this.column.isResizable(),a=!this.gridOptionsService.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(l!==t||a!==s)&&(t=l,s=a,o(),r())};n(),this.addDestroyFunc(o),this.ctrl.addRefreshFunction(n)}onResizing(e,t){const{column:s,lastResizeAmount:r,resizeStartWidth:o}=this,n=this.normaliseResizeAmount(t),l=o+n,a=[{key:s,newWidth:l}];if(this.column.getPinned()){const u=this.pinnedWidthService.getPinnedLeftWidth(),d=this.pinnedWidthService.getPinnedRightWidth(),c=Cu(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(u+d+(n-r)>c)return}this.lastResizeAmount=n,this.columnModel.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const s=this.pinned!=="left",r=this.pinned==="right";return this.gridOptionsService.get("enableRtl")?s&&(t*=-1):r&&(t*=-1),t}};g([T("horizontalResizeService")],Yc.prototype,"horizontalResizeService",2);g([T("pinnedWidthService")],Yc.prototype,"pinnedWidthService",2);g([T("ctrlsService")],Yc.prototype,"ctrlsService",2);g([T("columnModel")],Yc.prototype,"columnModel",2);g([z],Yc.prototype,"postConstruct",1);var gb=class extends W{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}onSpaceKeyDown(e){const t=this.cbSelectAll,s=this.gridOptionsService.getDocument();t.isDisplayed()&&!t.getGui().contains(s.activeElement)&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new wS),this.cbSelectAll.addCssClass("ag-header-select-all"),Bt(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,w.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),qg(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),s=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),r=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${r} (${s})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${r} (${s})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return this.gridOptionsService.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${e} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(e){const t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(console.warn(`AG Grid: ${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),s=this.isCurrentPageOnly();let r="uiSelectAll";s?r="uiSelectAllCurrentPage":t&&(r="uiSelectAllFiltered");const o={source:r,justFiltered:t,justCurrentPage:s};e?this.selectionService.selectAllRowNodes(o):this.selectionService.deselectAllRowNodes(o)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){const t=e,s=this.gridOptionsService.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});e=t(s)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};g([T("rowModel")],gb.prototype,"rowModel",2);g([T("selectionService")],gb.prototype,"selectionService",2);var O$=class extends FS{constructor(e,t,s){super(e,t,s),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,s,r){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(r),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new Yc(this.getPinned(),this.column,s,e,this)),this.createManagedBean(new lf([this.column],t)),this.createManagedBean(new OS(this.column,t,this.beans)),this.createManagedBean(new Hl(t,{shouldStopEventPropagation:o=>this.shouldStopEventPropagation(o),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,ut.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(e,t){var s,r;if(!this.column.isResizable())return;const o=this.column.getActualWidth(),n=(s=this.column.getMinWidth())!=null?s:0,l=(r=this.column.getMaxWidth())!=null?r:Number.MAX_SAFE_INTEGER,a=Math.min(Math.max(o+e,n),l);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:a}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,column:s,gridOptionsService:r,ctrlsService:o}=this,n=this.getPinned(),l=t.getBoundingClientRect().left,a=s.getActualWidth(),u=r.get("enableRtl"),d=e===0!==u,c=Na.normaliseX(d?l-20:l+a+20,n,!0,r,o);Na.attemptMoveColumns({allMovingColumns:[s],isFromHeader:!0,hDirection:e,xPosition:c,pinned:n,fromEnter:!1,fakeEvent:!1,gridOptionsService:r,columnModel:this.beans.columnModel}),o.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto")}setupUserComp(){const e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){return this.gridOptionsService.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,s)=>{this.beans.sortController.setSortForColumn(this.column,t,!!s,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,s)=>{this.setupTooltip(t,s)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new gb(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===x.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===x.ENTER&&this.onEnterKeyDown(e),e.key===x.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const s=this.comp.getUserCompInstance();!s||!(s instanceof fR)||s.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.gridOptionsService.get("tooltipShowMode")==="whenTruncated",r=this.eGui,o=this.column.getColDef();!t&&s&&!o.headerComponent&&(t=()=>{const a=r.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});const n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>e??this.column.getColDef().headerTooltip,shouldDisplayTooltip:t},l=this.createManagedBean(new On(n));this.refreshFunctions.push(()=>l.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),s=DS.getHeaderClassesFromColDef(t,this.gridOptionsService,this.column,null),r=this.userHeaderClasses;this.userHeaderClasses=new Set(s),s.forEach(o=>{r.has(o)?r.delete(o):this.comp.addOrRemoveCssClass(o,!0)}),r.forEach(o=>this.comp.addOrRemoveCssClass(o,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:s,displayName:r,dragAndDropService:o,gridOptionsService:n}=this,{columnModel:l}=s;let a=!this.gridOptionsService.get("suppressDragLeaveHidesColumns");const u=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?Ae.ICON_HIDE:Ae.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(t),dragItemName:r,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:d=>{var c;if(a){const h=((c=d==null?void 0:d.columns)==null?void 0:c.filter(p=>!p.getColDef().lockVisible))||[];l.setColumnsVisible(h,!0,"uiColumnMoved")}},onGridExit:d=>{var c;if(a){const h=((c=d==null?void 0:d.columns)==null?void 0:c.filter(p=>!p.getColDef().lockVisible))||[];l.setColumnsVisible(h,!1,"uiColumnMoved")}}};o.addDragSource(u,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gridOptionsService.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const e=()=>{const t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListener(this.column,ut.EVENT_WIDTH_CHANGED,e),e()}setupMovingCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,ut.EVENT_MOVING_CHANGED,e),e()}setupMenuClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,ut.EVENT_MENU_VISIBLE_CHANGED,e),e()}setupSortableClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,ut.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){const e=()=>{const t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};this.addManagedListener(this.column,ut.EVENT_FILTER_ACTIVE_CHANGED,e),e()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:s,beans:r}=this;if(!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),s.addOrRemoveCssClass("ag-header-span-height",!1),s.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:o,isSpanningTotal:n}=this.column.getColumnGroupPaddingInfo();s.addOrRemoveCssClass("ag-header-span-height",o>0);const{columnModel:l}=r,a=l.getColumnHeaderRowHeight();if(o===0){s.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${a}px`);return}s.addOrRemoveCssClass("ag-header-span-total",n);const d=l.isPivotMode()?l.getPivotGroupHeaderHeight():l.getGroupHeaderHeight(),c=o*d;e.style.setProperty("top",`${-c}px`),e.style.setProperty("height",`${a+c}px`)}setupAutoHeight(e){const{columnModel:t,resizeObserverService:s}=this.beans,r=d=>{if(!this.isAlive())return;const{paddingTop:c,paddingBottom:h,borderBottomWidth:p,borderTopWidth:m}=Vl(this.getGui()),S=c+h+p+m,C=e.offsetHeight+S;if(d<5){const v=this.beans.gridOptionsService.getDocument(),R=!v||!v.contains(e),b=C==0;if(R||b){window.setTimeout(()=>r(d+1),0);return}}t.setColumnHeaderHeight(this.column,C)};let o=!1,n;const l=()=>{const d=this.column.isAutoHeaderHeight();d&&!o&&a(),!d&&o&&u()},a=()=>{o=!0,r(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),n=s.observeResize(e,()=>r(0))},u=()=>{o=!1,n&&n(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),n=void 0};l(),this.addDestroyFunc(()=>u()),this.addManagedListener(this.column,ut.EVENT_WIDTH_CHANGED,()=>o&&r(0)),this.addManagedListener(this.eventService,ut.EVENT_SORT_CHANGED,()=>{o&&window.setTimeout(()=>r(0))}),this.addRefreshFunction(l)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(o_(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){const e=this.beans.gridOptionsService.getDocument();if(!this.eGui.contains(e.activeElement))return;const t=Array.from(this.ariaDescriptionProperties.keys()).sort((s,r)=>s==="filter"?-1:r.charCodeAt(0)-s.charCodeAt(0)).map(s=>this.ariaDescriptionProperties.get(s)).join(". ");this.beans.ariaAnnouncementService.announceValue(t)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const e=()=>{if(!this.gridOptionsService.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,w.EVENT_COLUMN_HOVER_CHANGED,e),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const e=r=>this.handleMouseOverChange(r.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent(w.EVENT_COLUMN_HEADER_CLICKED,this.column),s=r=>this.handleContextMenuMouseEvent(r,void 0,this.column);this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",t),this.addManagedListener(this.getGui(),"contextmenu",s)}handleMouseOverChange(e){this.setActiveHeader(e);const s={type:e?w.EVENT_COLUMN_HEADER_MOUSE_OVER:w.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(s)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof fR?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},af=class extends W{constructor(e,t,s,r){super(),this.eResize=t,this.comp=e,this.pinned=s,this.columnGroup=r}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gridOptionsService.get("suppressAutoSize")){const t=this.gridOptionsService.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const s=[];this.columnGroup.getDisplayedLeafColumns().forEach(o=>{o.getColDef().suppressAutoSize||s.push(o.getColId())}),s.length>0&&this.columnModel.autoSizeColumns({columns:s,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,s="uiColumnResized"){const r=this.normaliseDragChange(t),o=this.resizeStartWidth+r;this.resizeColumnsFromLocalValues(o,s,e)}getInitialValues(e){const t=this.getColumnsToResize(),s=this.getInitialSizeOfColumns(t),r=this.getSizeRatiosOfColumns(t,s),o={columnsToResize:t,resizeStartWidth:s,resizeRatios:r};let n=null;if(e&&(n=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),n){const l=n.getDisplayedLeafColumns(),a=o.groupAfterColumns=l.filter(d=>d.isResizable()),u=o.groupAfterStartWidth=this.getInitialSizeOfColumns(a);o.groupAfterRatios=this.getSizeRatiosOfColumns(a,u)}else o.groupAfterColumns=void 0,o.groupAfterStartWidth=void 0,o.groupAfterRatios=void 0;return o}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:s,resizeRatios:r,groupAfterColumns:o,groupAfterStartWidth:n,groupAfterRatios:l}=e;this.resizeCols=t,this.resizeStartWidth=s,this.resizeRatios=r,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=n,this.resizeTakeFromRatios=l}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),s=this.getInitialValues();t>s.resizeStartWidth&&this.resizeColumns(s,t,e,!0)}resizeColumnsFromLocalValues(e,t,s=!0){var r,o,n;if(!this.resizeCols||!this.resizeRatios)return;const l={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(r=this.resizeTakeFromCols)!=null?r:void 0,groupAfterStartWidth:(o=this.resizeTakeFromStartWidth)!=null?o:void 0,groupAfterRatios:(n=this.resizeTakeFromRatios)!=null?n:void 0};this.resizeColumns(l,e,t,s)}resizeColumns(e,t,s,r=!0){const{columnsToResize:o,resizeStartWidth:n,resizeRatios:l,groupAfterColumns:a,groupAfterStartWidth:u,groupAfterRatios:d}=e,c=[];if(c.push({columns:o,ratios:l,width:t}),a){const h=t-n;c.push({columns:a,ratios:d,width:u-h})}this.columnModel.resizeColumnSets({resizeSets:c,finished:r,source:s}),r&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,s)=>t+s.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(s=>s.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gridOptionsService.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}};g([T("horizontalResizeService")],af.prototype,"horizontalResizeService",2);g([T("autoWidthCalculator")],af.prototype,"autoWidthCalculator",2);g([T("columnModel")],af.prototype,"columnModel",2);g([z],af.prototype,"postConstruct",1);var KN=class extends W{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ci.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}};g([z],KN.prototype,"postConstruct",1);var L$=class extends FS{constructor(e,t,s){super(e,t,s),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const r=this.getGui();this.setDragSource(r)}},this.column=e}setComp(e,t,s){this.comp=e,this.setGui(t),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();const r=this.getParentRowCtrl().getPinned(),o=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new lf(o,t)),this.createManagedBean(new OS(this.column,t,this.beans)),this.createManagedBean(new KN(e,this.column)),this.resizeFeature=this.createManagedBean(new af(e,s,r,this.column)),this.createManagedBean(new Hl(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(w.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;const s=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(s,s.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:s,column:r,gridOptionsService:o,ctrlsService:n}=this,l=o.get("enableRtl"),a=e===0,u=this.getPinned(),d=s.getBoundingClientRect(),c=d.left,h=d.width,p=Na.normaliseX(a!==l?c-20:c+h+20,u,!0,o,n),m=r.getGroupId(),S=this.focusService.getFocusedHeader();Na.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:p,pinned:u,fromEnter:!1,fakeEvent:!1,gridOptionsService:o,columnModel:t.columnModel});const E=r.getDisplayedLeafColumns(),C=a?E[0]:Je(E);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(C,"auto"),!this.isAlive()&&S&&this.restoreFocus(m,r,S)}restoreFocus(e,t,s){const r=t.getLeafColumns();if(!r.length)return;const o=r[0].getParent();if(!o)return;const n=this.findGroupWidthId(o,e);n&&this.focusService.focusHeaderPosition({headerPosition:Pt(he({},s),{column:n})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){const e=this.gridOptionsService.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:s=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),s,"gridInitializing")},setTooltip:(s,r)=>{this.setupTooltip(s,r)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){const e=r=>this.handleMouseOverChange(r.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent(w.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()),s=r=>this.handleContextMenuMouseEvent(r,void 0,this.column.getProvidedColumnGroup());this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",t),this.addManagedListener(this.getGui(),"contextmenu",s)}handleMouseOverChange(e){const s={type:e?w.EVENT_COLUMN_HEADER_MOUSE_OVER:w.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(s)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.column.getColGroupDef(),r=this.gridOptionsService.get("tooltipShowMode")==="whenTruncated",o=this.eGui;!t&&r&&!(s!=null&&s.headerGroupComponent)&&(t=()=>{const l=o.querySelector(".ag-header-group-text");return l?l.scrollWidth>l.clientWidth:!0});const n={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>e??(s&&s.headerTooltip),shouldDisplayTooltip:t};s&&(n.getColDef=()=>s),this.createBean(new On(n))}setupExpandable(){const e=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,Xt.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,Xt.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const e=this.column;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=DS.getHeaderClassesFromColDef(e,this.gridOptionsService,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(r=>r.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(s=>this.comp.addOrRemoveCssClass(s,!0))}setupMovingCss(){const t=this.column.getProvidedColumnGroup().getLeafColumns(),s=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(r=>{this.addManagedListener(r,ut.EVENT_MOVING_CHANGED,s)}),s()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===x.ENTER){const s=this.column,r=!s.isExpanded();this.beans.columnModel.setColumnGroupOpened(s.getProvidedColumnGroup(),r,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:s,displayName:r,gridOptionsService:o,dragAndDropService:n}=this,{columnModel:l}=t,a=s.getProvidedColumnGroup().getLeafColumns();let u=!o.get("suppressDragLeaveHidesColumns");const d=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>u?Ae.ICON_HIDE:Ae.ICON_NOT_ALLOWED,dragItemName:r,getDragItem:()=>this.getDragItemForGroup(s),onDragStarted:()=>{u=!o.get("suppressDragLeaveHidesColumns"),a.forEach(c=>c.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(c=>c.setMoving(!1,"uiColumnDragged")),onGridEnter:c=>{var h;if(u){const p=((h=c==null?void 0:c.columns)==null?void 0:h.filter(m=>!m.getColDef().lockVisible))||[];l.setColumnsVisible(p,!0,"uiColumnMoved")}},onGridExit:c=>{var h;if(u){const p=((h=c==null?void 0:c.columns)==null?void 0:h.filter(m=>!m.getColDef().lockVisible))||[];l.setColumnsVisible(p,!1,"uiColumnMoved")}}};n.addDragSource(d,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),s={};t.forEach(o=>s[o.getId()]=o.isVisible());const r=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(o=>{t.indexOf(o)>=0&&(r.push(o),Ds(t,o))}),t.forEach(o=>r.push(o)),{columns:r,visibleState:s}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(s=>{(s.getColDef().suppressMovable||s.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsService.get("suppressMovableColumns")}},I$=0,ap=class extends W{constructor(e,t,s){super(),this.instanceId=I$++,this.rowIndex=e,this.pinned=t,this.type=s;const r=s=="group"?"ag-header-row-column-group":s=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${r}`}postConstruct(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(e,t=!0){this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,w.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_VIRTUAL_COLUMNS_CHANGED,e=>this.onVirtualColumnsChanged(e.afterScroll)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(e){if(this.headerCellCtrls)return Oa(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{columnModel:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans;let s=e.getHeaderRowCount();const r=[];let o=0;t.hasFloatingFilters()&&(s++,o=1);const n=e.getColumnGroupHeaderRowHeight(),l=e.getColumnHeaderRowHeight(),a=1+o,u=s-a;for(let h=0;h<u;h++)r.push(n);r.push(l);for(let h=0;h<o;h++)r.push(e.getFloatingFiltersHeight());let d=0;for(let h=0;h<this.rowIndex;h++)d+=r[h];const c=r[this.rowIndex];return{topOffset:d,rowHeight:c}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),s=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,s,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const o of t)this.recycleAndCreateHeaderCtrls(o,e);const s=o=>{const{focusService:n,columnModel:l}=this.beans;return n.isHeaderWrapperFocused(o)?l.isDisplayed(o.getColumnGroupChild()):!1};if(e)for(const[o,n]of e)s(n)?this.headerCellCtrls.set(o,n):this.destroyBean(n);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const s=e.getUniqueId();let r;if(t&&(r=t.get(s),t.delete(s)),r&&r.getColumnGroupChild()!=e&&(this.destroyBean(r),r=void 0),r==null)switch(this.type){case"filter":r=this.createBean(new F$(e,this.beans,this));break;case"group":r=this.createBean(new L$(e,this.beans,this));break;default:r=this.createBean(new O$(e,this.beans,this));break}this.headerCellCtrls.set(s,r)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnModel:s}=this.beans;return["left",null,"right"].forEach(r=>{const o=s.getVirtualHeaderGroupRow(r,t);e=e.concat(o)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(e,t){if(!this.headerCellCtrls)return!1;const r=Array.from(this.headerCellCtrls.values()).find(o=>o.getColumnGroupChild()==e);return r?r.focus(t):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}};g([T("beans")],ap.prototype,"beans",2);g([z],ap.prototype,"postConstruct",1);var Bl=class extends W{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(e){const t=new Kc(this.pinned,e);this.createManagedBean(t)}refresh(e=!1){const t=new mc,s=this.focusService.getFocusHeaderToUseAfterRefresh(),r=()=>{const a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let u=0;u<a;u++){const d=this.createBean(new ap(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(d)}},o=()=>{const a=t.next(),u=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(u||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),u&&(this.columnsRowCtrl=this.createBean(new ap(a,this.pinned,"column")))},n=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;const a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}const u=t.next();if(this.filtersRowCtrl){const d=this.filtersRowCtrl.getRowIndex()!==u;(!e||d)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new ap(u,this.pinned,"filter")))};r(),o(),n();const l=this.getAllCtrls();this.comp.setCtrls(l),this.restoreFocusOnHeader(s)}restoreFocusOnHeader(e){e==null||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Uc(e=>this.comp.setCenterWidth(`${e}px`),!0))}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const s=()=>{const r=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(r==null)return;const o=r==0,n=this.hidden!==o,l=this.gridOptionsService.get("enableRtl"),a=this.gridOptionsService.getScrollbarWidth(),d=this.scrollVisibleService.isVerticalScrollShowing()&&(l&&e||!l&&t)?r+a:r;this.comp.setPinnedContainerWidth(`${d}px`),this.comp.setDisplayed(!o),n&&(this.hidden=o,this.refresh())};this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,s),this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,s),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,s),this.addManagedListener(this.eventService,w.EVENT_SCROLLBAR_WIDTH_CHANGED,s)}getHeaderCtrlForColumn(e){if(e instanceof ut)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){const s=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(s)return s}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const s=this.getAllCtrls()[e];return s?s.getType():void 0}focusHeader(e,t,s){const o=this.getAllCtrls()[e];return o?o.focusHeader(t,s):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};g([T("ctrlsService")],Bl.prototype,"ctrlsService",2);g([T("scrollVisibleService")],Bl.prototype,"scrollVisibleService",2);g([T("pinnedWidthService")],Bl.prototype,"pinnedWidthService",2);g([T("columnModel")],Bl.prototype,"columnModel",2);g([T("focusService")],Bl.prototype,"focusService",2);g([T("filterManager")],Bl.prototype,"filterManager",2);var Du=class Mm extends De{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();const e={setDisplayed:s=>this.setDisplayed(s),setCtrls:s=>this.setCtrls(s),setCenterWidth:s=>this.eCenterContainer.style.width=s,setViewportScrollLeft:s=>this.getGui().scrollLeft=s,setPinnedContainerWidth:s=>{const r=this.getGui();r.style.width=s,r.style.maxWidth=s,r.style.minWidth=s}};this.createManagedBean(new Bl(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",t=this.pinned=="right",s=e?Mm.PINNED_LEFT_TEMPLATE:t?Mm.PINNED_RIGHT_TEMPLATE:Mm.CENTER_TEMPLATE;this.setTemplate(s),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let s;const r=o=>{const n=o.getGui();n.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(n),s&&$D(this.eRowContainer,n,s),s=n};e.forEach(o=>{const n=o.getInstanceId(),l=t[n];delete t[n];const a=l||this.createBean(new pb(o));this.headerRowComps[n]=a,this.rowCompsList.push(a),r(a)}),Al(t).forEach(o=>this.destroyRowComp(o))}};Du.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>';Du.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>';Du.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;g([Y("eCenterContainer")],Du.prototype,"eCenterContainer",2);g([z],Du.prototype,"init",1);g([ps],Du.prototype,"destroyRowComps",1);var cy=Du,Za=class extends W{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl});const e=this.gridOptionsService.getDocument();this.addManagedListener(e,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){const e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}navigateVertically(e,t,s){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:r,column:o}=t,n=this.getHeaderRowCount(),l=e===0;let{headerRowIndex:a,column:u,headerRowIndexWithoutSpan:d}=l?this.headerPositionUtils.getColumnVisibleParent(o,r):this.headerPositionUtils.getColumnVisibleChild(o,r),c=!1;return a<0&&(a=0,u=o,c=!0),a>=n?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):d!==void 0&&(this.currentHeaderRowWithoutSpan=d),!c&&!u?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:u},allowUserOverride:!0,event:s})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,s){const r=this.focusService.getFocusedHeader(),o=e===2,n=this.gridOptionsService.get("enableRtl");let l,a;return this.currentHeaderRowWithoutSpan!==-1?r.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=r.headerRowIndex,o!==n?(a="Before",l=this.headerPositionUtils.findHeader(r,a)):(a="After",l=this.headerPositionUtils.findHeader(r,a)),l||!t?this.focusService.focusHeaderPosition({headerPosition:l,direction:a,fromTab:t,allowUserOverride:!0,event:s}):this.focusNextHeaderRow(r,a,s)}focusNextHeaderRow(e,t,s){const r=e.headerRowIndex;let o=null,n;if(t==="Before"?r>0&&(n=r-1,this.currentHeaderRowWithoutSpan-=1,o=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"end")):(n=r+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),o=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"start")),!o)return!1;const{column:l,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(o.column,o==null?void 0:o.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:l,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:s})}scrollToColumn(e,t="After"){if(e.getPinned())return;let s;if(e instanceof ci){const r=e.getDisplayedLeafColumns();s=t==="Before"?Je(r):r[0]}else s=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(s)}};g([T("focusService")],Za.prototype,"focusService",2);g([T("headerPositionUtils")],Za.prototype,"headerPositionUtils",2);g([T("ctrlsService")],Za.prototype,"ctrlsService",2);g([z],Za.prototype,"postConstruct",1);Za=g([te("headerNavigationService")],Za);var Wl=class extends W{setComp(e,t,s){this.comp=e,this.eGui=t,this.createManagedBean(new Hl(s,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();const r=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",r),this.mockContextMenuForIPad(r),this.ctrlsService.registerGridHeaderCtrl(this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let t=0,s=e.getHeaderRowCount(),r;this.filterManager.hasFloatingFilters()&&(s++,t=1);const n=this.columnModel.getColumnGroupHeaderRowHeight(),l=this.columnModel.getColumnHeaderRowHeight(),a=1+t,u=s-a;if(r=t*e.getFloatingFiltersHeight(),r+=u*n,r+=l,this.headerHeight===r)return;this.headerHeight=r;const d=`${r+1}px`;this.comp.setHeightAndMinHeight(d),this.eventService.dispatchEvent({type:w.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.columnModel.getAllDisplayedColumns().some(s=>s.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gridOptionsService.get("enableRtl"),s=e.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(s,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case x.LEFT:t=2;case x.RIGHT:V(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e);break;case x.UP:t=0;case x.DOWN:V(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const t=this.gridOptionsService.getDocument(),{relatedTarget:s}=e;!s&&this.eGui.contains(t.activeElement)||this.eGui.contains(s)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,s){if(!e&&!s||!this.menuService.isHeaderContextMenuEnabled())return;const{target:r}=e??t;(r===this.eGui||r===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,e,s)}mockContextMenuForIPad(e){if(!Fn())return;const t=new Fi(this.eGui),s=r=>{e(void 0,r.touchStart,r.touchEvent)};this.addManagedListener(t,Fi.EVENT_LONG_TAP,s),this.addDestroyFunc(()=>t.destroy())}};g([T("headerNavigationService")],Wl.prototype,"headerNavigationService",2);g([T("focusService")],Wl.prototype,"focusService",2);g([T("columnModel")],Wl.prototype,"columnModel",2);g([T("ctrlsService")],Wl.prototype,"ctrlsService",2);g([T("filterManager")],Wl.prototype,"filterManager",2);g([T("menuService")],Wl.prototype,"menuService",2);var fb=class jN extends De{constructor(){super(jN.TEMPLATE)}postConstruct(){const e={addOrRemoveCssClass:(r,o)=>this.addOrRemoveCssClass(r,o),setHeightAndMinHeight:r=>{this.getGui().style.height=r,this.getGui().style.minHeight=r}};this.createManagedBean(new Wl).setComp(e,this.getGui(),this.getFocusableElement());const s=r=>{this.createManagedBean(r),this.appendChild(r)};s(new cy("left")),s(new cy(null)),s(new cy("right"))}};fb.TEMPLATE='<div class="ag-header" role="presentation"/>';g([z],fb.prototype,"postConstruct",1);var M$=fb,Bp=class extends W{addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const s=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(s)}setResizeIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}};g([T("dragService")],Bp.prototype,"dragService",2);g([T("ctrlsService")],Bp.prototype,"ctrlsService",2);Bp=g([te("horizontalResizeService")],Bp);var Ol=class extends W{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,s){this.showPopup(e,r=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:s,mouseEvent:t,ePopup:r})},s,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,s){let r=-1,o="left";const n=this.menuService.isLegacyMenuEnabled();!n&&this.gridOptionsService.get("enableRtl")&&(r=1,o="right");let l=n?void 0:4*r,a=n?void 0:4;this.showPopup(e,u=>{this.popupService.positionPopupByComponent({type:s,eventSource:t,ePopup:u,nudgeX:l,nudgeY:a,alignSide:o,keepWithinBounds:!0,position:"under",column:e})},s,t,n)}showPopup(e,t,s,r,o){const n=e?this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU"):void 0;if(!n||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const l=document.createElement("div");Bt(l,"presentation"),l.classList.add("ag-menu"),o||l.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(l,"keydown",S=>this.trapFocusWithin(S,l)),n.guiPromise.then(S=>l.appendChild(S));let a;const u=()=>{var S;return(S=n.filterPromise)==null?void 0:S.then(E=>{var C;return(C=E==null?void 0:E.afterGuiDetached)==null?void 0:C.call(E)})},d=this.menuService.isColumnMenuAnchoringEnabled()?r??this.ctrlsService.getGridBodyCtrl().getGui():void 0,c=S=>{e.setMenuVisible(!1,"contextMenu");const E=S instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),E&&r&&dr(r)){const C=this.focusService.findTabbableParent(r);C&&C.focus()}u(),this.dispatchVisibleChangedEvent(!1,s,e)},h=this.localeService.getLocaleTextFunc(),p=o&&s!=="columnFilter"?h("ariaLabelColumnMenu","Column Menu"):h("ariaLabelColumnFilter","Column Filter"),m=this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:c,positionCallback:()=>t(l),anchorToElement:d,ariaLabel:p});m&&(this.hidePopup=a=m.hideFunc),n.filterPromise.then(S=>{t(l),S.afterGuiAttached&&S.afterGuiAttached({container:s,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,s,e)}trapFocusWithin(e,t){e.key!==x.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,s){const r={type:w.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:e,switchingTab:!1,key:t,column:s??null};this.eventService.dispatchEvent(r)}isMenuEnabled(e){var t;return e.isFilterAllowed()&&((t=e.getColDef().menuTabs)!=null?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}};g([T("filterManager")],Ol.prototype,"filterManager",2);g([T("popupService")],Ol.prototype,"popupService",2);g([T("focusService")],Ol.prototype,"focusService",2);g([T("ctrlsService")],Ol.prototype,"ctrlsService",2);g([T("menuService")],Ol.prototype,"menuService",2);Ol=g([te("filterMenuFactory")],Ol);var xm=(i=>(i.TAB_GUARD="ag-tab-guard",i.TAB_GUARD_TOP="ag-tab-guard-top",i.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",i))(xm||{}),LS=class extends W{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;const{comp:t,eTopGuard:s,eBottomGuard:r,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:n,focusInnerElement:l,onFocusIn:a,onFocusOut:u,shouldStopEventPropagation:d,onTabKeyDown:c,handleKeyDown:h,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=s,this.eBottomGuard=r,this.providedFocusInnerElement=l,this.eFocusableElement=p,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!n,this.providedFocusIn=a,this.providedFocusOut=u,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=c,this.providedHandleKeyDown=h}postConstruct(){this.createManagedBean(new Hl(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedListener(e,"focus",this.onFocus.bind(this)))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gridOptionsService.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=this.gridOptionsService.getDocument(),s=this.focusService.findFocusableElements(t.body,null,!0),r=s.indexOf(e?this.eTopGuard:this.eBottomGuard);if(r===-1)return;let o,n;e?(o=0,n=r):(o=r+1,n=s.length);const l=s.slice(o,n),a=this.gridOptionsService.get("tabIndex");l.sort((u,d)=>{const c=parseInt(u.getAttribute("tabindex")||"0"),h=parseInt(d.getAttribute("tabindex")||"0");return h===a?1:c===a?-1:c===0?1:h===0?-1:c-h}),l[e?l.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(e),this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const s=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),s&&(s.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e){return e===this.eTopGuard||e===this.eBottomGuard}};g([T("focusService")],LS.prototype,"focusService",2);g([z],LS.prototype,"postConstruct",1);var uf=class extends De{initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const t=[this.eTopGuard,this.eBottomGuard],s={setTabIndex:r=>{t.forEach(o=>r!=null?o.setAttribute("tabindex",r):o.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new LS({comp:s,focusTrapActive:!!e.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:e.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(e){const t=document.createElement("div"),s=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",s),Bt(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];oi(this.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t){Xg(e)||(e=e.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",e):super.appendChild(e,t)}},IS=class YN extends uf{constructor(e){super(YN.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(e=>this.addItem(e)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var e,t,s;return(s=(t=(e=this.activeItem)==null?void 0:e.tabbedItem)==null?void 0:t.afterDetachedCallback)==null?void 0:s.call(t)})}static getTemplate(e){return`<div class="ag-tabs ${e}">
            <div ref="eHeader"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
        </div>`}setupHeader(){const{enableCloseButton:e,cssClass:t}=this.params,s=(r,o)=>{r.classList.add(`ag-tabs-${o}`),t&&r.classList.add(`${t}-${o}`)};e?(this.setupCloseButton(s),this.eTabHeader=this.gridOptionsService.getDocument().createElement("div"),s(this.eHeader,"header-wrapper"),Bt(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,Bt(this.eTabHeader,"tablist"),s(this.eTabHeader,"header")}setupCloseButton(e){const t=this.gridOptionsService.getDocument(),s=t.createElement("button");e(s,"close-button");const r=_t("close",this.gridOptionsService,void 0,!0);mo(s,this.params.closeButtonAriaLabel),s.appendChild(r),this.addManagedListener(s,"click",()=>{var n,l;return(l=(n=this.params).onCloseClicked)==null?void 0:l.call(n)});const o=t.createElement("div");e(o,"close-button-wrapper"),Bt(o,"presentation"),o.appendChild(s),this.eHeader.appendChild(o),this.eCloseButton=s}handleKeyDown(e){const t=this.gridOptionsService.getDocument();switch(e.key){case x.RIGHT:case x.LEFT:if(!this.eTabHeader.contains(t.activeElement))return;const s=e.key===x.RIGHT,r=this.gridOptionsService.get("enableRtl"),o=this.items.indexOf(this.activeItem),n=s!==r?Math.min(o+1,this.items.length-1):Math.max(o-1,0);if(o===n)return;e.preventDefault();const l=this.items[n];this.showItemWrapper(l),l.eHeaderButton.focus();break;case x.UP:case x.DOWN:e.stopPropagation();break}}onTabKeyDown(e){var t,s,r,o;if(e.defaultPrevented)return;const{focusService:n,eHeader:l,eBody:a,activeItem:u,params:d}=this,{suppressTrapFocus:c,enableCloseButton:h}=d,m=this.gridOptionsService.getDocument().activeElement,S=e.target,E=e.shiftKey;if(l.contains(m)){e.preventDefault(),h&&E&&!((t=this.eCloseButton)!=null&&t.contains(m))?(s=this.eCloseButton)==null||s.focus():c&&E?(r=this.focusService.findFocusableElementBeforeTabGuard(this.gridOptionsService.getDocument().body,S))==null||r.focus():this.focusBody(e.shiftKey);return}let C=null;if(n.isTargetUnderManagedComponent(a,S)&&(E&&(C=this.focusService.findFocusableElementBeforeTabGuard(a,S)),!C&&!c&&(C=u.eHeaderButton)),!C&&a.contains(m)&&(C=n.findNextFocusableElement(a,!1,E),!C)){e.preventDefault(),c&&!E?this.forceFocusOutOfContainer(E):h&&!E?(o=this.eCloseButton)==null||o.focus():this.focusHeader();return}C&&(e.preventDefault(),C.focus())}focusInnerElement(e){e?this.focusHeader():this.focusBody(!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){this.focusService.focusInto(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=document.createElement("span");Bt(t,"tab"),t.setAttribute("tabindex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eTabHeader.appendChild(t),mo(t,e.titleLabel);const s={tabbedItem:e,eHeaderButton:t};this.items.push(s),t.addEventListener("click",this.showItemWrapper.bind(this,s))}showItem(e){const t=this.items.find(s=>s.tabbedItem===e);t&&this.showItemWrapper(t)}showItemWrapper(e){var t,s,r,o,n,l;const{tabbedItem:a,eHeaderButton:u}=e;if((s=(t=this.params).onItemClicked)==null||s.call(t,{item:a}),this.activeItem===e){(o=(r=this.params).onActiveItemClicked)==null||o.call(r);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),oi(this.eBody),a.bodyPromise.then(d=>{this.eBody.appendChild(d);const c=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,c),a.afterAttachedCallback&&a.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const h=a.getScrollableContainer&&a.getScrollableContainer()||d;this.lastScrollListener=this.addManagedListener(h,"scroll",()=>{this.tabbedItemScrollMap.set(a.name,h.scrollTop)});const p=this.tabbedItemScrollMap.get(a.name);p!==void 0&&setTimeout(()=>{h.scrollTop=p},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(l=(n=this.activeItem.tabbedItem).afterDetachedCallback)==null||l.call(n)),u.classList.add("ag-tab-selected"),this.activeItem=e}};g([T("focusService")],IS.prototype,"focusService",2);g([Y("eHeader")],IS.prototype,"eHeader",2);g([Y("eBody")],IS.prototype,"eBody",2);g([z],IS.prototype,"postConstruct",1);var x$=50,wR=class extends W{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(e,t){const s=this.gridOptionsService.getWindow(),r=()=>{const a=new s.ResizeObserver(t);return a.observe(e),()=>a.disconnect()},o=()=>{var a,u;let d=(a=e==null?void 0:e.clientWidth)!=null?a:0,c=(u=e==null?void 0:e.clientHeight)!=null?u:0,h=!0;const p=()=>{var m,S;if(h){const E=(m=e==null?void 0:e.clientWidth)!=null?m:0,C=(S=e==null?void 0:e.clientHeight)!=null?S:0;(E!==d||C!==c)&&(d=E,c=C,t()),this.doNextPolyfillTurn(p)}};return p(),()=>h=!1},n=this.gridOptionsService.get("suppressBrowserResizeObserver");return!!s.ResizeObserver&&!n?r():this.getFrameworkOverrides().wrapIncoming(()=>o(),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;const e=()=>{const t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(s=>s())};this.polyfillScheduled=!0,window.setTimeout(e,x$)}};wR=g([te("resizeObserverService")],wR);var vc=class extends W{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const t=this.gridOptionsService.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const s=this.paginationProxy.getCurrentPage();s!==this.lastPage&&(this.lastPage=s,this.scrollGoingDown=!0)}this.lastScrollTop=e}init(){this.useAnimationFrame=!this.gridOptionsService.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,s){this.verifyAnimationFrameOn(s);const r={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[s],r),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((s,r)=>s.index!==r.index?t*(r.index-s.index):r.createOrder-s.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,s=t.list,r=this.createTasksP2,o=r.list,n=this.destroyTasks,l=new Date().getTime();let a=new Date().getTime()-l;const u=e<=0,d=this.ctrlsService.getGridBodyCtrl();for(;u||a<e;){if(!d.getScrollFeature().scrollGridIfNeeded()){let h;if(s.length)this.sortTaskList(t),h=s.pop().task;else if(o.length)this.sortTaskList(r),h=o.pop().task;else if(n.length)h=n.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(h)||h()}a=new Date().getTime()-l}s.length||o.length||n.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=this.gridOptionsService.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};g([T("ctrlsService")],vc.prototype,"ctrlsService",2);g([T("paginationProxy")],vc.prototype,"paginationProxy",2);g([z],vc.prototype,"init",1);vc=g([te("animationFrameService")],vc);var Wp=class extends W{postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(s=>{s.id&&t.has(s.id)&&(s.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:s})=>{t&&s&&e.push(s)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,s){e&&(s&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,s),e.setExpanded(t))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}};g([T("rowModel")],Wp.prototype,"rowModel",2);g([z],Wp.prototype,"postConstruct",1);Wp=g([te("expansionService")],Wp);var Co=class extends W{postConstruct(){var e;this.activeMenuFactory=(e=this.enterpriseMenuFactory)!=null?e:this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,s){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,s)}showContextMenu(e){var t,s,r;const{column:o,anchorToElement:n,rowNode:l,value:a}=e;(r=this.contextMenuFactory)==null||r.onContextMenu((t=e.mouseEvent)!=null?t:null,(s=e.touchEvent)!=null?s:null,l??null,o??null,a,n)}showColumnChooser(e){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(e)}hidePopupMenu(){var e;(e=this.contextMenuFactory)==null||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;(e=this.columnChooserFactory)==null||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:s}=e.getColDef();return!(s??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e!=null&&e.getColDef().suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Fn()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return this.filterManager.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){var t;const s=e.getColDef(),r=(t=s.floatingFilterComponentParams)==null?void 0:t.suppressFilterButton;return r!=null&&Ce("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),s.suppressFloatingFilterButton==null?!r:!s.suppressFloatingFilterButton}getColumnMenuType(){var e;return(e=this.gridOptionsService.get("columnMenu"))!=null?e:"legacy"}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gridOptionsService.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gridOptionsService.exists("suppressMenuHide")?e:!0}showColumnMenuCommon(e,t,s,r){const{column:o,positionBy:n}=t;if(n==="button"){const{buttonElement:l}=t;e.showMenuAfterButtonClick(o,l,s,r)}else if(n==="mouse"){const{mouseEvent:l}=t;e.showMenuAfterMouseEvent(o,l,s,r)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const l=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()).getHeaderCtrlForColumn(o);e.showMenuAfterButtonClick(o,l.getAnchorElementForMenu(r),s,!0)}))}};g([qe("enterpriseMenuFactory")],Co.prototype,"enterpriseMenuFactory",2);g([T("filterMenuFactory")],Co.prototype,"filterMenuFactory",2);g([qe("contextMenuFactory")],Co.prototype,"contextMenuFactory",2);g([T("ctrlsService")],Co.prototype,"ctrlsService",2);g([T("animationFrameService")],Co.prototype,"animationFrameService",2);g([qe("columnChooserFactory")],Co.prototype,"columnChooserFactory",2);g([T("filterManager")],Co.prototype,"filterManager",2);g([z],Co.prototype,"postConstruct",1);Co=g([te("menuService")],Co);var eu=class extends W{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl})}getPreferredWidthForColumn(e,t){const s=this.getHeaderCellForColumn(e);if(!s)return-1;const r=this.rowRenderer.getAllCellsForColumn(e);return t||r.push(s),this.addElementsToContainerAndGetWidth(r)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const s=this.centerRowContainerCtrl.getContainerElement();e.forEach(n=>this.cloneItemIntoDummy(n,t)),s.appendChild(t);const r=t.offsetWidth;s.removeChild(t);const o=this.getAutoSizePadding();return r+o}getAutoSizePadding(){return this.gridOptionsService.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(s=>{const r=s.getHtmlElementForColumnHeader(e);r!=null&&(t=r)}),t}cloneItemIntoDummy(e,t){const s=e.cloneNode(!0);s.style.width="",s.style.position="static",s.style.left="";const r=document.createElement("div"),o=r.classList;["ag-header-cell","ag-header-group-cell"].some(a=>s.classList.contains(a))?(o.add("ag-header","ag-header-row"),r.style.position="static"):o.add("ag-row");let l=e.parentElement;for(;l;){if(["ag-header-row","ag-row"].some(u=>l.classList.contains(u))){for(let u=0;u<l.classList.length;u++){const d=l.classList[u];d!="ag-row-position-absolute"&&o.add(d)}break}l=l.parentElement}r.appendChild(s),t.appendChild(r)}};g([T("rowRenderer")],eu.prototype,"rowRenderer",2);g([T("ctrlsService")],eu.prototype,"ctrlsService",2);g([T("rowCssClassCalculator")],eu.prototype,"rowCssClassCalculator",2);g([z],eu.prototype,"postConstruct",1);eu=g([te("autoWidthCalculator")],eu);var df=class extends W{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyRowCtrls=[],this.containerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyRowCtrls(){return this.stickyRowCtrls}checkStickyRows(){let e=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],e);const t=[],s=this.rowRenderer.getFirstVisibleVerticalPixel(),r=n=>{var l,a,u;t.push(n);let d;if(this.isClientSide){let h=n;for(;h.isExpandable()&&h.expanded;)if(h.master)h=h.detailNode;else if(h.childrenAfterSort){if(h.childrenAfterSort.length===0)break;h=Je(h.childrenAfterSort)}d=h.rowTop+h.rowHeight}else if(n.master)d=n.detailNode.rowTop+n.detailNode.rowHeight;else{const h=(l=n.childStore)==null?void 0:l.getStoreBounds();d=((a=h==null?void 0:h.heightPx)!=null?a:0)+((u=h==null?void 0:h.topPx)!=null?u:0)}const c=s+e+n.rowHeight;d<c?n.stickyRowTop=e+(d-c):n.stickyRowTop=e,e=0,t.forEach(h=>{const p=h.stickyRowTop+h.rowHeight;e<p&&(e=p)})};let o=0;for(;;){const n=s+e,l=this.rowModel.getRowIndexAtPixel(n),a=this.rowModel.getRow(l);if(a==null||a.level<0||o++===100)break;const u=[];let d=a.parent;for(;d.level>=0;)u.push(d),d=d.parent;const c=u.reverse().find(h=>t.indexOf(h)<0&&h.displayed);if(c){r(c);continue}if(a.isExpandable()&&a.expanded&&a.rowTop<n){r(a);continue}break}return this.refreshNodesAndContainerHeight(t,e)}refreshStickyNode(e){const t=[];for(let s=0;s<this.stickyRowCtrls.length;s++){const r=this.stickyRowCtrls[s].getRowNode();r!==e&&t.push(r)}this.refreshNodesAndContainerHeight(t,this.containerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t){let s=!1;const r=this.stickyRowCtrls.filter(a=>e.indexOf(a.getRowNode())===-1),o=e.filter(a=>this.stickyRowCtrls.findIndex(u=>u.getRowNode()===a)===-1);(r.length||o.length)&&(s=!0);const n={};r.forEach(a=>{n[a.getRowNode().id]=a,this.stickyRowCtrls=this.stickyRowCtrls.filter(u=>u!==a)});for(const a of Object.values(n))a.getRowNode().sticky=!1;this.destroyRowCtrls(n,!1);const l=o.map(a=>(a.sticky=!0,this.createRowCon(a,!1,!1)));return this.stickyRowCtrls.push(...l),this.stickyRowCtrls.forEach(a=>a.setRowTop(a.getRowNode().stickyRowTop)),this.stickyRowCtrls.sort((a,u)=>u.getRowNode().rowIndex-a.getRowNode().rowIndex),this.containerHeight!==t&&(this.containerHeight=t,this.gridBodyCtrl.setStickyTopHeight(t),s=!0),s}};g([T("rowModel")],df.prototype,"rowModel",2);g([T("rowRenderer")],df.prototype,"rowRenderer",2);g([T("ctrlsService")],df.prototype,"ctrlsService",2);g([z],df.prototype,"postConstruct",1);var cr=class extends W{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(n=>n.onRangeSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(n=>n.updateRangeBordersIfRangeCount())},s=()=>{this.eventService.addEventListener(w.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.addEventListener(w.EVENT_COLUMN_MOVED,t),this.eventService.addEventListener(w.EVENT_COLUMN_PINNED,t),this.eventService.addEventListener(w.EVENT_COLUMN_VISIBLE,t)},r=()=>{this.eventService.removeEventListener(w.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.removeEventListener(w.EVENT_COLUMN_MOVED,t),this.eventService.removeEventListener(w.EVENT_COLUMN_PINNED,t),this.eventService.removeEventListener(w.EVENT_COLUMN_VISIBLE,t)};this.addDestroyFunc(()=>r()),this.addManagedPropertyListener("enableRangeSelection",n=>{n.currentValue?s():r()}),this.gridOptionsService.get("enableRangeSelection")&&s()}}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,w.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,w.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gridOptionsService.isGroupRowsSticky()){const e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new df(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gridOptionsService.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new _$(t)}}getKeepDetailRowsCount(){return this.gridOptionsService.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]}updateAllRowCtrls(){const e=Al(this.rowCtrlsByRowIndex),t=Al(this.zombieRowCtrls),s=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||s.length>0?this.allRowCtrls=[...e,...t,...s]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedListener(this.eventService,w.EVENT_CELL_FOCUSED,e=>{this.onCellFocusChanged(e)}),this.addManagedListener(this.eventService,w.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,w.EVENT_FLASH_CELLS,e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())}),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(t=>{const s=u=>{this.getAllCellCtrls().forEach(d=>{d.getColumn()===t&&u(d)})},r=()=>{s(u=>u.onLeftChanged())},o=()=>{s(u=>u.onWidthChanged())},n=()=>{s(u=>u.onFirstRightPinnedChanged())},l=()=>{s(u=>u.onLastLeftPinnedChanged())},a=()=>{s(u=>u.onColDefChanged())};t.addEventListener("leftChanged",r),t.addEventListener("widthChanged",o),t.addEventListener("firstRightPinnedChanged",n),t.addEventListener("lastLeftPinnedChanged",l),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",r),t.removeEventListener("widthChanged",o),t.removeEventListener("firstRightPinnedChanged",n),t.removeEventListener("lastLeftPinnedChanged",l),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){const e=this.gridOptionsService.isDomLayout("print"),t=e||this.gridOptionsService.get("embedFullWidthRows"),s=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,s&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(s=>{const r=s.getCellElement(e);r&&t.push(r)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){e.forEach(s=>{s.destroyFirstPass(),s.destroySecondPass()}),e.length=0,t&&t.forEach(s=>{const r=new _a(s,this.beans,!1,!1,this.printLayout);e.push(r)})}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var s;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if((s=this.cachedRowCtrls)!=null&&s.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const r=o=>{const n=o[e.rowIndex];n&&n.getRowNode()===e&&(n.destroyFirstPass(),n.destroySecondPass(),o[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":r(this.topRowCtrls);break;case"bottom":r(this.bottomRowCtrls);break;default:r(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(s=>this.redrawRow(s,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const r=this.gridOptionsService.getDocument().activeElement,o=this.gridOptionsService.getDomData(r,xa.DOM_DATA_KEY_CELL_CTRL),n=this.gridOptionsService.getDomData(r,_a.DOM_DATA_KEY_ROW_CTRL);return o||n?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const s=!e.domLayoutChanged&&!!e.recycleRows,r=e.animate&&this.gridOptionsService.isAnimateRows(),o=s?this.getRowsToRecycle():null;s||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(o,r),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,s=this.gridOptionsService.get("suppressScrollOnNewData");t&&!s&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let e=this.paginationProxy.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.beans.gridOptionsService.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),s=t.length;for(let r=0;r<s;r++){const o=t[r].getAllCellCtrls(),n=o.length;for(let l=0;l<n;l++)e.push(o[l])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],t=[...this.topRowCtrls,...this.bottomRowCtrls,...e];for(const s of Object.keys(this.rowCtrlsByRowIndex))t.push(this.rowCtrlsByRowIndex[s]);return t}addRenderedRowListener(e,t,s){const r=this.rowCtrlsByRowIndex[t];r&&r.addEventListener(e,s)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(s=>s.refreshOrDestroyCell(t)),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach(s=>{if(!s.isFullWidth())return;s.refreshFullWidth()||this.redrawRow(s.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(e){var t;const s=this.getCellCtrls(e.rowNodes,e.columns).map(n=>n.getCellRenderer()).filter(n=>n!=null);if((t=e.columns)!=null&&t.length)return s;const r=[],o=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(n=>{if(o&&!this.isRowInMap(n.getRowNode(),o)||!n.isFullWidth())return;const l=n.getFullWidthCellRenderers();for(let a=0;a<l.length;a++){const u=l[a];u!=null&&r.push(u)}}),[...r,...s]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(s=>{const r=s.getCellEditor();r&&t.push(r)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const s=t.getCellPosition();e.push(s)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(s=>{const r=s.id;s.rowPinned==="top"?t.top[r]=s:s.rowPinned==="bottom"?t.bottom[r]=s:t.normal[r]=s}),t}isRowInMap(e,t){const s=e.id,r=e.rowPinned;return r==="bottom"?t.bottom[s]!=null:r==="top"?t.top[s]!=null:t.normal[s]!=null}getRowCtrls(e){const t=this.mapRowNodes(e),s=this.getAllRowCtrls();return!e||!t?s:s.filter(r=>{const o=r.getRowNode();return this.isRowInMap(o,t)})}getCellCtrls(e,t){let s;V(t)&&(s={},t.forEach(o=>{const n=this.columnModel.getGridColumn(o);V(n)&&(s[n.getId()]=!0)}));const r=[];return this.getRowCtrls(e).forEach(o=>{o.getAllCellCtrls().forEach(n=>{const l=n.getColumn().getId();s&&!s[l]||r.push(n)})}),r}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}getRowsToRecycle(){const e=[];$i(this.rowCtrlsByRowIndex,(s,r)=>{r.getRowNode().id==null&&e.push(s)}),this.removeRowCtrls(e);const t={};return $i(this.rowCtrlsByRowIndex,(s,r)=>{const o=r.getRowNode();t[o.id]=r}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(s=>{const r=this.rowCtrlsByRowIndex[s];r&&(r.destroyFirstPass(t),r.destroySecondPass()),delete this.rowCtrlsByRowIndex[s]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let s;this.stickyRowFeature&&GD()&&(s=this.getCellToRestoreFocusToAfterRefresh()||void 0);const r=this.firstRenderedRow,o=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let n=!1;this.stickyRowFeature&&(n=this.stickyRowFeature.checkStickyRows());const l=this.firstRenderedRow!==r||this.lastRenderedRow!==o;if(!(t&&!n&&!l)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!n),s!=null)){const a=this.getCellToRestoreFocusToAfterRefresh();s!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(s))}}removeRowCompsNotToDraw(e,t){const s={};e.forEach(n=>s[n]=!0);const o=Object.keys(this.rowCtrlsByRowIndex).filter(n=>!s[n]);this.removeRowCtrls(o,t)}calculateIndexesToDraw(e){let t=b_(this.firstRenderedRow,this.lastRenderedRow);const s=(o,n)=>{const l=n.getRowNode().rowIndex;l!=null&&(l<this.firstRenderedRow||l>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(n)&&t.push(l)};$i(this.rowCtrlsByRowIndex,s),$i(e,s),t.sort((o,n)=>o-n);const r=[];for(let o=0;o<t.length;o++){const n=t[o],l=this.paginationProxy.getRow(n);l&&!l.sticky&&r.push(n)}return r}recycleRows(e,t=!1,s=!1){const r=this.calculateIndexesToDraw(e);(this.printLayout||s)&&(t=!1),this.removeRowCompsNotToDraw(r,!t),r.forEach(o=>{this.createOrUpdateRowCtrl(o,e,t,s)}),e&&(s&&!this.gridOptionsService.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){const t={type:w.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){const e=this.columnModel.isPinningLeft(),t=this.columnModel.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const s=t.getRowNode().rowIndex;e.push(s.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(s=>{if(!s.isFullWidth())return!1;const r=s.getRowNode();return!(t!=null&&!this.isRowInMap(r,t))})}createOrUpdateRowCtrl(e,t,s,r){let o,n=this.rowCtrlsByRowIndex[e];if(n||(o=this.paginationProxy.getRow(e),V(o)&&V(t)&&t[o.id]&&o.alreadyRendered&&(n=t[o.id],t[o.id]=null)),!n)if(o||(o=this.paginationProxy.getRow(e)),V(o))n=this.createRowCon(o,s,r);else return;return o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=n,n}destroyRowCtrls(e,t){const s=[];$i(e,(r,o)=>{if(o){if(this.cachedRowCtrls&&o.isCacheable()){this.cachedRowCtrls.addRow(o);return}o.destroyFirstPass(!t),t?(this.zombieRowCtrls[o.getInstanceId()]=o,s.push(()=>{o.destroySecondPass(),delete this.zombieRowCtrls[o.getInstanceId()]})):o.destroySecondPass()}}),t&&(s.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),Mx(s))}getRowBuffer(){return this.gridOptionsService.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=this.gridOptionsService.getRowHeightAsNumber();return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.paginationProxy.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.paginationProxy.getPageFirstRow(),t=this.paginationProxy.getPageLastRow();else{const a=this.getRowBufferInPixels(),u=this.ctrlsService.getGridBodyCtrl(),d=this.gridOptionsService.get("suppressRowVirtualisation");let c=!1,h,p;do{const v=this.paginationProxy.getPixelOffset(),{pageFirstPixel:R,pageLastPixel:b}=this.paginationProxy.getCurrentPagePixelRange(),A=this.rowContainerHeightService.getDivStretchOffset(),F=u.getScrollFeature().getVScrollPosition(),O=F.top,L=F.bottom;d?(h=R+A,p=b+A):(h=Math.max(O+v-a,R)+A,p=Math.min(L+v+a,b)+A),this.firstVisibleVPixel=Math.max(O+v,R)+A,c=this.ensureAllRowsInRangeHaveHeightsCalculated(h,p)}while(c);let m=this.paginationProxy.getRowIndexAtPixel(h),S=this.paginationProxy.getRowIndexAtPixel(p);const E=this.paginationProxy.getPageFirstRow(),C=this.paginationProxy.getPageLastRow();m<E&&(m=E),S>C&&(S=C),e=m,t=S}const s=this.gridOptionsService.isDomLayout("normal"),r=this.gridOptionsService.get("suppressMaxRenderedRowRestriction"),o=Math.max(this.getRowBuffer(),500);s&&!r&&t-e>o&&(t=e+o);const n=e!==this.firstRenderedRow,l=t!==this.lastRenderedRow;if(n||l){this.firstRenderedRow=e,this.lastRenderedRow=t;const a={type:w.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:t};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const e={type:w.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const s=this.paginationProxy.ensureRowHeightsValid(e,t,-1,-1);return s&&this.updateContainerHeights(),s}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const r=e.getRowNode(),o=this.focusService.isRowNodeFocused(r),n=e.isEditing(),l=r.detail;return o||n||l?!!this.paginationProxy.isRowPresent(r):!1}createRowCon(e,t,s){const r=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(r)return r;const o=this.gridOptionsService.get("suppressAnimationFrame"),n=s&&!o&&!this.printLayout;return new _a(e,this.beans,t,n,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.keys(e).map(t=>e[t].getRowNode())}getRowByPosition(e){let t;const{rowIndex:s}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[s];break;case"bottom":t=this.bottomRowCtrls[s];break;default:t=this.rowCtrlsByRowIndex[s],t||(t=this.getStickyTopRowCtrls().find(r=>r.getRowNode().rowIndex===s)||null);break}return t}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const r=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!r}};g([T("animationFrameService")],cr.prototype,"animationFrameService",2);g([T("paginationProxy")],cr.prototype,"paginationProxy",2);g([T("columnModel")],cr.prototype,"columnModel",2);g([T("pinnedRowModel")],cr.prototype,"pinnedRowModel",2);g([T("rowModel")],cr.prototype,"rowModel",2);g([T("focusService")],cr.prototype,"focusService",2);g([T("beans")],cr.prototype,"beans",2);g([T("rowContainerHeightService")],cr.prototype,"rowContainerHeightService",2);g([T("ctrlsService")],cr.prototype,"ctrlsService",2);g([z],cr.prototype,"postConstruct",1);cr=g([te("rowRenderer")],cr);var _$=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,s=this.entriesMap[t];delete this.entriesMap[t],Ds(this.entriesList,s)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],Ds(this.entriesList,e)}getEntries(){return this.entriesList}},zC=class extends W{formatValue(e,t,s,r,o=!0){let n=null,l;const a=e.getColDef();if(r?l=r:o&&(l=a.valueFormatter),l){const u=this.gridOptionsService.addGridCommonParams({value:s,node:t,data:t?t.data:null,colDef:a,column:e});typeof l=="function"?n=l(u):n=this.expressionService.evaluate(l,u)}else if(a.refData)return a.refData[s]||"";return n==null&&Array.isArray(s)&&(n=s.join(", ")),n}};g([T("expressionService")],zC.prototype,"expressionService",2);zC=g([te("valueFormatterService")],zC);var Up=class extends W{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(e){const t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Zs(t)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){const s=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Zs(s))return 0;for(let r=0;r<s.length;r++){const o=s[r];if(o.rowTop+o.rowHeight-1>=e)return r}return s.length-1}setPinnedTopRowData(){const e=this.gridOptionsService.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);const t={type:w.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(){const e=this.gridOptionsService.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);const t={type:w.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){const s=[];if(e){let r=0;e.forEach((o,n)=>{const l=new _e(this.beans);l.data=o;const a=t?_e.ID_PREFIX_TOP_PINNED:_e.ID_PREFIX_BOTTOM_PINNED;l.id=a+n,l.rowPinned=t?"top":"bottom",l.setRowTop(r),l.setRowHeight(this.gridOptionsService.getRowHeightForNode(l).height),l.setRowIndex(n),r+=l.rowHeight,s.push(l)})}return s}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){Zs(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){Zs(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;const t=Je(e);return t.rowTop+t.rowHeight}};g([T("beans")],Up.prototype,"beans",2);g([z],Up.prototype,"init",1);Up=g([te("pinnedRowModel")],Up);var MS=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let s=0;s<e.children.length;s++)this.depthFirstSearchChangedPath(e.children[s],t);t(e.rowNode)}depthFirstSearchEverything(e,t,s){if(e.childrenAfterGroup)for(let r=0;r<e.childrenAfterGroup.length;r++){const o=e.childrenAfterGroup[r];o.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[r],t,s):s&&t(o)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,s=!1){this.active&&!s?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,s=0;for(;!this.mapToItems[t.id];){const r={rowNode:t,children:null};this.mapToItems[t.id]=r,s++,t=t.parent}return s}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let s=e;for(;s;)this.nodeIdsToColumns[s.id]||(this.nodeIdsToColumns[s.id]={}),t.forEach(r=>this.nodeIdsToColumns[s.id][r.getId()]=!0),s=s.parent}linkPathItems(e,t){let s=e;for(let r=0;r<t;r++){const o=this.mapToItems[s.id],n=this.mapToItems[s.parent.id];n.children||(n.children=[]),n.children.push(o),s=s.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const s=this.createPathItems(e);this.linkPathItems(e,s),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const s=this.nodeIdsToColumns[e.id];return t.filter(o=>s[o.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const s=this.nodeIdsToColumns[e.id];return t.filter(o=>!s[o.getId()])}},qc=class sa extends W{constructor(e){super(),this.state=sa.STATE_WAITING_TO_LOAD,this.version=0,this.id=e}getId(){return this.id}load(){this.state=sa.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=sa.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state=sa.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,s){this.successCommon(e,{rowData:t,rowCount:s})}isRequestMostRecentAndLive(e){const t=e===this.version,s=this.isAlive();return t&&s}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=sa.STATE_LOADED,this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:sa.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(t)}};qc.EVENT_LOAD_COMPLETE="loadComplete";qc.STATE_WAITING_TO_LOAD="needsLoading";qc.STATE_LOADING="loading";qc.STATE_LOADED="loaded";qc.STATE_FAILED="failed";var yR=qc,jo=class extends W{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gridOptionsService.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=ye.debounce(this.performCheckBlocksToLoad.bind(this),e))}setBeans(e){this.logger=e.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const e=this.gridOptionsService.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener(yR.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){ye.removeFromArray(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:jo.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:jo.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(s=>s.getState()===yR.STATE_WAITING_TO_LOAD).slice(0,e);this.registerLoads(t.length),t.forEach(s=>s.load()),this.printCacheStatus()}getBlockState(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:s,state:r}=t.getBlockStateJson();e[s]=r}),e}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};jo.BLOCK_LOADED_EVENT="blockLoaded";jo.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";g([T("rowModel")],jo.prototype,"rowModel",2);g([z],jo.prototype,"postConstruct",1);g([io(0,Fr("loggerFactory"))],jo.prototype,"setBeans",1);jo=g([te("rowNodeBlockLoader")],jo);var zp=class extends W{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gridOptionsService.get("pagination"),this.pageSizeFromGridOptions=this.gridOptionsService.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(e,t,s,r){const o=this.rowModel.ensureRowHeightsValid(e,t,this.getPageFirstRow(),this.getPageLastRow());return o&&this.calculatePages(),o}isPaginateChildRows(){return this.gridOptionsService.get("groupRemoveSingleChildren")||this.gridOptionsService.get("groupRemoveLowestSingleChildren")?!0:this.gridOptionsService.get("paginateChildRows")}onModelUpdated(e){this.calculatePages();const t={type:w.EVENT_PAGINATION_CHANGED,animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,newPageSize:e?e.newPageSize:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}onPaginationGridOptionChanged(){this.active=this.gridOptionsService.get("pagination"),this.calculatePages();const e={type:w.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)}onPageSizeGridOptionChanged(){this.setPageSize(this.gridOptionsService.get("paginationPageSize"),"gridOptions")}goToPage(e){if(!this.active||this.currentPage===e||typeof this.currentPage!="number")return;this.currentPage=e;const t={type:w.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,newPageSize:!1};this.onModelUpdated(t)}getPixelOffset(){return this.pixelOffset}getRow(e){return this.rowModel.getRow(e)}getRowNode(e){return this.rowModel.getRowNode(e)}getRowIndexAtPixel(e){return this.rowModel.getRowIndexAtPixel(e)}getCurrentPageHeight(){return Se(this.topRowBounds)||Se(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}isRowPresent(e){return this.rowModel.isRowPresent(e)?e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(e){return this.rowModel.forEachNode(e)}forEachNodeOnPage(e){const t=this.getPageFirstRow(),s=this.getPageLastRow();for(let r=t;r<=s;r++){const o=this.getRow(r);o&&e(o)}}getType(){return this.rowModel.getType()}getRowBounds(e){const t=this.rowModel.getRowBounds(e);return t.rowIndex=e,t}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return V(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:V(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:V(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:V(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&this.onModelUpdated({type:w.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0})}setPageSize(e,t){const s=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(s!==this.pageSize){const r={type:w.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0};this.onModelUpdated(r)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(V(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let s=this.pageSize*(this.currentPage+1)-1;if(s>e&&(s=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),s===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const r=this.rowModel.getTopLevelRowDisplayedIndex(s+1);this.bottomDisplayedRowIndex=r-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(this.masterRowCount,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};g([T("rowModel")],zp.prototype,"rowModel",2);g([z],zp.prototype,"postConstruct",1);zp=g([te("paginationProxy")],zp);var $C=class extends W{processAllCellClasses(e,t,s,r){this.processClassRules(void 0,e.cellClassRules,t,s,r),this.processStaticCellClasses(e,t,s)}processClassRules(e,t,s,r,o){if(t==null&&e==null)return;const n={},l={},a=(u,d)=>{u.split(" ").forEach(c=>{c.trim()!=""&&d(c)})};if(t){const u=Object.keys(t);for(let d=0;d<u.length;d++){const c=u[d],h=t[c];let p;typeof h=="string"?p=this.expressionService.evaluate(h,s):typeof h=="function"&&(p=h(s)),a(c,m=>{p?n[m]=!0:l[m]=!0})}}e&&o&&Object.keys(e).forEach(u=>a(u,d=>{n[d]||(l[d]=!0)})),o&&Object.keys(l).forEach(o),Object.keys(n).forEach(r)}getStaticCellClasses(e,t){const{cellClass:s}=e;if(!s)return[];let r;return typeof s=="function"?r=s(t):r=s,typeof r=="string"&&(r=[r]),r||[]}processStaticCellClasses(e,t,s){this.getStaticCellClasses(e,t).forEach(o=>{s(o)})}};g([T("expressionService")],$C.prototype,"expressionService",2);$C=g([te("stylingService")],$C);var qN=class extends wS{constructor(e){super(e,"ag-toggle-button")}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},N$=class extends ro{constructor(i){super(i,"ag-text-area",null,"textarea")}setValue(i,e){const t=super.setValue(i,e);return this.eInput.value=i,t}setCols(i){return this.eInput.cols=i,this}setRows(i){return this.eInput.rows=i,this}},G$=class extends Su{constructor(i){super(i,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));const i=Ko();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||i||this.eInput.focus()}),this.eInput.step="any"}onWheel(i){document.activeElement===this.eInput&&i.preventDefault()}setMin(i){var e;const t=i instanceof Date?(e=Ir(i??null,!1))!=null?e:void 0:i;return this.min===t?this:(this.min=t,Uo(this.eInput,"min",t),this)}setMax(i){var e;const t=i instanceof Date?(e=Ir(i??null,!1))!=null?e:void 0:i;return this.max===t?this:(this.max=t,Uo(this.eInput,"max",t),this)}setStep(i){return this.step===i?this:(this.step=i,Uo(this.eInput,"step",i),this)}getDate(){var i;if(this.eInput.validity.valid)return(i=Fs(this.getValue()))!=null?i:void 0}setDate(i,e){this.setValue(Ir(i??null,!1),e)}},k$=class extends ro{constructor(i){super(i,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:i,max:e,step:t}=this.config;i!=null&&this.setMinValue(i),e!=null&&this.setMaxValue(e),this.setStep(t||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",i=>{const e=i.target.value;this.setValue(e)})}setMinValue(i){return this.min=i,this.eInput.setAttribute("min",i.toString()),this}setMaxValue(i){return this.max=i,this.eInput.setAttribute("max",i.toString()),this}setStep(i){return this.eInput.setAttribute("step",i.toString()),this}setValue(i,e){this.min!=null&&(i=Math.max(parseFloat(i),this.min).toString()),this.max!=null&&(i=Math.min(parseFloat(i),this.max).toString());const t=super.setValue(i,e);return this.eInput.value=i,t}},mb=class extends De{constructor(e,t){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=e,this.wrapperEl=t}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(e){let t="";this.params.valueFormatter&&(t=this.params.valueFormatter(e)),this.populateWithRenderer(e,t)||this.populateWithoutRenderer(e,t),this.value=e}highlightString(e){const{parsedValue:t}=this;if(this.params.cellRenderer||!V(t))return;let s=V(e);if(s){const r=t==null?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(r>=0){const o=r+e.length,n=pi(t.slice(0,r),!0),l=pi(t.slice(r,o),!0),a=pi(t.slice(o));this.renderValueWithoutRenderer(`${n}<span class="ag-rich-select-row-text-highlight">${l}</span>${a}`)}else s=!1}s||this.renderValueWithoutRenderer(t)}updateHighlighted(e){var t;const s=this.getGui(),r=`ag-rich-select-row-${this.getCompId()}`;if((t=s.parentElement)==null||t.setAttribute("id",r),e){const o=this.getParentComponent().getAriaElement();OD(o,r),this.wrapperEl.setAttribute("data-active-option",r)}gc(s.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)}populateWithoutRenderer(e,t){const s=this.gridOptionsService.getDocument(),r=this.getGui(),o=s.createElement("span");o.style.overflow="hidden",o.style.textOverflow="ellipsis";const n=pi(V(t)?t:e,!0);this.parsedValue=V(n)?n:null,r.appendChild(o),this.renderValueWithoutRenderer(n),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>o.scrollWidth>o.clientWidth})}renderValueWithoutRenderer(e){const t=this.getGui().querySelector("span");t&&(t.innerHTML=V(e)?e:"&nbsp;")}populateWithRenderer(e,t){let s,r;return this.params.cellRenderer&&(r=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:t,setTooltip:(o,n)=>{this.setTooltip({newTooltipText:o,shouldDisplayTooltip:n})}})),r&&(s=r.newAgStackInstance()),s&&qD(s,this.getGui()),s?(s.then(o=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(o)})}),!0):!1}onClick(){const e=this.getParentComponent(),t={type:w.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};e==null||e.dispatchEvent(t)}};g([T("userComponentFactory")],mb.prototype,"userComponentFactory",2);g([z],mb.prototype,"postConstruct",1);var cf=class QN extends uf{constructor(e){super(QN.getTemplate((e==null?void 0:e.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20,this.isHeightFromTheme=!0;const{cssIdentifier:t="default",ariaRole:s="listbox",listName:r}=e||{};this.cssIdentifier=t,this.ariaRole=s,this.listName=r}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const t=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),s=this.eContainer;Bt(s,this.ariaRole),mo(s,t)}addResizeObserver(){const e=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),t=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(t)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=n_(t)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case x.UP:case x.DOWN:this.navigate(e.key===x.UP)&&e.preventDefault();break}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(fo(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(this.lastFocusedRowIndex==null)return!1;const t=this.lastFocusedRowIndex+(e?-1:1);return t<0||t>=this.model.getRowCount()?!1:(this.focusRow(t),!0)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.ensureIndexVisible(e),window.setTimeout(()=>{if(!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()},10)}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,s)=>e(t.rowComponent,s))}static getTemplate(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(e,t=!0){const s=this.model.getRowCount();if(typeof e!="number"||e<0||e>=s)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;const r=e*this.rowHeight,o=r+this.rowHeight,n=this.getGui(),l=n.scrollTop,a=n.offsetHeight,u=l+a,d=t?0:this.rowHeight,c=l>r+d,h=u<o-d;if(c)return n.scrollTop=r,!0;if(h){const p=o-a;return n.scrollTop=p,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height=`${t*this.rowHeight}px`,RD(()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),s=t.scrollTop,r=s+t.offsetHeight,o=Math.floor(s/this.rowHeight),n=Math.floor(r/this.rowHeight);this.ensureRowsRendered(o,n,e)}ensureRowsRendered(e,t,s){this.renderedRows.forEach((r,o)=>{(o<e||o>t)&&o!==this.lastFocusedRowIndex&&this.removeRow(o)}),s&&this.refreshRows();for(let r=e;r<=t;r++)this.renderedRows.has(r)||r<this.model.getRowCount()&&this.insertRow(r)}insertRow(e){const t=this.model.getRow(e),s=document.createElement("div");s.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),Bt(s,this.ariaRole==="tree"?"treeitem":"option"),dS(s,this.model.getRowCount()),cS(s,e+1),s.setAttribute("tabindex","-1"),s.style.height=`${this.rowHeight}px`,s.style.top=`${this.rowHeight*e}px`;const r=this.componentCreator(t,s);r.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),s.appendChild(r.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",s):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",s):this.eContainer.appendChild(s),this.renderedRows.set(e,{rowComponent:r,eDiv:s,value:t})}removeRow(e){const t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((t,s)=>{var r,o;if(s>=e)this.removeRow(s);else{const n=this.model.getRow(s);(o=(r=this.model).areRowsEqual)!=null&&o.call(r,t.value,n)?this.componentUpdater(n,t.rowComponent):this.removeRow(s)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};g([T("resizeObserverService")],cf.prototype,"resizeObserverService",2);g([T("animationFrameService")],cf.prototype,"animationFrameService",2);g([Y("eContainer")],cf.prototype,"eContainer",2);g([z],cf.prototype,"postConstruct",1);var XN=cf,V$=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Cb=class extends vu{constructor(e){var t,s;super(Pt(he({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(t=e==null?void 0:e.template)!=null?t:V$,modalPicker:!1},e),{maxPickerHeight:(s=e==null?void 0:e.maxPickerHeight)!=null?s:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;const{cellRowHeight:r,value:o,valueList:n,searchStringCreator:l}=e||{};r!=null&&(this.cellRowHeight=r),o!==void 0&&(this.value=o),n!=null&&(this.values=n),l&&(this.searchStringCreator=l)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();const{allowTyping:e,placeholder:t}=this.config;e?(this.eInput.setAutoComplete(!1).setInputPlaceholder(t),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");const{searchDebounceDelay:s=300}=this.config;this.clearSearchString=os(this.clearSearchString,s),this.renderSelectedValue(),e&&(this.eInput.onValueChange(r=>this.searchTextFromString(r)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){const e=this.gridOptionsService.getDocument(),t=this.localeService.getLocaleTextFunc(),s=e.createElement("div");s.classList.add("ag-loading-text"),s.innerText=t("loadingOoo","Loading..."),this.eLoading=s}createListComponent(){this.listComponent=this.createBean(new XN({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));const e=(a,u)=>{};this.listComponent.setComponentUpdater(e),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,w.EVENT_FIELD_PICKER_VALUE_SELECTED,a=>{this.onListValueSelected(a.value,a.fromEnterKey)});const{cellRowHeight:t}=this;t&&this.listComponent.setRowHeight(t);const s=this.listComponent.getGui(),r=this.listComponent.getAriaElement();this.addManagedListener(s,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(s,"mousedown",a=>a.preventDefault()),s.classList.add("ag-rich-select-list");const o=`ag-rich-select-list-${this.listComponent.getCompId()}`;r.setAttribute("id",o);const l=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);mo(r,l),MD(this.eWrapper,r)}renderSelectedValue(){const{value:e,eDisplayField:t,config:s}=this,{allowTyping:r,initialInputValue:o}=this.config,n=this.config.valueFormatter?this.config.valueFormatter(e):e;if(r){this.eInput.setValue(o??n);return}let l;s.cellRenderer&&(l=this.userComponentFactory.getCellRendererDetails(this.config,{value:e,valueFormatted:n}));let a;if(l&&(a=l.newAgStackInstance()),a)oi(t),qD(a,t),a.then(u=>{this.addDestroyFunc(()=>this.getContext().destroyBean(u))});else{if(V(this.value))t.innerText=n,t.classList.remove("ag-display-as-placeholder");else{const{placeholder:u}=s;V(u)?(t.innerHTML=`${pi(u)}`,t.classList.add("ag-display-as-placeholder")):oi(t)}this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){const{currentList:e,value:t}=this;if(t==null||!e)return-1;for(let s=0;s<e.length;s++)if(e[s]===t)return s;return-1}highlightFilterMatch(){var e;(e=this.listComponent)==null||e.forEachRenderedRow((t,s)=>{t.highlightString(this.searchString)})}highlightSelectedValue(e){var t;e==null&&(e=this.getCurrentValueIndex()),this.highlightedItem=e,(t=this.listComponent)==null||t.forEachRenderedRow((s,r)=>{const o=e===-1?!1:this.highlightedItem===r;s.updateHighlighted(o)})}setRowHeight(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)}createPickerComponent(){const{values:e}=this;return e&&this.setValueList({valueList:e}),this.listComponent}setSearchStringCreator(e){this.searchStringCreator=e}setValueList(e){const{valueList:t,refresh:s}=e;this.listComponent&&this.currentList!==t&&(this.currentList=t,this.listComponent.setModel({getRowCount:()=>t.length,getRow:r=>t[r],areRowsEqual:(r,o)=>r===o}),s&&(this.values?this.listComponent.refresh(!0):(this.values=t,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var e,t;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}(e=this.eLoading)!=null&&e.offsetParent&&((t=this.eLoading.parentElement)==null||t.removeChild(this.eLoading));const s=this.getCurrentValueIndex();s!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(s),this.listComponent.refresh(!0),this.highlightSelectedValue(s)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;const e=this.eInput.getFocusableElement();e.focus(),e.select()}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(e){let{key:t}=e;if(t===x.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!fS(e))return;e.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(e){this.searchString+=e,this.runSearch(),this.clearSearchString()}searchTextFromString(e){e==null&&(e=""),this.searchString=e,this.runSearch()}buildSearchStrings(e){const{valueFormatter:t=r=>r}=this.config;let s;return typeof e[0]=="number"||typeof e[0]=="string"?s=e.map(r=>t(r)):typeof e[0]=="object"&&this.searchStringCreator&&(s=this.searchStringCreator(e)),s}getSuggestionsAndFilteredValues(e,t){let s=[],r=[];if(!e.length)return{suggestions:s,filteredValues:r};const{searchType:o="fuzzy",filterList:n}=this.config;if(o==="fuzzy"){const l=Jg(this.searchString,t,!0);s=l.values;const a=l.indices;if(n&&a.length)for(let u=0;u<a.length;u++)r.push(this.values[a[u]])}else s=t.filter((l,a)=>{const u=l.toLocaleLowerCase(),d=this.searchString.toLocaleLowerCase(),c=o==="match"?u.startsWith(d):u.indexOf(d)!==-1;return n&&c&&r.push(this.values[a]),c});return{suggestions:s,filteredValues:r}}filterListModel(e){const{filterList:t}=this.config;t&&(this.setValueList({valueList:e,refresh:!0}),this.alignPickerToComponent())}runSearch(){var e,t;const{values:s}=this,r=this.buildSearchStrings(s);if(!r){this.highlightSelectedValue(-1);return}const{suggestions:o,filteredValues:n}=this.getSuggestionsAndFilteredValues(this.searchString,r),{filterList:l,highlightMatch:a,searchType:u="fuzzy"}=this.config,d=n.length,c=!!(l&&this.searchString!=="");if(this.filterListModel(c?n:s),o.length){const h=c?0:r.indexOf(o[0]);this.selectListItem(h)}else if(this.highlightSelectedValue(-1),!c||d)(e=this.listComponent)==null||e.ensureIndexVisible(0);else if(c){this.getAriaElement().removeAttribute("data-active-option");const h=(t=this.listComponent)==null?void 0:t.getAriaElement();h&&OD(h,null)}a&&u!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var e;const t=(e=this.listComponent)==null?void 0:e.getGui(),s=this.currentList?this.currentList.length===0:!1;t==null||t.classList.toggle("ag-hidden",s)}clearSearchString(){this.searchString=""}selectListItem(e,t){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||e<0||e>=this.currentList.length)return;this.listComponent.ensureIndexVisible(e,!t)&&!t&&this.listComponent.refresh(!0),this.highlightSelectedValue(e)}setValue(e,t,s){const r=this.currentList?this.currentList.indexOf(e):-1;return r===-1?this:(this.value=e,s||this.selectListItem(r),this.renderSelectedValue(),super.setValue(e,t))}createRowComponent(e){const t=new mb(this.config,this.eWrapper);t.setParentComponent(this.listComponent),this.getContext().createBean(t),t.setState(e);const{highlightMatch:s,searchType:r="fuzzy"}=this.config;return s&&r!=="fuzzy"&&t.highlightString(this.searchString),t}getRowForMouseEvent(e){const{listComponent:t}=this;if(!t)return-1;const r=(t==null?void 0:t.getGui()).getBoundingClientRect(),o=t.getScrollTop(),n=e.clientY-r.top+o;return Math.floor(n/t.getRowHeight())}onPickerMouseMove(e){if(!this.listComponent)return;const t=this.getRowForMouseEvent(e);t!==-1&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.selectListItem(t,!0))}onNavigationKeyDown(e,t){e.preventDefault();const s=t===x.DOWN;if(!this.isPickerDisplayed&&s){this.showPicker();return}const r=this.highlightedItem,n=r===-1?0:r+(s?1:-1);this.selectListItem(n)}onEnterKeyDown(e){this.isPickerDisplayed&&(e.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(e,t){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,t),this.hidePicker()}dispatchPickerEvent(e,t){const s={type:w.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:t,value:e};this.dispatchEvent(s)}getFocusableElement(){const{allowTyping:e}=this.config;return e?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(e){const t=e.key,{allowTyping:s}=this.config;switch(t){case x.LEFT:case x.RIGHT:case x.PAGE_HOME:case x.PAGE_END:s||e.preventDefault();break;case x.PAGE_UP:case x.PAGE_DOWN:e.preventDefault();break;case x.DOWN:case x.UP:this.onNavigationKeyDown(e,t);break;case x.ESCAPE:this.isPickerDisplayed&&(dr(this.listComponent.getGui())&&(e.preventDefault(),fo(e)),this.hidePicker());break;case x.ENTER:this.onEnterKeyDown(e);break;case x.TAB:this.onTabKeyDown();break;default:s||this.buildSearchStringFromKeyboardEvent(e)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};g([T("userComponentFactory")],Cb.prototype,"userComponentFactory",2);g([Y("eInput")],Cb.prototype,"eInput",2);var Qc=class JN extends ZD{constructor(e){super(e,JN.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");const{minValue:e,maxValue:t,textFieldWidth:s,step:r,value:o,onValueChange:n}=this.config;e!=null&&this.setMinValue(e),t!=null&&this.setMaxValue(t),s!=null&&this.setTextFieldWidth(s),r!=null&&this.setStep(r),o!=null&&this.setValue(o),n!=null&&this.onValueChange(n)}onValueChange(e){const t=w.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,t,()=>{const s=parseFloat(this.eText.getValue());this.eSlider.setValue(s.toString(),!0),e(s||0)}),this.addManagedListener(this.eSlider,t,()=>{const s=this.eSlider.getValue();this.eText.setValue(s,!0),e(parseFloat(s))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,t){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),t||this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}};Qc.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;g([Y("eLabel")],Qc.prototype,"eLabel",2);g([Y("eSlider")],Qc.prototype,"eSlider",2);g([Y("eText")],Qc.prototype,"eText",2);g([z],Qc.prototype,"init",1);var H$=Qc,Ul=class sd extends De{constructor(e={}){super(sd.getTemplate(e)),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;const{enabled:t,items:s,suppressEnabledCheckbox:r,expanded:o,suppressToggleExpandOnEnableChange:n,useToggle:l}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=t??!0,this.items=s||[],this.useToggle=l??!1,this.alignItems=e.alignItems||"center",this.expanded=o??!0,r!=null&&(this.suppressEnabledCheckbox=r),n!=null&&(this.suppressToggleExpandOnEnableChange=n)}static getTemplate(e){const t=e.cssIdentifier||"default",s=e.direction||"vertical";return`
            <div class="ag-group ag-${t}-group" role="presentation">
                <div ref="eToolbar" class="ag-group-toolbar ag-${t}-group-toolbar">
                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
                </div>
                <div ref="eContainer" class="ag-group-container ag-group-container-${s} ag-${t}-group-container"></div>
            </div>
        `}postConstruct(){if(this.setupTitleBar(),this.items.length){const r=this.items;this.items=[],this.addItems(r)}const e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:t,suppressOpenCloseIcons:s}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(s??!1),this.refreshChildDisplay(),Ue(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(r=>{this.setEnabled(r,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(r)}),t!=null&&this.onEnableChange(t)}refreshChildDisplay(){var e;Ue(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),(e=this.eTitleBar)==null||e.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;const t=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(t),this}toggleGroupExpand(e){var t;let s=!1;if((t=this.eTitleBar)!=null&&t.isSuppressCollapse()&&!this.useToggle)e=!0,s=!0;else if(e=e??!this.expanded,this.expanded===e)return this;return this.expanded=e,this.refreshChildDisplay(),Ue(this.eContainer,e),s||this.dispatchEvent({type:e?sd.EVENT_EXPANDED:sd.EVENT_COLLAPSED}),this}addItems(e){e.forEach(t=>this.addItem(t))}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}insertItem(e,t){const s=this.eContainer,r=e instanceof De?e.getGui():e;r.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),t?(s.insertAdjacentElement("afterbegin",r),this.items.unshift(r)):(s.appendChild(r),this.items.push(r))}hideItem(e,t){const s=this.items[t];Ue(s,!e)}getItemIndex(e){const t=e instanceof De?e.getGui():e;return this.items.indexOf(t)}setTitle(e){var t;return(t=this.eTitleBar)==null||t.setTitle(e),this}addCssClassToTitleBar(e){var t;(t=this.eTitleBar)==null||t.addCssClass(e)}dispatchEnableChangeEvent(e){const t={type:sd.EVENT_ENABLE_CHANGE,enabled:e};this.dispatchEvent(t)}setEnabled(e,t,s){var r;return this.enabled=e,this.refreshDisabledStyles(),s||this.toggleGroupExpand(e),t||(this.cbGroupEnabled.setValue(e),(r=this.eToggle)==null||r.setValue(e)),this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListener(this,sd.EVENT_ENABLE_CHANGE,t=>e(t.enabled)),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){var t;return(t=this.eTitleBar)==null||t.hideOpenCloseIcons(e),this}refreshDisabledStyles(){var e;const t=!this.enabled;this.eContainer.classList.toggle("ag-disabled",t),(e=this.eTitleBar)==null||e.refreshDisabledStyles(this.suppressEnabledCheckbox&&t),this.eContainer.classList.toggle("ag-disabled-group-container",t)}setupTitleBar(){const e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){const e=this.createManagedBean(new $F(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListener(e,$F.EVENT_EXPAND_CHANGED,t=>this.toggleGroupExpand(t.expanded)),e}createToggleTitleBar(){var e;const t=this.createManagedBean(new qN({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:s=>{this.setEnabled(s,!0),this.dispatchEnableChangeEvent(s)}}));return t.addCssClass("ag-group-title-bar"),t.addCssClass(`ag-${(e=this.params.cssIdentifier)!=null?e:"default"}-group-title-bar ag-unselectable`),this.eToggle=t,this.toggleGroupExpand(this.enabled),t}};Ul.EVENT_EXPANDED="expanded";Ul.EVENT_COLLAPSED="collapsed";Ul.EVENT_ENABLE_CHANGE="enableChange";g([Y("eToolbar")],Ul.prototype,"eToolbar",2);g([Y("cbGroupEnabled")],Ul.prototype,"cbGroupEnabled",2);g([Y("eContainer")],Ul.prototype,"eContainer",2);g([z],Ul.prototype,"postConstruct",1);var B$=Ul,Xc=class ER extends De{constructor(e={}){super(ER.getTemplate(e)),this.suppressOpenCloseIcons=!1;const{title:t,suppressOpenCloseIcons:s}=e;this.title=t,s!=null&&(this.suppressOpenCloseIcons=s)}static getTemplate(e){var t;const s=(t=e.cssIdentifier)!=null?t:"default";return`
            <div class="ag-group-title-bar ag-${s}-group-title-bar ag-unselectable" role="button">
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${s}-group-title"></span>
            </div>
        `}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(wr("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(wr("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.getGui(),"click",()=>this.dispatchExpandChanged()),this.addManagedListener(this.getGui(),"keydown",e=>{switch(e.key){case x.ENTER:case x.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case x.RIGHT:case x.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===x.RIGHT);break}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||vn(this.getGui(),e)}refreshOpenCloseIcons(e){const t=!this.suppressOpenCloseIcons;Ue(this.eGroupOpenedIcon,t&&e),Ue(this.eGroupClosedIcon,t&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){const t={type:ER.EVENT_EXPAND_CHANGED,expanded:e};this.dispatchEvent(t)}setTitle(e){return this.eTitle.innerText=e||"",Ue(this.getGui(),e!=null),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){const t=this.getGui();e?(t.classList.add("ag-disabled-group-title-bar"),t.removeAttribute("tabindex")):(t.classList.remove("ag-disabled-group-title-bar"),typeof this.title=="string"?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex"))}};Xc.EVENT_EXPAND_CHANGED="expandedChanged";g([Y("eGroupOpenedIcon")],Xc.prototype,"eGroupOpenedIcon",2);g([Y("eGroupClosedIcon")],Xc.prototype,"eGroupClosedIcon",2);g([Y("eTitle")],Xc.prototype,"eTitle",2);g([z],Xc.prototype,"postConstruct",1);var $F=Xc,vb=class extends uf{constructor(e=0,t){super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[],this.params=t??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){const t=this.getParentComponent(),s=t&&t.getGui();s&&s.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case x.UP:case x.RIGHT:case x.DOWN:case x.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case x.ESCAPE:this.closeIfIsChild()&&fo(e);break}}handleFocusIn(e){var t,s;const r=e.relatedTarget;!this.tabGuardCtrl.isTabGuard(r)&&(this.getGui().contains(r)||(s=(t=this.activeMenuItem)==null?void 0:t.getSubMenuGui())!=null&&s.contains(r))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var t;const s=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(s)||(t=this.activeMenuItem.getSubMenuGui())!=null&&t.contains(s)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){e!=null&&Zt.all(e.map(t=>t==="separator"?Zt.resolve({eGui:this.createSeparator()}):typeof t=="string"?(console.warn(`AG Grid: unrecognised menu item ${t}`),Zt.resolve({eGui:null})):this.addItem(t))).then(t=>{t.forEach(s=>{s!=null&&s.eGui&&(this.appendChild(s.eGui),s.comp&&this.menuItems.push(s.comp))})})}addItem(e){const t=this.createManagedBean(new lm);return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(s=>s.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(t.setParentComponent(this),this.addManagedListener(t,lm.EVENT_CLOSE_MENU,s=>{this.dispatchEvent(s)}),this.addManagedListener(t,lm.EVENT_MENU_ITEM_ACTIVATED,s=>{this.activeMenuItem&&this.activeMenuItem!==s.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=s.menuItem}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){const e=this.menuItems.filter(t=>!t.isDisabled())[0];e&&e.activate()}createSeparator(){return Os(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(e){switch(e){case x.UP:case x.DOWN:const s=this.findNextItem(e===x.UP);s&&s!==this.activeMenuItem&&s.activate();return}const t=this.gridOptionsService.get("enableRtl")?x.RIGHT:x.LEFT;e===t?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return t&&t instanceof lm?(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=this.menuItems.filter(o=>!o.isDisabled());if(!t.length)return;if(!this.activeMenuItem)return e?Je(t):t[0];e&&t.reverse();let s,r=!1;for(let o=0;o<t.length;o++){const n=t[o];if(!r){n===this.activeMenuItem&&(r=!0);continue}s=n;break}return r&&!s?t[0]:s||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};g([T("focusService")],vb.prototype,"focusService",2);g([z],vb.prototype,"postConstruct",1);var ZN=class extends uf{constructor(e){super(),this.wrappedComponent=e,this.setTemplateFromElement(e.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===x.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}};g([z],ZN.prototype,"postConstruct",1);var bu=class rd extends W{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var t,s;const{menuItemDef:r,isAnotherSubMenuOpen:o,level:n,childComponent:l,contextParams:a}=e;return this.params=e.menuItemDef,this.level=n,this.isAnotherSubMenuOpen=o,this.childComponent=l,this.contextParams=a,this.cssClassPrefix=(s=(t=this.params.menuItemParams)==null?void 0:t.cssClassPrefix)!=null?s:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,Pt(he({},r),{level:n,isAnotherSubMenuOpen:o,openSubMenu:d=>this.openSubMenu(d),closeSubMenu:()=>this.closeSubMenu(),closeMenu:d=>this.closeMenu(d),updateTooltip:(d,c)=>this.refreshTooltip(d,c),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(d=>{var c;this.menuItemComp=d;const h=(c=d.configureDefaults)==null?void 0:c.call(d);h&&this.configureDefaults(h===!0?void 0:h)})}addListeners(e,t){t!=null&&t.suppressClick||this.addManagedListener(e,"click",s=>this.onItemSelected(s)),t!=null&&t.suppressKeyboardSelect||this.addManagedListener(e,"keydown",s=>{(s.key===x.ENTER||s.key===x.SPACE)&&(s.preventDefault(),this.onItemSelected(s))}),t!=null&&t.suppressMouseDown||this.addManagedListener(e,"mousedown",s=>{s.stopPropagation(),s.preventDefault()}),t!=null&&t.suppressMouseOver||(this.addManagedListener(e,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){var t,s;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const r=Os('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=r;let o,n=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const d=this.createBean(new ZN(this.childComponent));d.setParentComponent(this);const c=d.getGui(),h="mouseenter",p=()=>this.cancelDeactivate();c.addEventListener(h,p),o=()=>c.removeEventListener(h,p),r.appendChild(c),this.childComponent.afterGuiAttached&&(n=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const d=this.createBean(new vb(this.level+1,this.contextParams));d.setParentComponent(this),d.addMenuItems(this.params.subMenu),r.appendChild(d.getGui()),this.addManagedListener(d,rd.EVENT_CLOSE_MENU,c=>this.dispatchEvent(c)),d.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),o=()=>this.destroyBean(d),e&&(n=()=>{d.activateFirstItem(),this.subMenuIsOpening=!1})}const l=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:r}),a=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:!0,eChild:r,positionCallback:l,anchorToElement:this.eGui,ariaLabel:a("ariaLabelSubMenu","SubMenu"),afterGuiAttached:n});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var d,c;u&&u.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),o(),(c=(d=this.menuItemComp).setExpanded)==null||c.call(d,!1),this.eSubMenuGui=void 0},(s=(t=this.menuItemComp).setExpanded)==null||s.call(t,!0)}setAriaExpanded(e){this.suppressAria||vn(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var t,s;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(s=(t=this.menuItemComp).setActive)==null||s.call(t,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,t;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(t=(e=this.menuItemComp).setActive)==null||t.call(e,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var t,s;(s=(t=this.menuItemComp).select)==null||s.call(t),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gridOptionsService.addGridCommonParams(he({},this.contextParams)))):this.openSubMenu(e&&e.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){const t={type:rd.EVENT_CLOSE_MENU,event:e};this.dispatchEvent(t)}onItemActivated(){const e={type:rd.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),rd.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),rd.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var t,s,r;if(this.tooltip=this.params.tooltip,!this.menuItemComp){setTimeout(()=>this.configureDefaults(e));return}let o=this.menuItemComp.getGui();const n=(s=(t=this.menuItemComp).getRootElement)==null?void 0:s.call(t);n&&(e!=null&&e.suppressRootStyles||o.classList.add("ag-menu-option-custom"),o=n),this.eGui=o,this.suppressRootStyles=!!(e!=null&&e.suppressRootStyles),this.suppressRootStyles||(o.classList.add(this.cssClassPrefix),(r=this.params.cssClasses)==null||r.forEach(l=>o.classList.add(l)),this.params.disabled&&o.classList.add(`${this.cssClassPrefix}-disabled`)),e!=null&&e.suppressTooltip||this.refreshTooltip(),this.suppressAria=!!(e!=null&&e.suppressAria),this.suppressAria||(Bt(o,"treeitem"),d_(o,this.level+1),this.params.disabled&&FD(o,!0)),e!=null&&e.suppressTabIndex||o.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(o,e),this.suppressFocus=!!(e!=null&&e.suppressFocus)}refreshTooltip(e,t){this.tooltip=e,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),!(!e||!this.menuItemComp)&&(this.tooltipFeature=this.createBean(new On({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};bu.EVENT_CLOSE_MENU="closeMenu";bu.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";bu.ACTIVATION_DELAY=80;g([T("popupService")],bu.prototype,"popupService",2);g([T("userComponentFactory")],bu.prototype,"userComponentFactory",2);g([T("beans")],bu.prototype,"beans",2);var lm=bu,Pu=class RR extends De{constructor(e){super(RR.getTemplate(e)),this.config=e,this.closable=!0}static getTemplate(e){const t=e.cssIdentifier||"default";return`<div class="ag-panel ag-${t}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${t}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${t}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${t}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${t}-panel-content-wrapper"></div>
        </div>`}postConstruct(){const{component:e,closable:t,hideTitleBar:s,title:r,minWidth:o=250,width:n,minHeight:l=250,height:a,centered:u,popup:d,x:c,y:h}=this.config;this.positionableFeature=new Bc(this.getGui(),{minWidth:o,width:n,minHeight:l,height:a,centered:u,x:c,y:h,popup:d,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const p=this.getGui();e&&this.setBodyComponent(e),s?Ue(this.eTitleBar,!1):(r&&this.setTitle(r),this.setClosable(t??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",m=>{const S=this.gridOptionsService.getDocument();if(p.contains(m.relatedTarget)||p.contains(S.activeElement)||this.eTitleBarButtons.contains(m.target)){m.preventDefault();return}const E=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");E&&E.focus()}),!(d&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const t=this.closeButtonComp=new De(RR.CLOSE_BTN_TEMPLATE);this.getContext().createBean(t);const s=t.getGui(),r=_t("close",this.gridOptionsService);r.classList.add("ag-panel-title-bar-button-icon"),s.appendChild(r),this.addTitleBarButton(t),t.addManagedListener(s,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const t=this.closeButtonComp.getGui();t.parentElement.removeChild(t),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const s=this.eTitleBarButtons,r=s.children,o=r.length;t==null&&(t=o),t=Math.max(0,Math.min(t,o)),e.addCssClass("ag-panel-title-bar-button");const n=e.getGui();t===0?s.insertAdjacentElement("afterbegin",n):t===o?s.insertAdjacentElement("beforeend",n):r[t-1].insertAdjacentElement("afterend",n),e.setParentComponent(this)}getBodyHeight(){return Qg(this.eContentWrapper)}getBodyWidth(){return Cu(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&dr(e)&&this.close(),super.destroy()}};Pu.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';g([Y("eContentWrapper")],Pu.prototype,"eContentWrapper",2);g([Y("eTitleBar")],Pu.prototype,"eTitleBar",2);g([Y("eTitleBarButtons")],Pu.prototype,"eTitleBarButtons",2);g([Y("eTitle")],Pu.prototype,"eTitle",2);g([z],Pu.prototype,"postConstruct",1);var W$=Pu,U$=class extends W${constructor(e){super(Pt(he({},e),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const e=this.getGui(),{movable:t,resizable:s,maximizable:r}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(e,"focusin",o=>{this.popupService.bringPopupToFront(e)}),t&&this.setMovable(t),r&&this.setMaximizable(r),s&&this.setResizable(s)}renderComponent(){const e=this.getGui(),{alwaysOnTop:t,modal:s,title:r,afterGuiAttached:o}=this.config,n=this.localeService.getLocaleTextFunc(),l=this.popupService.addPopup({modal:s,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:r||n("ariaLabelDialog","Dialog"),afterGuiAttached:o});l&&(this.close=l.hideFunc)}onClosed(e){var t,s;this.destroy(),(s=(t=this.config).closedCallback)==null||s.call(t,e)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:t,y:s,width:r,height:o}=this.lastPosition;this.setWidth(r),this.setHeight(o),this.positionableFeature.offsetElement(t,s)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){Ue(this.maximizeIcon,!this.isMaximized),Ue(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const s=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),s.addManagedListener(s.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(s,0),this.maximizeListeners.push(this.addManagedListener(t,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new De('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=_t("maximize",this.gridOptionsService),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=_t("minimize",this.gridOptionsService),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}};g([T("popupService")],U$.prototype,"popupService",2);var z$=0,Sn=class extends W{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl}),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){const e=this.gridOptionsService.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:s}=e,r=this.getPopupIndex(s);if(r!==-1){const m=this.popupList[r];m.alignedToElement=t}const o=t.getBoundingClientRect(),n=this.getParentRect(),l=this.keepXYWithinBounds(s,o.top-n.top,0),a=s.clientWidth>0?s.clientWidth:200;s.style.minWidth=`${a}px`;const d=n.right-n.left-a;let c;this.gridOptionsService.get("enableRtl")?(c=p(),c<0&&(c=h(),this.setAlignedStyles(s,"left")),c>d&&(c=0,this.setAlignedStyles(s,"right"))):(c=h(),c>d&&(c=p(),this.setAlignedStyles(s,"right")),c<0&&(c=0,this.setAlignedStyles(s,"left"))),s.style.left=`${c}px`,s.style.top=`${l}px`;function h(){return o.right-n.left-2}function p(){return o.left-n.left-a}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:s,nudgeY:r,skipObserver:o}=e;this.positionPopup({ePopup:t,nudgeX:s,nudgeY:r,keepWithinBounds:!0,skipObserver:o,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:s,nudgeY:r,keepWithinBounds:o,eventSource:n,alignSide:l="left",position:a="over",column:u,rowNode:d,type:c}=e,h=n.getBoundingClientRect(),p=this.getParentRect(),m=this.getPopupIndex(t);if(m!==-1){const E=this.popupList[m];E.alignedToElement=n}const S=()=>{let E=h.left-p.left;l==="right"&&(E-=t.offsetWidth-h.width);let C;return a==="over"?(C=h.top-p.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,h,p,e.nudgeY||0)==="under"?C=h.top-p.top+h.height:C=h.top-t.offsetHeight-(r||0)*2-p.top),{x:E,y:C}};this.positionPopup({ePopup:t,nudgeX:s,nudgeY:r,keepWithinBounds:o,updatePosition:S,postProcessCallback:()=>this.callPostProcessPopup(c,t,n,null,u,d)})}shouldRenderUnderOrAbove(e,t,s,r){const o=s.bottom-t.bottom,n=t.top-s.top,l=e.offsetHeight+r;return o>l?"under":n>l||n>o?"above":"under"}setAlignedStyles(e,t){const s=this.getPopupIndex(e);if(s===-1)return;const r=this.popupList[s],{alignedToElement:o}=r;!o||(["right","left","over","above","under"].forEach(l=>{o.classList.remove(`ag-has-popup-positioned-${l}`),e.classList.remove(`ag-popup-positioned-${l}`)}),!t)||(o.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,s,r,o,n){const l=this.gridOptionsService.getCallback("postProcessPopup");l&&l({column:o,rowNode:n,ePopup:t,type:e,eventSource:s,mouseEvent:r})}positionPopup(e){const{ePopup:t,keepWithinBounds:s,nudgeX:r,nudgeY:o,skipObserver:n,updatePosition:l}=e,a={width:0,height:0},u=(d=!1)=>{let{x:c,y:h}=l();d&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,r&&(c+=r),o&&(h+=o),s&&(c=this.keepXYWithinBounds(t,c,1),h=this.keepXYWithinBounds(t,h,0)),t.style.left=`${c}px`,t.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(u(),!n){const d=this.resizeObserverService.observeResize(t,()=>u(!0));setTimeout(()=>d(),Sn.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=this.gridOptionsService.getDocument();let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),UD(t)}keepXYWithinBounds(e,t,s){const r=s===0,o=r?"clientHeight":"clientWidth",n=r?"top":"left",l=r?"offsetHeight":"offsetWidth",a=r?"scrollTop":"scrollLeft",u=this.gridOptionsService.getDocument(),d=u.documentElement,c=this.getPopupParent(),h=c.getBoundingClientRect(),p=u.documentElement.getBoundingClientRect(),m=c===u.body,S=e[l];let C=m?(r?WD:xp)(d)+d[a]:c[o];m&&(C-=Math.abs(p[n]-h[n]));const v=C-S;return Math.min(Math.max(t,0),Math.abs(v))}addPopup(e){const t=this.gridOptionsService.getDocument(),{eChild:s,ariaLabel:r,alwaysOnTop:o,positionCallback:n,anchorToElement:l}=e;if(!t)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(s);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(s);const u=this.createPopupWrapper(s,r,!!o),d=this.addEventListenersToPopup(Pt(he({},e),{wrapperEl:u}));return n&&n(),this.addPopupToPopupList(s,u,d,l),{hideFunc:d}}initialisePopupPosition(e){const s=this.getPopupParent().getBoundingClientRect();V(e.style.top)||(e.style.top=`${s.top*-1}px`),V(e.style.left)||(e.style.left=`${s.left*-1}px`)}createPopupWrapper(e,t,s){const r=this.getPopupParent(),o=document.createElement("div"),{allThemes:n}=this.environment.getTheme();return n.length&&o.classList.add(...n),o.classList.add("ag-popup"),e.classList.add(this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Bt(e,"dialog"),mo(e,t),o.appendChild(e),r.appendChild(o),s?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),o}handleThemeChange(){const{allThemes:e}=this.environment.getTheme();for(const t of this.popupList){for(const s of Array.from(t.wrapper.classList))s.startsWith("ag-theme-")&&t.wrapper.classList.remove(s);e.length&&t.wrapper.classList.add(...e)}}addEventListenersToPopup(e){const t=this.gridOptionsService.getDocument(),s=this.getPopupParent(),{wrapperEl:r,eChild:o,click:n,closedCallback:l,afterGuiAttached:a,closeOnEsc:u,modal:d}=e;let c=!1;const h=E=>{if(!r.contains(t.activeElement))return;E.key===x.ESCAPE&&!co(E)&&S({keyboardEvent:E})},p=E=>S({mouseEvent:E}),m=E=>S({touchEvent:E}),S=(E={})=>{const{mouseEvent:C,touchEvent:v,keyboardEvent:R}=E;this.isEventFromCurrentPopup({mouseEvent:C,touchEvent:v},o)||c||(c=!0,s.removeChild(r),t.removeEventListener("keydown",h),t.removeEventListener("mousedown",p),t.removeEventListener("touchstart",m),t.removeEventListener("contextmenu",p),this.eventService.removeEventListener(w.EVENT_DRAG_STARTED,p),l&&l(C||v||R),this.removePopupFromPopupList(o))};return a&&a({hidePopup:S}),window.setTimeout(()=>{u&&t.addEventListener("keydown",h),d&&(t.addEventListener("mousedown",p),this.eventService.addEventListener(w.EVENT_DRAG_STARTED,p),t.addEventListener("touchstart",m),t.addEventListener("contextmenu",p))},0),S}addPopupToPopupList(e,t,s,r){this.popupList.push({element:e,wrapper:t,hideFunc:s,instanceId:z$++,isAnchored:!!r}),r&&this.setPopupPositionRelatedToElement(e,r)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const s=this.getPopupIndex(e);if(s===-1)return;const r=this.popupList[s];if(r.stopAnchoringPromise&&r.stopAnchoringPromise.then(n=>n&&n()),r.stopAnchoringPromise=void 0,r.isAnchored=!1,!t)return;const o=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:r.hideFunc});return r.stopAnchoringPromise=o,r.isAnchored=!0,o}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),s=t.getBoundingClientRect(),{element:r,ePopup:o}=e,n=r.getBoundingClientRect(),l=s.top-n.top,a=s.left-n.left;let u=l,d=a;const c=o.style.top,h=parseInt(c.substring(0,c.length-1),10),p=o.style.left,m=parseInt(p.substring(0,p.length-1),10);return new Zt(S=>{this.getFrameworkOverrides().setInterval(()=>{const E=t.getBoundingClientRect(),C=r.getBoundingClientRect();if(C.top==0&&C.left==0&&C.height==0&&C.width==0){e.hidePopup();return}const R=E.top-C.top;if(R!=u){const A=this.keepXYWithinBounds(o,h+l-R,0);o.style.top=`${A}px`}u=R;const b=E.left-C.left;if(b!=d){const A=this.keepXYWithinBounds(o,m+a-b,1);o.style.left=`${A}px`}d=b},200).then(E=>{S(()=>{E!=null&&window.clearInterval(E)})})})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:s,touchEvent:r}=e,o=s||r;if(!o)return!1;const n=this.getPopupIndex(t);if(n===-1)return!1;for(let l=n;l<this.popupList.length;l++){const a=this.popupList[l];if(NC(a.element,o))return!0}return this.isElementWithinCustomPopup(o.target)}isElementWithinCustomPopup(e){const t=this.gridOptionsService.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const s=this.getWrapper(e);s&&(s.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(s))}bringPopupToFront(e){const t=this.getPopupParent(),s=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),r=s.length,o=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),n=o.length,l=this.getWrapper(e);if(!l||r<=1||!t.contains(e))return;const a=s.indexOf(l),u=l.querySelectorAll("div"),d=[];for(u.forEach(c=>{c.scrollTop!==0&&d.push([c,c.scrollTop])}),n?l.classList.contains("ag-always-on-top")?a!==r-1&&Je(o).insertAdjacentElement("afterend",l):a!==r-n-1&&o[0].insertAdjacentElement("beforebegin",l):a!==r-1&&Je(s).insertAdjacentElement("afterend",l);d.length;){const c=d.pop();c[0].scrollTop=c[1]}}};Sn.WAIT_FOR_POPUP_CONTENT_RESIZE=200;g([T("focusService")],Sn.prototype,"focusService",2);g([T("ctrlsService")],Sn.prototype,"ctrlsService",2);g([T("resizeObserverService")],Sn.prototype,"resizeObserverService",2);g([z],Sn.prototype,"postConstruct",1);Sn=g([te("popupService")],Sn);var $$=class extends De{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(e,t){this.value=e,this.render(),this.updateSelected(t)}updateSelected(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)}setSearchString(e){var t;let s=!1;if(V(e)){const r=(t=this.value)==null?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(r>=0){s=!0,this.hasHighlighting=!0;const o=r+e.length,n=pi(this.value.slice(0,r)),l=pi(this.value.slice(r,o)),a=pi(this.value.slice(o));this.getGui().lastElementChild.innerHTML=`${n}<b>${l}</b>${a}`}}!s&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var e;this.getGui().lastElementChild.innerHTML=(e=pi(this.value))!=null?e:"&nbsp;"}},xS=class eG extends wu{constructor(e){super(eG.TEMPLATE),this.params=e,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new XN({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:t=>this.autocompleteEntries[t]});const e=this.virtualList.getGui();this.addManagedListener(e,"click",()=>this.params.onConfirmed()),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",t=>t.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(e,t){e.preventDefault();const s=this.autocompleteEntries.indexOf(this.selectedValue),r=t===x.UP?s-1:s+1;this.checkSetSelectedValue(r)}setSearch(e){this.searchString=e,V(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,t){let s,r=!1;const o=e.toLocaleLowerCase(),n=t.filter(l=>{const u=l.toLocaleLowerCase().indexOf(o),d=u===0,c=u>=0;return c&&(!s||!r&&d||r===d&&l.length<s.length)&&(s=l,r=d),c});return!s&&n.length&&(s=n[0]),{topMatch:s,allMatches:n}}runSearch(){var e,t;const{autocompleteEntries:s}=this.params,r=s.map(u=>{var d;return(d=u.displayValue)!=null?d:u.key});let o,n;if(this.params.useFuzzySearch)o=Jg(this.searchString,r,!0).values,n=o.length?o[0]:void 0;else{const u=this.runContainsSearch(this.searchString,r);o=u.allMatches,n=u.topMatch}let l=s.filter(({key:u,displayValue:d})=>o.includes(d??u));if(!l.length&&this.selectedValue&&((t=(e=this.params)==null?void 0:e.forceLastSelection)!=null&&t.call(e,this.selectedValue,this.searchString))&&(l=[this.selectedValue]),this.autocompleteEntries=l,this.virtualList.refresh(),!n)return;const a=o.indexOf(n);this.checkSetSelectedValue(a)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){const t=this.autocompleteEntries[e];this.selectedValue!==t&&(this.selectedValue=t,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((s,r)=>{s.updateSelected(e===r)}))}createRowComponent(e){var t;const s=new $$;return this.getContext().createBean(s),s.setState((t=e.displayValue)!=null?t:e.key,e===this.selectedValue),s}onMouseMove(e){const t=this.virtualList.getGui().getBoundingClientRect(),s=this.virtualList.getScrollTop(),r=e.clientY-t.top+s,o=Math.floor(r/this.virtualList.getRowHeight());this.checkSetSelectedValue(o)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!=null?e:null}};xS.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;g([Y("eList")],xS.prototype,"eList",2);g([z],xS.prototype,"init",1);var K$=xS,zl=class Nh extends De{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){const t=Wo(e);this.updateValue(t),this.updateAutocompleteList(t)}updateValue(e){this.updateLastPosition(),this.dispatchEvent({type:Nh.EVENT_VALUE_CHANGED,value:e}),this.validate(e)}updateAutocompleteList(e){var t,s,r,o;const n=(s=(t=this.listGenerator)==null?void 0:t.call(this,e,this.lastPosition))!=null?s:{enabled:!1};if((!n.type||n.type!==((r=this.autocompleteListParams)==null?void 0:r.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=n,(o=this.autocompleteListParams)!=null&&o.enabled){this.isListOpen||this.openList();const{searchString:l}=this.autocompleteListParams;this.autocompleteList.setSearch(l??"")}else this.isListOpen&&this.closeList()}onKeyDown(e){const t=e.key;switch(this.updateLastPosition(),t){case x.ENTER:this.onEnterKeyDown(e);break;case x.TAB:this.onTabKeyDown(e);break;case x.DOWN:case x.UP:this.onUpDownKeyDown(e,t);break;case x.LEFT:case x.RIGHT:case x.PAGE_HOME:case x.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case x.ESCAPE:this.onEscapeKeyDown(e);break;case x.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}}confirmSelection(){var e;const t=(e=this.autocompleteList)==null?void 0:e.getSelectedValue();t&&(this.closeList(),this.dispatchEvent({type:Nh.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:t,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,t){var s;e.preventDefault(),this.isListOpen?(s=this.autocompleteList)==null||s.onNavigationKeyDown(e,t):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!=null?e:null)}setCaret(e,t){const s=this.gridOptionsService.getDocument();t&&s.activeElement===s.body&&this.eAutocompleteInput.getFocusableElement().focus();const r=this.eAutocompleteInput.getInputElement();r.setSelectionRange(e,e),e===r.value.length&&(r.scrollLeft=r.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!=null?e:0}validate(e){var t;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((t=this.validationMessage)!=null?t:""),this.valid=!this.validationMessage,this.dispatchEvent({type:Nh.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new K$({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const e=this.autocompleteList.getGui(),t={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.get("enableRtl")?"right":"left",keepWithinBounds:!0},s=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(t),ariaLabel:this.listAriaLabel});this.hidePopup=s.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:Nh.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return Wo(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){const{value:t,position:s,silent:r,updateListOnlyIfOpen:o,restoreFocus:n}=e;this.eAutocompleteInput.setValue(t,!0),this.setCaret(s??this.lastPosition,n),r||this.updateValue(t),(!o||this.isListOpen)&&this.updateAutocompleteList(t)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}};zl.EVENT_VALUE_CHANGED="eventValueChanged";zl.EVENT_VALUE_CONFIRMED="eventValueConfirmed";zl.EVENT_OPTION_SELECTED="eventOptionSelected";zl.EVENT_VALID_CHANGED="eventValidChanged";g([T("popupService")],zl.prototype,"popupService",2);g([Y("eAutocompleteInput")],zl.prototype,"eAutocompleteInput",2);g([z],zl.prototype,"postConstruct",1);var j$=zl,$l=class _m extends De{constructor(e,t,s,r){super(),this.dragSourceDropTarget=e,this.ghost=t,this.horizontal=s,this.template=r}init(){var e;this.setTemplate((e=this.template)!=null?e:_m.TEMPLATE);const t=this.getGui();this.addElementClasses(t),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(_t("columnDrag",this.gridOptionsService)),this.eButton.appendChild(_t("cancel",this.gridOptionsService)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const e=this.localeService.getLocaleTextFunc(),t=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(t,e),mo(this.getGui(),t.join(". "))}addAdditionalAriaInstructions(e,t){if(this.isRemovable()){const s=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(s)}}setupTooltip(){const e=()=>{const t=this.getTooltip();this.setTooltip({newTooltipText:t})};e(),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,e)}getDragSourceId(){}getDefaultIconName(){return Ae.ICON_NOT_ALLOWED}addDragSource(){const{dragAndDropService:e,eDragHandle:t}=this,s=this.createGetDragItem(),r=this.getDefaultIconName(),o={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:t,getDefaultIconName:()=>r,getDragItem:s,dragItemName:this.getDisplayName()};e.addDragSource(o,!0),this.addDestroyFunc(()=>e.removeDragSource(o))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){Ue(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const e={type:_m.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",s=>this.onKeyDown(s)),this.addManagedListener(this.eButton,"click",s=>{this.dispatchEvent(e),s.stopPropagation()});const t=new Fi(this.eButton);this.addManagedListener(t,Fi.EVENT_TAP,()=>{this.dispatchEvent(e)}),this.addDestroyFunc(t.destroy.bind(t))}onKeyDown(e){e.key===x.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchEvent({type:_m.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){const e=this.getDisplayValue(),t=pi(e);this.eText.innerHTML=t}addElementClasses(e,t){t=t?`-${t}`:"";const s=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop-cell${t}`,`ag-column-drop-${s}-cell${t}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}};$l.EVENT_COLUMN_REMOVE="columnRemove";$l.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;g([T("dragAndDropService")],$l.prototype,"dragAndDropService",2);g([Y("eText")],$l.prototype,"eText",2);g([Y("eDragHandle")],$l.prototype,"eDragHandle",2);g([Y("eButton")],$l.prototype,"eButton",2);g([z],$l.prototype,"init",1);var Y$=$l,hf=class To extends De{constructor(e){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.state=To.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),Bt(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e}isSourceEventFromTarget(e){const{dropZoneTarget:t,dragSource:s}=e;return t.contains(s.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(e=>e()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,oi(this.getGui()),oi(this.ePillDropList)}init(e){this.params=e??{},this.createManagedBean(new Hl(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new Bc(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),mo(this.ePillDropList,this.getAriaLabel())}handleKeyDown(e){const t=!this.horizontal;let s=e.key===x.DOWN,r=e.key===x.UP;if(!t){const n=this.gridOptionsService.get("enableRtl");s=!n&&e.key===x.RIGHT||n&&e.key===x.LEFT,r=!n&&e.key===x.LEFT||n&&e.key===x.RIGHT}if(!s&&!r)return;const o=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,r);o&&(e.preventDefault(),o.focus())}addElementClasses(e,t){t=t?`-${t}`:"";const s=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop${t}`,`ag-column-drop-${s}${t}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){const t=this.getNewInsertIndex(e);if(t<0)return!1;const s=this.minimumAllowedNewInsertIndex(),r=Math.max(s,t),o=r!==this.insertIndex;return o&&(this.insertIndex=r),o}getNewInsertIndex(e){const t=e.event,s=this.horizontal?t.clientX:t.clientY,r=this.childPillComponents.map(n=>n.getGui().getBoundingClientRect()),o=r.findIndex(n=>this.horizontal?n.right>s&&n.left<s:n.top<s&&n.bottom>s);if(o===-1){const n=this.gridOptionsService.get("enableRtl");return r.every(u=>s>(this.horizontal?u.right:u.bottom))?n&&this.horizontal?0:this.childPillComponents.length:r.every(u=>s<(this.horizontal?u.left:u.top))?n&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=o?o+1:o}checkDragStartedBySelf(e){this.state===To.STATE_NOT_DRAGGING&&(this.state=To.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){const t=this.getItems(e.dragSource.getDragItem());this.state=To.STATE_NEW_ITEMS_IN;const s=t.filter(o=>this.isItemDroppable(o,e)),r=s.every(o=>this.childPillComponents.map(n=>n.getItem()).indexOf(o)!==-1);if(s.length!==0){if(this.potentialDndItems=s,r){this.state=To.STATE_NOT_DRAGGING;return}this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()}}isPotentialDndItems(){return Wx(this.potentialDndItems)}handleDragLeaveEnd(e){}onDragLeave(e){if(this.state===To.STATE_REARRANGE_ITEMS){const t=this.getItems(e.dragSource.getDragItem());this.removeItems(t)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state=To.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let e=!1;this.state===To.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),e=!0):e=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],(this.refreshOnDragStop()||!e)&&this.refreshGui()}this.state=To.STATE_NOT_DRAGGING}removeItems(e){const t=this.getExistingItems().filter(s=>!ar(e,s));this.updateItems(t)}addItems(e){if(!e)return;const t=this.getExistingItems().slice(),s=e.filter(r=>t.indexOf(r)<0);rR(t,s,this.insertIndex),this.updateItems(t)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e){const t=this.getNonGhostItems().slice();return rR(t,e,this.insertIndex),ko(t,this.getExistingItems())?!1:(this.updateItems(t),!0)}refreshGui(){const e=this.ePillDropList.scrollTop,t=this.resizeEnabled,s=this.getFocusedItem();let r=this.focusService.findNextFocusableElement();r||(r=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=e),t&&this.toggleResizable(t),this.focusService.isKeyboardMode()&&this.restoreFocus(s,r)}getFocusedItem(){const e=this.getGui(),t=this.gridOptionsService.getDocument().activeElement;return e.contains(t)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t):-1}restoreFocus(e,t){const s=this.getGui(),r=Array.from(s.querySelectorAll(".ag-column-drop-cell"));if(e===-1)return;r.length===0&&t.focus();const o=Math.min(r.length-1,e),n=r[o];n&&n.focus()}focusList(e){const t=e?this.childPillComponents.length-1:0;this.restoreFocus(t,this.getFocusableElement())}getNonGhostItems(){const e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(t=>!ar(this.potentialDndItems,t)):e}addItemsToGui(){const t=this.getNonGhostItems().map(s=>this.createItemComponent(s,!1));if(this.isPotentialDndItems()){const s=this.potentialDndItems.map(r=>this.createItemComponent(r,!0));this.insertIndex>=t.length?t.push(...s):t.splice(this.insertIndex,0,...s)}this.appendChild(this.ePillDropList),t.forEach((s,r)=>{r>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(s.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach((e,t)=>{const s=e.getGui();cS(s,t+1),dS(s,this.childPillComponents.length)})}createItemComponent(e,t){const s=this.createPillComponent(e,this.dropTarget,t,this.horizontal);return s.addEventListener(Y$.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[e])),this.context.createBean(s),this.guiDestroyFunctions.push(()=>this.destroyBean(s)),t||this.childPillComponents.push(s),s}addIconAndTitleToGui(){const{title:e,icon:t}=this.params;if(!e||!t)return;const s=document.createElement("div");if(qg(s,!0),this.addElementClasses(s,"title-bar"),this.addElementClasses(t,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),s.appendChild(t),!this.horizontal){const r=document.createElement("span");this.addElementClasses(r,"title"),r.innerHTML=e,s.appendChild(r)}this.appendChild(s)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){const{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const t=document.createElement("span");t.innerHTML=e,this.addElementClasses(t,"empty-message"),this.ePillDropList.appendChild(t)}addArrow(e){if(this.horizontal){const t=this.gridOptionsService.get("enableRtl"),s=_t(t?"smallLeft":"smallRight",this.gridOptionsService);this.addElementClasses(s,"cell-separator"),e.appendChild(s)}}};hf.STATE_NOT_DRAGGING="notDragging";hf.STATE_NEW_ITEMS_IN="newItemsIn";hf.STATE_REARRANGE_ITEMS="rearrangeItems";g([T("focusService")],hf.prototype,"focusService",2);g([T("dragAndDropService")],hf.prototype,"dragAndDropService",2);var q$=["touchstart","touchend","touchmove","touchcancel"],tG=class{constructor(i="javascript"){this.frameworkName=i,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(i,e){return new Zt(t=>{t(window.setInterval(i,e))})}addEventListener(i,e,t,s){const r=ar(q$,e);i.addEventListener(e,t,{capture:!!s,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(i){return null}isFrameworkComponent(i){return!1}getDocLink(i){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${i?`/${i}`:""}`}},Ll=class extends W{getNextCellToFocus(e,t,s=!1){return s?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const s=e===x.UP,r=e===x.DOWN,o=e===x.LEFT;let n,l;if(s||r)l=s?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),n=t.column;else{const a=this.columnModel.getAllDisplayedColumns(),u=this.gridOptionsService.get("enableRtl");l=t.rowIndex,n=o!==u?a[0]:Je(a)}return{rowIndex:l,rowPinned:null,column:n}}getNextCellToFocusWithoutCtrlPressed(e,t){let s=t,r=!1;for(;!r;){switch(e){case x.UP:s=this.getCellAbove(s);break;case x.DOWN:s=this.getCellBelow(s);break;case x.RIGHT:this.gridOptionsService.get("enableRtl")?s=this.getCellToLeft(s):s=this.getCellToRight(s);break;case x.LEFT:this.gridOptionsService.get("enableRtl")?s=this.getCellToRight(s):s=this.getCellToLeft(s);break;default:s=null,console.warn("AG Grid: unknown key for navigation "+e);break}s?r=this.isCellGoodToFocusOn(s):r=!0}return s}isCellGoodToFocusOn(e){const t=e.column;let s;switch(e.rowPinned){case"top":s=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":s=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:s=this.rowModel.getRow(e.rowIndex);break}return s?!t.isSuppressNavigable(s):!1}getCellToLeft(e){if(!e)return null;const t=this.columnModel.getDisplayedColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.columnModel.getDisplayedColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,s=e.rowPinned;if(this.isLastRowInContainer(e))switch(s){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const r=this.rowModel.getRow(e.rowIndex),o=this.getNextStickyPosition(r);return o||{rowIndex:t+1,rowPinned:s}}getNextStickyPosition(e,t){if(!this.gridOptionsService.isGroupRowsSticky()||!e||!e.sticky)return;const s=[...this.rowRenderer.getStickyTopRowCtrls()].sort((l,a)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex),r=t?-1:1,o=s.findIndex(l=>l.getRowNode().rowIndex===e.rowIndex),n=s[o+r];if(n)return{rowIndex:n.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,s=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=s:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=s:this.paginationProxy.getPageLastRow()<=s}getRowAbove(e){const t=e.rowIndex,s=e.rowPinned;if(s?t===0:t===this.paginationProxy.getPageFirstRow())return s==="top"?null:s?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const o=this.rowModel.getRow(e.rowIndex),n=this.getNextStickyPosition(o,!0);return n||{rowIndex:t-1,rowPinned:s}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.columnModel.getAllDisplayedColumns();let s=e.rowIndex,r=e.rowPinned,o=this.columnModel.getDisplayedColAfter(e.column);if(!o){o=t[0];const n=this.getRowBelow(e);if(Se(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;s=n?n.rowIndex:null,r=n?n.rowPinned:null}return{rowIndex:s,column:o,rowPinned:r}}getNextTabbedCellBackwards(e){const t=this.columnModel.getAllDisplayedColumns();let s=e.rowIndex,r=e.rowPinned,o=this.columnModel.getDisplayedColBefore(e.column);if(!o){o=Je(t);const n=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Se(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;s=n?n.rowIndex:null,r=n?n.rowPinned:null}return{rowIndex:s,column:o,rowPinned:r}}};g([T("columnModel")],Ll.prototype,"columnModel",2);g([T("rowModel")],Ll.prototype,"rowModel",2);g([T("rowRenderer")],Ll.prototype,"rowRenderer",2);g([T("pinnedRowModel")],Ll.prototype,"pinnedRowModel",2);g([T("paginationProxy")],Ll.prototype,"paginationProxy",2);Ll=g([te("cellNavigationService")],Ll);var tu=class extends W{constructor(){super(...arguments),this.consuming=!1}setBeans(e){this.logger=e.create("AlignedGridsService")}getAlignedGridApis(){var e;let t=(e=this.gridOptionsService.get("alignedGrids"))!=null?e:[];const s=typeof t=="function";typeof t=="function"&&(t=t());const r=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return t.map(n=>{var l;if(!n){fa("alignedGrids contains an undefined option."),s||fa(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),fa(r());return}if(n instanceof ke)return n;const a=n;return"current"in a?(l=a.current)==null?void 0:l.api:(a.api||fa(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${r()}`),a.api)}).filter(n=>!!n&&!n.isDestroyed())}init(){this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{const s=t.__getAlignedGridService();e(s)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent(t=>{t.onColumnEvent(e)})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent(t=>{t.onScrollEvent(e)})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){const t=[];return e.columns?e.columns.forEach(s=>{t.push(s)}):e.column&&t.push(e.column),t}getColumnIds(e){const t=[];return e.columns?e.columns.forEach(s=>{t.push(s.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case w.EVENT_COLUMN_MOVED:case w.EVENT_COLUMN_VISIBLE:case w.EVENT_COLUMN_PINNED:case w.EVENT_COLUMN_RESIZED:const t=e;this.processColumnEvent(t);break;case w.EVENT_COLUMN_GROUP_OPENED:const s=e;this.processGroupOpenedEvent(s);break;case w.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){e.columnGroups.forEach(t=>{let s=null;if(t){const r=t.getGroupId();s=this.columnModel.getProvidedColumnGroup(r)}t&&!s||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+t.isExpanded()),this.columnModel.setColumnGroupOpened(s,t.isExpanded(),"alignedGridChanged"))})}processColumnEvent(e){var t;const s=e.column;let r=null;if(s&&(r=this.columnModel.getPrimaryColumn(s.getColId())),s&&!r)return;const o=this.getMasterColumns(e);switch(e.type){case w.EVENT_COLUMN_MOVED:{const d=e,h=e.api.getColumnState().map(p=>({colId:p.colId}));this.columnModel.applyColumnState({state:h,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} toIndex = ${d.toIndex}`)}break;case w.EVENT_COLUMN_VISIBLE:{const d=e,h=e.api.getColumnState().map(p=>({colId:p.colId,hide:p.hide}));this.columnModel.applyColumnState({state:h},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} visible = ${d.visible}`)}break;case w.EVENT_COLUMN_PINNED:{const d=e,h=e.api.getColumnState().map(p=>({colId:p.colId,pinned:p.pinned}));this.columnModel.applyColumnState({state:h},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} pinned = ${d.pinned}`)}break;case w.EVENT_COLUMN_RESIZED:const a=e,u={};o.forEach(d=>{this.logger.log(`onColumnEvent-> processing ${e.type} actualWidth = ${d.getActualWidth()}`),u[d.getId()]={key:d.getColId(),newWidth:d.getActualWidth()}}),(t=a.flexColumns)==null||t.forEach(d=>{u[d.getId()]&&delete u[d.getId()]}),this.columnModel.setColumnWidths(Object.values(u),!1,a.finished,"alignedGridChanged");break}const l=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(a=>{a.setGridOption("alwaysShowVerticalScroll",l)})}};g([T("columnModel")],tu.prototype,"columnModel",2);g([T("ctrlsService")],tu.prototype,"ctrlsService",2);g([io(0,Fr("loggerFactory"))],tu.prototype,"setBeans",1);g([z],tu.prototype,"init",1);tu=g([te("alignedGridsService")],tu);var iu=class extends W{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gridOptionsService.get("rowSelection"),this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,w.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(e){var t;const{newValue:s,clearSelection:r,suppressFinishActions:o,rangeSelect:n,nodes:l,event:a,source:u="api"}=e;if(l.length===0)return 0;if(l.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const d=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=l.map(p=>p.footer?p.sibling:p);if(n){if(l.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let p=null;if(u==="checkboxSelected"&&s===!1&&this.lastRowNode&&(this.lastRowNode.id?p=this.lastRowNode:this.lastRowNode=null),p==null&&(p=this.getLastSelectedNode()),p){const m=c[0];if(m!==p&&this.isMultiselect())return this.selectRange(m,p,s,u)}}this.lastRowNode=s?null:c[0];let h=0;for(let p=0;p<c.length;p++){const m=c[p];d&&m.group||m.selectThisNode(s,a,u)&&h++,this.groupSelectsChildren&&((t=m.childrenAfterGroup)!=null&&t.length)&&(h+=this.selectChildren(m,s,d,u))}if(!o&&(s&&(r||!this.isMultiselect())&&(h+=this.clearOtherNodes(c[0],u)),h>0)){this.updateGroupsFromChildrenSelections(u);const m={type:w.EVENT_SELECTION_CHANGED,source:u};this.eventService.dispatchEvent(m)}return h}selectRange(e,t,s=!0,r){const o=this.rowModel.getNodesInRangeForSelection(e,t);let n=0;o.forEach(a=>{if(a.group&&this.groupSelectsChildren)return;a.selectThisNode(s,void 0,r)&&n++}),this.updateGroupsFromChildrenSelections(r);const l={type:w.EVENT_SELECTION_CHANGED,source:r};return this.eventService.dispatchEvent(l),n}selectChildren(e,t,s,r){const o=s?e.childrenAfterAggFilter:e.childrenAfterGroup;return Se(o)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:s,source:r,nodes:o})}getLastSelectedNode(){const e=Array.from(this.selectedNodes.keys());if(e.length==0)return null;const t=this.selectedNodes.get(Je(e));return t||null}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((s,r)=>{s&&e(s)&&t.set(r,s)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;const r=this.rowModel.getRootNode();t||(t=new MS(!0,r),t.setInactive());let o=!1;return t.forEachChangedNodeDepthFirst(n=>{if(n!==r){const l=n.calculateSelectedFromChildren();o=n.selectThisNode(l===null?!1:l,void 0,e)||o}}),o}clearOtherNodes(e,t){const s=new Map;let r=0;return this.selectedNodes.forEach(o=>{if(o&&o.id!==e.id){const n=this.selectedNodes.get(o.id);r+=n.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&o.parent&&s.set(o.parent.id,o.parent)}}),s.forEach(o=>{const n=o.calculateSelectedFromChildren();o.selectThisNode(n===null?!1:n,void 0,t)}),r}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(V(t)&&e.id!==t.id&&t){const r=t.id;this.selectedNodes.get(r)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();if(this.resetNodes(),t){const s={type:w.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(s)}}resetNodes(){var e;(e=this.selectedNodes)==null||e.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const s=[];function r(o){for(let n=0,l=o.length;n<l;n++){const a=o[n];if(a.isSelected())s.push(a);else{const u=a;u.group&&u.children&&r(u.children)}}}return r(t),s}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=a=>a.selectThisNode(!1,void 0,r),s=this.rowModel.getType()==="clientSide",{source:r,justFiltered:o,justCurrentPage:n}=e;if(n||o){if(!s){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(o,n).forEach(t)}else this.selectedNodes.forEach(a=>{a&&t(a)}),this.reset(r);s&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(r);const l={type:w.EVENT_SELECTION_CHANGED,source:r};this.eventService.dispatchEvent(l)}getSelectedCounts(e,t){let s=0,r=0;const o=n=>{this.groupSelectsChildren&&n.group||(n.isSelected()?s++:n.selectable&&r++)};return this.getNodesToSelect(e,t).forEach(o),{selectedCount:s,notSelectedCount:r}}getSelectAllState(e,t){const{selectedCount:s,notSelectedCount:r}=this.getSelectedCounts(e,t);return s===0&&r===0?!1:s>0&&r>0?null:s>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(s=>s.selectable).length>0}getNodesToSelect(e=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const s=[];if(t)return this.paginationProxy.forEachNodeOnPage(o=>{if(!o.group){s.push(o);return}if(!o.expanded){const n=l=>{var a;s.push(l),(a=l.childrenAfterFilter)!=null&&a.length&&l.childrenAfterFilter.forEach(n)};n(o);return}this.groupSelectsChildren||s.push(o)}),s;const r=this.rowModel;return e?(r.forEachNodeAfterFilter(o=>{s.push(o)}),s):(r.forEachNode(o=>{s.push(o)}),s)}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:t,justFiltered:s,justCurrentPage:r}=e,o=l=>l.selectThisNode(!0,void 0,t);this.getNodesToSelect(s,r).forEach(o),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t);const n={type:w.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(n)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t!=null&&t.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;const s=new Set(e),r=[];this.rowModel.forEachNode(o=>{s.has(o.id)&&r.push(o)}),this.setNodesSelected({newValue:!0,nodes:r,source:t})}};g([T("rowModel")],iu.prototype,"rowModel",2);g([T("paginationProxy")],iu.prototype,"paginationProxy",2);g([z],iu.prototype,"init",1);iu=g([te("selectionService")],iu);var Sc=class{constructor(e){this.viaApi=(t,...s)=>(Ce(`Since v31, 'columnApi.${t}' is deprecated and moved to 'api.${t}'.`),this.api[t](...s)),this.api=e}sizeColumnsToFit(e){this.viaApi("sizeColumnsToFit",e)}setColumnGroupOpened(e,t){this.viaApi("setColumnGroupOpened",e,t)}getColumnGroup(e,t){return this.viaApi("getColumnGroup",e,t)}getProvidedColumnGroup(e){return this.viaApi("getProvidedColumnGroup",e)}getDisplayNameForColumn(e,t){return this.viaApi("getDisplayNameForColumn",e,t)}getDisplayNameForColumnGroup(e,t){return this.viaApi("getDisplayNameForColumnGroup",e,t)}getColumn(e){return this.viaApi("getColumn",e)}getColumns(){return this.viaApi("getColumns")}applyColumnState(e){return this.viaApi("applyColumnState",e)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(e){this.viaApi("setColumnGroupState",e)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(e){return this.viaApi("getDisplayedColAfter",e)}getDisplayedColBefore(e){return this.viaApi("getDisplayedColBefore",e)}setColumnVisible(e,t){this.viaApi("setColumnVisible",e,t)}setColumnsVisible(e,t){this.viaApi("setColumnsVisible",e,t)}setColumnPinned(e,t){this.viaApi("setColumnPinned",e,t)}setColumnsPinned(e,t){this.viaApi("setColumnsPinned",e,t)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(e,t){this.viaApi("moveColumn",e,t)}moveColumnByIndex(e,t){this.viaApi("moveColumnByIndex",e,t)}moveColumns(e,t){this.viaApi("moveColumns",e,t)}moveRowGroupColumn(e,t){this.viaApi("moveRowGroupColumn",e,t)}setColumnAggFunc(e,t){this.viaApi("setColumnAggFunc",e,t)}setColumnWidth(e,t,s=!0,r){this.viaApi("setColumnWidth",e,t,s,r)}setColumnWidths(e,t=!0,s){this.viaApi("setColumnWidths",e,t,s)}setPivotMode(e){this.viaApi("setPivotMode",e)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(e,t){return this.viaApi("getPivotResultColumn",e,t)}setValueColumns(e){this.viaApi("setValueColumns",e)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(e){this.viaApi("removeValueColumn",e)}removeValueColumns(e){this.viaApi("removeValueColumns",e)}addValueColumn(e){this.viaApi("addValueColumn",e)}addValueColumns(e){this.viaApi("addValueColumns",e)}setRowGroupColumns(e){this.viaApi("setRowGroupColumns",e)}removeRowGroupColumn(e){this.viaApi("removeRowGroupColumn",e)}removeRowGroupColumns(e){this.viaApi("removeRowGroupColumns",e)}addRowGroupColumn(e){this.viaApi("addRowGroupColumn",e)}addRowGroupColumns(e){this.viaApi("addRowGroupColumns",e)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(e){this.viaApi("setPivotColumns",e)}removePivotColumn(e){this.viaApi("removePivotColumn",e)}removePivotColumns(e){this.viaApi("removePivotColumns",e)}addPivotColumn(e){this.viaApi("addPivotColumn",e)}addPivotColumns(e){this.viaApi("addPivotColumns",e)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(e,t){return this.viaApi("autoSizeColumn",e,t)}autoSizeColumns(e,t){this.viaApi("autoSizeColumns",e,t)}autoSizeAllColumns(e){this.viaApi("autoSizeAllColumns",e)}setPivotResultColumns(e){this.viaApi("setPivotResultColumns",e)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};g([T("gridApi")],Sc.prototype,"api",2);Sc=g([te("columnApi")],Sc);var Il=class extends W{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.get("enableCellExpressions"),this.isTreeData=this.gridOptionsService.get("treeData"),this.initialised=!0;const e=s=>this.callColumnCellValueChangedHandler(s),t=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(w.EVENT_CELL_VALUE_CHANGED,e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener(w.EVENT_CELL_VALUE_CHANGED,e,t)),this.addManagedPropertyListener("treeData",s=>this.isTreeData=s.currentValue)}getValue(e,t,s=!1,r=!1){if(this.initialised||this.init(),!t)return;const o=e.getColDef(),n=o.field,l=e.getColId(),a=t.data;let u;const d=t.groupData&&t.groupData[l]!==void 0,c=!r&&t.aggData&&t.aggData[l]!==void 0,h=this.isSsrm&&r&&!!e.getColDef().aggFunc,p=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(s&&o.filterValueGetter?u=this.executeFilterValueGetter(o.filterValueGetter,a,e,t):this.isTreeData&&c?u=t.aggData[l]:this.isTreeData&&o.valueGetter?u=this.executeValueGetter(o.valueGetter,a,e,t):this.isTreeData&&n&&a?u=xd(a,n,e.isFieldContainsDots()):d?u=t.groupData[l]:c?u=t.aggData[l]:o.valueGetter?u=this.executeValueGetter(o.valueGetter,a,e,t):p?u=xd(a,t.field,e.isFieldContainsDots()):n&&a&&!h&&(u=xd(a,n,e.isFieldContainsDots())),this.cellExpressions&&typeof u=="string"&&u.indexOf("=")===0){const m=u.substring(1);u=this.executeValueGetter(m,a,e,t)}if(u==null){const m=this.getOpenedGroup(t,e);if(m!=null)return m}return u}getOpenedGroup(e,t){if(!this.gridOptionsService.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const r=t.getColDef().showRowGroup;let o=e.parent;for(;o!=null;){if(o.rowGroupColumn&&(r===!0||r===o.rowGroupColumn.getColId()))return o.key;o=o.parent}}setValue(e,t,s,r){const o=this.columnModel.getPrimaryColumn(t);if(!e||!o)return!1;Se(e.data)&&(e.data={});const{field:n,valueSetter:l}=o.getColDef();if(Se(n)&&Se(l))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(o,s))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const a=this.gridOptionsService.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(o,e),newValue:s,colDef:o.getColDef(),column:o});a.newValue=s;let u;if(V(l)?typeof l=="function"?u=l(a):u=this.expressionService.evaluate(l,a):u=this.setValueUsingField(e.data,n,s,o.isFieldContainsDots()),u===void 0&&(u=!0),!u)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(o,e);const d={type:w.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,api:a.api,columnApi:a.columnApi,colDef:a.colDef,context:a.context,data:e.data,node:e,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:r};return this.eventService.dispatchEvent(d),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})})}setValueUsingField(e,t,s,r){if(!t)return!1;let o=!1;if(!r)o=e[t]===s,o||(e[t]=s);else{const n=t.split(".");let l=e;for(;n.length>0&&l;){const a=n.shift();n.length===0?(o=l[a]===s,o||(l[a]=s)):l=l[a]}}return!o}executeFilterValueGetter(e,t,s,r){const o=this.gridOptionsService.addGridCommonParams({data:t,node:r,column:s,colDef:s.getColDef(),getValue:this.getValueCallback.bind(this,r)});return typeof e=="function"?e(o):this.expressionService.evaluate(e,o)}executeValueGetter(e,t,s,r){const o=s.getColId(),n=this.valueCache.getValue(r,o);if(n!==void 0)return n;const l=this.gridOptionsService.addGridCommonParams({data:t,node:r,column:s,colDef:s.getColDef(),getValue:this.getValueCallback.bind(this,r)});let a;return typeof e=="function"?a=e(l):a=this.expressionService.evaluate(e,l),this.valueCache.setValue(r,o,a),a}getValueCallback(e,t){const s=this.columnModel.getPrimaryColumn(t);return s?this.getValue(s,e):null}getKeyForNode(e,t){const s=this.getValue(e,t),r=e.getColDef().keyCreator;let o=s;if(r){const n=this.gridOptionsService.addGridCommonParams({value:s,colDef:e.getColDef(),column:e,node:t,data:t.data});o=r(n)}return typeof o=="string"||o==null||(o=String(o),o==="[object Object]"&&Ce("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),o}};g([T("expressionService")],Il.prototype,"expressionService",2);g([T("columnModel")],Il.prototype,"columnModel",2);g([T("valueCache")],Il.prototype,"valueCache",2);g([T("dataTypeService")],Il.prototype,"dataTypeService",2);g([z],Il.prototype,"init",1);Il=g([te("valueService")],Il);var KC=class extends W{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(e){this.logger=e.create("ExpressionService")}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);console.error("AG Grid: value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup)}catch(s){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",t),console.log("Exception = "+s),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),s=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=s,s}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}};g([io(0,Fr("loggerFactory"))],KC.prototype,"setBeans",1);KC=g([te("expressionService")],KC);var TR=class extends W{constructor(){super(...arguments),this.templateCache={},this.waitingCallbacks={}}getTemplate(e,t){const s=this.templateCache[e];if(s)return s;let r=this.waitingCallbacks[e];const o=this;if(!r){r=[],this.waitingCallbacks[e]=r;const n=new XMLHttpRequest;n.onload=function(){o.handleHttpResult(this,e)},n.open("GET",e),n.send()}return t&&r.push(t),null}handleHttpResult(e,t){if(e.status!==200||e.response===null){console.warn(`AG Grid: Unable to get template error ${e.status} - ${t}`);return}this.templateCache[t]=e.response||e.responseText;const s=this.waitingCallbacks[t];for(let r=0;r<s.length;r++){const o=s[r];o()}}};TR=g([te("templateService")],TR);var jC=class extends W{setBeans(e){this.logging=e.get("debug")}create(e){return new Sb(e,this.isLogging.bind(this))}isLogging(){return this.logging}};g([io(0,Fr("gridOptionsService"))],jC.prototype,"setBeans",1);jC=g([te("loggerFactory")],jC);var Sb=class{constructor(e,t){this.name=e,this.isLoggingFunc=t}isLogging(){return this.isLoggingFunc()}log(e){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+e)}},Kl=class extends W{setComp(e,t,s){this.view=e,this.eGridHostDiv=t,this.eGui=s,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:o=>o===1||o===0,getIconName:()=>Ae.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new TS(this.view)),this.addRtlSupport();const r=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>r()),this.ctrlsService.registerGridCtrl(this)}isDetailGrid(){var e;const t=this.focusService.findTabbableParent(this.getGui());return((e=t==null?void 0:t.getAttribute("row-id"))==null?void 0:e.startsWith("detail"))||!1}showDropZones(){return et.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return et.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return et.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return et.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){const e={type:w.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){const e=this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.gridOptionsService.getDocument(),s=this.view.getFocusableContainers(),o=s.findIndex(n=>n.contains(t.activeElement))+(e?-1:1);return o<=0||o>=s.length?!1:this.focusService.focusInto(s[o])}focusInnerElement(e){const t=this.view.getFocusableContainers(),s=this.columnModel.getAllDisplayedColumns();if(e){if(t.length>1)return this.focusService.focusInto(Je(t),!0);const r=Je(s);if(this.focusService.focusGridView(r,!0))return!0}if(this.gridOptionsService.get("headerHeight")===0||this.gridOptionsService.get("suppressHeaderFocus")){if(this.focusService.focusGridView(s[0]))return!0;for(let r=1;r<t.length;r++)if(this.focusService.focusInto(t[r]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}};g([T("focusService")],Kl.prototype,"focusService",2);g([T("resizeObserverService")],Kl.prototype,"resizeObserverService",2);g([T("columnModel")],Kl.prototype,"columnModel",2);g([T("ctrlsService")],Kl.prototype,"ctrlsService",2);g([T("mouseEventService")],Kl.prototype,"mouseEventService",2);g([T("dragAndDropService")],Kl.prototype,"dragAndDropService",2);var pf=class extends uf{constructor(e){super(),this.eGridDiv=e}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:s=>this.addCssClass(s),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:s=>{this.getGui().style.userSelect=s??"",this.getGui().style.webkitUserSelect=s??""},setCursor:s=>{this.getGui().style.cursor=s??""}};this.ctrl=this.createManagedBean(new Kl);const t=this.createTemplate();this.setTemplate(t),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>this.ctrl.focusInnerElement(s),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(e,t){const s=this.eRootWrapperBody.classList;s.toggle("ag-layout-auto-height",t.autoHeight),s.toggle("ag-layout-normal",t.normal),s.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(){const e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",t=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",s=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",r=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${e}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${t}
                </div>
                ${s}
                <ag-pagination></ag-pagination>
                ${r}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(t=>dr(t))}};g([T("loggerFactory")],pf.prototype,"loggerFactory",2);g([Y("gridBody")],pf.prototype,"gridBodyComp",2);g([Y("sideBar")],pf.prototype,"sideBarComp",2);g([Y("rootWrapperBody")],pf.prototype,"eRootWrapperBody",2);g([z],pf.prototype,"postConstruct",1);var su=class extends W{progressSort(e,t,s){const r=this.getNextSortDirection(e);this.setSortForColumn(e,r,t,s)}setSortForColumn(e,t,s,r){t!=="asc"&&t!=="desc"&&(t=null);const o=this.gridOptionsService.isColumnsSortingCoupledToGroup();let n=[e];if(o&&e.getColDef().showRowGroup){const u=this.columnModel.getSourceColumnsForGroupColumn(e),d=u==null?void 0:u.filter(c=>c.isSortable());d&&(n=[e,...d])}n.forEach(u=>u.setSort(t,r));const l=(s||this.gridOptionsService.get("alwaysMultiSort"))&&!this.gridOptionsService.get("suppressMultiSort"),a=[];if(!l){const u=this.clearSortBarTheseColumns(n,r);a.push(...u)}this.updateSortIndex(e),a.push(...n),this.dispatchSortChangedEvents(r,a)}updateSortIndex(e){const t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),s=this.columnModel.getGroupDisplayColumnForGroup(e.getId()),r=t&&s||e,o=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(a=>a.setSortIndex(null));const n=o.filter(a=>t&&a.getColDef().showRowGroup?!1:a!==r);(r.getSort()?[...n,r]:n).forEach((a,u)=>{a.setSortIndex(u)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(s=>!!s.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const s={type:w.EVENT_SORT_CHANGED,source:e};t&&(s.columns=t),this.eventService.dispatchEvent(s)}clearSortBarTheseColumns(e,t){const s=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(r=>{e.includes(r)||(r.getSort()&&s.push(r),r.setSort(void 0,t))}),s}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?t=this.gridOptionsService.get("sortingOrder"):t=su.DEFAULT_SORTING_ORDER,!Array.isArray(t)||t.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${t}`),null;const s=t.indexOf(e.getSort()),r=s<0,o=s==t.length-1;let n;return r||o?n=t[0]:n=t[s+1],su.DEFAULT_SORTING_ORDER.indexOf(n)<0?(console.warn("AG Grid: invalid sort type "+n),null):n}getIndexedSortMap(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(n=>!!n.getSort());if(this.columnModel.isPivotMode()){const n=this.gridOptionsService.isColumnsSortingCoupledToGroup();e=e.filter(l=>{const a=!!l.getAggFunc(),u=!l.isPrimary(),d=n?this.columnModel.getGroupDisplayColumnForGroup(l.getId()):l.getColDef().showRowGroup;return a||u||d})}const t=this.columnModel.getRowGroupColumns().filter(n=>!!n.getSort()),s={};e.forEach((n,l)=>s[n.getId()]=l),e.sort((n,l)=>{const a=n.getSortIndex(),u=l.getSortIndex();if(a!=null&&u!=null)return a-u;if(a==null&&u==null){const d=s[n.getId()],c=s[l.getId()];return d>c?1:-1}else return u==null?-1:1});const r=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!t.length;r&&(e=[...new Set(e.map(n=>{var l;return(l=this.columnModel.getGroupDisplayColumnForGroup(n.getId()))!=null?l:n}))]);const o=new Map;return e.forEach((n,l)=>o.set(n,l)),r&&t.forEach(n=>{const l=this.columnModel.getGroupDisplayColumnForGroup(n.getId());o.set(n,o.get(l))}),o}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[s,r])=>t-r).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),s=!!e.getColDef().showRowGroup;return t&&s}getDisplaySortForColumn(e){const t=this.columnModel.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const r=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,o=r[0].getSort();return r.every(l=>l.getSort()==o)?o:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}};su.DEFAULT_SORTING_ORDER=["asc","desc",null];g([T("columnModel")],su.prototype,"columnModel",2);su=g([te("sortController")],su);var at=class extends W{static addKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",at.toggleKeyboardMode),e.addEventListener("mousedown",at.toggleKeyboardMode))}static removeKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",at.toggleKeyboardMode),e.addEventListener("mousedown",at.toggleKeyboardMode))}static toggleKeyboardMode(e){const t=at.keyboardModeActive,s=e.type==="keydown";s&&(e.ctrlKey||e.metaKey||e.altKey)||t!==s&&(at.keyboardModeActive=s)}static unregisterGridCompController(e){at.removeKeyboardModeEvents(e)}init(){const e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl})}registerKeyboardFocusEvents(){const e=this.gridOptionsService.getDocument();at.addKeyboardModeEvents(e),at.instanceCount++,this.addDestroyFunc(()=>{at.instanceCount--,at.unregisterGridCompController(e)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getGridColumn(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return at.keyboardModeActive}getFocusCellToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(e.activeElement,_a.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(e.activeElement,FS.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let s=e;for(;s;){if(this.gridOptionsService.getDomData(s,t))return!1;s=s.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return this.isCellRestoreFocused(e)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(e){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(){const{rowIndex:e,rowPinned:t,column:s}=this.focusedCellPosition,r={rowIndex:e,rowPinned:t,column:s,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:t});return o&&(r.isFullWidthCell=o.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const e=he({type:w.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){const{column:t,rowIndex:s,rowPinned:r,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:n=!1}=e,l=this.columnModel.getGridColumn(t);if(!l){this.focusedCellPosition=null;return}this.focusedCellPosition=l?{rowIndex:s,rowPinned:Wo(r),column:l}:null;const a=Pt(he({type:w.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:o,preventScrollOnBrowserFocus:n,floating:null});this.eventService.dispatchEvent(a)}isCellFocused(e){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(this.focusedHeaderPosition==null)return!1;const t=e.getColumnGroupChild(),s=e.getRowIndex(),r=e.getPinned(),{column:o,headerRowIndex:n}=this.focusedHeaderPosition;return t===o&&s===n&&r==o.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}focusHeaderPosition(e){if(this.gridOptionsService.get("suppressHeaderFocus"))return!1;const{direction:t,fromTab:s,allowUserOverride:r,event:o,fromCell:n,rowWithoutSpanValue:l}=e;let{headerPosition:a}=e;if(n&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(r){const c=this.getFocusedHeader(),h=this.headerNavigationService.getHeaderRowCount();if(s){const p=this.gridOptionsService.getCallback("tabToNextHeader");p&&(a=p({backwards:t==="Before",previousHeaderPosition:c,nextHeaderPosition:a,headerRowCount:h}))}else{const p=this.gridOptionsService.getCallback("navigateToNextHeader");if(p&&o){const m={key:o.key,previousHeaderPosition:c,nextHeaderPosition:a,headerRowCount:h,event:o};a=p(m)}}}if(!a)return!1;if(a.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(a):this.focusGridView(a.column);this.headerNavigationService.scrollToColumn(a.column,t);const d=this.ctrlsService.getHeaderRowContainerCtrl(a.column.getPinned()).focusHeader(a.headerRowIndex,a.column,o);return d&&(l!=null||n)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(l??-1),d}focusFirstHeader(){let e=this.columnModel.getAllDisplayedColumns()[0];if(!e)return!1;e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){const t=this.headerNavigationService.getHeaderRowCount()-1,s=Je(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:s},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===Wo(t)}findFocusableElements(e,t,s=!1){const r=A_;let o=HD;t&&(o+=", "+t),s&&(o+=', [tabindex="-1"]');const n=Array.prototype.slice.apply(e.querySelectorAll(r)).filter(u=>dr(u)),l=Array.prototype.slice.apply(e.querySelectorAll(o));return l.length?((u,d)=>u.filter(c=>d.indexOf(c)===-1))(n,l):n}focusInto(e,t=!1,s=!1){const r=this.findFocusableElements(e,null,s),o=t?Je(r):r[0];return o?(o.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const s=this.findFocusableElements(e),r=s.indexOf(t);if(r===-1)return null;let o=-1;for(let n=r-1;n>=0;n--)if(s[n].classList.contains("ag-tab-guard-top")){o=n;break}return o<=0?null:s[o-1]}findNextFocusableElement(e=this.eGridDiv,t,s){const r=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),n=this.gridOptionsService.getDocument().activeElement;let l;t?l=r.findIndex(u=>u.contains(n)):l=r.indexOf(n);const a=l+(s?-1:1);return a<0||a>=r.length?null:r[a]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const s=e.querySelectorAll(`.${Hl.FOCUS_MANAGED_CLASS}`);if(!s.length)return!1;for(let r=0;r<s.length;r++)if(s[r].contains(t))return!0;return!1}findTabbableParent(e,t=5){let s=0;for(;e&&VC(e)===null&&++s<=t;)e=e.parentElement;return VC(e)===null?null:e}focusGridView(e,t){if(this.gridOptionsService.get("suppressCellFocus"))return t?this.gridOptionsService.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const s=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!s)return!1;const{rowIndex:r,rowPinned:o}=s,n=this.getFocusedHeader();if(!e&&n&&(e=n.column),r==null||!e)return!1;if(this.navigationService.ensureCellVisible({rowIndex:r,column:e,rowPinned:o}),this.setFocusedCell({rowIndex:r,column:e,rowPinned:Wo(o),forceBrowserFocus:!0}),this.rangeService){const l={rowIndex:r,rowPinned:o,column:e};this.rangeService.setRangeToCell(l)}return!0}focusNextGridCoreContainer(e,t=!1){return!t&&this.gridCtrl.focusNextInnerContainer(e)?!0:((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){return this.advancedFilterFocusColumn=e==null?void 0:e.column,this.advancedFilterService.getCtrl().focusHeaderComp()}focusNextFromAdvancedFilter(e,t){var s,r;const o=(r=t?void 0:this.advancedFilterFocusColumn)!=null?r:(s=this.columnModel.getAllDisplayedColumns())==null?void 0:s[0];return e?this.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(o)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};at.keyboardModeActive=!1;at.instanceCount=0;g([T("eGridDiv")],at.prototype,"eGridDiv",2);g([T("columnModel")],at.prototype,"columnModel",2);g([T("headerNavigationService")],at.prototype,"headerNavigationService",2);g([T("headerPositionUtils")],at.prototype,"headerPositionUtils",2);g([T("rowRenderer")],at.prototype,"rowRenderer",2);g([T("rowPositionUtils")],at.prototype,"rowPositionUtils",2);g([T("cellPositionUtils")],at.prototype,"cellPositionUtils",2);g([qe("rangeService")],at.prototype,"rangeService",2);g([T("navigationService")],at.prototype,"navigationService",2);g([T("ctrlsService")],at.prototype,"ctrlsService",2);g([T("filterManager")],at.prototype,"filterManager",2);g([qe("advancedFilterService")],at.prototype,"advancedFilterService",2);g([z],at.prototype,"init",1);at=g([te("focusService")],at);var DR=class extends W{setMouseOver(e){this.selectedColumns=e;const t={type:w.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;const e={type:w.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}};DR=g([te("columnHoverService")],DR);var $p=class extends W{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gridOptionsService.get("suppressColumnMoveAnimation")||this.gridOptionsService.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e();return}const t=s=>{for(;s.length;){const r=s.pop();r&&r()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>t(this.executeNextFuncs),0),window.setTimeout(()=>{t(this.executeLaterFuncs),e()},200)})}};g([T("ctrlsService")],$p.prototype,"ctrlsService",2);g([z],$p.prototype,"postConstruct",1);$p=g([te("columnAnimationService")],$p);var wc=class extends W{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCon=e.centerRowContainerCtrl,this.addManagedListener(this.eventService,w.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gridOptionsService.get("paginationAutoPageSize")||this.centerRowContainerCon==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const s=this.gridOptionsService.getRowHeightAsNumber(),r=Math.floor(e/s);this.paginationProxy.setPageSize(r,"autoCalculated")};this.isBodyRendered?os(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};g([T("ctrlsService")],wc.prototype,"ctrlsService",2);g([T("paginationProxy")],wc.prototype,"paginationProxy",2);g([z],wc.prototype,"postConstruct",1);wc=g([te("paginationAutoPageSizeService")],wc);var YC=class extends W{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gridOptionsService.get("valueCache"),this.neverExpires=this.gridOptionsService.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,s){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=s)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}};g([z],YC.prototype,"init",1);YC=g([te("valueCache")],YC);var Q$="paste",yc=class extends W{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,w.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(e){e.source!==Q$&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gridOptionsService.get("suppressChangeDetection"))return;const s=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const r=this.gridOptionsService.get("aggregateOnlyChangedColumns"),o=new MS(r,this.clientSideRowModel.getRootNode());o.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(o),o.forEachChangedNodeDepthFirst(n=>{s.push(n)})}this.rowRenderer.refreshCells({rowNodes:s})}};g([T("rowModel")],yc.prototype,"rowModel",2);g([T("rowRenderer")],yc.prototype,"rowRenderer",2);g([z],yc.prototype,"init",1);yc=g([te("changeDetectionService")],yc);var qC=class extends W{adaptFunction(e,t){const s=this.componentMetadataProvider.retrieve(e);return s&&s.functionAdapter?s.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(r){return!1}getGui(){return this.eGui}init(r){const o=e(r),n=typeof o;if(n==="string"||n==="number"||n==="boolean"){this.eGui=Os("<span>"+o+"</span>");return}if(o==null){this.eGui=Os("<span></span>");return}this.eGui=o}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}};g([T("componentMetadataProvider")],qC.prototype,"componentMetadataProvider",2);qC=g([te("agComponentUtils")],qC);var Kp=class extends W{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}};g([T("agComponentUtils")],Kp.prototype,"agComponentUtils",2);g([z],Kp.prototype,"postConstruct",1);Kp=g([te("componentMetadataProvider")],Kp);var X$=25,KF=10,hy=8,J$=4,py=4,gy=6,Z$=16,jF=14,fy=8,eK={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:J$*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:hy*7,headerCellMinWidth:48,listItemHeight:hy*4,rowHeight:hy*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:py*8,headerCellMinWidth:24,listItemHeight:py*6,rowHeight:py*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:gy*8,headerCellMinWidth:36,listItemHeight:gy*4,rowHeight:gy*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:jF+fy*4.25,headerCellMinWidth:36,listItemHeight:Z$+fy,rowHeight:jF+fy*3.5,chartMenuPanelWidth:260}},YF={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},jp=class extends W{constructor(){super(...arguments),this.calculatedSizes={}}postConstruct(){var e;const t=(e=this.getTheme().el)!=null?e:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){const e={type:w.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(e)}getSassVariable(e){const{themeFamily:t,el:s}=this.getTheme();if(!t||t.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[t]||(this.calculatedSizes[t]={});const r=this.calculatedSizes[t][e];return r??(this.calculatedSizes[t][e]=this.calculateValueForSassProperty(e,t,s),this.calculatedSizes[t][e])}calculateValueForSassProperty(e,t,s){const r="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),o=eK[r][e],n=this.gridOptionsService.getDocument();if(s||(s=this.eGridDiv),!YF[e])return o;const l=YF[e],a=n.createElement("div"),u=Array.from(s.classList);a.classList.add(t,...u),a.style.position="absolute";const d=l.reduce((h,p)=>{const m=n.createElement("div");return m.style.position="static",m.classList.add(p),h.appendChild(m),m},a);let c=0;if(n.body){n.body.appendChild(a);const h=e.toLowerCase().indexOf("height")!==-1?"height":"width";c=parseInt(window.getComputedStyle(d)[h],10),n.body.removeChild(a)}return c||o}isThemeDark(){const{theme:e}=this.getTheme();return!!e&&e.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){const e=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let t=this.eGridDiv,s=null,r=[];for(;t;)if(s=e.exec(t.className),!s)t=t.parentElement||void 0;else{const n=t.className.match(e);n&&(r=n);break}if(!s)return{allThemes:r};const o=s[0];return{theme:o,el:t,themeFamily:o.replace(/-dark$/,""),allThemes:r}}getFromTheme(e,t){var s;return(s=this.getSassVariable(t))!=null?s:e}getDefaultRowHeight(){return this.getFromTheme(X$,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gridOptionsService.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const s=`${t}px`;return e!=s?(this.eGridDiv.style.setProperty("--ag-line-height",s),t):e!=""?parseFloat(e):-1}getMinColWidth(){const e=this.getFromTheme(null,"headerCellMinWidth");return V(e)?Math.max(e,KF):KF}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};g([T("eGridDiv")],jp.prototype,"eGridDiv",2);g([z],jp.prototype,"postConstruct",1);jp=g([te("environment")],jp);var Ec=class extends W{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(e){this.logger=e.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=S_(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,s=this.getUiBodyHeight();(t!==this.scrollY||s!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=s,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:w.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),s=e/t;return this.maxScrollY*s}};g([T("ctrlsService")],Ec.prototype,"ctrlsService",2);g([io(0,Fr("loggerFactory"))],Ec.prototype,"agWire",1);g([z],Ec.prototype,"postConstruct",1);Ec=g([te("rowContainerHeightService")],Ec);var Rc=class extends W{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const t=!!this.gridOptionsService.get("rowSelection"),s=this.gridOptionsService.get("isRowSelectable");if(!t||!s)return;const r=this.gridOptionsService.get("groupSelectsChildren"),o=this.rowModel.getType()==="clientSide"&&r,n=[],l=a=>{if(e&&!a.group)return;if(o&&a.group){const d=a.childrenAfterGroup.some(c=>c.selectable===!0);a.setRowSelectable(d,!0);return}const u=s?s(a):!0;a.setRowSelectable(u,!0),!u&&a.isSelected()&&n.push(a)};if(o){const a=this.rowModel;new MS(!1,a.getRootNode()).forEachChangedNodeDepthFirst(l,!0,!0)}else this.rowModel.forEachNode(l);n.length&&this.selectionService.setNodesSelected({nodes:n,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof iu&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};g([T("rowModel")],Rc.prototype,"rowModel",2);g([T("selectionService")],Rc.prototype,"selectionService",2);g([z],Rc.prototype,"init",1);Rc=g([te("selectableService")],Rc);var ks=class extends De{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const e=this.gridOptionsService.get("enableRtl");this.setTemplate(this.getTemplate());const{btFirst:t,btPrevious:s,btNext:r,btLast:o,pageSizeComp:n}=this;this.activateTabIndex([t,s,r,o]),t.insertAdjacentElement("afterbegin",_t(e?"last":"first",this.gridOptionsService)),s.insertAdjacentElement("afterbegin",_t(e?"next":"previous",this.gridOptionsService)),r.insertAdjacentElement("afterbegin",_t(e?"previous":"next",this.gridOptionsService)),o.insertAdjacentElement("afterbegin",_t(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){const t=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:s}=e;this.addManagedListener(t,"click",s),this.addManagedListener(t,"keydown",r=>{(r.key===x.ENTER||r.key===x.SPACE)&&(r.preventDefault(),s())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const e=this.paginationProxy.getTotalPages()>0,t=this.paginationProxy.getCurrentPage(),s=e?t+1:0;this.lbCurrent.textContent=this.formatNumber(s)}formatNumber(e){const t=this.gridOptionsService.getCallback("paginationNumberFormatter");if(t)return t({value:e});const s=this.localeService.getLocaleTextFunc(),r=s("thousandSeparator",","),o=s("decimalSeparator",".");return VD(e,r,o)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),s=e("to","to"),r=e("of","of"),o=e("firstPage","First Page"),n=e("previousPage","Previous Page"),l=e("nextPage","Next Page"),a=e("lastPage","Last Page"),u=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${u}">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${u}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${u}-to">${s}</span>
                    <span id="ag-${u}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${u}-of">${r}</span>
                    <span id="ag-${u}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${u}-start-page">${t}</span>
                        <span id="ag-${u}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${u}-of-page">${r}</span>
                        <span id="ag-${u}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${l}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const r=this.isZeroPagesToDisplay(),o=e===s-1;this.nextButtonDisabled=o||r,this.lastButtonDisabled=!t||r||e===s-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){FD(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.getPageSize(),s=this.paginationProxy.isLastPageFound(),r=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let o,n;if(this.isZeroPagesToDisplay()?o=n=0:(o=t*e+1,n=o+t-1,s&&n>r&&(n=r)),this.lbFirstRowOnPage.textContent=this.formatNumber(o),this.rowNodeBlockLoader.isLoading()){const l=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=l("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(n)}isZeroPagesToDisplay(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return e&&t===0}setTotalLabels(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),s=e?this.paginationProxy.getMasterRowCount():null;if(s===1){const r=this.paginationProxy.getRow(0);if(r&&r.group&&!(r.groupData||r.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(s);else{const r=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=r,this.lbRecordCount.innerHTML=r}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};g([T("paginationProxy")],ks.prototype,"paginationProxy",2);g([T("rowNodeBlockLoader")],ks.prototype,"rowNodeBlockLoader",2);g([Y("btFirst")],ks.prototype,"btFirst",2);g([Y("btPrevious")],ks.prototype,"btPrevious",2);g([Y("btNext")],ks.prototype,"btNext",2);g([Y("btLast")],ks.prototype,"btLast",2);g([Y("lbRecordCount")],ks.prototype,"lbRecordCount",2);g([Y("lbFirstRowOnPage")],ks.prototype,"lbFirstRowOnPage",2);g([Y("lbLastRowOnPage")],ks.prototype,"lbLastRowOnPage",2);g([Y("lbCurrent")],ks.prototype,"lbCurrent",2);g([Y("lbTotal")],ks.prototype,"lbTotal",2);g([Y("pageSizeComp")],ks.prototype,"pageSizeComp",2);g([z],ks.prototype,"postConstruct",1);var gf=class iG extends De{constructor(){super(iG.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(e,t){const s=this.eOverlayWrapper.classList;s.toggle("ag-layout-auto-height",t.autoHeight),s.toggle("ag-layout-normal",t.normal),s.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new TS(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,s){this.inProgress||(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(r=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(r.getGui()),this.activeOverlay=r,this.updateListenerDestroyFunc=s,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var e;if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(e=this.updateListenerDestroyFunc)==null||e.call(this),oi(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};gf.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`;g([T("overlayService")],gf.prototype,"overlayService",2);g([Y("eOverlayWrapper")],gf.prototype,"eOverlayWrapper",2);g([z],gf.prototype,"postConstruct",1);var tK=gf,Tc=class extends W{getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const s=this.pinnedRowModel.getPinnedBottomRowCount(),r=this.pinnedRowModel.getPinnedTopRowCount();return s?(t="bottom",e=s-1):this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageLastRow()):r&&(t="top",e=r-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(V(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}rowMax(e){let t;return e.forEach(s=>{(t===void 0||this.before(t,s))&&(t=s)}),t}rowMin(e){let t;return e.forEach(s=>{(t===void 0||this.before(s,t))&&(t=s)}),t}};g([T("rowModel")],Tc.prototype,"rowModel",2);g([T("pinnedRowModel")],Tc.prototype,"pinnedRowModel",2);g([T("paginationProxy")],Tc.prototype,"paginationProxy",2);Tc=g([te("rowPositionUtils")],Tc);var bR=class extends W{createId(e){const{rowIndex:t,rowPinned:s,column:r}=e;return this.createIdFromValues({rowIndex:t,column:r,rowPinned:s})}createIdFromValues(e){const{rowIndex:t,rowPinned:s,column:r}=e;return`${t}.${s??"null"}.${r.getId()}`}equals(e,t){const s=e.column===t.column,r=e.rowPinned===t.rowPinned,o=e.rowIndex===t.rowIndex;return s&&r&&o}};bR=g([te("cellPositionUtils")],bR);var Gh=class{constructor(e){this.cellValueChanges=e}},my=class extends Gh{constructor(e,t,s,r){super(e),this.initialRange=t,this.finalRange=s,this.ranges=r}},sG=class rG{constructor(e){this.actionStack=[],this.maxStackSize=e||rG.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};sG.DEFAULT_STACK_SIZE=10;var qF=sG,Vr=class extends W{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},s=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),r=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(s||r||this.isPasting||this.isRangeInAction))return;const{rowPinned:n,rowIndex:l,column:a,oldValue:u,value:d}=e,c={rowPinned:n,rowIndex:l,columnId:a.getColId(),newValue:d,oldValue:u};this.cellValueChanges.push(c)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gridOptionsService.get("undoRedoCellEditing"))return;const e=this.gridOptionsService.get("undoRedoCellEditingLimit");e<=0||(this.undoStack=new qF(e),this.redoStack=new qF(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,w.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,t=>{t.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){const t={type:w.EVENT_UNDO_STARTED,source:e};this.eventService.dispatchEvent(t);const s=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),r={type:w.EVENT_UNDO_ENDED,source:e,operationPerformed:s};this.eventService.dispatchEvent(r)}redo(e){const t={type:w.EVENT_REDO_STARTED,source:e};this.eventService.dispatchEvent(t);const s=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),r={type:w.EVENT_REDO_ENDED,source:e,operationPerformed:s};this.eventService.dispatchEvent(r)}undoRedo(e,t,s,r,o){if(!e)return!1;const n=e.pop();return!n||!n.cellValueChanges?!1:(this.processAction(n,l=>l[r],o),n instanceof my?this.processRange(n.ranges||[n[s]]):this.processCell(n.cellValueChanges),t.push(n),!0)}processAction(e,t,s){e.cellValueChanges.forEach(r=>{const{rowIndex:o,rowPinned:n,columnId:l}=r,a={rowIndex:o,rowPinned:n},u=this.getRowNode(a);u.displayed&&u.setDataValue(l,t(r),s)})}processRange(e){let t;this.rangeService.removeAllCellRanges(!0),e.forEach((s,r)=>{if(!s)return;const o=s.startRow,n=s.endRow;r===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(t));const l={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:n.rowIndex,rowEndPinned:n.rowPinned,columnStart:s.startColumn,columns:s.columns};this.rangeService.addCellRange(l)})}processCell(e){const t=e[0],{rowIndex:s,rowPinned:r}=t,o={rowIndex:s,rowPinned:r},n=this.getRowNode(o),l={rowPinned:t.rowPinned,rowIndex:n.rowIndex,columnId:t.columnId};this.setLastFocusedCell(l,!!this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:s,columnId:r,rowPinned:o}=e,n=this.gridBodyCtrl.getScrollFeature(),l=this.columnModel.getGridColumn(r);if(!l)return;n.ensureIndexVisible(s),n.ensureColumnVisible(l);const a={rowIndex:s,column:l,rowPinned:o};this.focusService.setFocusedCell(Pt(he({},a),{forceBrowserFocus:!0})),t&&this.rangeService.setRangeToCell(a)}addRowEditingListeners(){this.addManagedListener(this.eventService,w.EVENT_ROW_EDITING_STARTED,e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,w.EVENT_ROW_EDITING_STOPPED,()=>{const e=new Gh(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,w.EVENT_CELL_EDITING_STARTED,e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,w.EVENT_CELL_EDITING_STOPPED,e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const s=new Gh(this.cellValueChanges);this.pushActionsToUndoStack(s)}})}addPasteListeners(){this.addManagedListener(this.eventService,w.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,w.EVENT_PASTE_END,()=>{const e=new Gh(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,w.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,w.EVENT_FILL_END,e=>{const t=new my(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let e;this.rangeService&&this.gridOptionsService.get("enableRangeSelection")?e=new my(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new Gh(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}};g([T("focusService")],Vr.prototype,"focusService",2);g([T("ctrlsService")],Vr.prototype,"ctrlsService",2);g([T("rowModel")],Vr.prototype,"rowModel",2);g([T("pinnedRowModel")],Vr.prototype,"pinnedRowModel",2);g([T("cellPositionUtils")],Vr.prototype,"cellPositionUtils",2);g([T("rowPositionUtils")],Vr.prototype,"rowPositionUtils",2);g([T("columnModel")],Vr.prototype,"columnModel",2);g([qe("rangeService")],Vr.prototype,"rangeService",2);g([z],Vr.prototype,"init",1);Vr=g([te("undoRedoService")],Vr);var Yp=class extends W{findHeader(e,t){let s,r,o;if(e.column instanceof ci?(r=`getDisplayedGroup${t}`,s=this.columnModel[r](e.column)):(o=`getDisplayedCol${t}`,s=this.columnModel[o](e.column)),!s)return;let{headerRowIndex:n}=e;if(this.getHeaderRowType(n)!=="filter"){const u=[s];for(;s.getParent();)s=s.getParent(),u.push(s);s=u[u.length-1-n]}const{column:l,headerRowIndex:a}=this.getHeaderIndexToFocus(s,n);return{column:l,headerRowIndex:a}}getHeaderIndexToFocus(e,t){let s;if(e instanceof ci&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const r=e;s=r.getLeafColumns()[0];let o=s;for(;o!==r;)t++,o=o.getParent()}return{column:s||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const s=this.getHeaderRowType(t),r=s==="filter",o=s==="column";let n=r?e:e.getParent(),l=t-1,a=l;if(o&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;n&&n.isPadding();)n=n.getParent(),l--;a=l,l<0&&(n=e,l=t,a=void 0)}return{column:n,headerRowIndex:l,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,s="After"){const r=this.getHeaderRowType(t);let o=e,n=t+1,l=n;if(r==="group"){const a=e.getDisplayedLeafColumns(),u=s==="After"?a[0]:Je(a),d=[];let c=u;for(;c.getParent()!==e;)c=c.getParent(),d.push(c);if(o=u,u.isSpanHeaderHeight())for(let h=d.length-1;h>=0;h--){const p=d[h];if(!p.isPadding()){o=p;break}n++}else o=Je(d),o||(o=u)}return{column:o,headerRowIndex:n,headerRowIndexWithoutSpan:l}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const s=this.columnModel.getAllDisplayedColumns(),r=s[t==="start"?0:s.length-1];if(!r)return;const n=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getRowType(e);if(n=="group"){const l=this.columnModel.getColumnGroupAtLevel(r,e);return{headerRowIndex:e,column:l}}return{headerRowIndex:n==null?-1:e,column:r}}};g([T("columnModel")],Yp.prototype,"columnModel",2);g([T("ctrlsService")],Yp.prototype,"ctrlsService",2);Yp=g([te("headerPositionUtils")],Yp);var PR=class{buildColumnDefs(e,t,s){const r=[],o={};return e.forEach(n=>{const l=this.createDefFromColumn(n,t,s);let a=!0,u=l,d=n.getOriginalParent(),c=null;for(;d;){let h=null;if(d.isPadding()){d=d.getOriginalParent();continue}const p=o[d.getGroupId()];if(p){p.children.push(u),a=!1;break}if(h=this.createDefFromGroup(d),h&&(h.children=[u],o[h.groupId]=h,u=h,d=d.getOriginalParent()),d!=null&&c===d){a=!1;break}c=d}a&&r.push(u)}),r}createDefFromGroup(e){const t=MC(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,s){const r=MC(e.getColDef());return r.colId=e.getColId(),r.width=e.getActualWidth(),r.rowGroup=e.isRowGroupActive(),r.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,r.pivot=e.isPivotActive(),r.pivotIndex=e.isPivotActive()?s.indexOf(e):null,r.aggFunc=e.isValueActive()?e.getAggFunc():null,r.hide=e.isVisible()?void 0:!0,r.pinned=e.isPinned()?e.getPinned():null,r.sort=e.getSort()?e.getSort():null,r.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,r}};PR=g([te("columnDefFactory")],PR);var qp=class{getInitialRowClasses(e){const t=[];return V(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),nR(t,this.processClassesFromGridOptions(e.rowNode)),nR(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],s=n=>{typeof n=="string"?t.push(n):Array.isArray(n)&&n.forEach(l=>t.push(l))},r=this.gridOptionsService.get("rowClass");if(r){if(typeof r=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];s(r)}const o=this.gridOptionsService.getCallback("getRowClass");if(o){const n={data:e.data,node:e,rowIndex:e.rowIndex},l=o(n);s(l)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,s=>{t.push(s)},s=>{}),t}processRowClassRules(e,t,s){const r=this.gridOptionsService.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gridOptionsService.get("rowClassRules"),r,t,s)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}};g([T("stylingService")],qp.prototype,"stylingService",2);g([T("gridOptionsService")],qp.prototype,"gridOptionsService",2);qp=g([te("rowCssClassCalculator")],qp);var Dc=class extends W{init(){this.isAccentedSort=this.gridOptionsService.get("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup())}doFullSort(e,t){const s=(o,n)=>({currentPos:n,rowNode:o}),r=e.map(s);return r.sort(this.compareRowNodes.bind(this,t)),r.map(o=>o.rowNode)}compareRowNodes(e,t,s){const r=t.rowNode,o=s.rowNode;for(let n=0,l=e.length;n<l;n++){const a=e[n],u=a.sort==="desc",d=this.getValue(r,a.column),c=this.getValue(o,a.column);let h;const p=this.getComparator(a,r);if(p?h=p(d,c,r,o,u):h=ye.defaultComparator(d,c,this.isAccentedSort),!isNaN(h)&&h!==0)return a.sort==="asc"?h:h*-1}return t.currentPos-s.currentPos}getComparator(e,t){const s=e.column,r=s.getColDef().comparator;if(r!=null)return r;if(!s.getColDef().showRowGroup)return;const o=!t.group&&s.getColDef().field;if(!o)return;const n=this.columnModel.getPrimaryColumn(o);if(n)return n.getColDef().comparator}getValue(e,t){var s,r;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){const a=(s=e.allLeafChildren)==null?void 0:s[0];return a?this.valueService.getValue(t,a,!1,!1):void 0}const l=this.columnModel.getGroupDisplayColumnForGroup(t.getId());return l?(r=e.groupData)==null?void 0:r[l.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}};g([T("valueService")],Dc.prototype,"valueService",2);g([T("columnModel")],Dc.prototype,"columnModel",2);g([z],Dc.prototype,"init",1);Dc=g([te("rowNodeSorter")],Dc);var Ga=class extends W{constructor(){super(...arguments),this.ready=!1,this.readyCallbacks=[]}checkReady(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollComp!=null&&this.fakeVScrollComp!=null&&this.gridHeaderCtrl!=null,this.ready){const e=this.createReadyParams();this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0}}whenReady(e){this.ready?e(this.createReadyParams()):this.readyCallbacks.push(e)}createReadyParams(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}}registerFakeHScrollComp(e){this.fakeHScrollComp=e,this.checkReady()}registerFakeVScrollComp(e){this.fakeVScrollComp=e,this.checkReady()}registerGridHeaderCtrl(e){this.gridHeaderCtrl=e,this.checkReady()}registerCenterRowContainerCtrl(e){this.centerRowContainerCtrl=e,this.checkReady()}registerLeftRowContainerCtrl(e){this.leftRowContainerCtrl=e,this.checkReady()}registerRightRowContainerCtrl(e){this.rightRowContainerCtrl=e,this.checkReady()}registerTopCenterRowContainerCtrl(e){this.topCenterRowContainerCtrl=e,this.checkReady()}registerTopLeftRowContainerCon(e){this.topLeftRowContainerCtrl=e,this.checkReady()}registerTopRightRowContainerCtrl(e){this.topRightRowContainerCtrl=e,this.checkReady()}registerStickyTopCenterRowContainerCtrl(e){this.stickyTopCenterRowContainerCtrl=e,this.checkReady()}registerStickyTopLeftRowContainerCon(e){this.stickyTopLeftRowContainerCtrl=e,this.checkReady()}registerStickyTopRightRowContainerCtrl(e){this.stickyTopRightRowContainerCtrl=e,this.checkReady()}registerBottomCenterRowContainerCtrl(e){this.bottomCenterRowContainerCtrl=e,this.checkReady()}registerBottomLeftRowContainerCtrl(e){this.bottomLeftRowContainerCtrl=e,this.checkReady()}registerBottomRightRowContainerCtrl(e){this.bottomRightRowContainerCtrl=e,this.checkReady()}registerHeaderContainer(e,t){switch(t){case"left":this.leftHeaderRowContainerCtrl=e;break;case"right":this.rightHeaderRowContainerCtrl=e;break;default:this.centerHeaderRowContainerCtrl=e;break}this.checkReady()}registerGridBodyCtrl(e){this.gridBodyCtrl=e,this.checkReady()}registerGridCtrl(e){this.gridCtrl=e,this.checkReady()}getFakeHScrollComp(){return this.fakeHScrollComp}getFakeVScrollComp(){return this.fakeVScrollComp}getGridHeaderCtrl(){return this.gridHeaderCtrl}getGridCtrl(){return this.gridCtrl}getCenterRowContainerCtrl(){return this.centerRowContainerCtrl}getTopCenterRowContainerCtrl(){return this.topCenterRowContainerCtrl}getBottomCenterRowContainerCtrl(){return this.bottomCenterRowContainerCtrl}getStickyTopCenterRowContainerCtrl(){return this.stickyTopCenterRowContainerCtrl}getGridBodyCtrl(){return this.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]}getHeaderRowContainerCtrl(e){switch(e){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}}};Ga.NAME="ctrlsService";Ga=g([te(Ga.NAME)],Ga);var AR=class extends W{constructor(){super(...arguments),this.registry={}}register(e){this.registry[e.controllerName]=e.controllerClass}getInstance(e){const t=this.registry[e];if(t!=null)return new t}};AR=g([te("ctrlsFactory")],AR);var Au=class extends De{constructor(e,t){super(e),this.direction=t,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",ND()||Fn())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=kD(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=["mouseenter","mousedown","touchstart"],t=["mouseleave","touchend"],s=this.getGui();e.forEach(r=>this.addManagedListener(s,r,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),t.forEach(r=>this.addManagedListener(s,r,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(e){const t=this.getViewport();RD(()=>dr(t),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedListener(this.getViewport(),"scroll",e)}};g([Y("eViewport")],Au.prototype,"eViewport",2);g([Y("eContainer")],Au.prototype,"eContainer",2);g([T("scrollVisibleService")],Au.prototype,"scrollVisibleService",2);g([T("ctrlsService")],Au.prototype,"ctrlsService",2);g([T("animationFrameService")],Au.prototype,"animationFrameService",2);var Fu=class oG extends Au{constructor(){super(oG.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new Uc(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsService.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.columnModel.getDisplayedColumnsRightWidth();const s=!this.enableRtl&&e,r=this.gridOptionsService.getScrollbarWidth();s&&(t+=r),Mr(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=r);let o=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(o+=r),Mr(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=r)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,s=this.gridOptionsService.get("suppressHorizontalScroll"),r=e&&this.gridOptionsService.getScrollbarWidth()||0,n=s?0:r===0&&t?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Ma(this.getGui(),n),Ma(this.eViewport,n),Ma(this.eContainer,n),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return Np(this.getViewport(),this.enableRtl)}setScrollPosition(e){dr(this.getViewport())||this.attemptSettingScrollPosition(e),Gp(this.getViewport(),e,this.enableRtl)}};Fu.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;g([Y("eLeftSpacer")],Fu.prototype,"eLeftSpacer",2);g([Y("eRightSpacer")],Fu.prototype,"eRightSpacer",2);g([T("columnModel")],Fu.prototype,"columnModel",2);g([T("pinnedRowModel")],Fu.prototype,"pinnedRowModel",2);g([z],Fu.prototype,"postConstruct",1);var iK=Fu,Qp=class extends W{postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=this.gridOptionsService.isDomLayout("print"),t=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),s=e?0:this.columnModel.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:w.EVENT_LEFT_PINNED_WIDTH_CHANGED})),s!=this.rightWidth&&(this.rightWidth=s,this.eventService.dispatchEvent({type:w.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};g([T("columnModel")],Qp.prototype,"columnModel",2);g([z],Qp.prototype,"postConstruct",1);Qp=g([te("pinnedWidthService")],Qp);var bc=class extends W{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const t=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(s=>this.eventService.dispatchEvent(s)),this.events=[]};this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(t)),this.dispatchExpandedDebounced()}};g([T("animationFrameService")],bc.prototype,"animationFrameService",2);g([T("rowModel")],bc.prototype,"rowModel",2);g([z],bc.prototype,"postConstruct",1);bc=g([te("rowNodeEventThrottle")],bc);var sK={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},Wn=(i,e)=>{var t;return((t=e.rowModelType)!=null?t:"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},rK={enableRowGroup:Wn,rowGroup:Wn,rowGroupIndex:Wn,enablePivot:Wn,enableValue:Wn,pivot:Wn,pivotIndex:Wn,aggFunc:Wn,cellEditor:i=>i.cellEditor==="agRichSelect"||i.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:i=>{var e;const t=["columnsMenuTab","generalMenuTab"];return(e=i.menuTabs)!=null&&e.some(s=>t.includes(s))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(i,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(i,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(i,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Td},Td={objectName:"colDef",allProperties:z2.ALL_PROPERTIES,docsUrl:"column-properties/",deprecations:sK,validations:rK},oK={enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."}},nK={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,pivotMaxGeneratedColumns:-1},lK={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:i=>{var e;const t=(e=i.rowModelType)!=null?e:"clientSide";switch(t){case"clientSide":const s=`treeData requires 'getDataPath' in the ${t} row model.`;return i.getDataPath?null:s;case"serverSide":const r=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return i.isServerSideGroup&&i.getServerSideGroupKey?null:r}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:i=>{var e;switch((e=i.rowModelType)!=null?e:"clientSide"){case"clientSide":return null;case"serverSide":return i.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>Td,defaultColDef:()=>Td,defaultColGroupDef:()=>Td,autoGroupColumnDef:()=>Td},aK={objectName:"gridOptions",allProperties:[...$o.ALL_PROPERTIES,...GC.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:oK,validations:lK},st=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new go,this.globalEventHandlerFactory=e=>(t,s)=>{if(this.destroyed)return;const r=Fm.has(t);if(r&&!e||!r&&e)return;const o=GC.getCallbackForEvent(t),n=this.gridOptions[o];typeof n=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{n(s)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new Sc(this.api);const e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(e){var t;return(t=this.gridOptions[e])!=null?t:nK[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return V(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(s=>{const r=s;return r.api=this.api,r.columnApi=this.columnApi,r.context=this.context,e(r)})}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}static toNumber(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}static toConstrainedNum(e,t){return s=>{const r=st.toNumber(s);if(!(r==null||r<e||r>t))return r}}static getCoercedValue(e,t){const s=st.PROPERTY_COERCIONS.get(e);return s?s(t):t}static getCoercedGridOptions(e){const t={};return Object.entries(e).forEach(([s,r])=>{const o=st.getCoercedValue(s,r);t[s]=o}),t}updateGridOptions({options:e,source:t="api"}){const s={id:st.changeSetId++,properties:[]},r=[];Object.entries(e).forEach(([o,n])=>{t==="api"&&Vz[o]&&Ce(`${o} is an initial property and cannot be updated.`);const l=st.getCoercedValue(o,n),a=typeof l=="object"&&t==="api",u=this.gridOptions[o];if(a||u!==l){this.gridOptions[o]=l;const d={type:o,currentValue:l,previousValue:u,changeSet:s,source:t};r.push(d)}}),this.validationService.processGridOptions(this.gridOptions),s.properties=r.map(o=>o.type),r.forEach(o=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${o.type} from `,o.previousValue," to  ",o.currentValue),this.propertyEventService.dispatchEvent(o)})}addEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removeEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getScrollbarWidth(){if(this.scrollbarWidth==null){const t=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:E_();t!=null&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:w.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||e==="clientSide"&&Se(this.gridOptions.rowModelType)}isDomLayout(e){var t;return((t=this.gridOptions.domLayout)!=null?t:"normal")===e}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(e,t=!1,s){if(s==null&&(s=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:s,estimated:!0};const o={node:e,data:e.data},n=this.getCallback("getRowHeight")(o);if(this.isNumeric(n))return n===0&&Ce("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,n),estimated:!1}}return e.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:s,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Se(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const e=this.environment.refreshRowHeightVariable();return e!==-1?e:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,t){const s=e[this.getDomDataKey()];return s?s[t]:void 0}setDomData(e,t,s){const r=this.getDomDataKey();let o=e[r];Se(o)&&(o={},e[r]=o),o[t]=s}getDocument(){let e=null;return this.gridOptions.getDocument&&V(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&V(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getAsyncTransactionWaitMillis(){return V(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("suppressGroupRowsSticky")||this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){const e=this.gridOptions.autoGroupColumnDef;return!(e!=null&&e.comparator)&&!this.get("treeData")}getGroupAggFiltering(){const e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.getCallback("groupAggFiltering");if(e===!0)return()=>!0}isGroupIncludeFooterTrueOrCallback(){const e=this.gridOptions.groupIncludeFooter;return e===!0||typeof e=="function"}getGroupIncludeFooter(){const e=this.gridOptions.groupIncludeFooter;return typeof e=="function"?this.getCallback("groupIncludeFooter"):e===!0?()=>!0:()=>!1}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(e){return e?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(e){const t=e;return t.api=this.api,t.columnApi=this.columnApi,t.context=this.context,t}};st.PROPERTY_COERCIONS=new Map([...$o.BOOLEAN_PROPERTIES.map(i=>[i,st.toBoolean]),...$o.NUMBER_PROPERTIES.map(i=>[i,st.toNumber]),["groupAggFiltering",i=>typeof i=="function"?i:st.toBoolean(i)],["pageSize",st.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",st.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",st.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",st.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",st.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",st.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",st.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",st.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",st.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",st.toConstrainedNum(0,Number.MAX_VALUE)]]);st.changeSetId=0;g([T("gridOptions")],st.prototype,"gridOptions",2);g([T("eventService")],st.prototype,"eventService",2);g([T("environment")],st.prototype,"environment",2);g([T("frameworkOverrides")],st.prototype,"frameworkOverrides",2);g([T("eGridDiv")],st.prototype,"eGridDiv",2);g([T("validationService")],st.prototype,"validationService",2);g([T("gridApi")],st.prototype,"api",2);g([z],st.prototype,"init",1);g([ps],st.prototype,"destroy",1);st=g([te("gridOptionsService")],st);var FR=class extends W{getLocaleTextFunc(){const e=this.gridOptionsService.getCallback("getLocaleText");if(e)return(s,r,o)=>e({key:s,defaultValue:r,variableValues:o});const t=this.gridOptionsService.get("localeText");return(s,r,o)=>{let n=t&&t[s];if(n&&o&&o.length){let l=0;for(;!(l>=o.length||n.indexOf("${variable}")===-1);)n=n.replace("${variable}",o[l++])}return n??r}}};FR=g([te("localeService")],FR);var wb=class nG extends Au{constructor(){super(nG.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new bS(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,s=e&&this.gridOptionsService.getScrollbarWidth()||0,r=s===0&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Mr(this.getGui(),r),Mr(this.eViewport,r),Mr(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,s=e.getGridBodyCtrl().getBodyViewportElement(),r=this.getScrollPosition(),o=s.scrollTop;r!=o&&this.setScrollPosition(o,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,t){!t&&!dr(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}};wb.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;g([z],wb.prototype,"postConstruct",1);var uK=wb,QF={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},XF=["january","february","march","april","may","june","july","august","september","october","november","december"],wn=class extends W{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Rd(e.source))})}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(t).forEach(([r,o])=>{this.dataTypeDefinitions[r]=Pt(he({},o),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(o)})});const s=(e=this.gridOptionsService.get("dataTypeDefinitions"))!=null?e:{};this.dataTypeMatchers={},Object.entries(s).forEach(([r,o])=>{const n=this.processDataTypeDefinition(o,s,[r],t);n&&(this.dataTypeDefinitions[r]=n,o.dataTypeMatcher&&(this.dataTypeMatchers[r]=o.dataTypeMatcher))}),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach(r=>{const o=this.dataTypeMatchers[r];o&&delete this.dataTypeMatchers[r],this.dataTypeMatchers[r]=o??t[r].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const s=he(he({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(s.columnTypes=[...this.convertColumnTypes(e.columnTypes),...this.convertColumnTypes(t.columnTypes)]),s}processDataTypeDefinition(e,t,s,r){let o;const n=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let l=r[n];const a=t[n];if(l&&a&&(l=a),!this.validateDataTypeDefinition(e,l,n))return;o=this.mergeDataTypeDefinitions(l,e)}else{if(s.includes(n)){Ce('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const l=t[n];if(!this.validateDataTypeDefinition(e,l,n))return;const a=this.processDataTypeDefinition(l,t,[...s,n],r);if(!a)return;o=this.mergeDataTypeDefinitions(a,e)}return Pt(he({},o),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(o)})}validateDataTypeDefinition(e,t,s){return t?t.baseDataType!==e.baseDataType?(Ce('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(Ce(`The data type definition ${s} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var s,r;if((s=t.node)!=null&&s.group){const o=t.column.getAggFunc();if(o){if(o==="first"||o==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&o!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(Pt(he({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(Pt(he({},t),{value:t.value.value}))}}}if(!this.gridOptionsService.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if(typeof t.value!="string"||(r=e.dataTypeMatcher)!=null&&r.call(e,t.value))return e.valueFormatter(t);if(!this.gridOptionsService.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetDataTypeDefinitionColumnType(e,t,s){let{cellDataType:r}=t;const{field:o}=t;if(r===void 0&&(r=e.cellDataType),(r==null||r===!0)&&(r=this.canInferCellDataType(e,t)?this.inferCellDataType(o,s):!1),!r){e.cellDataType=!1;return}const n=this.dataTypeDefinitions[r];if(!n){Ce(`Missing data type definition - "${r}"`);return}return e.cellDataType=r,n.groupSafeValueFormatter&&(e.valueFormatter=n.groupSafeValueFormatter),n.valueParser&&(e.valueParser=n.valueParser),n.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,s),n.columnTypes}updateColDefAndGetColumnType(e,t,s){var r,o;const n=this.updateColDefAndGetDataTypeDefinitionColumnType(e,t,s),l=(o=(r=t.type)!=null?r:n)!=null?o:e.type;return e.type=l,l?this.convertColumnTypes(l):void 0}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const s=r=>{t.add(r.key)};e.addEventListener(ut.EVENT_STATE_UPDATED,s),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener(ut.EVENT_STATE_UPDATED,s))}canInferCellDataType(e,t){var s;if(this.rowModel.getType()!=="clientSide")return!1;const r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,r))return!1;const o=t.type===null?e.type:t.type;if(o){const n=(s=this.gridOptionsService.get("columnTypes"))!=null?s:{};if(this.convertColumnTypes(o).some(a=>{const u=n[a.trim()];return u&&this.doColDefPropsPreventInference(u,r)}))return!1}return!this.doColDefPropsPreventInference(e,r)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([s,r])=>this.doesColDefPropPreventInference(e,t,s,r))}doesColDefPropPreventInference(e,t,s,r){if(!t[s])return!1;const o=e[s];return o===null?(t[s]=!1,!1):r===void 0?!!o:o===r}inferCellDataType(e,t){var s;if(!e)return;let r;const o=this.getInitialData();if(o){const l=e.indexOf(".")>=0&&!this.gridOptionsService.get("suppressFieldDotNotation");r=xd(o,e,l)}else this.initWaitForRowData(t);if(r==null)return;const[n]=(s=Object.entries(this.dataTypeMatchers).find(([l,a])=>a(r)))!=null?s:["object"];return n}getInitialData(){const e=this.gridOptionsService.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t!=null&&t.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const s=this.addManagedListener(this.eventService,w.EVENT_ROW_DATA_UPDATE_STARTED,r=>{const{firstRowData:o}=r;if(!o)return;s==null||s(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(o,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();const n={type:w.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(n)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const s=[];this.columnStateUpdateListenerDestroyFuncs.forEach(n=>n()),this.columnStateUpdateListenerDestroyFuncs=[];const r={},o={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([n,l])=>{const a=this.columnModel.getGridColumn(n);if(!a)return;const u=a.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(a,"cellDataTypeInferred"))return;const d=a.getColDef();if(t&&d.type&&d.type!==u.type){const c=this.getUpdatedColumnState(a,l);c.rowGroup&&c.rowGroupIndex==null&&(r[n]=c),c.pivot&&c.pivotIndex==null&&(o[n]=c),s.push(c)}}),t&&s.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(r,o)),s.length&&this.columnModel.applyColumnState({state:s},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const s=this.columnModel.getColumnStateFromColDef(e);return t.forEach(r=>{delete s[r],r==="rowGroup"?delete s.rowGroupIndex:r==="pivot"&&delete s.pivotIndex}),s}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,s=e.object;this.hasObjectValueParser=t.valueParser!==s.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==s.valueFormatter}convertColumnTypes(e){let t=[];return e instanceof Array?e.some(r=>typeof r!="string")?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),t}getDateStringTypeDefinition(e){var t;return e?(t=this.getDataTypeDefinition(e))!=null?t:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var s;if(t==null)return!0;const r=(s=this.getDataTypeDefinition(e))==null?void 0:s.dataTypeMatcher;return r?r(t):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&Ce('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&Ce('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(e,t,s){const r=(a,u,d)=>{let c=a.getColDef().valueFormatter;return c===t.groupSafeValueFormatter&&(c=t.valueFormatter),this.valueFormatterService.formatValue(a,u,d,c)},o=et.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),n=this.localeService.getLocaleTextFunc(),l=a=>{const{filterParams:u}=e;e.filterParams=typeof u=="object"?he(he({},u),a):a};switch(t.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",o&&l({comparator:(a,u)=>{const d=a==null?0:parseInt(a),c=u==null?0:parseInt(u);return d===c?0:d>c?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===x.SPACE,l(o?{valueFormatter:a=>V(a.value)?n(String(a.value),a.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,u)=>u,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,u)=>u===!1,numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=a=>r(a.column,a.node,a.value),o&&l({valueFormatter:a=>{const u=r(a.column,a.node,a.value);return V(u)?u:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,u)=>{if(u===1&&a!=null){const d=XF[Number(a)-1];return n(d,QF[d])}return a??n("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=u=>r(u.column,u.node,u.value);const a=t.dateParser;l(o?{valueFormatter:u=>{const d=r(u.column,u.node,u.value);return V(d)?d:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:u=>{const d=a(u??void 0);return d?[String(d.getFullYear()),String(d.getMonth()+1),String(d.getDate())]:null},treeListFormatter:(u,d)=>{if(d===1&&u!=null){const c=XF[Number(u)-1];return n(c,QF[c])}return u??n("blanks","(Blanks)")}}:{comparator:(u,d)=>{const c=a(d);return d==null||c<u?-1:c>u?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(a,u)=>{const d=this.columnModel.getPrimaryColumn(s),c=d==null?void 0:d.getColDef();if(!d||!c)return 0;const h=a==null?"":r(d,null,a),p=u==null?"":r(d,null,u);return h===p?0:h>p?1:-1},e.keyCreator=a=>r(a.column,a.node,a.value),o?l({valueFormatter:a=>{const u=r(a.column,a.node,a.value);return V(u)?u:n("blanks","(Blanks)")}}):e.filterValueGetter=a=>r(a.column,a.node,this.valueService.getValue(a.column,a.node));break}}}getDefaultDataTypes(){const e=s=>!!s.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:s=>{var r,o;return((o=(r=s.newValue)==null?void 0:r.trim)==null?void 0:o.call(r))===""?null:Number(s.newValue)},valueFormatter:s=>s.value==null?"":typeof s.value!="number"||isNaN(s.value)?t("invalidNumber","Invalid Number"):String(s.value),dataTypeMatcher:s=>typeof s=="number"},text:{baseDataType:"text",valueParser:s=>s.newValue===""?null:Lp(s.newValue),dataTypeMatcher:s=>typeof s=="string"},boolean:{baseDataType:"boolean",valueParser:s=>{var r,o;return s.newValue==null?s.newValue:((o=(r=s.newValue)==null?void 0:r.trim)==null?void 0:o.call(r))===""?null:String(s.newValue).toLowerCase()==="true"},valueFormatter:s=>s.value==null?"":String(s.value),dataTypeMatcher:s=>typeof s=="boolean"},date:{baseDataType:"date",valueParser:s=>Fs(s.newValue==null?null:String(s.newValue)),valueFormatter:s=>{var r;return s.value==null?"":!(s.value instanceof Date)||isNaN(s.value.getTime())?t("invalidDate","Invalid Date"):(r=Ir(s.value,!1))!=null?r:""},dataTypeMatcher:s=>s instanceof Date},dateString:{baseDataType:"dateString",dateParser:s=>{var r;return(r=Fs(s))!=null?r:void 0},dateFormatter:s=>{var r;return(r=Ir(s??null,!1))!=null?r:void 0},valueParser:s=>e(String(s.newValue))?s.newValue:null,valueFormatter:s=>e(String(s.value))?s.value:"",dataTypeMatcher:s=>typeof s=="string"&&e(s)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:s=>{var r;return(r=Lp(s.value))!=null?r:""}}}}};g([T("rowModel")],wn.prototype,"rowModel",2);g([T("columnModel")],wn.prototype,"columnModel",2);g([T("columnUtils")],wn.prototype,"columnUtils",2);g([T("valueService")],wn.prototype,"valueService",2);g([T("valueFormatterService")],wn.prototype,"valueFormatterService",2);g([z],wn.prototype,"init",1);wn=g([te("dataTypeService")],wn);var QC=class extends W{parseValue(e,t,s,r){const o=e.getColDef(),n=this.gridOptionsService.addGridCommonParams({node:t,data:t==null?void 0:t.data,oldValue:r,newValue:s,colDef:o,column:e}),l=o.valueParser;return V(l)?typeof l=="function"?l(n):this.expressionService.evaluate(l,n):s}};g([T("expressionService")],QC.prototype,"expressionService",2);QC=g([te("valueParserService")],QC);var ru=class extends W{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(()=>{const e=this.gridOptionsService.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const e=et.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new Sb("AG Grid",()=>this.gridOptionsService.get("debug")).log(`initialised successfully, enterprise = ${e}`)}dispatchGridReadyEvent(){const e={type:w.EVENT_GRID_READY};this.eventService.dispatchEvent(e)}setColumnDefs(e){const t=this.gridOptionsService.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,Rd(e.source))}}};g([T("ctrlsService")],ru.prototype,"ctrlsService",2);g([T("columnModel")],ru.prototype,"columnModel",2);g([T("rowModel")],ru.prototype,"rowModel",2);g([z],ru.prototype,"postConstruct",1);ru=g([te("syncService")],ru);var ou=class extends W{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,(!this.gridOptionsService.get("columnDefs")||this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gridOptionsService.get("suppressLoadingOverlay"))return;const e={},t=this.userComponentFactory.getLoadingOverlayCompDetails(e);this.showOverlay(t,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gridOptionsService.get("suppressNoRowsOverlay"))return;const e={},t=this.userComponentFactory.getNoRowsOverlayCompDetails(e);this.showOverlay(t,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(e,t,s){const r=e.newAgStackInstance(),o=this.addManagedPropertyListener(s,({currentValue:n})=>{r.then(l=>{l.refresh&&l.refresh(this.gridOptionsService.addGridCommonParams(he({},n??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(r,t,o)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){const e=this.paginationProxy.isEmpty(),t=this.gridOptionsService.get("suppressNoRowsOverlay");e&&!t?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};g([T("userComponentFactory")],ou.prototype,"userComponentFactory",2);g([T("paginationProxy")],ou.prototype,"paginationProxy",2);g([T("columnModel")],ou.prototype,"columnModel",2);g([z],ou.prototype,"postConstruct",1);ou=g([te("overlayService")],ou);var as=class extends W{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=os(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=os(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=os(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var e;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(e=this.gridOptionsService.get("initialState"))!=null?e:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const t=this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,({source:o})=>{o==="gridInitializing"&&(t==null||t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),s=this.addManagedListener(this.eventService,w.EVENT_ROW_COUNT_READY,()=>{s==null||s(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),r=this.addManagedListener(this.eventService,w.EVENT_FIRST_DATA_RENDERED,()=>{r==null||r(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,w.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,w.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var e;const t=(e=this.gridOptionsService.get("initialState"))!=null?e:{};this.setColumnState(t),this.setColumnGroupState(t),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,w.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var e;const{filter:t,rowGroupExpansion:s,rowSelection:r,pagination:o}=(e=this.gridOptionsService.get("initialState"))!=null?e:{},n=this.gridOptionsService.get("advancedFilterModel");(t||n)&&this.setFilterState(t,n),s&&this.setRowGroupExpansionState(s),r&&this.setRowSelectionState(r),o&&this.setPaginationState(o),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,w.EVENT_ROW_GROUP_OPENED,()=>this.onRowGroupOpenedDebounced()),this.addManagedListener(this.eventService,w.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,w.EVENT_SELECTION_CHANGED,()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()}),this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,l=>{(l.newPage||l.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var e;const{scroll:t,rangeSelection:s,focusedCell:r,columnOrder:o}=(e=this.gridOptionsService.get("initialState"))!=null?e:{};r&&this.setFocusedCellState(r),s&&this.setRangeSelectionState(s),t&&this.setScrollState(t),this.setColumnPivotState(!!(o!=null&&o.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,w.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,w.EVENT_RANGE_SELECTION_CHANGED,n=>{n.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],s=[],r=[],o=[],n=[],l=[],a=[],u=[],d=[],c=this.columnModel.getColumnState();for(let h=0;h<c.length;h++){const{colId:p,sort:m,sortIndex:S,rowGroup:E,rowGroupIndex:C,aggFunc:v,pivot:R,pivotIndex:b,pinned:A,hide:F,width:O,flex:L}=c[h];d.push(p),m&&(t[S??0]={colId:p,sort:m}),E&&(s[C??0]=p),typeof v=="string"&&r.push({colId:p,aggFunc:v}),R&&(o[b??0]=p),A&&(A==="right"?l:n).push(p),F&&a.push(p),(L||O)&&u.push({colId:p,flex:L??void 0,width:O})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:s.length?{groupColIds:s}:void 0,aggregation:r.length?{aggregationModel:r}:void 0,pivot:o.length||e?{pivotMode:e,pivotColIds:o}:void 0,columnPinning:n.length||l.length?{leftColIds:n,rightColIds:l}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:u.length?{columnSizingModel:u}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}setColumnState(e){const{sort:t,rowGroup:s,aggregation:r,pivot:o,columnPinning:n,columnVisibility:l,columnSizing:a,columnOrder:u}=e,d={},c=S=>{let E=d[S];return E||(E={colId:S},d[S]=E,E)};t&&t.sortModel.forEach(({colId:S,sort:E},C)=>{const v=c(S);v.sort=E,v.sortIndex=C}),s&&s.groupColIds.forEach((S,E)=>{const C=c(S);C.rowGroup=!0,C.rowGroupIndex=E}),r&&r.aggregationModel.forEach(({colId:S,aggFunc:E})=>{c(S).aggFunc=E}),o&&(o.pivotColIds.forEach((S,E)=>{const C=c(S);C.pivot=!0,C.pivotIndex=E}),this.gridOptionsService.updateGridOptions({options:{pivotMode:o.pivotMode},source:"gridInitializing"})),n&&(n.leftColIds.forEach(S=>{c(S).pinned="left"}),n.rightColIds.forEach(S=>{c(S).pinned="right"})),l&&l.hiddenColIds.forEach(S=>{c(S).hide=!0}),a&&a.columnSizingModel.forEach(({colId:S,flex:E,width:C})=>{const v=c(S);v.flex=E??null,v.width=C});const h=u==null?void 0:u.orderedColIds,p=!!(h!=null&&h.length),m=p?h.map(S=>c(S)):Object.values(d);if(m.length){this.columnStates=m;const S={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:m,applyOrder:p,defaultState:S},"gridInitializing")}}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const s=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(t){let r=[];for(const o of t)this.columnModel.getSecondaryColumn(o.colId)&&r.push(o);this.columnModel.applyColumnState({state:r,applyOrder:e},"gridInitializing")}s&&this.columnModel.setColumnGroupState(s,"gridInitializing")}}getColumnGroupState(){const e=this.columnModel.getColumnGroupState(),t=[];return e.forEach(({groupId:s,open:r})=>{r&&t.push(s)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var t;if(!e.hasOwnProperty("columnGroup"))return;const s=new Set((t=e.columnGroup)==null?void 0:t.openColumnGroupIds),o=this.columnModel.getColumnGroupState().map(({groupId:n})=>{const l=s.has(n);return l&&s.delete(n),{groupId:n,open:l}});s.forEach(n=>{o.push({groupId:n,open:!0})}),o.length&&(this.columnGroupStates=o),this.columnModel.setColumnGroupState(o,"gridInitializing")}getFilterState(){var e;let t=this.filterManager.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const s=(e=this.filterManager.getAdvancedFilterModel())!=null?e:void 0;return t||s?{filterModel:t,advancedFilterModel:s}:void 0}setFilterState(e,t){const{filterModel:s,advancedFilterModel:r}=e??{advancedFilterModel:t};s&&this.filterManager.setFilterModel(s,"columnFilter"),r&&this.filterManager.setAdvancedFilterModel(r)}getRangeSelectionState(){var e;const t=(e=this.rangeService)==null?void 0:e.getCellRanges().map(s=>{const{id:r,type:o,startRow:n,endRow:l,columns:a,startColumn:u}=s;return{id:r,type:o,startRow:n,endRow:l,colIds:a.map(d=>d.getColId()),startColId:u.getColId()}});return t!=null&&t.length?{cellRanges:t}:void 0}setRangeSelectionState(e){var t;if(!this.gridOptionsService.get("enableRangeSelection"))return;const s=e.cellRanges.map(r=>Pt(he({},r),{columns:r.colIds.map(o=>this.columnModel.getGridColumn(o)),startColumn:this.columnModel.getGridColumn(r.startColId)}));(t=this.rangeService)==null||t.setCellRanges(s)}getScrollState(){var e,t,s;if(!this.isClientSideRowModel)return;const r=(e=this.ctrlsService.getGridBodyCtrl())==null?void 0:e.getScrollFeature(),{left:o}=(t=r==null?void 0:r.getHScrollPosition())!=null?t:{left:0},{top:n}=(s=r==null?void 0:r.getVScrollPosition())!=null?s:{top:0};return n||o?{top:n,left:o}:void 0}setScrollState(e){var t;if(!this.isClientSideRowModel)return;const{top:s,left:r}=e;(t=this.ctrlsService.getGridBodyCtrl())==null||t.getScrollFeature().setScrollPosition(s,r)}getSideBarState(){var e,t;return(t=(e=this.sideBarService)==null?void 0:e.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:s,rowPinned:r}=e;return{colId:t.getColId(),rowIndex:s,rowPinned:r}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:s,rowPinned:r}=e;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(t),rowIndex:s,rowPinned:r,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const e=this.paginationProxy.getCurrentPage(),t=this.gridOptionsService.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){e.pageSize&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationProxy.setPage(e.page)}getRowSelectionState(){var e;const t=this.selectionService.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!((e=t==null?void 0:t.toggledNodes)!=null&&e.length)?void 0:t}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let s=!1;Object.entries(t).forEach(([r,o])=>{tR(o,this.cachedState[r])||(s=!0)}),this.cachedState=he(he({},this.cachedState),t),s&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const s=this.cachedState[e];this.setCachedStateValue(e,t),tR(t,s)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=Pt(he({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();const t={type:w.EVENT_STATE_UPDATED,sources:e,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};g([T("filterManager")],as.prototype,"filterManager",2);g([qe("rangeService")],as.prototype,"rangeService",2);g([T("ctrlsService")],as.prototype,"ctrlsService",2);g([qe("sideBarService")],as.prototype,"sideBarService",2);g([T("focusService")],as.prototype,"focusService",2);g([T("columnModel")],as.prototype,"columnModel",2);g([T("paginationProxy")],as.prototype,"paginationProxy",2);g([T("rowModel")],as.prototype,"rowModel",2);g([T("selectionService")],as.prototype,"selectionService",2);g([T("expansionService")],as.prototype,"expansionService",2);g([T("columnAnimationService")],as.prototype,"columnAnimationService",2);g([z],as.prototype,"postConstruct",1);as=g([te("stateService")],as);var Xp=class extends W{init(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,aK)}processColumnDefs(e){this.processOptions(e,Td)}processOptions(e,t){const{validations:s,deprecations:r,allProperties:o,propertyExceptions:n,objectName:l,docsUrl:a}=t;o&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...n??[],...Object.keys(r)],o,l,a);const u=new Set;Object.keys(e).forEach(c=>{var h;const p=r[c];if(p)if("renamed"in p){const{renamed:b,version:A}=p;u.add(`As of v${A}, ${String(c)} is deprecated. Please use ${String(b)} instead.`),e[b]=e[c]}else{const{message:b,version:A}=p;u.add(`As of v${A}, ${String(c)} is deprecated. ${b??""}`)}const m=e[c];if(m==null||m===!1)return;const S=s[c];let E;if(S)if(typeof S=="function"){const b=S(e,this.gridOptions);if(!b)return;if("objectName"in b){const A=e[c];if(Array.isArray(A)){A.forEach(F=>{this.processOptions(F,b)});return}this.processOptions(e[c],b);return}E=b}else E=S;else return;const{module:C,dependencies:v,supportedRowModels:R}=E;if(R){const b=(h=this.gridOptions.rowModelType)!=null?h:"clientSide";if(!R.includes(b)){u.add(`${String(c)} is not supported with the '${b}' row model.`);return}}if(C){const b=Array.isArray(C)?C:[C];let A=!0;if(b.forEach(F=>{et.__assertRegistered(F,String(c),this.context.getGridId())||(A=!1,u.add(`${String(c)} is only available when ${F} is loaded.`))}),!A)return}if(v){const b=this.checkForWarning(c,v,e);if(b){u.add(b);return}}}),u.size>0&&u.forEach(c=>{Ce(c)})}checkForWarning(e,t,s){if(typeof t=="function")return t(s,this.gridOptions);const o=Object.entries(t).find(([a,u])=>{const d=s[a];return!u.includes(d)});if(!o)return null;const[n,l]=o;return l.length>1?`'${String(e)}' requires '${n}' to be one of [${l.join(", ")}].`:`'${String(e)}' requires '${n}' to be ${l[0]}.`}checkProperties(e,t,s,r,o){const n=["__ob__","__v_skip","__metadata__"],l=N_(Object.getOwnPropertyNames(e),[...n,...t,...s],s);if($i(l,(a,u)=>{Ce(`invalid ${r} property '${a}' did you mean any of these: ${u.slice(0,8).join(", ")}`)}),Object.keys(l).length>0&&o){const a=this.getFrameworkOverrides().getDocLink(o);Ce(`to see all the valid ${r} properties please check: ${a}`)}}};g([T("gridOptions")],Xp.prototype,"gridOptions",2);g([z],Xp.prototype,"init",1);Xp=g([te("validationService")],Xp);var XC=class extends W{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new TD(this.getFrameworkOverrides())}addEventListener(e,t){const s=this.frameworkEventWrappingService.wrap(t),r=this.gridOptionsService.useAsyncEvents()&&!Fm.has(e),o=r?this.asyncEventListeners:this.syncEventListeners;o.has(e)||o.set(e,new Set),o.get(e).add(s),this.eventService.addEventListener(e,s,r)}removeEventListener(e,t){var s;const r=this.frameworkEventWrappingService.unwrap(t),o=this.asyncEventListeners.get(e),n=!!(o!=null&&o.delete(r));n||(s=this.syncEventListeners.get(e))==null||s.delete(r),this.eventService.removeEventListener(e,r,n)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(this.gridOptionsService.useAsyncEvents()){const r=(n,l)=>{Fm.has(n)&&t(n,l)},o=(n,l)=>{Fm.has(n)||t(n,l)};this.globalEventListenerPairs.set(e,{syncListener:r,asyncListener:o}),this.eventService.addGlobalListener(r,!1),this.eventService.addGlobalListener(o,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:r,asyncListener:o}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(r,!1),this.eventService.removeGlobalListener(o,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((s,r)=>{s.forEach(o=>this.eventService.removeEventListener(r,o,t)),s.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(s=>this.eventService.removeGlobalListener(s,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}};g([z],XC.prototype,"postConstruct",1);XC=g([te("apiEventService")],XC);var ff=class extends De{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,e=>this.handlePaginationChanged(e))}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){oi(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel")&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.gridOptionsService.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationProxy.getPageSize(),s=!t||!e.includes(t);s&&(e.unshift(""),Ce(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);const r=this.localeService.getLocaleTextFunc(),o=r("pageSizeSelectorLabel","Page Size:"),n=e.map(a=>({value:String(a),text:String(a)})),l=r("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new SS).addOptions(n).setValue(String(s?"":t)).setAriaLabel(l).setLabel(o).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=s}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gridOptionsService.get("paginationPageSizeSelector");return!Array.isArray(t)||!this.validateValues(t)?e:[...t].sort((s,r)=>s-r)}validateValues(e){if(!e.length)return Ce(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let t=0;t<e.length;t++){const s=e[t],r=typeof s=="number",o=s>0;if(!r)return Ce(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!o)return Ce(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};g([T("localeService")],ff.prototype,"localeService",2);g([T("gridOptionsService")],ff.prototype,"gridOptionsService",2);g([T("paginationProxy")],ff.prototype,"paginationProxy",2);g([z],ff.prototype,"init",1);var Jp=class extends W{constructor(){super(),this.descriptionContainer=null,this.announceValue=os(this.announceValue.bind(this),200)}postConstruct(){const e=this.gridOptionsService.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),AD(t,"polite"),u_(t,"additions text"),a_(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50))}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(oi(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}};g([T("eGridDiv")],Jp.prototype,"eGridDiv",2);g([z],Jp.prototype,"postConstruct",1);Jp=g([te("ariaAnnouncementService")],Jp);var dK=1,cK=class{create(i,e,t,s,r){var o;const n=!!e.debug,l=(o=e.gridId)!=null?o:String(dK++),a=this.getRegisteredModules(r,l),u=this.createBeansList(e.rowModelType,a,l),d=this.createProvidedBeans(i,e,r);if(!u){fa("Failed to create grid.");return}const c={providedBeanInstances:d,beanClasses:u,debug:n,gridId:l},h=new Sb("Context",()=>c.debug),p=new Tz(c,h),m=p.getBean("beans");return this.registerModuleUserComponents(m,a),this.registerStackComponents(m,a),this.registerControllers(m,a),t(p),m.syncService.start(),s&&s(p),m.gridApi}registerControllers(i,e){e.forEach(t=>{t.controllers&&t.controllers.forEach(s=>i.ctrlsFactory.register(s))})}registerStackComponents(i,e){const t=this.createAgStackComponentsList(e);i.agStackComponentsRegistry.setupComponents(t)}getRegisteredModules(i,e){const t=i?i.modules:null,s=et.__getRegisteredModules(e),r=[],o={},n=(l,a,u)=>{(c=>{o[c.moduleName]||(o[c.moduleName]=!0,r.push(c),et.__register(c,l,u))})(a),a.dependantModules&&a.dependantModules.forEach(c=>n(l,c,u))};return t&&t.forEach(l=>n(!0,l,e)),s&&s.forEach(l=>n(!et.__isPackageBased(),l,void 0)),r}registerModuleUserComponents(i,e){this.extractModuleEntity(e,s=>s.userComponents?s.userComponents:[]).forEach(s=>{i.userComponentRegistry.registerDefaultComponent(s.componentName,s.componentClass)})}createProvidedBeans(i,e,t){let s=t?t.frameworkOverrides:null;Se(s)&&(s=new tG);const r={gridOptions:e,eGridDiv:i,globalEventListener:t?t.globalEventListener:null,globalSyncEventListener:t?t.globalSyncEventListener:null,frameworkOverrides:s};return t&&t.providedBeanInstances&&Object.assign(r,t.providedBeanInstances),r}createAgStackComponentsList(i){let e=[{componentName:"AgCheckbox",componentClass:wS},{componentName:"AgRadioButton",componentClass:eN},{componentName:"AgToggleButton",componentClass:qN},{componentName:"AgInputTextField",componentClass:Su},{componentName:"AgInputTextArea",componentClass:N$},{componentName:"AgInputNumberField",componentClass:ib},{componentName:"AgInputDateField",componentClass:G$},{componentName:"AgInputRange",componentClass:k$},{componentName:"AgRichSelect",componentClass:Cb},{componentName:"AgSelect",componentClass:SS},{componentName:"AgSlider",componentClass:H$},{componentName:"AgGridBody",componentClass:en},{componentName:"AgHeaderRoot",componentClass:M$},{componentName:"AgSortIndicator",componentClass:rb},{componentName:"AgPagination",componentClass:ks},{componentName:"AgPageSizeSelector",componentClass:ff},{componentName:"AgOverlayWrapper",componentClass:tK},{componentName:"AgGroupComponent",componentClass:B$},{componentName:"AgRowContainer",componentClass:zc},{componentName:"AgFakeHorizontalScroll",componentClass:iK},{componentName:"AgFakeVerticalScroll",componentClass:uK},{componentName:"AgAutocomplete",componentClass:j$}];const t=this.extractModuleEntity(i,s=>s.agStackComponents?s.agStackComponents:[]);return e=e.concat(t),e}createBeansList(i="clientSide",e,t){const s=e.filter(a=>!a.rowModel||a.rowModel===i),r={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!r[i]){fa("Could not find row model for rowModelType = "+i);return}if(!et.__assertRegistered(r[i],`rowModelType = '${i}'`,t))return;const o=[Te,Tc,bR,Yp,wc,ke,Vp,qC,Kp,wR,Fl,Ec,Bp,FR,Xp,Up,Hp,aR,go,st,Sn,iu,kr,Ri,Za,zp,cr,KC,hc,TR,tu,ji,YC,Il,jC,lR,eu,Ol,Ae,Sc,at,pn,jp,Ll,zC,$C,Cc,su,DR,$p,Rc,Mp,yc,vc,Vr,uR,PR,qp,jo,Dc,Ga,Qp,bc,AR,wn,QC,Ls,ru,ou,as,Wp,XC,Jp,Co],n=this.extractModuleEntity(s,a=>a.beans?a.beans:[]);o.push(...n);const l=[];return o.forEach(a=>{l.indexOf(a)<0&&l.push(a)}),l}extractModuleEntity(i,e){return[].concat(...i.map(e))}},hK=class{wrap(i,e,t=[],s){const r=this.createWrapper(i,s);return e.forEach(o=>{this.createMethod(r,o,!0)}),t.forEach(o=>{this.createMethod(r,o,!1)}),r}unwrap(i){return i}createMethod(i,e,t){i.addMethod(e,this.createMethodProxy(i,e,t))}createMethodProxy(i,e,t){return function(){return i.hasMethod(e)?i.callMethod(e,arguments):(t&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}}},Jc=typeof global>"u"?{}:global;Jc.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Jc.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Jc.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Jc.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Jc.Node=typeof Node>"u"?{}:Node;Jc.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var yb=class kh{constructor(e,t,s,r,o,n){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gridOptionsService=t,this.eventService=s,this.columnModel=r,this.beans=n,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=kh.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return ye.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,s=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(r=>this.createNode(r,this.rootNode,kh.TOP_LEVEL)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),s&&(s.childrenAfterFilter=t.childrenAfterFilter,s.childrenAfterGroup=t.childrenAfterGroup,s.childrenAfterAggFilter=t.childrenAfterAggFilter,s.childrenAfterSort=t.childrenAfterSort,s.childrenMapped=t.childrenMapped,s.allLeafChildren=t.allLeafChildren)}updateRowData(e,t){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const s={remove:[],update:[],add:[]},r=[];return this.executeRemove(e,s,r),this.executeUpdate(e,s,r),this.executeAdd(e,s),this.updateSelection(r,"rowDataChanged"),t&&ye.sortRowNodesByOrder(this.rootNode.allLeafChildren,t),s}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){const t={type:w.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:e!=null&&e.length?e[0]:null};this.eventService.dispatchEvent(t)}updateSelection(e,t){const s=e.length>0;if(s&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),s){const r={type:w.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(r)}}executeAdd(e,t){var s;const{add:r,addIndex:o}=e;if(ye.missingOrEmpty(r))return;const n=r.map(l=>this.createNode(l,this.rootNode,kh.TOP_LEVEL));if(typeof o=="number"&&o>=0){const{allLeafChildren:l}=this.rootNode,a=l.length;let u=o;if(this.gridOptionsService.get("treeData")&&o>0&&a>0){for(let p=0;p<a;p++)if(((s=l[p])==null?void 0:s.rowIndex)==o-1){u=p+1;break}}const c=l.slice(0,u),h=l.slice(u,l.length);this.rootNode.allLeafChildren=[...c,...n,...h]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...n];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),t.add=n}executeRemove(e,t,s){const{remove:r}=e;if(ye.missingOrEmpty(r))return;const o={};r.forEach(n=>{const l=this.lookupRowNode(n);l&&(l.isSelected()&&s.push(l),l.clearRowTopAndRowIndex(),o[l.id]=!0,delete this.allNodesMap[l.id],t.remove.push(l))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(n=>!o[n.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,s){const{update:r}=e;ye.missingOrEmpty(r)||r.forEach(o=>{const n=this.lookupRowNode(o);n&&(n.updateData(o),!n.selectable&&n.isSelected()&&s.push(n),this.setMasterForRow(n,o,kh.TOP_LEVEL,!1),t.update.push(n))})}lookupRowNode(e){const t=this.gridOptionsService.getCallback("getRowId");let s;if(t){const r=t({data:e,level:0});if(s=this.allNodesMap[r],!s)return console.error(`AG Grid: could not find row id=${r}, data item was not found for this id`),null}else if(s=this.rootNode.allLeafChildren.find(r=>r.data===e),!s)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return s||null}createNode(e,t,s){const r=new _e(this.beans);r.group=!1,this.setMasterForRow(r,e,s,!0);const o=this.gridOptionsService.get("suppressParentsInRowNodes");return t&&!o&&(r.parent=t),r.level=s,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&console.warn(`AG Grid: duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,t,s,r){if(this.gridOptionsService.get("treeData"))e.setMaster(!1),r&&(e.expanded=!1);else{if(this.gridOptionsService.get("masterDetail")){const l=this.gridOptionsService.get("isRowMaster");l?e.setMaster(l(t)):e.setMaster(!0)}else e.setMaster(!1);if(r){const l=this.columnModel.getRowGroupColumns(),a=l?l.length:0,u=s+a;e.expanded=e.master?this.isExpanded(u):!1}}}isExpanded(e){const t=this.gridOptionsService.get("groupDefaultExpanded");return t===-1?!0:e<t}};yb.TOP_LEVEL=0;yb.ROOT_NODE_ID="ROOT_NODE_ID";var pK=yb,Yi=class extends W{constructor(){super(...arguments),this.onRowHeightChanged_debounced=ye.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gridOptionsService.get("suppressAnimationFrame"),s=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,s),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:"pivot"})),this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,w.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new _e(this.beans),this.nodeManager=new pK(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),s=new Set(["excludeChildrenWhenTreeDataFiltering"]),r=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),o=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly"]),n=new Set(["postSortRows","groupDisplayType","accentedSort"]),l=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"]),u=[...e,...t,...s,...r,...r,...o,...n,...l,...a];this.addManagedPropertyListeners(u,d=>{var c;const h=(c=d.changeSet)==null?void 0:c.properties;if(!h)return;const p=m=>h.some(S=>m.has(S));if(p(e)){this.setRowData(this.rootNode.allLeafChildren.map(m=>m.data));return}if(p(t)){this.refreshModel({step:"group"});return}if(p(s)){this.refreshModel({step:"filter"});return}if(p(r)){this.refreshModel({step:"pivot"});return}if(p(o)){this.refreshModel({step:"aggregate"});return}if(p(n)){this.refreshModel({step:"sort"});return}if(p(l)){this.refreshModel({step:"filter_aggregates"});return}p(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gridOptionsService.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,s,r){let o,n=!1;do{o=!1;const l=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),u=Math.max(l,s),d=Math.min(a,r);for(let c=u;c<=d;c++){const h=this.getRow(c);if(h.rowHeightEstimated){const p=this.gridOptionsService.getRowHeightForNode(h);h.setRowHeight(p.height),o=!0,n=!0}}o&&this.setRowTopAndRowIndex()}while(o);return n}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const s=new Set,r=this.gridOptionsService.isDomLayout("normal");for(let o=0;o<this.rowsToDisplay.length;o++){const n=this.rowsToDisplay[o];if(n.id!=null&&s.add(n.id),n.rowHeight==null){const l=this.gridOptionsService.getRowHeightForNode(n,r,e);n.setRowHeight(l.height,l.estimated)}n.setRowTop(t),n.setRowIndex(o),t+=n.rowHeight}return s}clearRowTopAndRowIndex(e,t){const s=e.isActive(),r=n=>{n&&n.id!=null&&!t.has(n.id)&&n.clearRowTopAndRowIndex()},o=n=>{if(r(n),r(n.detailNode),r(n.sibling),n.hasChildren()&&n.childrenAfterGroup){const l=n.level==-1;s&&!l&&!n.expanded||n.childrenAfterGroup.forEach(o)}};o(this.rootNode)}ensureRowsAtPixel(e,t,s=0){const r=this.getRowIndexAtPixel(t),o=this.getRow(r),n=!this.gridOptionsService.get("suppressAnimationFrame");return o===e[0]?!1:(e.forEach(l=>{ye.removeFromArray(this.rootNode.allLeafChildren,l)}),e.forEach((l,a)=>{ye.insertIntoArray(this.rootNode.allLeafChildren,l,Math.max(r+s,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:n}),!0)}highlightRowAtPixel(e,t){const s=t!=null?this.getRowIndexAtPixel(t):null,r=s!=null?this.getRow(s):null;if(!r||!e||r===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const o=this.getHighlightPosition(t,r);this.lastHighlightedRow&&this.lastHighlightedRow!==r&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),r.setHighlighted(o),this.lastHighlightedRow=r}getHighlightPosition(e,t){if(!t){const o=this.getRowIndexAtPixel(e);if(t=this.getRow(o||0),!t)return 1}const{rowTop:s,rowHeight:r}=t;return e-s<r/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter;return t?t.length:0}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let s=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.get("groupHideOpenParents"))for(;s.expanded&&s.childrenAfterSort&&s.childrenAfterSort.length>0;)s=s.childrenAfterSort[0];return s.rowIndex}getRowBounds(e){if(ye.missing(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=this.gridOptionsService.isAnimateRows(),r=e.columns.length===0||e.columns.some(o=>o.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:r,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=ye.missingOrEmpty(e),s=new MS(!1,this.rootNode);return(t||this.gridOptionsService.get("treeData"))&&s.setInactive(),s}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gridOptionsService.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(r=>r.add!=null&&r.add.length>0||r.remove!=null&&r.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const s={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(ye.exists(e)&&(t=s[e]),ye.missing(t)){console.error(`AG Grid: invalid step ${e}, available steps are ${Object.keys(s).join(", ")}`);return}const r=!this.gridOptionsService.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:r}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const s=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,s,!!t.afterColumnsChanged);case"filter":this.doFilter(s);case"pivot":this.doPivot(s);case"aggregate":this.doAggregate(s);case"filter_aggregates":this.doFilterAggregates(s);case"sort":this.doSort(t.rowNodeTransactions,s);case"map":this.doRowsToDisplay()}const r=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(s,r),this.isRefreshingModel=!1;const o={type:w.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(o)}isEmpty(){const e=ye.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return ye.missing(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return ye.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let s=!t,r=!1;const o=[],n=this.gridOptionsService.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(l=>{if(r)return;if(s&&(l===t||l===e)&&(r=!0,l.group&&n)){o.push(...l.allLeafChildren);return}if(!s){if(l!==t&&l!==e)return;s=!0}if(!l.group||!n){o.push(l);return}}),o}setDatasource(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,s=this.rowsToDisplay.length-1;if(e<=0)return 0;if(ye.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let o=-1,n=-1;for(;;){const l=Math.floor((t+s)/2),a=this.rowsToDisplay[l];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=l+1:a.rowTop>e&&(s=l-1),o===t&&n===s))return l;o=t,n=s}}isRowInPixel(e,t){const s=e.rowTop,r=e.rowTop+e.rowHeight;return s<=t&&r>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,s)=>e(t,s))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){var t;const{nodes:s,callback:r,recursionType:o,includeFooterNodes:n}=e;let{index:l}=e;for(let d=0;d<s.length;d++){const c=s[d];if(r(c,l++),c.hasChildren()&&!c.footer){let h=null;switch(o){case 0:h=c.childrenAfterGroup;break;case 1:h=c.childrenAfterAggFilter;break;case 2:h=c.childrenAfterSort;break;case 3:h=c.leafGroup?null:c.childrenAfterSort;break}h&&(l=this.recursivelyWalkNodesAndCallback({nodes:[...h],callback:r,recursionType:o,index:l,includeFooterNodes:n}))}}const a=(t=s[0])==null?void 0:t.parent;if(!n||!a)return l;if(a===this.rootNode){if(!this.gridOptionsService.get("groupIncludeTotalFooter"))return l}else if(!this.gridOptionsService.getGroupIncludeFooter()({node:a}))return l;return a.createFooter(),r(a.sibling,l++),l}doAggregate(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gridOptionsService.get("treeData"),s=this.columnModel.isPivotActive(),r=l=>{l&&l.forEach(a=>{const u=()=>{a.expanded=e,r(a.childrenAfterGroup)};if(t){ye.exists(a.childrenAfterGroup)&&u();return}if(s){!a.leafGroup&&u();return}a.group&&u()})};this.rootNode&&r(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});const o=e?"expandAll":"collapseAll",n={type:w.EVENT_EXPAND_COLLAPSE_ALL,source:o};this.eventService.dispatchEvent(n)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,s,r){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:s}):this.groupStage.execute({rowNode:this.rootNode,changedPath:s,afterColumnsChanged:r}),this.gridOptionsService.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",s)){const n={type:w.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(n)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:w.EVENT_ROW_COUNT_READY}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(_e.ID_PREFIX_ROW_GROUP)==0){let s;return this.forEachNode(r=>{r.id===e&&(s=r)}),s}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){const e={type:w.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const s=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},s)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let s=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(r=>{const o=this.nodeManager.updateRowData(r.rowDataTransaction,void 0);t.push(o),r.callback&&e.push(r.callback.bind(null,o)),typeof r.rowDataTransaction.addIndex=="number"&&(s=!0)}),this.commonUpdateRowData(t,void 0,s),e.length>0&&window.setTimeout(()=>{e.forEach(r=>r())},0),t.length>0){const r={type:w.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t};this.eventService.dispatchEvent(r)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();const s=this.nodeManager.updateRowData(e,t),r=typeof e.addIndex=="number";return this.commonUpdateRowData([s],t,r),s}createRowNodeOrder(){if(this.gridOptionsService.get("suppressMaintainUnsortedOrder"))return;const t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let s=0;s<this.rootNode.allLeafChildren.length;s++){const r=this.rootNode.allLeafChildren[s];t[r.id]=s}return t}commonUpdateRowData(e,t,s){if(!this.hasStarted)return;const r=!this.gridOptionsService.get("suppressAnimationFrame");s&&(t=this.createRowNodeOrder());const o={type:w.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(o),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:r})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const s=t.detailNode;s&&s.setRowHeight(s.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};g([T("columnModel")],Yi.prototype,"columnModel",2);g([T("selectionService")],Yi.prototype,"selectionService",2);g([T("filterManager")],Yi.prototype,"filterManager",2);g([T("valueCache")],Yi.prototype,"valueCache",2);g([T("beans")],Yi.prototype,"beans",2);g([T("filterStage")],Yi.prototype,"filterStage",2);g([T("sortStage")],Yi.prototype,"sortStage",2);g([T("flattenStage")],Yi.prototype,"flattenStage",2);g([qe("groupStage")],Yi.prototype,"groupStage",2);g([qe("aggregationStage")],Yi.prototype,"aggregationStage",2);g([qe("pivotStage")],Yi.prototype,"pivotStage",2);g([qe("filterAggregatesStage")],Yi.prototype,"filterAggregatesStage",2);g([z],Yi.prototype,"init",1);Yi=g([te("rowModel")],Yi);var JC=class extends W{execute(e){const{changedPath:t}=e;this.filterService.filter(t)}};g([T("filterService")],JC.prototype,"filterService",2);JC=g([te("filterStage")],JC);var Zp=class extends W{execute(e){const t=this.sortController.getSortOptions(),s=ye.exists(t)&&t.length>0,r=s&&ye.exists(e.rowNodeTransactions)&&this.gridOptionsService.get("deltaSort"),o=t.some(n=>this.gridOptionsService.isColumnsSortingCoupledToGroup()?n.column.isPrimary()&&n.column.isRowGroupActive():!!n.column.getColDef().showRowGroup);this.sortService.sort(t,s,r,e.rowNodeTransactions,e.changedPath,o)}};g([T("sortService")],Zp.prototype,"sortService",2);g([T("sortController")],Zp.prototype,"sortController",2);Zp=g([te("sortStage")],Zp);var eg=class extends W{execute(e){const t=e.rowNode,s=[],r=this.columnModel.isPivotMode(),o=r&&t.leafGroup,n=o?[t]:t.childrenAfterSort,l=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(l,n,s,r,0);const a=s.length>0;return!o&&a&&l.groupIncludeTotalFooter&&(t.createFooter(),this.addRowNodeToRowsToDisplay(l,t.sibling,s,0)),s}getFlattenDetails(){const e=this.gridOptionsService.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gridOptionsService.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.get("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}}recursivelyAddToRowsToDisplay(e,t,s,r,o){if(!ye.missingOrEmpty(t))for(let n=0;n<t.length;n++){const l=t[n],a=l.hasChildren(),u=r&&!a,d=e.groupRemoveSingleChildren&&a&&l.childrenAfterGroup.length===1,c=e.groupRemoveLowestSingleChildren&&a&&l.leafGroup&&l.childrenAfterGroup.length===1,h=r&&l.leafGroup,p=e.hideOpenParents&&l.expanded&&!l.master&&!h;if(!u&&!p&&!d&&!c&&this.addRowNodeToRowsToDisplay(e,l,s,o),!(r&&l.leafGroup)){if(a){const S=d||c;if(l.expanded||S){const E=S?o:o+1;this.recursivelyAddToRowsToDisplay(e,l.childrenAfterSort,s,r,E),e.getGroupIncludeFooter({node:l})?(l.createFooter(),this.addRowNodeToRowsToDisplay(e,l.sibling,s,E)):l.destroyFooter()}}else if(l.master&&l.expanded){const S=this.createDetailNode(l);this.addRowNodeToRowsToDisplay(e,S,s,o)}}}}addRowNodeToRowsToDisplay(e,t,s,r){s.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:r)}createDetailNode(e){if(ye.exists(e.detailNode))return e.detailNode;const t=new _e(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,ye.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}};g([T("columnModel")],eg.prototype,"columnModel",2);g([T("beans")],eg.prototype,"beans",2);eg=g([te("flattenStage")],eg);var tg=class extends W{sort(e,t,s,r,o,n){const l=this.gridOptionsService.get("groupMaintainOrder"),a=this.columnModel.getAllGridColumns().some(p=>p.isRowGroupActive());let u={};s&&r&&(u=this.calculateDirtyNodes(r));const d=this.columnModel.isPivotMode(),c=this.gridOptionsService.getCallback("postSortRows"),h=p=>{var m;this.pullDownGroupDataForHideOpenParents(p.childrenAfterAggFilter,!0);const S=d&&p.leafGroup;if(l&&a&&!p.leafGroup&&!n){const C=(m=this.columnModel.getRowGroupColumns())==null?void 0:m[p.level+1],v=(C==null?void 0:C.getSort())===null,R=p.childrenAfterAggFilter.slice(0);if(p.childrenAfterSort&&!v){const b={};p.childrenAfterSort.forEach((A,F)=>{b[A.id]=F}),R.sort((A,F)=>{var O,L;return((O=b[A.id])!=null?O:0)-((L=b[F.id])!=null?L:0)})}p.childrenAfterSort=R}else!t||S?p.childrenAfterSort=p.childrenAfterAggFilter.slice(0):s?p.childrenAfterSort=this.doDeltaSort(p,u,o,e):p.childrenAfterSort=this.rowNodeSorter.doFullSort(p.childrenAfterAggFilter,e);if(p.sibling&&(p.sibling.childrenAfterSort=p.childrenAfterSort),this.updateChildIndexes(p),c){const C={nodes:p.childrenAfterSort};c(C)}};o&&o.forEachChangedNodeDepthFirst(h),this.updateGroupDataForHideOpenParents(o)}calculateDirtyNodes(e){const t={},s=r=>{r&&r.forEach(o=>t[o.id]=!0)};return e&&e.forEach(r=>{s(r.add),s(r.update),s(r.remove)}),t}doDeltaSort(e,t,s,r){const o=e.childrenAfterAggFilter,n=e.childrenAfterSort;if(!n)return this.rowNodeSorter.doFullSort(o,r);const l={},a=[];o.forEach(h=>{t[h.id]||!s.canSkip(h)?a.push(h):l[h.id]=!0});const u=n.filter(h=>l[h.id]),d=(h,p)=>({currentPos:p,rowNode:h}),c=a.map(d).sort((h,p)=>this.rowNodeSorter.compareRowNodes(r,h,p));return this.mergeSortedArrays(r,c,u.map(d)).map(({rowNode:h})=>h)}mergeSortedArrays(e,t,s){const r=[];let o=0,n=0;for(;o<t.length&&n<s.length;)this.rowNodeSorter.compareRowNodes(e,t[o],s[n])<0?r.push(t[o++]):r.push(s[n++]);for(;o<t.length;)r.push(t[o++]);for(;n<s.length;)r.push(s[n++]);return r}updateChildIndexes(e){if(ye.missing(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let s=0;s<t.length;s++){const r=t[s],o=s===0,n=s===e.childrenAfterSort.length-1;r.setFirstChild(o),r.setLastChild(n),r.setChildIndex(s)}}updateGroupDataForHideOpenParents(e){if(!this.gridOptionsService.get("groupHideOpenParents"))return;if(this.gridOptionsService.get("treeData"))return ye.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=s=>{this.pullDownGroupDataForHideOpenParents(s.childrenAfterSort,!1),s.childrenAfterSort.forEach(r=>{r.hasChildren()&&t(r)})};e&&e.executeFromRootNode(s=>t(s))}pullDownGroupDataForHideOpenParents(e,t){!this.gridOptionsService.get("groupHideOpenParents")||ye.missing(e)||e.forEach(s=>{this.columnModel.getGroupDisplayColumns().forEach(o=>{const n=o.getColDef().showRowGroup;if(typeof n!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const l=n,a=this.columnModel.getPrimaryColumn(l);if(a!==s.rowGroupColumn)if(t)s.setGroupValue(o.getId(),void 0);else{const d=s.getFirstChildOfFirstChild(a);d&&s.setGroupValue(o.getId(),d.key)}})})}};g([T("columnModel")],tg.prototype,"columnModel",2);g([T("rowNodeSorter")],tg.prototype,"rowNodeSorter",2);tg=g([te("sortService")],tg);var ZC=class extends W{filter(e){const t=this.filterManager.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const s=(r,o)=>{r.hasChildren()&&e&&!o?r.childrenAfterFilter=r.childrenAfterGroup.filter(n=>{const l=n.childrenAfterFilter&&n.childrenAfterFilter.length>0,a=n.data&&this.filterManager.doesRowPassFilter({rowNode:n});return l||a}):r.childrenAfterFilter=r.childrenAfterGroup,r.sibling&&(r.sibling.childrenAfterFilter=r.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const r=(n,l)=>{if(n.childrenAfterGroup)for(let a=0;a<n.childrenAfterGroup.length;a++){const u=n.childrenAfterGroup[a],d=l||this.filterManager.doesRowPassFilter({rowNode:u});u.childrenAfterGroup?r(n.childrenAfterGroup[a],d):s(u,d)}s(n,l)},o=n=>r(n,!1);t.executeFromRootNode(o)}else{const r=o=>s(o,!1);t.forEachChangedNodeDepthFirst(r,!0)}}doingTreeDataFiltering(){return this.gridOptionsService.get("treeData")&&!this.gridOptionsService.get("excludeChildrenWhenTreeDataFiltering")}};g([T("filterManager")],ZC.prototype,"filterManager",2);ZC=g([te("filterService")],ZC);var nu=class extends W{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gridOptionsService.exists("getRowId");return this.gridOptionsService.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const[s,r]=t;this.clientSideRowModel.updateRowData(s,r)}createTransactionForRowData(e){if(ye.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}const t=this.gridOptionsService.getCallback("getRowId");if(t==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const s={remove:[],update:[],add:[]},r=this.clientSideRowModel.getCopyOfNodesMap(),n=this.gridOptionsService.get("suppressMaintainUnsortedOrder")?void 0:{};return ye.exists(e)&&e.forEach((l,a)=>{const u=t({data:l,level:0}),d=r[u];n&&(n[u]=a),d?(d.data!==l&&s.update.push(l),r[u]=void 0):s.add.push(l)}),ye.iterateObject(r,(l,a)=>{a&&s.remove.push(a.data)}),[s,n]}onRowDataUpdated(){const e=this.gridOptionsService.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}};g([T("rowModel")],nu.prototype,"rowModel",2);g([T("rowRenderer")],nu.prototype,"rowRenderer",2);g([T("selectionService")],nu.prototype,"selectionService",2);g([z],nu.prototype,"postConstruct",1);nu=g([te("immutableService")],nu);var gK="31.2.1",fK={version:gK,moduleName:"@ag-grid-community/client-side-row-model",rowModel:"clientSide",beans:[Yi,JC,Zp,eg,tg,ZC,nu]},mK=Object.defineProperty,CK=Object.getOwnPropertyDescriptor,fs=(i,e,t,s)=>{for(var r=s>1?void 0:s?CK(e,t):e,o=i.length-1,n;o>=0;o--)(n=i[o])&&(r=(s?n(e,t,r):n(r))||r);return s&&r&&mK(e,t,r),r},vK=(i,e)=>(t,s)=>e(t,s,i),ig=class extends yR{constructor(i,e,t){super(i),this.parentCache=e,this.params=t,this.startRow=i*t.blockSize,this.endRow=this.startRow+t.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(i,e,t){ye.exists(e)?i.setDataAndId(e,t.toString()):i.setDataAndId(void 0,void 0)}loadFromDatasource(){const i=this.createLoadParams();if(ye.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(i)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.getGridCommonParams().context}}forEachNode(i,e,t){this.rowNodes.forEach((s,r)=>{this.startRow+r<t&&i(s,e.next())})}getLastAccessed(){return this.lastAccessed}getRow(i,e=!1){e||(this.lastAccessed=this.params.lastAccessedSequence.next());const t=i-this.startRow;return this.rowNodes[t]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let i=0;i<this.params.blockSize;i++){const e=this.startRow+i,t=new _e(this.beans);t.setRowHeight(this.params.rowHeight),t.uiLevel=0,t.setRowIndex(e),t.setRowTop(this.params.rowHeight*e),this.rowNodes.push(t)}}processServerResult(i){this.rowNodes.forEach((t,s)=>{const r=i.rowData?i.rowData[s]:void 0;!t.id&&t.alreadyRendered&&r&&(this.rowNodes[s]=new _e(this.beans),this.rowNodes[s].setRowIndex(t.rowIndex),this.rowNodes[s].setRowTop(t.rowTop),this.rowNodes[s].setRowHeight(t.rowHeight),t.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[s],r,this.startRow+s)});const e=i.rowCount!=null&&i.rowCount>=0?i.rowCount:void 0;this.parentCache.pageLoaded(this,e)}destroyRowNodes(){this.rowNodes.forEach(i=>{i.clearRowTopAndRowIndex()})}};fs([T("beans")],ig.prototype,"beans",2);fs([z],ig.prototype,"postConstruct",1);fs([ps],ig.prototype,"destroyRowNodes",1);var Zc=class lG extends W{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}setBeans(e){this.logger=e.create("InfiniteCache")}getRow(e,t=!1){const s=Math.floor(e/this.params.blockSize);let r=this.blocks[s];if(!r){if(t)return;r=this.createBlock(s)}return r.getRow(e)}createBlock(e){const t=this.createBean(new ig(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(l=>l!=e),s=(l,a)=>a.getLastAccessed()-l.getLastAccessed();t.sort(s);const r=this.params.maxBlocksInCache>0,o=r?this.params.maxBlocksInCache-1:null,n=lG.MAX_EMPTY_BLOCKS_TO_KEEP-1;t.forEach((l,a)=>{const u=l.getState()===ig.STATE_WAITING_TO_LOAD&&a>=n,d=r?a>=o:!1;if(u||d){if(this.isBlockCurrentlyDisplayed(l)||this.isBlockFocused(l))return;this.removeBlockFromCache(l)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const s=e.getStartRow(),r=e.getEndRow();return t.rowIndex>=s&&t.rowIndex<r}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),s=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,s)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const r=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<r&&(this.rowCount=r)}}setRowCount(e,t){this.rowCount=e,ye.exists(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new mc;this.getBlocksInOrder().forEach(s=>s.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(s,r)=>s.getId()-r.getId();return ye.getAllValuesInObject(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const e={type:w.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const s=[];let r=-1,o=!1;const n=new mc;ye.missing(e)&&(o=!0);let l=!1;return this.getBlocksInOrder().forEach(u=>{if(!l){if(o&&r+1!==u.getId()){l=!0;return}r=u.getId(),u.forEachNode(d=>{const c=d===e||d===t;(o||c)&&s.push(d),c&&(o=!o)},n,this.rowCount)}}),l||o?[]:s}};Zc.MAX_EMPTY_BLOCKS_TO_KEEP=2;fs([T("rowRenderer")],Zc.prototype,"rowRenderer",2);fs([T("focusService")],Zc.prototype,"focusService",2);fs([vK(0,Fr("loggerFactory"))],Zc.prototype,"setBeans",1);fs([ps],Zc.prototype,"destroyAllBlocks",1);var SK=Zc,Yo=class extends W{getRowBounds(i){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*i}}ensureRowHeightsValid(i,e,t,s){return!1}init(){this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gridOptionsService.exists("initialGroupOrderComparator")&&ye.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gridOptionsService.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,w.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gridOptionsService.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let i;this.cacheParams?i=this.isSortModelDifferent():i=!0,i&&this.reset()}isSortModelDifferent(){return!ye.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(i){this.destroyDatasource(),this.datasource=i,i&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(i,e){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(i,e):[]}reset(){if(!this.datasource)return;this.gridOptionsService.getCallback("getRowId")!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:w.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gridOptionsService.get("infiniteInitialRowCount"),maxBlocksInCache:this.gridOptionsService.get("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.gridOptionsService.get("cacheOverflowSize"),blockSize:this.gridOptionsService.get("cacheBlockSize"),lastAccessedSequence:new mc},this.infiniteCache=this.createBean(new SK(this.cacheParams)),this.eventService.dispatchEventOnce({type:w.EVENT_ROW_COUNT_READY});const i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)});const i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}getRow(i){if(this.infiniteCache&&!(i>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(i)}getRowNode(i){let e;return this.forEachNode(t=>{t.id===i&&(e=t)}),e}forEachNode(i){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(i)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(i){return i}getRowIndexAtPixel(i){if(this.rowHeight!==0){const e=Math.floor(i/this.rowHeight),t=this.getRowCount()-1;return e>t?t:e}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(i){return!!this.getRowNode(i.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(i,e){this.infiniteCache&&this.infiniteCache.setRowCount(i,e)}};fs([T("filterManager")],Yo.prototype,"filterManager",2);fs([T("sortController")],Yo.prototype,"sortController",2);fs([T("selectionService")],Yo.prototype,"selectionService",2);fs([T("rowRenderer")],Yo.prototype,"rowRenderer",2);fs([T("rowNodeBlockLoader")],Yo.prototype,"rowNodeBlockLoader",2);fs([z],Yo.prototype,"init",1);fs([ps],Yo.prototype,"destroyDatasource",1);Yo=fs([te("rowModel")],Yo);var wK="31.2.1",yK={version:wK,moduleName:"@ag-grid-community/infinite-row-model",rowModel:"infinite",beans:[Yo]},EK=Object.defineProperty,RK=Object.getOwnPropertyDescriptor,Ji=(i,e,t,s)=>{for(var r=s>1?void 0:s?RK(e,t):e,o=i.length-1,n;o>=0;o--)(n=i[o])&&(r=(s?n(e,t,r):n(r))||r);return s&&r&&EK(e,t,r),r},TK=class{setBeans(i){this.beans=i}getFileName(i){const e=this.getDefaultFileExtension();return(i==null||!i.length)&&(i=this.getDefaultFileName()),i.indexOf(".")===-1?`${i}.${e}`:i}getData(i){const e=this.createSerializingSession(i);return this.beans.gridSerializer.serialize(e,i)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},DK=class{constructor(i){this.groupColumns=[];const{columnModel:e,valueService:t,gridOptionsService:s,valueFormatterService:r,valueParserService:o,processCellCallback:n,processHeaderCallback:l,processGroupHeaderCallback:a,processRowGroupCallback:u}=i;this.columnModel=e,this.valueService=t,this.gridOptionsService=s,this.valueFormatterService=r,this.valueParserService=o,this.processCellCallback=n,this.processHeaderCallback=l,this.processGroupHeaderCallback=a,this.processRowGroupCallback=u}prepare(i){this.groupColumns=i.filter(e=>!!e.getColDef().showRowGroup)}extractHeaderValue(i){const e=this.getHeaderName(this.processHeaderCallback,i);return e??""}extractRowCellValue(i,e,t,s,r){const n=(!this.gridOptionsService.get("groupHideOpenParents")||r.footer)&&this.shouldRenderGroupSummaryCell(r,i,e)?this.createValueForGroupNode(i,r):this.valueService.getValue(i,r);return this.processCell({accumulatedRowIndex:t,rowNode:r,column:i,value:n,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(i,e,t){var s;if(!(i&&i.group))return!1;if(this.groupColumns.indexOf(e)!==-1){if(((s=i.groupData)==null?void 0:s[e.getId()])!=null||this.gridOptionsService.isRowModelType("serverSide")&&i.group)return!0;if(i.footer&&i.level===-1){const l=e.getColDef();return l==null||l.showRowGroup===!0||l.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}const n=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return t===0&&n}getHeaderName(i,e){return i?i(this.gridOptionsService.addGridCommonParams({column:e})):this.columnModel.getDisplayNameForColumn(e,"csv",!0)}createValueForGroupNode(i,e){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gridOptionsService.addGridCommonParams({column:i,node:e}));const t=this.gridOptionsService.get("treeData"),s=this.gridOptionsService.get("suppressGroupMaintainValueType"),r=a=>{var u,d;if(t||s)return a.key;const c=(u=a.groupData)==null?void 0:u[i.getId()];return!c||!a.rowGroupColumn||a.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:(d=this.valueFormatterService.formatValue(a.rowGroupColumn,a,c))!=null?d:c},o=e.footer,n=[r(e)];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;e.parent;)e=e.parent,n.push(r(e));const l=n.reverse().join(" -> ");return o?`Total ${l}`:l}processCell(i){var e;const{accumulatedRowIndex:t,rowNode:s,column:r,value:o,processCellCallback:n,type:l}=i;return n?{value:(e=n(this.gridOptionsService.addGridCommonParams({accumulatedRowIndex:t,column:r,node:s,value:o,type:l,parseValue:a=>this.valueParserService.parseValue(r,s,a,this.valueService.getValue(r,s)),formatValue:a=>{var u;return(u=this.valueFormatterService.formatValue(r,s,a))!=null?u:a}})))!=null?e:""}:r.getColDef().useValueFormatterForExport!==!1?{value:o??"",valueFormatted:this.valueFormatterService.formatValue(r,s,o)}:{value:o??""}}},bK=class{static download(i,e){const t=document.defaultView||window;if(!t){console.warn("AG Grid: There is no `window` associated with the current `document`");return}const s=document.createElement("a"),r=t.URL.createObjectURL(e);s.setAttribute("href",r),s.setAttribute("download",i),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:t})),document.body.removeChild(s),t.setTimeout(()=>{t.URL.revokeObjectURL(r)},0)}},JF=`\r
`,PK=class extends DK{constructor(i){super(i),this.isFirstLine=!0,this.result="";const{suppressQuotes:e,columnSeparator:t}=i;this.suppressQuotes=e,this.columnSeparator=t}addCustomContent(i){i&&(typeof i=="string"?(/^\s*\n/.test(i)||this.beginNewLine(),i=i.replace(/\r?\n/g,JF),this.result+=i):i.forEach(e=>{this.beginNewLine(),e.forEach((t,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t.data.value||""),t.mergeAcross&&this.appendEmptyCells(t.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(i,e,t,s){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(s)}appendEmptyCells(i){for(let e=1;e<=i;e++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(i,e){e!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(i))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(i,e,t){var s;e!=0&&(this.result+=this.columnSeparator);const r=this.extractRowCellValue(i,e,e,"csv",t);this.result+=this.putInQuotes((s=r.valueFormatted)!=null?s:r.value)}putInQuotes(i){if(this.suppressQuotes)return i;if(i==null)return'""';let e;return typeof i=="string"?e=i:typeof i.toString=="function"?e=i.toString():(console.warn("AG Grid: unknown value type during csv conversion"),e=""),'"'+e.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=JF),this.isFirstLine=!1}},qo=class extends TK{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})}getMergedParams(i){const e=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},e,i)}export(i){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}const e=this.getMergedParams(i),t=this.getData(e),s=new Blob(["\uFEFF",t],{type:"text/plain"}),r=typeof e.fileName=="function"?e.fileName(this.gridOptionsService.getGridCommonParams()):e.fileName;bK.download(this.getFileName(r),s)}exportDataAsCsv(i){this.export(i)}getDataAsCsv(i,e=!1){const t=e?Object.assign({},i):this.getMergedParams(i);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(i){const{columnModel:e,valueService:t,gridOptionsService:s,valueFormatterService:r,valueParserService:o}=this,{processCellCallback:n,processHeaderCallback:l,processGroupHeaderCallback:a,processRowGroupCallback:u,suppressQuotes:d,columnSeparator:c}=i;return new PK({columnModel:e,valueService:t,gridOptionsService:s,valueFormatterService:r,valueParserService:o,processCellCallback:n||void 0,processHeaderCallback:l||void 0,processGroupHeaderCallback:a||void 0,processRowGroupCallback:u||void 0,suppressQuotes:d||!1,columnSeparator:c||","})}isExportSuppressed(){return this.gridOptionsService.get("suppressCsvExport")}};Ji([T("columnModel")],qo.prototype,"columnModel",2);Ji([T("valueService")],qo.prototype,"valueService",2);Ji([T("gridSerializer")],qo.prototype,"gridSerializer",2);Ji([T("gridOptionsService")],qo.prototype,"gridOptionsService",2);Ji([T("valueFormatterService")],qo.prototype,"valueFormatterService",2);Ji([T("valueParserService")],qo.prototype,"valueParserService",2);Ji([z],qo.prototype,"postConstruct",1);qo=Ji([te("csvCreator")],qo);var Qo=class extends W{serialize(i,e={}){const{allColumns:t,columnKeys:s,skipRowGroups:r}=e,o=this.getColumnsToExport(t,r,s);return ye.compose(this.prepareSession(o),this.prependContent(e),this.exportColumnGroups(e,o),this.exportHeaders(e,o),this.processPinnedTopRows(e,o),this.processRows(e,o),this.processPinnedBottomRows(e,o),this.appendContent(e))(i).parse()}processRow(i,e,t,s){const r=e.shouldRowBeSkipped||(()=>!1),o=this.gridOptionsService.get("groupRemoveSingleChildren"),n=this.gridOptionsService.get("groupRemoveLowestSingleChildren"),a=e.rowPositions!=null||!!e.onlySelected,u=this.gridOptionsService.get("groupHideOpenParents")&&!a,d=this.columnModel.isPivotMode()?s.leafGroup:!s.group,c=!!s.footer;e.skipRowGroups;const h=n&&s.leafGroup,p=s.allChildrenCount===1&&(o||h);if(!d&&!c&&(e.skipRowGroups||p||u)||e.onlySelected&&!s.isSelected()||e.skipPinnedTop&&s.rowPinned==="top"||e.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!d&&!c||r(this.gridOptionsService.addGridCommonParams({node:s})))return;const E=i.onNewBodyRow(s);if(t.forEach((C,v)=>{E.onColumn(C,v,s)}),e.getCustomContentBelowRow){const C=e.getCustomContentBelowRow(this.gridOptionsService.addGridCommonParams({node:s}));C&&i.addCustomContent(C)}}appendContent(i){return e=>{const t=i.appendContent;return t&&e.addCustomContent(t),e}}prependContent(i){return e=>{const t=i.prependContent;return t&&e.addCustomContent(t),e}}prepareSession(i){return e=>(e.prepare(i),e)}exportColumnGroups(i,e){return t=>{if(!i.skipColumnGroupHeaders){const s=new Jx,r=this.displayedGroupCreator.createDisplayedGroups(e,s,null);this.recursivelyAddHeaderGroups(r,t,i.processGroupHeaderCallback)}return t}}exportHeaders(i,e){return t=>{if(!i.skipColumnHeaders){const s=t.onNewHeaderRow();e.forEach((r,o)=>{s.onColumn(r,o,void 0)})}return t}}processPinnedTopRows(i,e){return t=>{const s=this.processRow.bind(this,t,i,e);return i.rowPositions?i.rowPositions.filter(r=>r.rowPinned==="top").sort((r,o)=>r.rowIndex-o.rowIndex).map(r=>this.pinnedRowModel.getPinnedTopRow(r.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedTopRow(s),t}}processRows(i,e){return t=>{const s=this.rowModel,r=s.getType(),o=r==="clientSide",n=r==="serverSide",l=!o&&i.onlySelected,a=this.processRow.bind(this,t,i,e),{exportedRows:u="filteredAndSorted"}=i;if(i.rowPositions)i.rowPositions.filter(d=>d.rowPinned==null).sort((d,c)=>d.rowIndex-c.rowIndex).map(d=>s.getRow(d.rowIndex)).forEach(a);else if(this.columnModel.isPivotMode())o?s.forEachPivotNode(a,!0):n?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(i.onlySelectedAllPages||l){const d=this.selectionService.getSelectedNodes();this.replicateSortedOrder(d),d.forEach(a)}else u==="all"?s.forEachNode(a):o||n?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return t}}replicateSortedOrder(i){const e=this.sortController.getSortOptions(),t=(s,r)=>{var o,n,l,a;return s.rowIndex!=null&&r.rowIndex!=null?s.rowIndex-r.rowIndex:s.level===r.level?((o=s.parent)==null?void 0:o.id)===((n=r.parent)==null?void 0:n.id)?this.rowNodeSorter.compareRowNodes(e,{rowNode:s,currentPos:(l=s.rowIndex)!=null?l:-1},{rowNode:r,currentPos:(a=r.rowIndex)!=null?a:-1}):t(s.parent,r.parent):s.level>r.level?t(s.parent,r):t(s,r.parent)};i.sort(t)}processPinnedBottomRows(i,e){return t=>{const s=this.processRow.bind(this,t,i,e);return i.rowPositions?i.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,o)=>r.rowIndex-o.rowIndex).map(r=>this.pinnedRowModel.getPinnedBottomRow(r.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedBottomRow(s),t}}getColumnsToExport(i=!1,e=!1,t){const s=this.columnModel.isPivotMode();if(t&&t.length)return this.columnModel.getGridColumns(t);const r=this.gridOptionsService.get("treeData");let o=[];return i&&!s?o=this.columnModel.getAllGridColumns():o=this.columnModel.getAllDisplayedColumns(),e&&!r&&(o=o.filter(n=>n.getColId()!==pc)),o}recursivelyAddHeaderGroups(i,e,t){const s=[];i.forEach(r=>{const o=r;o.getChildren&&o.getChildren().forEach(n=>s.push(n))}),i.length>0&&i[0]instanceof ci&&this.doAddHeaderHeader(e,i,t),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,e,t)}doAddHeaderHeader(i,e,t){const s=i.onNewHeaderGroupingRow();let r=0;e.forEach(o=>{const n=o;let l;t?l=t(this.gridOptionsService.addGridCommonParams({columnGroup:n})):l=this.columnModel.getDisplayNameForColumnGroup(n,"header");const a=n.getLeafColumns().reduce((u,d,c,h)=>{let p=ye.last(u);return d.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[c],u.push(p)):p&&p[1]==null&&(p[1]=c-1),c===h.length-1&&p&&p[1]==null&&(p[1]=c),u},[]);s.onColumn(n,l||"",r++,n.getLeafColumns().length-1,a)})}};Ji([T("displayedGroupCreator")],Qo.prototype,"displayedGroupCreator",2);Ji([T("columnModel")],Qo.prototype,"columnModel",2);Ji([T("rowModel")],Qo.prototype,"rowModel",2);Ji([T("pinnedRowModel")],Qo.prototype,"pinnedRowModel",2);Ji([T("selectionService")],Qo.prototype,"selectionService",2);Ji([T("rowNodeSorter")],Qo.prototype,"rowNodeSorter",2);Ji([T("sortController")],Qo.prototype,"sortController",2);Qo=Ji([te("gridSerializer")],Qo);var AK="31.2.1",FK={version:AK,moduleName:"@ag-grid-community/csv-export",beans:[qo,Qo]};et.__registerModules([fK,yK,FK],!1,void 0);var eh={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aG=P;function Ne(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rs=Object.prototype.hasOwnProperty,OK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZF={},eO={};function uG(i){return Rs.call(eO,i)?!0:Rs.call(ZF,i)?!1:OK.test(i)?eO[i]=!0:(ZF[i]=!0,!1)}function ms(i,e,t,s,r,o,n){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=o,this.removeEmptyString=n}var Vi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Vi[i]=new ms(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Vi[e]=new ms(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Vi[i]=new ms(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Vi[i]=new ms(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Vi[i]=new ms(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Vi[i]=new ms(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Vi[i]=new ms(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Vi[i]=new ms(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Vi[i]=new ms(i,5,!1,i.toLowerCase(),null,!1,!1)});var Eb=/[\-:]([a-z])/g;function Rb(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(Eb,Rb);Vi[e]=new ms(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(Eb,Rb);Vi[e]=new ms(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(Eb,Rb);Vi[e]=new ms(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Vi[i]=new ms(i,1,!1,i.toLowerCase(),null,!1,!1)});Vi.xlinkHref=new ms("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Vi[i]=new ms(i,1,!1,i.toLowerCase(),null,!0,!0)});var Nm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LK=["Webkit","ms","Moz","O"];Object.keys(Nm).forEach(function(i){LK.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),Nm[e]=Nm[i]})});var IK=/["'&<>]/;function rs(i){if(typeof i=="boolean"||typeof i=="number")return""+i;i=""+i;var e=IK.exec(i);if(e){var t="",s,r=0;for(s=e.index;s<i.length;s++){switch(i.charCodeAt(s)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}r!==s&&(t+=i.substring(r,s)),r=s+1,t+=e}i=r!==s?t+i.substring(r,s):t}return i}var MK=/([A-Z])/g,xK=/^ms-/,OR=Array.isArray;function sn(i,e){return{insertionMode:i,selectedValue:e}}function _K(i,e,t){switch(e){case"select":return sn(1,t.value!=null?t.value:t.defaultValue);case"svg":return sn(2,null);case"math":return sn(3,null);case"foreignObject":return sn(1,null);case"table":return sn(4,null);case"thead":case"tbody":case"tfoot":return sn(5,null);case"colgroup":return sn(7,null);case"tr":return sn(6,null)}return 4<=i.insertionMode||i.insertionMode===0?sn(1,null):i}var tO=new Map;function dG(i,e,t){if(typeof t!="object")throw Error(Ne(62));e=!0;for(var s in t)if(Rs.call(t,s)){var r=t[s];if(r!=null&&typeof r!="boolean"&&r!==""){if(s.indexOf("--")===0){var o=rs(s);r=rs((""+r).trim())}else{o=s;var n=tO.get(o);n!==void 0||(n=rs(o.replace(MK,"-$1").toLowerCase().replace(xK,"-ms-")),tO.set(o,n)),o=n,r=typeof r=="number"?r===0||Rs.call(Nm,s)?""+r:r+"px":rs((""+r).trim())}e?(e=!1,i.push(' style="',o,":",r)):i.push(";",o,":",r)}}e||i.push('"')}function Us(i,e,t,s){switch(t){case"style":dG(i,e,s);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N"){if(e=Vi.hasOwnProperty(t)?Vi[t]:null,e!==null){switch(typeof s){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(t=e.attributeName,e.type){case 3:s&&i.push(" ",t,'=""');break;case 4:s===!0?i.push(" ",t,'=""'):s!==!1&&i.push(" ",t,'="',rs(s),'"');break;case 5:isNaN(s)||i.push(" ",t,'="',rs(s),'"');break;case 6:!isNaN(s)&&1<=s&&i.push(" ",t,'="',rs(s),'"');break;default:e.sanitizeURL&&(s=""+s),i.push(" ",t,'="',rs(s),'"')}}else if(uG(t)){switch(typeof s){case"function":case"symbol":return;case"boolean":if(e=t.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}i.push(" ",t,'="',rs(s),'"')}}}function Gm(i,e,t){if(e!=null){if(t!=null)throw Error(Ne(60));if(typeof e!="object"||!("__html"in e))throw Error(Ne(61));e=e.__html,e!=null&&i.push(""+e)}}function NK(i){var e="";return aG.Children.forEach(i,function(t){t!=null&&(e+=t)}),e}function Cy(i,e,t,s){i.push(Do(t));var r=t=null,o;for(o in e)if(Rs.call(e,o)){var n=e[o];if(n!=null)switch(o){case"children":t=n;break;case"dangerouslySetInnerHTML":r=n;break;default:Us(i,s,o,n)}}return i.push(">"),Gm(i,r,t),typeof t=="string"?(i.push(rs(t)),null):t}var GK=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,iO=new Map;function Do(i){var e=iO.get(i);if(e===void 0){if(!GK.test(i))throw Error(Ne(65,i));e="<"+i,iO.set(i,e)}return e}function kK(i,e,t,s,r){switch(e){case"select":i.push(Do("select"));var o=null,n=null;for(d in t)if(Rs.call(t,d)){var l=t[d];if(l!=null)switch(d){case"children":o=l;break;case"dangerouslySetInnerHTML":n=l;break;case"defaultValue":case"value":break;default:Us(i,s,d,l)}}return i.push(">"),Gm(i,n,o),o;case"option":n=r.selectedValue,i.push(Do("option"));var a=l=null,u=null,d=null;for(o in t)if(Rs.call(t,o)){var c=t[o];if(c!=null)switch(o){case"children":l=c;break;case"selected":u=c;break;case"dangerouslySetInnerHTML":d=c;break;case"value":a=c;default:Us(i,s,o,c)}}if(n!=null)if(t=a!==null?""+a:NK(l),OR(n)){for(s=0;s<n.length;s++)if(""+n[s]===t){i.push(' selected=""');break}}else""+n===t&&i.push(' selected=""');else u&&i.push(' selected=""');return i.push(">"),Gm(i,d,l),l;case"textarea":i.push(Do("textarea")),d=n=o=null;for(l in t)if(Rs.call(t,l)&&(a=t[l],a!=null))switch(l){case"children":d=a;break;case"value":o=a;break;case"defaultValue":n=a;break;case"dangerouslySetInnerHTML":throw Error(Ne(91));default:Us(i,s,l,a)}if(o===null&&n!==null&&(o=n),i.push(">"),d!=null){if(o!=null)throw Error(Ne(92));if(OR(d)&&1<d.length)throw Error(Ne(93));o=""+d}return typeof o=="string"&&o[0]===`
`&&i.push(`
`),o!==null&&i.push(rs(""+o)),null;case"input":i.push(Do("input")),a=d=l=o=null;for(n in t)if(Rs.call(t,n)&&(u=t[n],u!=null))switch(n){case"children":case"dangerouslySetInnerHTML":throw Error(Ne(399,"input"));case"defaultChecked":a=u;break;case"defaultValue":l=u;break;case"checked":d=u;break;case"value":o=u;break;default:Us(i,s,n,u)}return d!==null?Us(i,s,"checked",d):a!==null&&Us(i,s,"checked",a),o!==null?Us(i,s,"value",o):l!==null&&Us(i,s,"value",l),i.push("/>"),null;case"menuitem":i.push(Do("menuitem"));for(var h in t)if(Rs.call(t,h)&&(o=t[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Ne(400));default:Us(i,s,h,o)}return i.push(">"),null;case"title":i.push(Do("title")),o=null;for(c in t)if(Rs.call(t,c)&&(n=t[c],n!=null))switch(c){case"children":o=n;break;case"dangerouslySetInnerHTML":throw Error(Ne(434));default:Us(i,s,c,n)}return i.push(">"),o;case"listing":case"pre":i.push(Do(e)),n=o=null;for(a in t)if(Rs.call(t,a)&&(l=t[a],l!=null))switch(a){case"children":o=l;break;case"dangerouslySetInnerHTML":n=l;break;default:Us(i,s,a,l)}if(i.push(">"),n!=null){if(o!=null)throw Error(Ne(60));if(typeof n!="object"||!("__html"in n))throw Error(Ne(61));t=n.__html,t!=null&&(typeof t=="string"&&0<t.length&&t[0]===`
`?i.push(`
`,t):i.push(""+t))}return typeof o=="string"&&o[0]===`
`&&i.push(`
`),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":i.push(Do(e));for(var p in t)if(Rs.call(t,p)&&(o=t[p],o!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(Ne(399,e));default:Us(i,s,p,o)}return i.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Cy(i,t,e,s);case"html":return r.insertionMode===0&&i.push("<!DOCTYPE html>"),Cy(i,t,e,s);default:if(e.indexOf("-")===-1&&typeof t.is!="string")return Cy(i,t,e,s);i.push(Do(e)),n=o=null;for(u in t)if(Rs.call(t,u)&&(l=t[u],l!=null))switch(u){case"children":o=l;break;case"dangerouslySetInnerHTML":n=l;break;case"style":dG(i,s,l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:uG(u)&&typeof l!="function"&&typeof l!="symbol"&&i.push(" ",u,'="',rs(l),'"')}return i.push(">"),Gm(i,n,o),o}}function sO(i,e,t){if(i.push('<!--$?--><template id="'),t===null)throw Error(Ne(395));return i.push(t),i.push('"></template>')}function VK(i,e,t,s){switch(t.insertionMode){case 0:case 1:return i.push('<div hidden id="'),i.push(e.segmentPrefix),e=s.toString(16),i.push(e),i.push('">');case 2:return i.push('<svg aria-hidden="true" style="display:none" id="'),i.push(e.segmentPrefix),e=s.toString(16),i.push(e),i.push('">');case 3:return i.push('<math aria-hidden="true" style="display:none" id="'),i.push(e.segmentPrefix),e=s.toString(16),i.push(e),i.push('">');case 4:return i.push('<table hidden id="'),i.push(e.segmentPrefix),e=s.toString(16),i.push(e),i.push('">');case 5:return i.push('<table hidden><tbody id="'),i.push(e.segmentPrefix),e=s.toString(16),i.push(e),i.push('">');case 6:return i.push('<table hidden><tr id="'),i.push(e.segmentPrefix),e=s.toString(16),i.push(e),i.push('">');case 7:return i.push('<table hidden><colgroup id="'),i.push(e.segmentPrefix),e=s.toString(16),i.push(e),i.push('">');default:throw Error(Ne(397))}}function HK(i,e){switch(e.insertionMode){case 0:case 1:return i.push("</div>");case 2:return i.push("</svg>");case 3:return i.push("</math>");case 4:return i.push("</table>");case 5:return i.push("</tbody></table>");case 6:return i.push("</tr></table>");case 7:return i.push("</colgroup></table>");default:throw Error(Ne(397))}}var BK=/[<\u2028\u2029]/g;function vy(i){return JSON.stringify(i).replace(BK,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function WK(i,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:i}}function rO(i,e,t,s){return t.generateStaticMarkup?(i.push(rs(e)),!1):(e===""?i=s:(s&&i.push("<!-- -->"),i.push(rs(e)),i=!0),i)}var up=Object.assign,UK=Symbol.for("react.element"),cG=Symbol.for("react.portal"),hG=Symbol.for("react.fragment"),pG=Symbol.for("react.strict_mode"),gG=Symbol.for("react.profiler"),fG=Symbol.for("react.provider"),mG=Symbol.for("react.context"),CG=Symbol.for("react.forward_ref"),vG=Symbol.for("react.suspense"),SG=Symbol.for("react.suspense_list"),wG=Symbol.for("react.memo"),Tb=Symbol.for("react.lazy"),zK=Symbol.for("react.scope"),$K=Symbol.for("react.debug_trace_mode"),KK=Symbol.for("react.legacy_hidden"),jK=Symbol.for("react.default_value"),oO=Symbol.iterator;function LR(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case hG:return"Fragment";case cG:return"Portal";case gG:return"Profiler";case pG:return"StrictMode";case vG:return"Suspense";case SG:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case mG:return(i.displayName||"Context")+".Consumer";case fG:return(i._context.displayName||"Context")+".Provider";case CG:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case wG:return e=i.displayName||null,e!==null?e:LR(i.type)||"Memo";case Tb:e=i._payload,i=i._init;try{return LR(i(e))}catch{}}return null}var yG={};function nO(i,e){if(i=i.contextTypes,!i)return yG;var t={},s;for(s in i)t[s]=e[s];return t}var Ca=null;function _S(i,e){if(i!==e){i.context._currentValue2=i.parentValue,i=i.parent;var t=e.parent;if(i===null){if(t!==null)throw Error(Ne(401))}else{if(t===null)throw Error(Ne(401));_S(i,t)}e.context._currentValue2=e.value}}function EG(i){i.context._currentValue2=i.parentValue,i=i.parent,i!==null&&EG(i)}function RG(i){var e=i.parent;e!==null&&RG(e),i.context._currentValue2=i.value}function TG(i,e){if(i.context._currentValue2=i.parentValue,i=i.parent,i===null)throw Error(Ne(402));i.depth===e.depth?_S(i,e):TG(i,e)}function DG(i,e){var t=e.parent;if(t===null)throw Error(Ne(402));i.depth===t.depth?_S(i,t):DG(i,t),e.context._currentValue2=e.value}function ev(i){var e=Ca;e!==i&&(e===null?RG(i):i===null?EG(e):e.depth===i.depth?_S(e,i):e.depth>i.depth?TG(e,i):DG(e,i),Ca=i)}var lO={isMounted:function(){return!1},enqueueSetState:function(i,e){i=i._reactInternals,i.queue!==null&&i.queue.push(e)},enqueueReplaceState:function(i,e){i=i._reactInternals,i.replace=!0,i.queue=[e]},enqueueForceUpdate:function(){}};function aO(i,e,t,s){var r=i.state!==void 0?i.state:null;i.updater=lO,i.props=t,i.state=r;var o={queue:[],replace:!1};i._reactInternals=o;var n=e.contextType;if(i.context=typeof n=="object"&&n!==null?n._currentValue2:s,n=e.getDerivedStateFromProps,typeof n=="function"&&(n=n(t,r),r=n==null?r:up({},r,n),i.state=r),typeof e.getDerivedStateFromProps!="function"&&typeof i.getSnapshotBeforeUpdate!="function"&&(typeof i.UNSAFE_componentWillMount=="function"||typeof i.componentWillMount=="function"))if(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lO.enqueueReplaceState(i,i.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,n=o.replace,o.queue=null,o.replace=!1,n&&e.length===1)i.state=e[0];else{for(o=n?e[0]:i.state,r=!0,n=n?1:0;n<e.length;n++){var l=e[n];l=typeof l=="function"?l.call(i,o,t,s):l,l!=null&&(r?(r=!1,o=up({},o,l)):up(o,l))}i.state=o}else o.queue=null}var YK={id:1,overflow:""};function IR(i,e,t){var s=i.id;i=i.overflow;var r=32-km(s)-1;s&=~(1<<r),t+=1;var o=32-km(e)+r;if(30<o){var n=r-r%5;return o=(s&(1<<n)-1).toString(32),s>>=n,r-=n,{id:1<<32-km(e)+r|t<<r|s,overflow:o+i}}return{id:1<<o|t<<r|s,overflow:i}}var km=Math.clz32?Math.clz32:XK,qK=Math.log,QK=Math.LN2;function XK(i){return i>>>=0,i===0?32:31-(qK(i)/QK|0)|0}function JK(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var ZK=typeof Object.is=="function"?Object.is:JK,yn=null,Db=null,Vm=null,Tt=null,Vh=!1,tv=!1,sg=0,pl=null,NS=0;function la(){if(yn===null)throw Error(Ne(321));return yn}function uO(){if(0<NS)throw Error(Ne(312));return{memoizedState:null,queue:null,next:null}}function bb(){return Tt===null?Vm===null?(Vh=!1,Vm=Tt=uO()):(Vh=!0,Tt=Vm):Tt.next===null?(Vh=!1,Tt=Tt.next=uO()):(Vh=!0,Tt=Tt.next),Tt}function Pb(){Db=yn=null,tv=!1,Vm=null,NS=0,Tt=pl=null}function bG(i,e){return typeof e=="function"?e(i):e}function dO(i,e,t){if(yn=la(),Tt=bb(),Vh){var s=Tt.queue;if(e=s.dispatch,pl!==null&&(t=pl.get(s),t!==void 0)){pl.delete(s),s=Tt.memoizedState;do s=i(s,t.action),t=t.next;while(t!==null);return Tt.memoizedState=s,[s,e]}return[Tt.memoizedState,e]}return i=i===bG?typeof e=="function"?e():e:t!==void 0?t(e):e,Tt.memoizedState=i,i=Tt.queue={last:null,dispatch:null},i=i.dispatch=ej.bind(null,yn,i),[Tt.memoizedState,i]}function cO(i,e){if(yn=la(),Tt=bb(),e=e===void 0?null:e,Tt!==null){var t=Tt.memoizedState;if(t!==null&&e!==null){var s=t[1];e:if(s===null)s=!1;else{for(var r=0;r<s.length&&r<e.length;r++)if(!ZK(e[r],s[r])){s=!1;break e}s=!0}if(s)return t[0]}}return i=i(),Tt.memoizedState=[i,e],i}function ej(i,e,t){if(25<=NS)throw Error(Ne(301));if(i===yn)if(tv=!0,i={action:t,next:null},pl===null&&(pl=new Map),t=pl.get(e),t===void 0)pl.set(e,i);else{for(e=t;e.next!==null;)e=e.next;e.next=i}}function tj(){throw Error(Ne(394))}function am(){}var hO={readContext:function(i){return i._currentValue2},useContext:function(i){return la(),i._currentValue2},useMemo:cO,useReducer:dO,useRef:function(i){yn=la(),Tt=bb();var e=Tt.memoizedState;return e===null?(i={current:i},Tt.memoizedState=i):e},useState:function(i){return dO(bG,i)},useInsertionEffect:am,useLayoutEffect:function(){},useCallback:function(i,e){return cO(function(){return i},e)},useImperativeHandle:am,useEffect:am,useDebugValue:am,useDeferredValue:function(i){return la(),i},useTransition:function(){return la(),[!1,tj]},useId:function(){var i=Db.treeContext,e=i.overflow;i=i.id,i=(i&~(1<<32-km(i)-1)).toString(32)+e;var t=Hm;if(t===null)throw Error(Ne(404));return e=sg++,i=":"+t.idPrefix+"R"+i,0<e&&(i+="H"+e.toString(32)),i+":"},useMutableSource:function(i,e){return la(),e(i._source)},useSyncExternalStore:function(i,e,t){if(t===void 0)throw Error(Ne(407));return t()}},Hm=null,Sy=aG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function ij(i){return console.error(i),null}function Hh(){}function sj(i,e,t,s,r,o,n,l,a){var u=[],d=new Set;return e={destination:null,responseState:e,progressiveChunkSize:s===void 0?12800:s,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:d,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:r===void 0?ij:r,onAllReady:o===void 0?Hh:o,onShellReady:n===void 0?Hh:n,onShellError:l===void 0?Hh:l,onFatalError:a===void 0?Hh:a},t=iv(e,0,null,t,!1,!1),t.parentFlushed=!0,i=Ab(e,i,null,t,d,yG,null,YK),u.push(i),e}function Ab(i,e,t,s,r,o,n,l){i.allPendingTasks++,t===null?i.pendingRootTasks++:t.pendingTasks++;var a={node:e,ping:function(){var u=i.pingedTasks;u.push(a),u.length===1&&FG(i)},blockedBoundary:t,blockedSegment:s,abortSet:r,legacyContext:o,context:n,treeContext:l};return r.add(a),a}function iv(i,e,t,s,r,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:s,boundary:t,lastPushedText:r,textEmbedded:o}}function rg(i,e){if(i=i.onError(e),i!=null&&typeof i!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof i+'" instead');return i}function sv(i,e){var t=i.onShellError;t(e),t=i.onFatalError,t(e),i.destination!==null?(i.status=2,i.destination.destroy(e)):(i.status=1,i.fatalError=e)}function pO(i,e,t,s,r){for(yn={},Db=e,sg=0,i=t(s,r);tv;)tv=!1,sg=0,NS+=1,Tt=null,i=t(s,r);return Pb(),i}function gO(i,e,t,s){var r=t.render(),o=s.childContextTypes;if(o!=null){var n=e.legacyContext;if(typeof t.getChildContext!="function")s=n;else{t=t.getChildContext();for(var l in t)if(!(l in o))throw Error(Ne(108,LR(s)||"Unknown",l));s=up({},n,t)}e.legacyContext=s,qs(i,e,r),e.legacyContext=n}else qs(i,e,r)}function fO(i,e){if(i&&i.defaultProps){e=up({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function MR(i,e,t,s,r){if(typeof t=="function")if(t.prototype&&t.prototype.isReactComponent){r=nO(t,e.legacyContext);var o=t.contextType;o=new t(s,typeof o=="object"&&o!==null?o._currentValue2:r),aO(o,t,s,r),gO(i,e,o,t)}else{o=nO(t,e.legacyContext),r=pO(i,e,t,s,o);var n=sg!==0;if(typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0)aO(r,t,s,o),gO(i,e,r,t);else if(n){s=e.treeContext,e.treeContext=IR(s,1,0);try{qs(i,e,r)}finally{e.treeContext=s}}else qs(i,e,r)}else if(typeof t=="string"){switch(r=e.blockedSegment,o=kK(r.chunks,t,s,i.responseState,r.formatContext),r.lastPushedText=!1,n=r.formatContext,r.formatContext=_K(n,t,s),xR(i,e,o),r.formatContext=n,t){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:r.chunks.push("</",t,">")}r.lastPushedText=!1}else{switch(t){case KK:case $K:case pG:case gG:case hG:qs(i,e,s.children);return;case SG:qs(i,e,s.children);return;case zK:throw Error(Ne(343));case vG:e:{t=e.blockedBoundary,r=e.blockedSegment,o=s.fallback,s=s.children,n=new Set;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:n,errorDigest:null},a=iv(i,r.chunks.length,l,r.formatContext,!1,!1);r.children.push(a),r.lastPushedText=!1;var u=iv(i,0,null,r.formatContext,!1,!1);u.parentFlushed=!0,e.blockedBoundary=l,e.blockedSegment=u;try{if(xR(i,e,s),i.responseState.generateStaticMarkup||u.lastPushedText&&u.textEmbedded&&u.chunks.push("<!-- -->"),u.status=1,rv(l,u),l.pendingTasks===0)break e}catch(d){u.status=4,l.forceClientRender=!0,l.errorDigest=rg(i,d)}finally{e.blockedBoundary=t,e.blockedSegment=r}e=Ab(i,o,t,a,n,e.legacyContext,e.context,e.treeContext),i.pingedTasks.push(e)}return}if(typeof t=="object"&&t!==null)switch(t.$$typeof){case CG:if(s=pO(i,e,t.render,s,r),sg!==0){t=e.treeContext,e.treeContext=IR(t,1,0);try{qs(i,e,s)}finally{e.treeContext=t}}else qs(i,e,s);return;case wG:t=t.type,s=fO(t,s),MR(i,e,t,s,r);return;case fG:if(r=s.children,t=t._context,s=s.value,o=t._currentValue2,t._currentValue2=s,n=Ca,Ca=s={parent:n,depth:n===null?0:n.depth+1,context:t,parentValue:o,value:s},e.context=s,qs(i,e,r),i=Ca,i===null)throw Error(Ne(403));s=i.parentValue,i.context._currentValue2=s===jK?i.context._defaultValue:s,i=Ca=i.parent,e.context=i;return;case mG:s=s.children,s=s(t._currentValue2),qs(i,e,s);return;case Tb:r=t._init,t=r(t._payload),s=fO(t,s),MR(i,e,t,s,void 0);return}throw Error(Ne(130,t==null?t:typeof t,""))}}function qs(i,e,t){if(e.node=t,typeof t=="object"&&t!==null){switch(t.$$typeof){case UK:MR(i,e,t.type,t.props,t.ref);return;case cG:throw Error(Ne(257));case Tb:var s=t._init;t=s(t._payload),qs(i,e,t);return}if(OR(t)){mO(i,e,t);return}if(t===null||typeof t!="object"?s=null:(s=oO&&t[oO]||t["@@iterator"],s=typeof s=="function"?s:null),s&&(s=s.call(t))){if(t=s.next(),!t.done){var r=[];do r.push(t.value),t=s.next();while(!t.done);mO(i,e,r)}return}throw i=Object.prototype.toString.call(t),Error(Ne(31,i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i))}typeof t=="string"?(s=e.blockedSegment,s.lastPushedText=rO(e.blockedSegment.chunks,t,i.responseState,s.lastPushedText)):typeof t=="number"&&(s=e.blockedSegment,s.lastPushedText=rO(e.blockedSegment.chunks,""+t,i.responseState,s.lastPushedText))}function mO(i,e,t){for(var s=t.length,r=0;r<s;r++){var o=e.treeContext;e.treeContext=IR(o,s,r);try{xR(i,e,t[r])}finally{e.treeContext=o}}}function xR(i,e,t){var s=e.blockedSegment.formatContext,r=e.legacyContext,o=e.context;try{return qs(i,e,t)}catch(a){if(Pb(),typeof a=="object"&&a!==null&&typeof a.then=="function"){t=a;var n=e.blockedSegment,l=iv(i,n.chunks.length,null,n.formatContext,n.lastPushedText,!0);n.children.push(l),n.lastPushedText=!1,i=Ab(i,e.node,e.blockedBoundary,l,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,t.then(i,i),e.blockedSegment.formatContext=s,e.legacyContext=r,e.context=o,ev(o)}else throw e.blockedSegment.formatContext=s,e.legacyContext=r,e.context=o,ev(o),a}}function rj(i){var e=i.blockedBoundary;i=i.blockedSegment,i.status=3,AG(this,e,i)}function PG(i,e,t){var s=i.blockedBoundary;i.blockedSegment.status=3,s===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(s.pendingTasks--,s.forceClientRender||(s.forceClientRender=!0,i=t===void 0?Error(Ne(432)):t,s.errorDigest=e.onError(i),s.parentFlushed&&e.clientRenderedBoundaries.push(s)),s.fallbackAbortableTasks.forEach(function(r){return PG(r,e,t)}),s.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(s=e.onAllReady,s()))}function rv(i,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var t=e.children[0];t.id=e.id,t.parentFlushed=!0,t.status===1&&rv(i,t)}else i.completedSegments.push(e)}function AG(i,e,t){if(e===null){if(t.parentFlushed){if(i.completedRootSegment!==null)throw Error(Ne(389));i.completedRootSegment=t}i.pendingRootTasks--,i.pendingRootTasks===0&&(i.onShellError=Hh,e=i.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(t.parentFlushed&&t.status===1&&rv(e,t),e.parentFlushed&&i.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(rj,i),e.fallbackAbortableTasks.clear()):t.parentFlushed&&t.status===1&&(rv(e,t),e.completedSegments.length===1&&e.parentFlushed&&i.partialBoundaries.push(e)));i.allPendingTasks--,i.allPendingTasks===0&&(i=i.onAllReady,i())}function FG(i){if(i.status!==2){var e=Ca,t=Sy.current;Sy.current=hO;var s=Hm;Hm=i.responseState;try{var r=i.pingedTasks,o;for(o=0;o<r.length;o++){var n=r[o],l=i,a=n.blockedSegment;if(a.status===0){ev(n.context);try{qs(l,n,n.node),l.responseState.generateStaticMarkup||a.lastPushedText&&a.textEmbedded&&a.chunks.push("<!-- -->"),n.abortSet.delete(n),a.status=1,AG(l,n.blockedBoundary,a)}catch(m){if(Pb(),typeof m=="object"&&m!==null&&typeof m.then=="function"){var u=n.ping;m.then(u,u)}else{n.abortSet.delete(n),a.status=4;var d=n.blockedBoundary,c=m,h=rg(l,c);if(d===null?sv(l,c):(d.pendingTasks--,d.forceClientRender||(d.forceClientRender=!0,d.errorDigest=h,d.parentFlushed&&l.clientRenderedBoundaries.push(d))),l.allPendingTasks--,l.allPendingTasks===0){var p=l.onAllReady;p()}}}finally{}}}r.splice(0,o),i.destination!==null&&Fb(i,i.destination)}catch(m){rg(i,m),sv(i,m)}finally{Hm=s,Sy.current=t,t===hO&&ev(e)}}}function um(i,e,t){switch(t.parentFlushed=!0,t.status){case 0:var s=t.id=i.nextSegmentId++;return t.lastPushedText=!1,t.textEmbedded=!1,i=i.responseState,e.push('<template id="'),e.push(i.placeholderPrefix),i=s.toString(16),e.push(i),e.push('"></template>');case 1:t.status=2;var r=!0;s=t.chunks;var o=0;t=t.children;for(var n=0;n<t.length;n++){for(r=t[n];o<r.index;o++)e.push(s[o]);r=GS(i,e,r)}for(;o<s.length-1;o++)e.push(s[o]);return o<s.length&&(r=e.push(s[o])),r;default:throw Error(Ne(390))}}function GS(i,e,t){var s=t.boundary;if(s===null)return um(i,e,t);if(s.parentFlushed=!0,s.forceClientRender)return i.responseState.generateStaticMarkup||(s=s.errorDigest,e.push("<!--$!-->"),e.push("<template"),s&&(e.push(' data-dgst="'),s=rs(s),e.push(s),e.push('"')),e.push("></template>")),um(i,e,t),i=i.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),i;if(0<s.pendingTasks){s.rootSegmentID=i.nextSegmentId++,0<s.completedSegments.length&&i.partialBoundaries.push(s);var r=i.responseState,o=r.nextSuspenseID++;return r=r.boundaryPrefix+o.toString(16),s=s.id=r,sO(e,i.responseState,s),um(i,e,t),e.push("<!--/$-->")}if(s.byteSize>i.progressiveChunkSize)return s.rootSegmentID=i.nextSegmentId++,i.completedBoundaries.push(s),sO(e,i.responseState,s.id),um(i,e,t),e.push("<!--/$-->");if(i.responseState.generateStaticMarkup||e.push("<!--$-->"),t=s.completedSegments,t.length!==1)throw Error(Ne(391));return GS(i,e,t[0]),i=i.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),i}function CO(i,e,t){return VK(e,i.responseState,t.formatContext,t.id),GS(i,e,t),HK(e,t.formatContext)}function vO(i,e,t){for(var s=t.completedSegments,r=0;r<s.length;r++)OG(i,e,t,s[r]);if(s.length=0,i=i.responseState,s=t.id,t=t.rootSegmentID,e.push(i.startInlineScript),i.sentCompleteBoundaryFunction?e.push('$RC("'):(i.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),s===null)throw Error(Ne(395));return t=t.toString(16),e.push(s),e.push('","'),e.push(i.segmentPrefix),e.push(t),e.push('")<\/script>')}function OG(i,e,t,s){if(s.status===2)return!0;var r=s.id;if(r===-1){if((s.id=t.rootSegmentID)===-1)throw Error(Ne(392));return CO(i,e,s)}return CO(i,e,s),i=i.responseState,e.push(i.startInlineScript),i.sentCompleteSegmentFunction?e.push('$RS("'):(i.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(i.segmentPrefix),r=r.toString(16),e.push(r),e.push('","'),e.push(i.placeholderPrefix),e.push(r),e.push('")<\/script>')}function Fb(i,e){try{var t=i.completedRootSegment;if(t!==null&&i.pendingRootTasks===0){GS(i,e,t),i.completedRootSegment=null;var s=i.responseState.bootstrapChunks;for(t=0;t<s.length-1;t++)e.push(s[t]);t<s.length&&e.push(s[t])}var r=i.clientRenderedBoundaries,o;for(o=0;o<r.length;o++){var n=r[o];s=e;var l=i.responseState,a=n.id,u=n.errorDigest,d=n.errorMessage,c=n.errorComponentStack;if(s.push(l.startInlineScript),l.sentClientRenderFunction?s.push('$RX("'):(l.sentClientRenderFunction=!0,s.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),a===null)throw Error(Ne(395));if(s.push(a),s.push('"'),u||d||c){s.push(",");var h=vy(u||"");s.push(h)}if(d||c){s.push(",");var p=vy(d||"");s.push(p)}if(c){s.push(",");var m=vy(c);s.push(m)}if(!s.push(")<\/script>")){i.destination=null,o++,r.splice(0,o);return}}r.splice(0,o);var S=i.completedBoundaries;for(o=0;o<S.length;o++)if(!vO(i,e,S[o])){i.destination=null,o++,S.splice(0,o);return}S.splice(0,o);var E=i.partialBoundaries;for(o=0;o<E.length;o++){var C=E[o];e:{r=i,n=e;var v=C.completedSegments;for(l=0;l<v.length;l++)if(!OG(r,n,C,v[l])){l++,v.splice(0,l);var R=!1;break e}v.splice(0,l),R=!0}if(!R){i.destination=null,o++,E.splice(0,o);return}}E.splice(0,o);var b=i.completedBoundaries;for(o=0;o<b.length;o++)if(!vO(i,e,b[o])){i.destination=null,o++,b.splice(0,o);return}b.splice(0,o)}finally{i.allPendingTasks===0&&i.pingedTasks.length===0&&i.clientRenderedBoundaries.length===0&&i.completedBoundaries.length===0&&e.push(null)}}function oj(i,e){try{var t=i.abortableTasks;t.forEach(function(s){return PG(s,i,e)}),t.clear(),i.destination!==null&&Fb(i,i.destination)}catch(s){rg(i,s),sv(i,s)}}function nj(){}function LG(i,e,t,s){var r=!1,o=null,n="",l={push:function(u){return u!==null&&(n+=u),!0},destroy:function(u){r=!0,o=u}},a=!1;if(i=sj(i,WK(t,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,nj,void 0,function(){a=!0},void 0,void 0),FG(i),oj(i,s),i.status===1)i.status=2,l.destroy(i.fatalError);else if(i.status!==2&&i.destination===null){i.destination=l;try{Fb(i,l)}catch(u){rg(i,u),sv(i,u)}}if(r)throw o;if(!a)throw Error(Ne(426));return n}eh.renderToNodeStream=function(){throw Error(Ne(207))};eh.renderToStaticMarkup=function(i,e){return LG(i,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};eh.renderToStaticNodeStream=function(){throw Error(Ne(208))};eh.renderToString=function(i,e){return LG(i,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};eh.version="18.2.0";var Ob={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IG=P;function We(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qs=null,Xs=0;function me(i,e){if(e.length!==0)if(512<e.length)0<Xs&&(i.enqueue(new Uint8Array(Qs.buffer,0,Xs)),Qs=new Uint8Array(512),Xs=0),i.enqueue(e);else{var t=Qs.length-Xs;t<e.length&&(t===0?i.enqueue(Qs):(Qs.set(e.subarray(0,t),Xs),i.enqueue(Qs),e=e.subarray(t)),Qs=new Uint8Array(512),Xs=0),Qs.set(e,Xs),Xs+=e.length}}function Mt(i,e){return me(i,e),!0}function SO(i){Qs&&0<Xs&&(i.enqueue(new Uint8Array(Qs.buffer,0,Xs)),Qs=null,Xs=0)}var MG=new TextEncoder;function $e(i){return MG.encode(i)}function le(i){return MG.encode(i)}function xG(i,e){typeof i.error=="function"?i.error(e):i.close()}var Ts=Object.prototype.hasOwnProperty,lj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wO={},yO={};function _G(i){return Ts.call(yO,i)?!0:Ts.call(wO,i)?!1:lj.test(i)?yO[i]=!0:(wO[i]=!0,!1)}function Cs(i,e,t,s,r,o,n){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=o,this.removeEmptyString=n}var Hi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Hi[i]=new Cs(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Hi[e]=new Cs(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Hi[i]=new Cs(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Hi[i]=new Cs(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Hi[i]=new Cs(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Hi[i]=new Cs(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Hi[i]=new Cs(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Hi[i]=new Cs(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Hi[i]=new Cs(i,5,!1,i.toLowerCase(),null,!1,!1)});var Lb=/[\-:]([a-z])/g;function Ib(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(Lb,Ib);Hi[e]=new Cs(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(Lb,Ib);Hi[e]=new Cs(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(Lb,Ib);Hi[e]=new Cs(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Hi[i]=new Cs(i,1,!1,i.toLowerCase(),null,!1,!1)});Hi.xlinkHref=new Cs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Hi[i]=new Cs(i,1,!1,i.toLowerCase(),null,!0,!0)});var Bm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aj=["Webkit","ms","Moz","O"];Object.keys(Bm).forEach(function(i){aj.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),Bm[e]=Bm[i]})});var uj=/["'&<>]/;function Ni(i){if(typeof i=="boolean"||typeof i=="number")return""+i;i=""+i;var e=uj.exec(i);if(e){var t="",s,r=0;for(s=e.index;s<i.length;s++){switch(i.charCodeAt(s)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}r!==s&&(t+=i.substring(r,s)),r=s+1,t+=e}i=r!==s?t+i.substring(r,s):t}return i}var dj=/([A-Z])/g,cj=/^ms-/,_R=Array.isArray,hj=le("<script>"),pj=le("<\/script>"),gj=le('<script src="'),fj=le('<script type="module" src="'),EO=le('" async=""><\/script>'),mj=/(<\/|<)(s)(cript)/gi;function Cj(i,e,t,s){return""+e+(t==="s"?"\\u0073":"\\u0053")+s}function vj(i,e,t,s,r){i=i===void 0?"":i,e=e===void 0?hj:le('<script nonce="'+Ni(e)+'">');var o=[];if(t!==void 0&&o.push(e,$e((""+t).replace(mj,Cj)),pj),s!==void 0)for(t=0;t<s.length;t++)o.push(gj,$e(Ni(s[t])),EO);if(r!==void 0)for(s=0;s<r.length;s++)o.push(fj,$e(Ni(r[s])),EO);return{bootstrapChunks:o,startInlineScript:e,placeholderPrefix:le(i+"P:"),segmentPrefix:le(i+"S:"),boundaryPrefix:i+"B:",idPrefix:i,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function bo(i,e){return{insertionMode:i,selectedValue:e}}function Sj(i){return bo(i==="http://www.w3.org/2000/svg"?2:i==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function wj(i,e,t){switch(e){case"select":return bo(1,t.value!=null?t.value:t.defaultValue);case"svg":return bo(2,null);case"math":return bo(3,null);case"foreignObject":return bo(1,null);case"table":return bo(4,null);case"thead":case"tbody":case"tfoot":return bo(5,null);case"colgroup":return bo(7,null);case"tr":return bo(6,null)}return 4<=i.insertionMode||i.insertionMode===0?bo(1,null):i}var Mb=le("<!-- -->");function RO(i,e,t,s){return e===""?s:(s&&i.push(Mb),i.push($e(Ni(e))),!0)}var TO=new Map,yj=le(' style="'),DO=le(":"),Ej=le(";");function NG(i,e,t){if(typeof t!="object")throw Error(We(62));e=!0;for(var s in t)if(Ts.call(t,s)){var r=t[s];if(r!=null&&typeof r!="boolean"&&r!==""){if(s.indexOf("--")===0){var o=$e(Ni(s));r=$e(Ni((""+r).trim()))}else{o=s;var n=TO.get(o);n!==void 0||(n=le(Ni(o.replace(dj,"-$1").toLowerCase().replace(cj,"-ms-"))),TO.set(o,n)),o=n,r=typeof r=="number"?r===0||Ts.call(Bm,s)?$e(""+r):$e(r+"px"):$e(Ni((""+r).trim()))}e?(e=!1,i.push(yj,o,DO,r)):i.push(Ej,o,DO,r)}}e||i.push(aa)}var Kn=le(" "),od=le('="'),aa=le('"'),bO=le('=""');function zs(i,e,t,s){switch(t){case"style":NG(i,e,s);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N"){if(e=Hi.hasOwnProperty(t)?Hi[t]:null,e!==null){switch(typeof s){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(t=$e(e.attributeName),e.type){case 3:s&&i.push(Kn,t,bO);break;case 4:s===!0?i.push(Kn,t,bO):s!==!1&&i.push(Kn,t,od,$e(Ni(s)),aa);break;case 5:isNaN(s)||i.push(Kn,t,od,$e(Ni(s)),aa);break;case 6:!isNaN(s)&&1<=s&&i.push(Kn,t,od,$e(Ni(s)),aa);break;default:e.sanitizeURL&&(s=""+s),i.push(Kn,t,od,$e(Ni(s)),aa)}}else if(_G(t)){switch(typeof s){case"function":case"symbol":return;case"boolean":if(e=t.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}i.push(Kn,$e(t),od,$e(Ni(s)),aa)}}}var jn=le(">"),PO=le("/>");function Wm(i,e,t){if(e!=null){if(t!=null)throw Error(We(60));if(typeof e!="object"||!("__html"in e))throw Error(We(61));e=e.__html,e!=null&&i.push($e(""+e))}}function Rj(i){var e="";return IG.Children.forEach(i,function(t){t!=null&&(e+=t)}),e}var wy=le(' selected=""');function yy(i,e,t,s){i.push(Po(t));var r=t=null,o;for(o in e)if(Ts.call(e,o)){var n=e[o];if(n!=null)switch(o){case"children":t=n;break;case"dangerouslySetInnerHTML":r=n;break;default:zs(i,s,o,n)}}return i.push(jn),Wm(i,r,t),typeof t=="string"?(i.push($e(Ni(t))),null):t}var Ey=le(`
`),Tj=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,AO=new Map;function Po(i){var e=AO.get(i);if(e===void 0){if(!Tj.test(i))throw Error(We(65,i));e=le("<"+i),AO.set(i,e)}return e}var Dj=le("<!DOCTYPE html>");function bj(i,e,t,s,r){switch(e){case"select":i.push(Po("select"));var o=null,n=null;for(d in t)if(Ts.call(t,d)){var l=t[d];if(l!=null)switch(d){case"children":o=l;break;case"dangerouslySetInnerHTML":n=l;break;case"defaultValue":case"value":break;default:zs(i,s,d,l)}}return i.push(jn),Wm(i,n,o),o;case"option":n=r.selectedValue,i.push(Po("option"));var a=l=null,u=null,d=null;for(o in t)if(Ts.call(t,o)){var c=t[o];if(c!=null)switch(o){case"children":l=c;break;case"selected":u=c;break;case"dangerouslySetInnerHTML":d=c;break;case"value":a=c;default:zs(i,s,o,c)}}if(n!=null)if(t=a!==null?""+a:Rj(l),_R(n)){for(s=0;s<n.length;s++)if(""+n[s]===t){i.push(wy);break}}else""+n===t&&i.push(wy);else u&&i.push(wy);return i.push(jn),Wm(i,d,l),l;case"textarea":i.push(Po("textarea")),d=n=o=null;for(l in t)if(Ts.call(t,l)&&(a=t[l],a!=null))switch(l){case"children":d=a;break;case"value":o=a;break;case"defaultValue":n=a;break;case"dangerouslySetInnerHTML":throw Error(We(91));default:zs(i,s,l,a)}if(o===null&&n!==null&&(o=n),i.push(jn),d!=null){if(o!=null)throw Error(We(92));if(_R(d)&&1<d.length)throw Error(We(93));o=""+d}return typeof o=="string"&&o[0]===`
`&&i.push(Ey),o!==null&&i.push($e(Ni(""+o))),null;case"input":i.push(Po("input")),a=d=l=o=null;for(n in t)if(Ts.call(t,n)&&(u=t[n],u!=null))switch(n){case"children":case"dangerouslySetInnerHTML":throw Error(We(399,"input"));case"defaultChecked":a=u;break;case"defaultValue":l=u;break;case"checked":d=u;break;case"value":o=u;break;default:zs(i,s,n,u)}return d!==null?zs(i,s,"checked",d):a!==null&&zs(i,s,"checked",a),o!==null?zs(i,s,"value",o):l!==null&&zs(i,s,"value",l),i.push(PO),null;case"menuitem":i.push(Po("menuitem"));for(var h in t)if(Ts.call(t,h)&&(o=t[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(We(400));default:zs(i,s,h,o)}return i.push(jn),null;case"title":i.push(Po("title")),o=null;for(c in t)if(Ts.call(t,c)&&(n=t[c],n!=null))switch(c){case"children":o=n;break;case"dangerouslySetInnerHTML":throw Error(We(434));default:zs(i,s,c,n)}return i.push(jn),o;case"listing":case"pre":i.push(Po(e)),n=o=null;for(a in t)if(Ts.call(t,a)&&(l=t[a],l!=null))switch(a){case"children":o=l;break;case"dangerouslySetInnerHTML":n=l;break;default:zs(i,s,a,l)}if(i.push(jn),n!=null){if(o!=null)throw Error(We(60));if(typeof n!="object"||!("__html"in n))throw Error(We(61));t=n.__html,t!=null&&(typeof t=="string"&&0<t.length&&t[0]===`
`?i.push(Ey,$e(t)):i.push($e(""+t)))}return typeof o=="string"&&o[0]===`
`&&i.push(Ey),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":i.push(Po(e));for(var p in t)if(Ts.call(t,p)&&(o=t[p],o!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(We(399,e));default:zs(i,s,p,o)}return i.push(PO),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return yy(i,t,e,s);case"html":return r.insertionMode===0&&i.push(Dj),yy(i,t,e,s);default:if(e.indexOf("-")===-1&&typeof t.is!="string")return yy(i,t,e,s);i.push(Po(e)),n=o=null;for(u in t)if(Ts.call(t,u)&&(l=t[u],l!=null))switch(u){case"children":o=l;break;case"dangerouslySetInnerHTML":n=l;break;case"style":NG(i,s,l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:_G(u)&&typeof l!="function"&&typeof l!="symbol"&&i.push(Kn,$e(u),od,$e(Ni(l)),aa)}return i.push(jn),Wm(i,n,o),o}}var Pj=le("</"),Aj=le(">"),Fj=le('<template id="'),Oj=le('"></template>'),Lj=le("<!--$-->"),Ij=le('<!--$?--><template id="'),Mj=le('"></template>'),xj=le("<!--$!-->"),_j=le("<!--/$-->"),Nj=le("<template"),Gj=le('"'),kj=le(' data-dgst="');le(' data-msg="');le(' data-stck="');var Vj=le("></template>");function FO(i,e,t){if(me(i,Ij),t===null)throw Error(We(395));return me(i,t),Mt(i,Mj)}var Hj=le('<div hidden id="'),Bj=le('">'),Wj=le("</div>"),Uj=le('<svg aria-hidden="true" style="display:none" id="'),zj=le('">'),$j=le("</svg>"),Kj=le('<math aria-hidden="true" style="display:none" id="'),jj=le('">'),Yj=le("</math>"),qj=le('<table hidden id="'),Qj=le('">'),Xj=le("</table>"),Jj=le('<table hidden><tbody id="'),Zj=le('">'),e3=le("</tbody></table>"),t3=le('<table hidden><tr id="'),i3=le('">'),s3=le("</tr></table>"),r3=le('<table hidden><colgroup id="'),o3=le('">'),n3=le("</colgroup></table>");function l3(i,e,t,s){switch(t.insertionMode){case 0:case 1:return me(i,Hj),me(i,e.segmentPrefix),me(i,$e(s.toString(16))),Mt(i,Bj);case 2:return me(i,Uj),me(i,e.segmentPrefix),me(i,$e(s.toString(16))),Mt(i,zj);case 3:return me(i,Kj),me(i,e.segmentPrefix),me(i,$e(s.toString(16))),Mt(i,jj);case 4:return me(i,qj),me(i,e.segmentPrefix),me(i,$e(s.toString(16))),Mt(i,Qj);case 5:return me(i,Jj),me(i,e.segmentPrefix),me(i,$e(s.toString(16))),Mt(i,Zj);case 6:return me(i,t3),me(i,e.segmentPrefix),me(i,$e(s.toString(16))),Mt(i,i3);case 7:return me(i,r3),me(i,e.segmentPrefix),me(i,$e(s.toString(16))),Mt(i,o3);default:throw Error(We(397))}}function a3(i,e){switch(e.insertionMode){case 0:case 1:return Mt(i,Wj);case 2:return Mt(i,$j);case 3:return Mt(i,Yj);case 4:return Mt(i,Xj);case 5:return Mt(i,e3);case 6:return Mt(i,s3);case 7:return Mt(i,n3);default:throw Error(We(397))}}var u3=le('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),d3=le('$RS("'),c3=le('","'),h3=le('")<\/script>'),p3=le('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),g3=le('$RC("'),f3=le('","'),m3=le('")<\/script>'),C3=le('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),v3=le('$RX("'),S3=le('"'),w3=le(")<\/script>"),Ry=le(","),y3=/[<\u2028\u2029]/g;function Ty(i){return JSON.stringify(i).replace(y3,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var dp=Object.assign,E3=Symbol.for("react.element"),GG=Symbol.for("react.portal"),kG=Symbol.for("react.fragment"),VG=Symbol.for("react.strict_mode"),HG=Symbol.for("react.profiler"),BG=Symbol.for("react.provider"),WG=Symbol.for("react.context"),UG=Symbol.for("react.forward_ref"),zG=Symbol.for("react.suspense"),$G=Symbol.for("react.suspense_list"),KG=Symbol.for("react.memo"),xb=Symbol.for("react.lazy"),R3=Symbol.for("react.scope"),T3=Symbol.for("react.debug_trace_mode"),D3=Symbol.for("react.legacy_hidden"),b3=Symbol.for("react.default_value"),OO=Symbol.iterator;function NR(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case kG:return"Fragment";case GG:return"Portal";case HG:return"Profiler";case VG:return"StrictMode";case zG:return"Suspense";case $G:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case WG:return(i.displayName||"Context")+".Consumer";case BG:return(i._context.displayName||"Context")+".Provider";case UG:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case KG:return e=i.displayName||null,e!==null?e:NR(i.type)||"Memo";case xb:e=i._payload,i=i._init;try{return NR(i(e))}catch{}}return null}var jG={};function LO(i,e){if(i=i.contextTypes,!i)return jG;var t={},s;for(s in i)t[s]=e[s];return t}var va=null;function kS(i,e){if(i!==e){i.context._currentValue=i.parentValue,i=i.parent;var t=e.parent;if(i===null){if(t!==null)throw Error(We(401))}else{if(t===null)throw Error(We(401));kS(i,t)}e.context._currentValue=e.value}}function YG(i){i.context._currentValue=i.parentValue,i=i.parent,i!==null&&YG(i)}function qG(i){var e=i.parent;e!==null&&qG(e),i.context._currentValue=i.value}function QG(i,e){if(i.context._currentValue=i.parentValue,i=i.parent,i===null)throw Error(We(402));i.depth===e.depth?kS(i,e):QG(i,e)}function XG(i,e){var t=e.parent;if(t===null)throw Error(We(402));i.depth===t.depth?kS(i,t):XG(i,t),e.context._currentValue=e.value}function ov(i){var e=va;e!==i&&(e===null?qG(i):i===null?YG(e):e.depth===i.depth?kS(e,i):e.depth>i.depth?QG(e,i):XG(e,i),va=i)}var IO={isMounted:function(){return!1},enqueueSetState:function(i,e){i=i._reactInternals,i.queue!==null&&i.queue.push(e)},enqueueReplaceState:function(i,e){i=i._reactInternals,i.replace=!0,i.queue=[e]},enqueueForceUpdate:function(){}};function MO(i,e,t,s){var r=i.state!==void 0?i.state:null;i.updater=IO,i.props=t,i.state=r;var o={queue:[],replace:!1};i._reactInternals=o;var n=e.contextType;if(i.context=typeof n=="object"&&n!==null?n._currentValue:s,n=e.getDerivedStateFromProps,typeof n=="function"&&(n=n(t,r),r=n==null?r:dp({},r,n),i.state=r),typeof e.getDerivedStateFromProps!="function"&&typeof i.getSnapshotBeforeUpdate!="function"&&(typeof i.UNSAFE_componentWillMount=="function"||typeof i.componentWillMount=="function"))if(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&IO.enqueueReplaceState(i,i.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,n=o.replace,o.queue=null,o.replace=!1,n&&e.length===1)i.state=e[0];else{for(o=n?e[0]:i.state,r=!0,n=n?1:0;n<e.length;n++){var l=e[n];l=typeof l=="function"?l.call(i,o,t,s):l,l!=null&&(r?(r=!1,o=dp({},o,l)):dp(o,l))}i.state=o}else o.queue=null}var P3={id:1,overflow:""};function GR(i,e,t){var s=i.id;i=i.overflow;var r=32-Um(s)-1;s&=~(1<<r),t+=1;var o=32-Um(e)+r;if(30<o){var n=r-r%5;return o=(s&(1<<n)-1).toString(32),s>>=n,r-=n,{id:1<<32-Um(e)+r|t<<r|s,overflow:o+i}}return{id:1<<o|t<<r|s,overflow:i}}var Um=Math.clz32?Math.clz32:O3,A3=Math.log,F3=Math.LN2;function O3(i){return i>>>=0,i===0?32:31-(A3(i)/F3|0)|0}function L3(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var I3=typeof Object.is=="function"?Object.is:L3,En=null,_b=null,zm=null,Dt=null,Bh=!1,nv=!1,og=0,gl=null,VS=0;function ua(){if(En===null)throw Error(We(321));return En}function xO(){if(0<VS)throw Error(We(312));return{memoizedState:null,queue:null,next:null}}function Nb(){return Dt===null?zm===null?(Bh=!1,zm=Dt=xO()):(Bh=!0,Dt=zm):Dt.next===null?(Bh=!1,Dt=Dt.next=xO()):(Bh=!0,Dt=Dt.next),Dt}function Gb(){_b=En=null,nv=!1,zm=null,VS=0,Dt=gl=null}function JG(i,e){return typeof e=="function"?e(i):e}function _O(i,e,t){if(En=ua(),Dt=Nb(),Bh){var s=Dt.queue;if(e=s.dispatch,gl!==null&&(t=gl.get(s),t!==void 0)){gl.delete(s),s=Dt.memoizedState;do s=i(s,t.action),t=t.next;while(t!==null);return Dt.memoizedState=s,[s,e]}return[Dt.memoizedState,e]}return i=i===JG?typeof e=="function"?e():e:t!==void 0?t(e):e,Dt.memoizedState=i,i=Dt.queue={last:null,dispatch:null},i=i.dispatch=M3.bind(null,En,i),[Dt.memoizedState,i]}function NO(i,e){if(En=ua(),Dt=Nb(),e=e===void 0?null:e,Dt!==null){var t=Dt.memoizedState;if(t!==null&&e!==null){var s=t[1];e:if(s===null)s=!1;else{for(var r=0;r<s.length&&r<e.length;r++)if(!I3(e[r],s[r])){s=!1;break e}s=!0}if(s)return t[0]}}return i=i(),Dt.memoizedState=[i,e],i}function M3(i,e,t){if(25<=VS)throw Error(We(301));if(i===En)if(nv=!0,i={action:t,next:null},gl===null&&(gl=new Map),t=gl.get(e),t===void 0)gl.set(e,i);else{for(e=t;e.next!==null;)e=e.next;e.next=i}}function x3(){throw Error(We(394))}function dm(){}var GO={readContext:function(i){return i._currentValue},useContext:function(i){return ua(),i._currentValue},useMemo:NO,useReducer:_O,useRef:function(i){En=ua(),Dt=Nb();var e=Dt.memoizedState;return e===null?(i={current:i},Dt.memoizedState=i):e},useState:function(i){return _O(JG,i)},useInsertionEffect:dm,useLayoutEffect:function(){},useCallback:function(i,e){return NO(function(){return i},e)},useImperativeHandle:dm,useEffect:dm,useDebugValue:dm,useDeferredValue:function(i){return ua(),i},useTransition:function(){return ua(),[!1,x3]},useId:function(){var i=_b.treeContext,e=i.overflow;i=i.id,i=(i&~(1<<32-Um(i)-1)).toString(32)+e;var t=$m;if(t===null)throw Error(We(404));return e=og++,i=":"+t.idPrefix+"R"+i,0<e&&(i+="H"+e.toString(32)),i+":"},useMutableSource:function(i,e){return ua(),e(i._source)},useSyncExternalStore:function(i,e,t){if(t===void 0)throw Error(We(407));return t()}},$m=null,Dy=IG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function _3(i){return console.error(i),null}function Wh(){}function N3(i,e,t,s,r,o,n,l,a){var u=[],d=new Set;return e={destination:null,responseState:e,progressiveChunkSize:s===void 0?12800:s,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:d,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:r===void 0?_3:r,onAllReady:o===void 0?Wh:o,onShellReady:n===void 0?Wh:n,onShellError:l===void 0?Wh:l,onFatalError:a===void 0?Wh:a},t=lv(e,0,null,t,!1,!1),t.parentFlushed=!0,i=kb(e,i,null,t,d,jG,null,P3),u.push(i),e}function kb(i,e,t,s,r,o,n,l){i.allPendingTasks++,t===null?i.pendingRootTasks++:t.pendingTasks++;var a={node:e,ping:function(){var u=i.pingedTasks;u.push(a),u.length===1&&t0(i)},blockedBoundary:t,blockedSegment:s,abortSet:r,legacyContext:o,context:n,treeContext:l};return r.add(a),a}function lv(i,e,t,s,r,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:s,boundary:t,lastPushedText:r,textEmbedded:o}}function ng(i,e){if(i=i.onError(e),i!=null&&typeof i!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof i+'" instead');return i}function av(i,e){var t=i.onShellError;t(e),t=i.onFatalError,t(e),i.destination!==null?(i.status=2,xG(i.destination,e)):(i.status=1,i.fatalError=e)}function kO(i,e,t,s,r){for(En={},_b=e,og=0,i=t(s,r);nv;)nv=!1,og=0,VS+=1,Dt=null,i=t(s,r);return Gb(),i}function VO(i,e,t,s){var r=t.render(),o=s.childContextTypes;if(o!=null){var n=e.legacyContext;if(typeof t.getChildContext!="function")s=n;else{t=t.getChildContext();for(var l in t)if(!(l in o))throw Error(We(108,NR(s)||"Unknown",l));s=dp({},n,t)}e.legacyContext=s,Js(i,e,r),e.legacyContext=n}else Js(i,e,r)}function HO(i,e){if(i&&i.defaultProps){e=dp({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function kR(i,e,t,s,r){if(typeof t=="function")if(t.prototype&&t.prototype.isReactComponent){r=LO(t,e.legacyContext);var o=t.contextType;o=new t(s,typeof o=="object"&&o!==null?o._currentValue:r),MO(o,t,s,r),VO(i,e,o,t)}else{o=LO(t,e.legacyContext),r=kO(i,e,t,s,o);var n=og!==0;if(typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0)MO(r,t,s,o),VO(i,e,r,t);else if(n){s=e.treeContext,e.treeContext=GR(s,1,0);try{Js(i,e,r)}finally{e.treeContext=s}}else Js(i,e,r)}else if(typeof t=="string"){switch(r=e.blockedSegment,o=bj(r.chunks,t,s,i.responseState,r.formatContext),r.lastPushedText=!1,n=r.formatContext,r.formatContext=wj(n,t,s),VR(i,e,o),r.formatContext=n,t){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:r.chunks.push(Pj,$e(t),Aj)}r.lastPushedText=!1}else{switch(t){case D3:case T3:case VG:case HG:case kG:Js(i,e,s.children);return;case $G:Js(i,e,s.children);return;case R3:throw Error(We(343));case zG:e:{t=e.blockedBoundary,r=e.blockedSegment,o=s.fallback,s=s.children,n=new Set;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:n,errorDigest:null},a=lv(i,r.chunks.length,l,r.formatContext,!1,!1);r.children.push(a),r.lastPushedText=!1;var u=lv(i,0,null,r.formatContext,!1,!1);u.parentFlushed=!0,e.blockedBoundary=l,e.blockedSegment=u;try{if(VR(i,e,s),u.lastPushedText&&u.textEmbedded&&u.chunks.push(Mb),u.status=1,uv(l,u),l.pendingTasks===0)break e}catch(d){u.status=4,l.forceClientRender=!0,l.errorDigest=ng(i,d)}finally{e.blockedBoundary=t,e.blockedSegment=r}e=kb(i,o,t,a,n,e.legacyContext,e.context,e.treeContext),i.pingedTasks.push(e)}return}if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UG:if(s=kO(i,e,t.render,s,r),og!==0){t=e.treeContext,e.treeContext=GR(t,1,0);try{Js(i,e,s)}finally{e.treeContext=t}}else Js(i,e,s);return;case KG:t=t.type,s=HO(t,s),kR(i,e,t,s,r);return;case BG:if(r=s.children,t=t._context,s=s.value,o=t._currentValue,t._currentValue=s,n=va,va=s={parent:n,depth:n===null?0:n.depth+1,context:t,parentValue:o,value:s},e.context=s,Js(i,e,r),i=va,i===null)throw Error(We(403));s=i.parentValue,i.context._currentValue=s===b3?i.context._defaultValue:s,i=va=i.parent,e.context=i;return;case WG:s=s.children,s=s(t._currentValue),Js(i,e,s);return;case xb:r=t._init,t=r(t._payload),s=HO(t,s),kR(i,e,t,s,void 0);return}throw Error(We(130,t==null?t:typeof t,""))}}function Js(i,e,t){if(e.node=t,typeof t=="object"&&t!==null){switch(t.$$typeof){case E3:kR(i,e,t.type,t.props,t.ref);return;case GG:throw Error(We(257));case xb:var s=t._init;t=s(t._payload),Js(i,e,t);return}if(_R(t)){BO(i,e,t);return}if(t===null||typeof t!="object"?s=null:(s=OO&&t[OO]||t["@@iterator"],s=typeof s=="function"?s:null),s&&(s=s.call(t))){if(t=s.next(),!t.done){var r=[];do r.push(t.value),t=s.next();while(!t.done);BO(i,e,r)}return}throw i=Object.prototype.toString.call(t),Error(We(31,i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i))}typeof t=="string"?(s=e.blockedSegment,s.lastPushedText=RO(e.blockedSegment.chunks,t,i.responseState,s.lastPushedText)):typeof t=="number"&&(s=e.blockedSegment,s.lastPushedText=RO(e.blockedSegment.chunks,""+t,i.responseState,s.lastPushedText))}function BO(i,e,t){for(var s=t.length,r=0;r<s;r++){var o=e.treeContext;e.treeContext=GR(o,s,r);try{VR(i,e,t[r])}finally{e.treeContext=o}}}function VR(i,e,t){var s=e.blockedSegment.formatContext,r=e.legacyContext,o=e.context;try{return Js(i,e,t)}catch(a){if(Gb(),typeof a=="object"&&a!==null&&typeof a.then=="function"){t=a;var n=e.blockedSegment,l=lv(i,n.chunks.length,null,n.formatContext,n.lastPushedText,!0);n.children.push(l),n.lastPushedText=!1,i=kb(i,e.node,e.blockedBoundary,l,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,t.then(i,i),e.blockedSegment.formatContext=s,e.legacyContext=r,e.context=o,ov(o)}else throw e.blockedSegment.formatContext=s,e.legacyContext=r,e.context=o,ov(o),a}}function G3(i){var e=i.blockedBoundary;i=i.blockedSegment,i.status=3,e0(this,e,i)}function ZG(i,e,t){var s=i.blockedBoundary;i.blockedSegment.status=3,s===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(s.pendingTasks--,s.forceClientRender||(s.forceClientRender=!0,i=t===void 0?Error(We(432)):t,s.errorDigest=e.onError(i),s.parentFlushed&&e.clientRenderedBoundaries.push(s)),s.fallbackAbortableTasks.forEach(function(r){return ZG(r,e,t)}),s.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(s=e.onAllReady,s()))}function uv(i,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var t=e.children[0];t.id=e.id,t.parentFlushed=!0,t.status===1&&uv(i,t)}else i.completedSegments.push(e)}function e0(i,e,t){if(e===null){if(t.parentFlushed){if(i.completedRootSegment!==null)throw Error(We(389));i.completedRootSegment=t}i.pendingRootTasks--,i.pendingRootTasks===0&&(i.onShellError=Wh,e=i.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(t.parentFlushed&&t.status===1&&uv(e,t),e.parentFlushed&&i.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(G3,i),e.fallbackAbortableTasks.clear()):t.parentFlushed&&t.status===1&&(uv(e,t),e.completedSegments.length===1&&e.parentFlushed&&i.partialBoundaries.push(e)));i.allPendingTasks--,i.allPendingTasks===0&&(i=i.onAllReady,i())}function t0(i){if(i.status!==2){var e=va,t=Dy.current;Dy.current=GO;var s=$m;$m=i.responseState;try{var r=i.pingedTasks,o;for(o=0;o<r.length;o++){var n=r[o],l=i,a=n.blockedSegment;if(a.status===0){ov(n.context);try{Js(l,n,n.node),a.lastPushedText&&a.textEmbedded&&a.chunks.push(Mb),n.abortSet.delete(n),a.status=1,e0(l,n.blockedBoundary,a)}catch(m){if(Gb(),typeof m=="object"&&m!==null&&typeof m.then=="function"){var u=n.ping;m.then(u,u)}else{n.abortSet.delete(n),a.status=4;var d=n.blockedBoundary,c=m,h=ng(l,c);if(d===null?av(l,c):(d.pendingTasks--,d.forceClientRender||(d.forceClientRender=!0,d.errorDigest=h,d.parentFlushed&&l.clientRenderedBoundaries.push(d))),l.allPendingTasks--,l.allPendingTasks===0){var p=l.onAllReady;p()}}}finally{}}}r.splice(0,o),i.destination!==null&&Vb(i,i.destination)}catch(m){ng(i,m),av(i,m)}finally{$m=s,Dy.current=t,t===GO&&ov(e)}}}function cm(i,e,t){switch(t.parentFlushed=!0,t.status){case 0:var s=t.id=i.nextSegmentId++;return t.lastPushedText=!1,t.textEmbedded=!1,i=i.responseState,me(e,Fj),me(e,i.placeholderPrefix),i=$e(s.toString(16)),me(e,i),Mt(e,Oj);case 1:t.status=2;var r=!0;s=t.chunks;var o=0;t=t.children;for(var n=0;n<t.length;n++){for(r=t[n];o<r.index;o++)me(e,s[o]);r=HS(i,e,r)}for(;o<s.length-1;o++)me(e,s[o]);return o<s.length&&(r=Mt(e,s[o])),r;default:throw Error(We(390))}}function HS(i,e,t){var s=t.boundary;if(s===null)return cm(i,e,t);if(s.parentFlushed=!0,s.forceClientRender)s=s.errorDigest,Mt(e,xj),me(e,Nj),s&&(me(e,kj),me(e,$e(Ni(s))),me(e,Gj)),Mt(e,Vj),cm(i,e,t);else if(0<s.pendingTasks){s.rootSegmentID=i.nextSegmentId++,0<s.completedSegments.length&&i.partialBoundaries.push(s);var r=i.responseState,o=r.nextSuspenseID++;r=le(r.boundaryPrefix+o.toString(16)),s=s.id=r,FO(e,i.responseState,s),cm(i,e,t)}else if(s.byteSize>i.progressiveChunkSize)s.rootSegmentID=i.nextSegmentId++,i.completedBoundaries.push(s),FO(e,i.responseState,s.id),cm(i,e,t);else{if(Mt(e,Lj),t=s.completedSegments,t.length!==1)throw Error(We(391));HS(i,e,t[0])}return Mt(e,_j)}function WO(i,e,t){return l3(e,i.responseState,t.formatContext,t.id),HS(i,e,t),a3(e,t.formatContext)}function UO(i,e,t){for(var s=t.completedSegments,r=0;r<s.length;r++)i0(i,e,t,s[r]);if(s.length=0,i=i.responseState,s=t.id,t=t.rootSegmentID,me(e,i.startInlineScript),i.sentCompleteBoundaryFunction?me(e,g3):(i.sentCompleteBoundaryFunction=!0,me(e,p3)),s===null)throw Error(We(395));return t=$e(t.toString(16)),me(e,s),me(e,f3),me(e,i.segmentPrefix),me(e,t),Mt(e,m3)}function i0(i,e,t,s){if(s.status===2)return!0;var r=s.id;if(r===-1){if((s.id=t.rootSegmentID)===-1)throw Error(We(392));return WO(i,e,s)}return WO(i,e,s),i=i.responseState,me(e,i.startInlineScript),i.sentCompleteSegmentFunction?me(e,d3):(i.sentCompleteSegmentFunction=!0,me(e,u3)),me(e,i.segmentPrefix),r=$e(r.toString(16)),me(e,r),me(e,c3),me(e,i.placeholderPrefix),me(e,r),Mt(e,h3)}function Vb(i,e){Qs=new Uint8Array(512),Xs=0;try{var t=i.completedRootSegment;if(t!==null&&i.pendingRootTasks===0){HS(i,e,t),i.completedRootSegment=null;var s=i.responseState.bootstrapChunks;for(t=0;t<s.length-1;t++)me(e,s[t]);t<s.length&&Mt(e,s[t])}var r=i.clientRenderedBoundaries,o;for(o=0;o<r.length;o++){var n=r[o];s=e;var l=i.responseState,a=n.id,u=n.errorDigest,d=n.errorMessage,c=n.errorComponentStack;if(me(s,l.startInlineScript),l.sentClientRenderFunction?me(s,v3):(l.sentClientRenderFunction=!0,me(s,C3)),a===null)throw Error(We(395));me(s,a),me(s,S3),(u||d||c)&&(me(s,Ry),me(s,$e(Ty(u||"")))),(d||c)&&(me(s,Ry),me(s,$e(Ty(d||"")))),c&&(me(s,Ry),me(s,$e(Ty(c)))),Mt(s,w3)}r.splice(0,o);var h=i.completedBoundaries;for(o=0;o<h.length;o++)UO(i,e,h[o]);h.splice(0,o),SO(e),Qs=new Uint8Array(512),Xs=0;var p=i.partialBoundaries;for(o=0;o<p.length;o++){var m=p[o];e:{r=i,n=e;var S=m.completedSegments;for(l=0;l<S.length;l++)if(!i0(r,n,m,S[l])){l++,S.splice(0,l);var E=!1;break e}S.splice(0,l),E=!0}if(!E){i.destination=null,o++,p.splice(0,o);return}}p.splice(0,o);var C=i.completedBoundaries;for(o=0;o<C.length;o++)UO(i,e,C[o]);C.splice(0,o)}finally{SO(e),i.allPendingTasks===0&&i.pingedTasks.length===0&&i.clientRenderedBoundaries.length===0&&i.completedBoundaries.length===0&&e.close()}}function zO(i,e){try{var t=i.abortableTasks;t.forEach(function(s){return ZG(s,i,e)}),t.clear(),i.destination!==null&&Vb(i,i.destination)}catch(s){ng(i,s),av(i,s)}}Ob.renderToReadableStream=function(i,e){return new Promise(function(t,s){var r,o,n=new Promise(function(d,c){o=d,r=c}),l=N3(i,vj(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),Sj(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,o,function(){var d=new ReadableStream({type:"bytes",pull:function(c){if(l.status===1)l.status=2,xG(c,l.fatalError);else if(l.status!==2&&l.destination===null){l.destination=c;try{Vb(l,c)}catch(h){ng(l,h),av(l,h)}}},cancel:function(){zO(l)}},{highWaterMark:0});d.allReady=n,t(d)},function(d){n.catch(function(){}),s(d)},r);if(e&&e.signal){var a=e.signal,u=function(){zO(l,a.reason),a.removeEventListener("abort",u)};a.addEventListener("abort",u)}t0(l)})};Ob.version="18.2.0";var th,s0;th=eh,s0=Ob;th.version;th.renderToString;var k3=th.renderToStaticMarkup;th.renderToNodeStream;th.renderToStaticNodeStream;s0.renderToReadableStream;var V3=Object.defineProperty,H3=Object.defineProperties,B3=Object.getOwnPropertyDescriptors,$O=Object.getOwnPropertySymbols,W3=Object.prototype.hasOwnProperty,U3=Object.prototype.propertyIsEnumerable,KO=(i,e,t)=>e in i?V3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Gt=(i,e)=>{for(var t in e||(e={}))W3.call(e,t)&&KO(i,t,e[t]);if($O)for(var t of $O(e))U3.call(e,t)&&KO(i,t,e[t]);return i},us=(i,e)=>H3(i,B3(e)),Hb=P.createContext({setMethods:()=>{}}),z3=i=>{const{initialProps:e,addUpdateCallback:t,CustomComponentClass:s,setMethods:r}=i,[o,n]=P.useState(e);return P.useEffect(()=>{t(l=>n(l))},[]),$.createElement(Hb.Provider,{value:{setMethods:r}},$.createElement(s,Gt({},o)))},$3=P.memo(z3),K3=0;function jO(){return`agPortalKey_${++K3}`}var r0=class{constructor(i,e,t,s){this.portal=null,this.oldPortal=null,this.reactComponent=i,this.portalManager=e,this.componentType=t,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=jO(),this.portalKey=jO(),this.instanceCreated=this.isStatelessComponent()?Zt.resolve(!1):new Zt(r=>{this.resolveInstanceCreated=r})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){return this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy(),this.portalManager.destroyPortal(this.portal)}createParentElement(i){const e=this.portalManager.getComponentWrappingElement(),t=document.createElement(e||"div");return t.classList.add("ag-react-container"),i.reactContainer=t,t}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(ye.warnOnce('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(ye.warnOnce('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(e=>this.eParentElement.classList.add(e))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(i){return typeof i=="function"&&!(i.prototype&&i.prototype.isReactComponent)||typeof i=="object"&&i.$$typeof===this.getMemoType()}hasMethod(i){const e=this.getFrameworkComponentInstance();return!!e&&e[i]!=null||this.fallbackMethodAvailable(i)}callMethod(i,e){const t=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(i,e&&e[0]?e[0]:{});if(!t){setTimeout(()=>this.callMethod(i,e));return}const s=t[i];if(s)return s.apply(t,e);if(this.fallbackMethodAvailable(i))return this.fallbackMethod(i,e&&e[0]?e[0]:{})}addMethod(i,e){this[i]=e}init(i){return this.eParentElement=this.createParentElement(i),this.params=i,this.createOrUpdatePortal(i),new Zt(e=>this.createReactComponent(e))}createOrUpdatePortal(i){this.isStatelessComponent()||(i.ref=e=>{var t;this.componentInstance=e,this.addParentContainerStyleAndClasses(),(t=this.resolveInstanceCreated)==null||t.call(this,!0),this.resolveInstanceCreated=void 0}),this.reactElement=this.createElement(this.reactComponent,us(Gt({},i),{key:this.key})),this.portal=iS.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(i,e){return P.createElement(i,e)}createReactComponent(i){this.portalManager.mountReactPortal(this.portal,this,e=>{i(e)})}isNullValue(){return this.valueRenderedIsNull(this.params)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}valueRenderedIsNull(i){if(!this.componentType.cellRenderer)return!1;const e=console.error;try{return console.error=()=>{},k3(P.createElement(this.reactComponent,i))===""}catch{}finally{console.error=e}return!1}refreshComponent(i){this.oldPortal=this.portal,this.createOrUpdatePortal(i),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(i,e){const t=this[`${i}Component`];if(!this.suppressFallbackMethods&&t)return t.bind(this)(e)}fallbackMethodAvailable(i){return this.suppressFallbackMethods?!1:!!this[`${i}Component`]}};function Bb(i,e,t){i.forEach(s=>{const r=e[s];r&&(t[s]=r)})}var jl=class extends r0{constructor(){super(...arguments),this.awaitUpdateCallback=new Zt(i=>{this.resolveUpdateCallback=i}),this.wrapperComponent=$3}init(i){return this.sourceParams=i,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(i,e){return super.createElement(this.wrapperComponent,{initialProps:e,CustomComponentClass:i,setMethods:t=>this.setMethods(t),addUpdateCallback:t=>{this.updateCallback=()=>(t(this.getProps()),new Zt(s=>{setTimeout(()=>{s()})})),this.resolveUpdateCallback()}})}setMethods(i){this.providedMethods=i,Bb(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return us(Gt({},this.sourceParams),{key:this.key,ref:this.ref})}refreshProps(){return this.updateCallback?this.updateCallback():new Zt(i=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>i())}))}},j3=class extends jl{constructor(){super(...arguments),this.date=null,this.onDateChange=i=>this.updateDate(i)}getDate(){return this.date}setDate(i){this.date=i,this.refreshProps()}refresh(i){this.sourceParams=i,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(i){this.setDate(i),this.sourceParams.onDateChanged()}getProps(){const i=super.getProps();return i.date=this.date,i.onDateChange=this.onDateChange,delete i.onDateChanged,i}},Y3=class extends jl{constructor(){super(...arguments),this.model=null,this.onModelChange=i=>this.updateModel(i),this.onUiChange=()=>this.sourceParams.filterChangedCallback()}isFilterActive(){return this.model!=null}doesFilterPass(i){return this.providedMethods.doesFilterPass(i)}getModel(){return this.model}setModel(i){return this.model=i,this.refreshProps()}refresh(i){return this.sourceParams=i,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}updateModel(i){this.setModel(i).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const i=super.getProps();return i.model=this.model,i.onModelChange=this.onModelChange,i.onUiChange=this.onUiChange,delete i.filterChangedCallback,delete i.filterModifiedCallback,delete i.valueGetter,i}};function o0(i,e){i.parentFilterInstance(t=>{(t.setModel(e)||Zt.resolve()).then(()=>{i.filterParams.filterChangedCallback()})})}var q3=class{constructor(i,e){this.floatingFilterParams=i,this.refreshProps=e,this.model=null,this.onModelChange=t=>this.updateModel(t)}getProps(){return us(Gt({},this.floatingFilterParams),{model:this.model,onModelChange:this.onModelChange})}onParentModelChanged(i){this.model=i,this.refreshProps()}refresh(i){this.floatingFilterParams=i,this.refreshProps()}setMethods(i){Bb(this.getOptionalMethods(),i,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(i){this.model=i,this.refreshProps(),o0(this.floatingFilterParams,i)}},Q3=class extends jl{constructor(){super(...arguments),this.model=null,this.onModelChange=i=>this.updateModel(i)}onParentModelChanged(i){this.model=i,this.refreshProps()}refresh(i){this.sourceParams=i,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(i){this.model=i,this.refreshProps(),o0(this.sourceParams,i)}getProps(){const i=super.getProps();return i.model=this.model,i.onModelChange=this.onModelChange,i}},X3=class extends jl{refresh(i){this.sourceParams=i,this.refreshProps()}},J3=class extends jl{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=i=>this.updateActive(i)}setActive(i){this.awaitSetActive(i)}setExpanded(i){this.expanded=i,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(i){return this.active=i,this.refreshProps()}updateActive(i){const e=this.awaitSetActive(i);i&&e.then(()=>this.sourceParams.onItemActivated())}getProps(){const i=super.getProps();return i.active=this.active,i.expanded=this.expanded,i.onActiveChange=this.onActiveChange,delete i.onItemActivated,i}},Z3=class extends jl{refresh(i){this.sourceParams=i,this.refreshProps()}},eY=class extends jl{refresh(i){return this.sourceParams=i,this.refreshProps(),!0}},tY=class extends jl{constructor(){super(...arguments),this.onStateChange=i=>this.updateState(i)}refresh(i){return this.sourceParams=i,this.refreshProps(),!0}getState(){return this.state}updateState(i){this.state=i,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const i=super.getProps();return i.state=this.state,i.onStateChange=this.onStateChange,i}},n0=class l0{constructor(e,t,s){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=s||l0.MAX_COMPONENT_CREATION_TIME_IN_MS}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,s){this.portals=[...this.portals,e],this.waitForInstance(t,s),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,s=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-s>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){if(e.isNullValue()){t(e);return}console.error(`AG Grid: React Component '${e.getReactComponentName()}' not created within ${this.maxComponentCreationTimeMs}ms.`),console.error("    If the component is using `forwardRef` but not `useImperativeHandle`, add the following: `useImperativeHandle(ref, () => ({}));`");return}window.setTimeout(()=>{this.waitForInstance(e,t,s)})}}};n0.MAX_COMPONENT_CREATION_TIME_IN_MS=1e3;var iY=n0,vs=$.createContext({}),_o=(...i)=>i.filter(t=>t!=null&&t!=="").join(" "),Or=class a0{constructor(...e){this.classesMap={},e.forEach(t=>{this.classesMap[t]=!0})}setClass(e,t){if(!!this.classesMap[e]==t)return this;const r=new a0;return r.classesMap=Gt({},this.classesMap),r.classesMap[e]=t,r}toString(){return Object.keys(this.classesMap).filter(t=>this.classesMap[t]).join(" ")}},ih=i=>{const e=()=>typeof Symbol=="function"&&Symbol.for,t=()=>e()?Symbol.for("react.memo"):60115;return typeof i=="function"&&!(i.prototype&&i.prototype.isReactComponent)||typeof i=="object"&&i.$$typeof===t()},sY=NE.createRoot!=null&&NE.flushSync!=null,Km=!1;function rY(i){return Km||setTimeout(()=>Km=!1,0),Km=!0,i()}var Wb=(i,e)=>{sY&&i&&!Km?NE.flushSync(e):e()};function Ub(i,e,t){if(e==null||i==null)return e;if(i===e||e.length===0&&i.length===0)return i;if(t||i.length===0&&e.length>0||i.length>0&&e.length===0)return e;const s=[],r=[],o=new Map,n=new Map;for(let l=0;l<e.length;l++){const a=e[l];n.set(a.getInstanceId(),a)}for(let l=0;l<i.length;l++){const a=i[l];o.set(a.getInstanceId(),a),n.has(a.getInstanceId())&&s.push(a)}for(let l=0;l<e.length;l++){const a=e[l],u=a.getInstanceId();o.has(u)||r.push(a)}return s.length===i.length&&r.length===0?i:s.length===0&&r.length===e.length?e:[...s,...r]}var mf=(i,e,t,s)=>{if(!i||i.componentFromFramework||e.isDestroyed())return;const o=i.newAgStackInstance();if(!o)return;let n,l,a=!1;return o.then(u=>{if(a){e.destroyBean(u);return}n=u,l=n.getGui(),t.appendChild(l),YO(s,n)}),()=>{a=!0,n&&(l&&l.parentElement&&l.parentElement.removeChild(l),e.destroyBean(n),s&&YO(s,void 0))}},YO=(i,e)=>{if(i)if(i instanceof Function)i(e);else{const t=i;t.current=e}},oY=i=>{const e=i.newAgStackInstance();if(e)return e.resolveNow(null,t=>t)},u0=P.forwardRef((i,e)=>{var t;const s=P.useContext(vs).context,r=P.useRef(null),o=P.useRef(null),n=P.useRef(null),l=P.useRef(null),a=P.useRef(null),u=P.useRef(),[d,c]=P.useState(),[h,p]=P.useState(),[m,S]=P.useState(),[E,C]=P.useState(()=>new Or),[v,R]=P.useState(()=>new Or("ag-hidden")),[b,A]=P.useState(()=>new Or("ag-hidden")),[F,O]=P.useState(()=>new Or("ag-invisible"));P.useImperativeHandle(e,()=>({refresh(){return!1}})),P.useLayoutEffect(()=>mf(d,s,o.current),[d]);const L=P.useCallback(Ie=>{if(r.current=Ie,!r.current){s.destroyBean(u.current),u.current=null;return}const J={setInnerRenderer:(X,re)=>{c(X),S(re)},setChildCount:X=>p(X),addOrRemoveCssClass:(X,re)=>C(Me=>Me.setClass(X,re)),setContractedDisplayed:X=>A(re=>re.setClass("ag-hidden",!X)),setExpandedDisplayed:X=>R(re=>re.setClass("ag-hidden",!X)),setCheckboxVisible:X=>O(re=>re.setClass("ag-invisible",!X))};u.current=s.createBean(new yu),u.current.init(J,r.current,n.current,l.current,a.current,u0,i)},[]),G=P.useMemo(()=>`ag-cell-wrapper ${E.toString()}`,[E]),k=P.useMemo(()=>`ag-group-expanded ${v.toString()}`,[v]),se=P.useMemo(()=>`ag-group-contracted ${b.toString()}`,[b]),j=P.useMemo(()=>`ag-group-checkbox ${F.toString()}`,[F]),Z=d&&d.componentFromFramework,ce=Z?d.componentClass:void 0,Oe=d==null&&m!=null,Le=ye.escapeString(m,!0);return $.createElement("span",Gt({className:G,ref:L},i.colDef?{}:{role:(t=u.current)==null?void 0:t.getCellAriaRole()}),$.createElement("span",{className:k,ref:l}),$.createElement("span",{className:se,ref:a}),$.createElement("span",{className:j,ref:n}),$.createElement("span",{className:"ag-group-value",ref:o},Oe&&$.createElement($.Fragment,null,Le),Z&&$.createElement(ce,Gt({},d.params))),$.createElement("span",{className:"ag-group-child-count"},h))}),qO=u0,nY=i=>{const{ctrl:e}=i,t=e.isAlive(),{context:s}=P.useContext(vs),r=t?e.getColId():void 0,[o,n]=P.useState(),l=P.useRef(null),a=P.useRef(null),u=P.useRef(null),d=P.useRef();let c=P.useRef();t&&!c.current&&(c.current=new Zg(()=>l.current));const h=P.useCallback(E=>{var C;if(l.current=E,!l.current||!t)return;const v={setWidth:b=>{l.current&&(l.current.style.width=b)},addOrRemoveCssClass:(b,A)=>c.current.addOrRemoveCssClass(b,A),setAriaSort:b=>{l.current&&(b?ye.setAriaSort(l.current,b):ye.removeAriaSort(l.current))},setUserCompDetails:b=>n(b),getUserCompInstance:()=>d.current||void 0};e.setComp(v,l.current,a.current,u.current);const R=e.getSelectAllGui();(C=a.current)==null||C.insertAdjacentElement("afterend",R)},[]);P.useLayoutEffect(()=>mf(o,s,u.current,d),[o]),P.useEffect(()=>{e.setDragSource(l.current)},[o]);const p=P.useMemo(()=>!!((o==null?void 0:o.componentFromFramework)&&ih(o.componentClass)),[o]),m=o&&o.componentFromFramework,S=o&&o.componentClass;return $.createElement("div",{ref:h,className:"ag-header-cell","col-id":r,role:"columnheader"},$.createElement("div",{ref:a,className:"ag-header-cell-resize",role:"presentation"}),$.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},m&&p&&$.createElement(S,Gt({},o.params)),m&&!p&&$.createElement(S,us(Gt({},o.params),{ref:d}))))},lY=P.memo(nY),aY=i=>{const{context:e}=P.useContext(vs),{ctrl:t}=i,[s,r]=P.useState(()=>new Or),[o,n]=P.useState(()=>new Or),[l,a]=P.useState("false"),[u,d]=P.useState(),[c,h]=P.useState(),p=P.useMemo(()=>t.getColId(),[]),m=P.useRef(null),S=P.useRef(null),E=P.useRef(),C=P.useCallback(O=>{if(m.current=O,!m.current)return;const L={setWidth:G=>{m.current&&(m.current.style.width=G)},addOrRemoveCssClass:(G,k)=>r(se=>se.setClass(G,k)),setUserCompDetails:G=>h(G),setResizableDisplayed:G=>{n(k=>k.setClass("ag-hidden",!G)),a(G?"false":"true")},setAriaExpanded:G=>d(G),getUserCompInstance:()=>E.current||void 0};t.setComp(L,m.current,S.current)},[]);P.useLayoutEffect(()=>mf(c,e,m.current),[c]),P.useEffect(()=>{m.current&&t.setDragSource(m.current)},[c]);const v=P.useMemo(()=>!!((c==null?void 0:c.componentFromFramework)&&ih(c.componentClass)),[c]),R=P.useMemo(()=>"ag-header-group-cell "+s.toString(),[s]),b=P.useMemo(()=>"ag-header-cell-resize "+o.toString(),[o]),A=c&&c.componentFromFramework,F=c&&c.componentClass;return $.createElement("div",{ref:C,className:R,"col-id":p,role:"columnheader","aria-expanded":u},A&&v&&$.createElement(F,Gt({},c.params)),A&&!v&&$.createElement(F,us(Gt({},c.params),{ref:E})),$.createElement("div",{ref:S,"aria-hidden":l,className:b}))},uY=P.memo(aY);function zb(){ye.warnOnce("Using custom components without `reactiveCustomComponents = true` is deprecated.")}var dY=i=>{const{context:e,gridOptionsService:t}=P.useContext(vs),[s,r]=P.useState(()=>new Or("ag-header-cell","ag-floating-filter")),[o,n]=P.useState(()=>new Or),[l,a]=P.useState(()=>new Or("ag-floating-filter-button","ag-hidden")),[u,d]=P.useState("false"),[c,h]=P.useState(),[p,m]=P.useState(1),S=P.useRef(null),E=P.useRef(null),C=P.useRef(null),v=P.useRef(null),R=P.useRef(),b=P.useRef(),A=Ie=>{Ie!=null&&R.current&&R.current(Ie)},{ctrl:F}=i,O=P.useCallback(Ie=>{if(S.current=Ie,!S.current)return;b.current=new Zt(X=>{R.current=X});const J={addOrRemoveCssClass:(X,re)=>r(Me=>Me.setClass(X,re)),addOrRemoveBodyCssClass:(X,re)=>n(Me=>Me.setClass(X,re)),setButtonWrapperDisplayed:X=>{a(re=>re.setClass("ag-hidden",!X)),d(X?"false":"true")},setWidth:X=>{S.current&&(S.current.style.width=X)},setCompDetails:X=>h(X),getFloatingFilterComp:()=>b.current?b.current:null,setMenuIcon:X=>{var re;return(re=v.current)==null?void 0:re.appendChild(X)}};F.setComp(J,S.current,v.current,E.current)},[]);P.useLayoutEffect(()=>mf(c,e,E.current,A),[c]);const L=P.useMemo(()=>s.toString(),[s]),G=P.useMemo(()=>o.toString(),[o]),k=P.useMemo(()=>l.toString(),[l]),se=P.useMemo(()=>!!(c&&c.componentFromFramework&&ih(c.componentClass)),[c]),j=P.useMemo(()=>t.get("reactiveCustomComponents"),[]),Z=P.useMemo(()=>{if(c)if(j){const Ie=new q3(c.params,()=>m(J=>J+1));return A(Ie),Ie}else c.componentFromFramework&&zb()},[c]),ce=Z==null?void 0:Z.getProps(),Oe=c&&c.componentFromFramework,Le=c&&c.componentClass;return $.createElement("div",{ref:O,className:L,role:"gridcell"},$.createElement("div",{ref:E,className:G,role:"presentation"},Oe&&!j&&$.createElement(Le,us(Gt({},c.params),{ref:se?()=>{}:A})),Oe&&j&&$.createElement(Hb.Provider,{value:{setMethods:Ie=>Z.setMethods(Ie)}},$.createElement(Le,Gt({},ce)))),$.createElement("div",{ref:C,"aria-hidden":u,className:k,role:"presentation"},$.createElement("button",{ref:v,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},cY=P.memo(dY),hY=i=>{const{ctrl:e}=i,{topOffset:t,rowHeight:s}=P.useMemo(()=>e.getTopAndHeight(),[]),r=e.getAriaRowIndex(),o=e.getHeaderRowClass(),[n,l]=P.useState(()=>s+"px"),[a,u]=P.useState(()=>t+"px"),[d,c]=P.useState(()=>e.getHeaderCtrls()),h=P.useRef(null),p=P.useCallback(E=>{if(h.current=E,!E)return;const C={setHeight:v=>l(v),setTop:v=>u(v),setHeaderCtrls:(v,R,b)=>{Wb(b,()=>{c(A=>Ub(A,v,R))})},setWidth:v=>{h.current&&(h.current.style.width=v)}};e.setComp(C,!1)},[]),m=P.useMemo(()=>({height:n,top:a}),[n,a]),S=P.useCallback(E=>{switch(e.getType()){case SR.COLUMN_GROUP:return $.createElement(uY,{ctrl:E,key:E.getInstanceId()});case SR.FLOATING_FILTER:return $.createElement(cY,{ctrl:E,key:E.getInstanceId()});default:return $.createElement(lY,{ctrl:E,key:E.getInstanceId()})}},[]);return $.createElement("div",{ref:p,className:o,role:"row",style:m,"aria-rowindex":r},d.map(S))},pY=P.memo(hY),gY=i=>{const[e,t]=P.useState(!0),[s,r]=P.useState([]),{context:o}=P.useContext(vs),n=P.useRef(null),l=P.useRef(null),a=P.useRef(null),u=i.pinned==="left",d=i.pinned==="right",c=!u&&!d,h=P.useCallback(S=>{if(n.current=S,!n.current){o.destroyBean(a.current),a.current=null;return}const E={setDisplayed:t,setCtrls:C=>r(C),setCenterWidth:C=>{l.current&&(l.current.style.width=C)},setViewportScrollLeft:C=>{n.current&&(n.current.scrollLeft=C)},setPinnedContainerWidth:C=>{n.current&&(n.current.style.width=C,n.current.style.minWidth=C,n.current.style.maxWidth=C)}};a.current=o.createBean(new Bl(i.pinned)),a.current.setComp(E,n.current)},[]),p=e?"":"ag-hidden",m=()=>s.map(S=>$.createElement(pY,{ctrl:S,key:S.getInstanceId()}));return $.createElement($.Fragment,null,u&&$.createElement("div",{ref:h,className:"ag-pinned-left-header "+p,"aria-hidden":!e,role:"rowgroup"},m()),d&&$.createElement("div",{ref:h,className:"ag-pinned-right-header "+p,"aria-hidden":!e,role:"rowgroup"},m()),c&&$.createElement("div",{ref:h,className:"ag-header-viewport "+p,role:"presentation"},$.createElement("div",{ref:l,className:"ag-header-container",role:"rowgroup"},m())))},by=P.memo(gY),fY=()=>{const[i,e]=P.useState(()=>new Or),[t,s]=P.useState(),{context:r}=P.useContext(vs),o=P.useRef(null),n=P.useRef(null),l=P.useCallback(d=>{if(o.current=d,!d){r.destroyBean(n.current),n.current=null;return}const c={addOrRemoveCssClass:(h,p)=>e(m=>m.setClass(h,p)),setHeightAndMinHeight:h=>s(h)};n.current=r.createBean(new Wl),n.current.setComp(c,o.current,o.current)},[]),a=P.useMemo(()=>"ag-header "+i.toString(),[i]),u=P.useMemo(()=>({height:t,minHeight:t}),[t]);return $.createElement("div",{ref:l,className:a,style:u,role:"presentation"},$.createElement(by,{pinned:"left"}),$.createElement(by,{pinned:null}),$.createElement(by,{pinned:"right"}))},mY=P.memo(fY),CY=(i,e)=>{P.useEffect(()=>{const t=e.current;if(t){const s=t.parentElement;if(s){const r=document.createComment(i);return s.insertBefore(r,t),()=>{s.removeChild(r)}}}},[i])},da=CY,vY=i=>{const e=P.useRef(i),t=P.useRef(),s=P.useRef(!1),r=P.useRef(!1),[,o]=P.useState(0);s.current&&(r.current=!0),P.useEffect(()=>(s.current||(t.current=e.current(),s.current=!0),o(n=>n+1),()=>{r.current&&t.current&&t.current()}),[])},SY=i=>{const[e,t]=P.useState(),{context:s,popupService:r,localeService:o,gridOptionsService:n}=P.useContext(vs);return vY(()=>{const{editDetails:l,cellCtrl:a,eParentCell:u}=i,{compDetails:d}=l,c=n.get("stopEditingWhenCellsLoseFocus"),h=s.createBean(new WN(d.params)),p=h.getGui();if(i.jsChildComp){const R=i.jsChildComp.getGui();R&&p.appendChild(R)}const m={column:a.getColumn(),rowNode:a.getRowNode(),type:"popupCellEditor",eventSource:u,ePopup:p,position:l.popupPosition,keepWithinBounds:!0},S=r.positionPopupByComponent.bind(r,m),E=o.getLocaleTextFunc(),C=r.addPopup({modal:c,eChild:p,closeOnEsc:!0,closedCallback:()=>{a.onPopupEditorClosed()},anchorToElement:u,positionCallback:S,ariaLabel:E("ariaLabelCellEditor","Cell Editor")}),v=C?C.hideFunc:void 0;return t(h),i.jsChildComp&&i.jsChildComp.afterGuiAttached&&i.jsChildComp.afterGuiAttached(),()=>{v!=null&&v(),s.destroyBean(h)}}),$.createElement($.Fragment,null,e&&i.wrappedContent&&iS.createPortal(i.wrappedContent,e.getGui()))},QO=P.memo(SY),wY=(i,e,t,s,r,o)=>{const{context:n}=P.useContext(vs),l=P.useCallback(()=>{const a=r.current;if(!a)return;const u=a.getGui();u&&u.parentElement&&u.parentElement.removeChild(u),n.destroyBean(a),r.current=void 0},[]);P.useEffect(()=>{const a=i!=null,u=i&&i.compDetails&&!i.compDetails.componentFromFramework,d=e&&t==null;if(!(a&&u&&!d)){l();return}const h=i.compDetails;if(r.current){const C=r.current,R=C.refresh!=null&&i.force==!1?C.refresh(h.params):!1;if(R===!0||R===void 0)return;l()}const p=h.newAgStackInstance();if(!p)return;const m=p.resolveNow(null,C=>C);if(!m)return;const S=m.getGui();if(!S)return;(e?t:o.current).appendChild(S),r.current=m},[i,e,s]),P.useEffect(()=>l,[])},yY=wY,EY=class{constructor(i,e){this.cellEditorParams=i,this.refreshProps=e,this.instanceCreated=new Zt(t=>{this.resolveInstanceCreated=t}),this.onValueChange=t=>this.updateValue(t),this.value=i.value}getProps(){return us(Gt({},this.cellEditorParams),{initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange})}getValue(){return this.value}refresh(i){this.cellEditorParams=i,this.refreshProps()}setMethods(i){Bb(this.getOptionalMethods(),i,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(i){var e;this.componentInstance=i,(e=this.resolveInstanceCreated)==null||e.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]}updateValue(i){this.value=i,this.refreshProps()}},RY=(i,e,t)=>{const s=t.getColumn();if(!i&&e.isPopup&&e.isPopup()){const r=`AG Grid: Found an issue in column ${s.getColId()}. If using React, specify an editor is a popup using colDef.cellEditorPopup=true. AG Grid React cannot depend on the editor component specifying if it's in a popup (via the isPopup() method on the editor), as React needs to know this information BEFORE the component is created.`;ye.doOnce(()=>console.warn(r),"jsEditorComp-isPopup-"+t.getColumn().getColId())}if(i&&e.getPopupPosition&&e.getPopupPosition()!=null){const r=`AG Grid: Found an issue in column ${s.getColId()}. If using React, specify an editor popup position using colDef.cellEditorPopupPosition=true. AG Grid React cannot depend on the editor component specifying it's position (via the getPopupPosition() method on the editor), as React needs to know this information BEFORE the component is created.`;ye.doOnce(()=>console.warn(r),"jsEditorComp-getPopupPosition-"+t.getColumn().getColId())}},TY=(i,e,t)=>{const{compProxy:s}=i;t(s);const r=s.getProps(),o=ih(e);return $.createElement(Hb.Provider,{value:{setMethods:n=>s.setMethods(n)}},o&&$.createElement(e,Gt({},r)),!o&&$.createElement(e,us(Gt({},r),{ref:n=>s.setRef(n)})))},XO=(i,e,t)=>{const s=i.compProxy;return $.createElement($.Fragment,null,!s&&$.createElement(e,us(Gt({},i.compDetails.params),{ref:t})),s&&TY(i,e,t))},DY=(i,e,t,s,r,o)=>{const n=i.compDetails,l=n.componentClass,a=n.componentFromFramework&&!i.popup,u=n.componentFromFramework&&i.popup,d=!n.componentFromFramework&&i.popup;return $.createElement($.Fragment,null,a&&XO(i,l,e),u&&$.createElement(QO,{editDetails:i,cellCtrl:r,eParentCell:s,wrappedContent:XO(i,l,t)}),d&&o&&$.createElement(QO,{editDetails:i,cellCtrl:r,eParentCell:s,jsChildComp:o}))},bY=(i,e,t,s,r,o,n)=>{const{compDetails:l,value:a}=i,u=!l,d=l&&l.componentFromFramework,c=l&&l.componentClass,h=a!=null&&a.toString?a.toString():a,p=()=>$.createElement($.Fragment,null,u&&$.createElement($.Fragment,null,h),d&&!o&&$.createElement(c,us(Gt({},l.params),{key:e,ref:s})),d&&o&&$.createElement(c,us(Gt({},l.params),{key:e})));return $.createElement($.Fragment,null,r?$.createElement("span",{role:"presentation",id:`cell-${t}`,className:"ag-cell-value",ref:n},p()):p())},PY=i=>{const{context:e}=P.useContext(vs),{cellCtrl:t,printLayout:s,editingRow:r}=i,o=t.getTabIndex(),n=t.getColumnIdSanitised(),l=t.getInstanceId(),[a,u]=P.useState(()=>t.isCellRenderer()?void 0:{compDetails:void 0,value:t.getValueToDisplay(),force:!1}),[d,c]=P.useState(),[h,p]=P.useState(1),[m,S]=P.useState(),[E,C]=P.useState(!1),[v,R]=P.useState(!1),[b,A]=P.useState(!1),[F,O]=P.useState(),L=P.useMemo(()=>t.isForceWrapper(),[t]),G=P.useMemo(()=>t.getCellAriaRole(),[t]),k=P.useRef(null),se=P.useRef(null),j=P.useRef(),Z=P.useRef(),ce=P.useRef(),Oe=P.useRef([]),Le=P.useRef(),[Ie,J]=P.useState(0),X=P.useCallback(mt=>{Le.current=mt,J(Ct=>Ct+1)},[]),re=a!=null&&(E||b||v),Me=L||re,Re=P.useCallback((mt,Ct)=>{Z.current=Ct,Ct&&(RY(mt,Ct,t),Ct.isCancelBeforeStart&&Ct.isCancelBeforeStart()&&setTimeout(()=>{t.stopEditing(!0),t.focusCell(!0)}))},[t]),Ve=P.useCallback(mt=>Re(!0,mt),[Re]),Kt=P.useCallback(mt=>Re(!1,mt),[Re]);let ft=P.useRef();ft.current||(ft.current=new Zg(()=>k.current)),yY(a,Me,Le.current,Ie,j,k);const jt=P.useRef();P.useLayoutEffect(()=>{const mt=jt.current,Ct=a;if(jt.current=a,mt==null||mt.compDetails==null||Ct==null||Ct.compDetails==null)return;const yt=mt.compDetails,xe=Ct.compDetails;if(yt.componentClass!=xe.componentClass||se.current==null||se.current.refresh==null)return;se.current.refresh(xe.params)!=!0&&p(Bs=>Bs+1)},[a]),P.useLayoutEffect(()=>{if(!(d&&!d.compDetails.componentFromFramework))return;const Ct=d.compDetails,yt=d.popup===!0,xe=oY(Ct);if(!xe)return;const Yt=xe.getGui();if(Re(yt,xe),!yt){const Bs=(L?ce:k).current;Bs==null||Bs.appendChild(Yt),xe.afterGuiAttached&&xe.afterGuiAttached()}return O(xe),()=>{e.destroyBean(xe),Re(yt,void 0),O(void 0),Yt&&Yt.parentElement&&Yt.parentElement.removeChild(Yt)}},[d]);const Hs=P.useCallback(mt=>{if(ce.current=mt,!ce.current){Oe.current.forEach(yt=>yt()),Oe.current=[];return}const Ct=yt=>{var xe;if(yt){const Yt=yt.getGui();(xe=ce.current)==null||xe.insertAdjacentElement("afterbegin",Yt),Oe.current.push(()=>{e.destroyBean(yt),ye.removeFromParent(Yt)})}return yt};if(E){const yt=t.createSelectionCheckbox();Ct(yt)}b&&Ct(t.createDndSource()),v&&Ct(t.createRowDragComp())},[t,e,b,v,E]),Xl=P.useCallback(mt=>{if(k.current=mt,!k.current||!t)return;const Ct={addOrRemoveCssClass:(xe,Yt)=>ft.current.addOrRemoveCssClass(xe,Yt),setUserStyles:xe=>S(xe),getFocusableElement:()=>k.current,setIncludeSelection:xe=>C(xe),setIncludeRowDrag:xe=>R(xe),setIncludeDndSource:xe=>A(xe),getCellEditor:()=>Z.current||null,getCellRenderer:()=>se.current?se.current:j.current,getParentOfValue:()=>Le.current?Le.current:ce.current?ce.current:k.current,setRenderDetails:(xe,Yt,Bs)=>{u(ct=>(ct==null?void 0:ct.compDetails)!==xe||(ct==null?void 0:ct.value)!==Yt||(ct==null?void 0:ct.force)!==Bs?{value:Yt,compDetails:xe,force:Bs}:ct)},setEditDetails:(xe,Yt,Bs,ct)=>{if(xe){let I;ct?I=new EY(xe.params,()=>p(N=>N+1)):xe.componentFromFramework&&zb(),c({compDetails:xe,popup:Yt,popupPosition:Bs,compProxy:I}),Yt||u(void 0)}else c(I=>{I!=null&&I.compProxy&&(Z.current=void 0)})}},yt=ce.current||void 0;t.setComp(Ct,k.current,yt,s,r)},[]),$u=P.useMemo(()=>!!(a&&a.compDetails&&a.compDetails.componentFromFramework&&ih(a.compDetails.componentClass)),[a]);P.useLayoutEffect(()=>{var mt;k.current&&(ft.current.addOrRemoveCssClass("ag-cell-value",!Me),ft.current.addOrRemoveCssClass("ag-cell-inline-editing",!!d&&!d.popup),ft.current.addOrRemoveCssClass("ag-cell-popup-editing",!!d&&!!d.popup),ft.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!d||!!d.popup),(mt=t.getRowCtrl())==null||mt.setInlineEditingCss(!!d),t.shouldRestoreFocus()&&!t.isEditing()&&k.current.focus({preventScroll:!0}))});const Ku=()=>$.createElement($.Fragment,null,a!=null&&bY(a,h,l,se,Me,$u,X),d!=null&&DY(d,Kt,Ve,k.current,t,F));return $.createElement("div",{ref:Xl,style:m,tabIndex:o,role:G,"col-id":n},Me?$.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:Hs},Ku()):Ku())},AY=P.memo(PY),FY=i=>{const{context:e,gridOptionsService:t}=P.useContext(vs),{rowCtrl:s,containerType:r}=i,o=s.getTabIndex(),n=P.useRef(s.getDomOrder()),l=s.isFullWidth(),a=s.getRowNode().displayed,[u,d]=P.useState(()=>a?s.getRowIndex():null),[c,h]=P.useState(()=>s.getRowId()),[p,m]=P.useState(()=>s.getBusinessKey()),[S,E]=P.useState(()=>s.getRowStyles()),[C,v]=P.useState(()=>null),[R,b]=P.useState(),[A,F]=P.useState(()=>a?s.getInitialRowTop(r):void 0),[O,L]=P.useState(()=>a?s.getInitialTransform(r):void 0),G=P.useRef(null),k=P.useRef(),se=P.useRef(!1),[j,Z]=P.useState(0);P.useEffect(()=>{var Ve;if(se.current||!R||j>10)return;const Kt=(Ve=G.current)==null?void 0:Ve.firstChild;Kt?(s.setupDetailRowAutoHeight(Kt),se.current=!0):Z(ft=>ft+1)},[R,j]);let ce=P.useRef();ce.current||(ce.current=new Zg(()=>G.current));const Oe=P.useCallback(Ve=>{if(G.current=Ve,!G.current){s.unsetComp(r);return}if(!s.isAlive())return;const Kt={setTop:F,setTransform:L,addOrRemoveCssClass:(ft,jt)=>ce.current.addOrRemoveCssClass(ft,jt),setDomOrder:ft=>n.current=ft,setRowIndex:d,setRowId:h,setRowBusinessKey:m,setUserStyles:E,setCellCtrls:(ft,jt)=>{Wb(jt,()=>{v(Hs=>Ub(Hs,ft,n.current))})},showFullWidth:ft=>b(ft),getFullWidthCellRenderer:()=>k.current,refreshFullWidth:ft=>re.current?(b(jt=>us(Gt({},jt),{params:ft()})),!0):!k.current||!k.current.refresh?!1:k.current.refresh(ft())};s.setComp(Kt,G.current,r)},[]);P.useLayoutEffect(()=>mf(R,e,G.current,k),[R]);const Le=P.useMemo(()=>{const Ve={top:A,transform:O};return Object.assign(Ve,S),Ve},[A,O,S]),Ie=l&&R&&R.componentFromFramework,J=!l&&C!=null,X=P.useMemo(()=>!!((R==null?void 0:R.componentFromFramework)&&ih(R.componentClass)),[R]),re=P.useRef(!1);P.useEffect(()=>{re.current=X&&!!R&&!!t.get("reactiveCustomComponents")},[X,R]);const Me=()=>C==null?void 0:C.map(Ve=>$.createElement(AY,{cellCtrl:Ve,editingRow:s.isEditing(),printLayout:s.isPrintLayout(),key:Ve.getInstanceId()})),Re=()=>{const Ve=R.componentClass;return $.createElement($.Fragment,null,X&&$.createElement(Ve,Gt({},R.params)),!X&&$.createElement(Ve,us(Gt({},R.params),{ref:k})))};return $.createElement("div",{ref:Oe,role:"row",style:Le,"row-index":u,"row-id":c,"row-business-key":p,tabIndex:o},J&&Me(),Ie&&Re())},OY=P.memo(FY),LY=i=>{const{context:e}=P.useContext(vs),{name:t}=i,s=P.useMemo(()=>VN(t),[t]),r=P.useRef(null),o=P.useRef(null),n=P.useRef([]),[l,a]=P.useState(()=>[]),u=P.useRef(!1),d=P.useRef(),c=P.useMemo(()=>UC.getRowContainerCssClasses(t),[t]),h=P.useMemo(()=>_o(c.viewport),[c]),p=P.useMemo(()=>_o(c.container),[c]),m=t===ii.CENTER||t===ii.TOP_CENTER||t===ii.BOTTOM_CENTER||t===ii.STICKY_TOP_CENTER,S=m?r:o;da(" AG Row Container "+t+" ",S);const E=P.useCallback(()=>m?r.current!=null&&o.current!=null:o.current!=null,[]),C=P.useCallback(()=>m?r.current==null&&o.current==null:o.current==null,[]),v=P.useCallback(()=>{if(C()&&(e.destroyBean(d.current),d.current=null),E()){const F=L=>{Wb(L,()=>{a(G=>Ub(G,n.current,u.current))})},O={setViewportHeight:L=>{r.current&&(r.current.style.height=L)},setRowCtrls:({rowCtrls:L,useFlushSync:G})=>{const k=!!G&&n.current.length>0&&L.length>0;n.current=L,F(k)},setDomOrder:L=>{u.current!=L&&(u.current=L,F(!1))},setContainerWidth:L=>{o.current&&(o.current.style.width=L)}};d.current=e.createBean(new UC(t)),d.current.setComp(O,o.current,r.current)}},[E,C]),R=P.useCallback(F=>{o.current=F,v()},[v]),b=P.useCallback(F=>{r.current=F,v()},[v]),A=()=>$.createElement("div",{className:p,ref:R,role:"rowgroup"},l.map(F=>$.createElement(OY,{rowCtrl:F,containerType:s,key:F.getInstanceId()})));return $.createElement($.Fragment,null,m?$.createElement("div",{className:h,ref:b,role:"presentation"},A()):A())},IY=P.memo(LY),MY=()=>{const{context:i,agStackComponentsRegistry:e,resizeObserverService:t}=P.useContext(vs),[s,r]=P.useState(""),[o,n]=P.useState(0),[l,a]=P.useState(0),[u,d]=P.useState("0px"),[c,h]=P.useState("0px"),[p,m]=P.useState("100%"),[S,E]=P.useState(""),[C,v]=P.useState(""),[R,b]=P.useState(null),[A,F]=P.useState(""),[O,L]=P.useState(null),[G,k]=P.useState("ag-layout-normal");let se=P.useRef();se.current||(se.current=new Zg(()=>j.current));const j=P.useRef(null),Z=P.useRef(null),ce=P.useRef(null),Oe=P.useRef(null),Le=P.useRef(null),Ie=P.useRef(null),J=P.useRef([]),X=P.useRef([]);da(" AG Grid Body ",j),da(" AG Pinned Top ",Z),da(" AG Sticky Top ",ce),da(" AG Middle ",Le),da(" AG Pinned Bottom ",Ie);const re=P.useCallback(Ct=>{if(j.current=Ct,!j.current){i.destroyBeans(J.current),X.current.forEach(ct=>ct()),J.current=[],X.current=[];return}if(!i)return;const yt=ct=>{const I=e.getComponentClass(ct),N=i.createBean(new I);return J.current.push(N),N},xe=(ct,I)=>{ct.appendChild(I),X.current.push(()=>ct.removeChild(I))};xe(j.current,document.createComment(" AG Fake Horizontal Scroll ")),xe(j.current,yt("AG-FAKE-HORIZONTAL-SCROLL").getGui()),xe(j.current,document.createComment(" AG Overlay Wrapper ")),xe(j.current,yt("AG-OVERLAY-WRAPPER").getGui()),Oe.current&&(xe(Oe.current,document.createComment(" AG Fake Vertical Scroll ")),xe(Oe.current,yt("AG-FAKE-VERTICAL-SCROLL").getGui()));const Yt={setRowAnimationCssOnBodyViewport:r,setColumnCount:ct=>{j.current&&ye.setAriaColCount(j.current,ct)},setRowCount:ct=>{j.current&&ye.setAriaRowCount(j.current,ct)},setTopHeight:n,setBottomHeight:a,setStickyTopHeight:d,setStickyTopTop:h,setStickyTopWidth:m,setTopDisplay:E,setBottomDisplay:v,setColumnMovingCss:(ct,I)=>se.current.addOrRemoveCssClass(ct,I),updateLayoutClasses:k,setAlwaysVerticalScrollClass:b,setPinnedTopBottomOverflowY:F,setCellSelectableCss:(ct,I)=>L(I?ct:null),setBodyViewportWidth:ct=>{Le.current&&(Le.current.style.width=ct)},registerBodyViewportResizeListener:ct=>{if(Le.current){const I=t.observeResize(Le.current,ct);X.current.push(()=>I())}}},Bs=i.createBean(new Xi);J.current.push(Bs),Bs.setComp(Yt,j.current,Le.current,Z.current,Ie.current,ce.current)},[]),Me=P.useMemo(()=>_o("ag-root","ag-unselectable",G),[G]),Re=P.useMemo(()=>_o("ag-body-viewport",s,G,R,O),[s,G,R,O]),Ve=P.useMemo(()=>_o("ag-body",G),[G]),Kt=P.useMemo(()=>_o("ag-floating-top",O),[O]),ft=P.useMemo(()=>_o("ag-sticky-top",O),[O]),jt=P.useMemo(()=>_o("ag-floating-bottom",O),[O]),Hs=P.useMemo(()=>({height:o,minHeight:o,display:S,overflowY:A}),[o,S,A]),Xl=P.useMemo(()=>({height:u,top:c,width:p}),[u,c,p]),$u=P.useMemo(()=>({height:l,minHeight:l,display:C,overflowY:A}),[l,C,A]),Ku=Ct=>$.createElement(IY,{name:Ct,key:`${Ct}-container`}),mt=({section:Ct,children:yt,className:xe,style:Yt})=>$.createElement("div",{ref:Ct,className:xe,role:"presentation",style:Yt},yt.map(Ku));return $.createElement("div",{ref:re,className:Me,role:"treegrid"},$.createElement(mY,null),mt({section:Z,className:Kt,style:Hs,children:[ii.TOP_LEFT,ii.TOP_CENTER,ii.TOP_RIGHT,ii.TOP_FULL_WIDTH]}),$.createElement("div",{className:Ve,ref:Oe,role:"presentation"},mt({section:Le,className:Re,children:[ii.LEFT,ii.CENTER,ii.RIGHT,ii.FULL_WIDTH]})),mt({section:ce,className:ft,style:Xl,children:[ii.STICKY_TOP_LEFT,ii.STICKY_TOP_CENTER,ii.STICKY_TOP_RIGHT,ii.STICKY_TOP_FULL_WIDTH]}),mt({section:Ie,className:jt,style:$u,children:[ii.BOTTOM_LEFT,ii.BOTTOM_CENTER,ii.BOTTOM_RIGHT,ii.BOTTOM_FULL_WIDTH]}))},xY=P.memo(MY),_Y=(i,e)=>{const{children:t,eFocusableElement:s,onTabKeyDown:r,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:n}=i,{context:l}=P.useContext(vs),a=P.useRef(null),u=P.useRef(null),d=P.useRef(),c=E=>{const C=E==null?void 0:parseInt(E,10).toString();[a,u].forEach(v=>{var R,b;C===void 0?(R=v.current)==null||R.removeAttribute("tabindex"):(b=v.current)==null||b.setAttribute("tabindex",C)})};P.useImperativeHandle(e,()=>({forceFocusOutOfContainer(E){var C;(C=d.current)==null||C.forceFocusOutOfContainer(E)}}));const h=P.useCallback(()=>{if(!a.current&&!u.current){l.destroyBean(d.current),d.current=null;return}if(a.current&&u.current){const E={setTabIndex:c};d.current=l.createBean(new LS({comp:E,eTopGuard:a.current,eBottomGuard:u.current,eFocusableElement:s,onTabKeyDown:r,forceFocusOutWhenTabGuardsAreEmpty:n,focusInnerElement:C=>o.focusInnerElement(C)}))}},[]),p=P.useCallback(E=>{a.current=E,h()},[h]),m=P.useCallback(E=>{u.current=E,h()},[h]),S=E=>{const C=E==="top"?xm.TAB_GUARD_TOP:xm.TAB_GUARD_BOTTOM;return $.createElement("div",{className:`${xm.TAB_GUARD} ${C}`,role:"presentation",ref:E==="top"?p:m})};return $.createElement($.Fragment,null,S("top"),t,S("bottom"))},NY=P.forwardRef(_Y),GY=P.memo(NY),kY=({context:i})=>{const[e,t]=P.useState(""),[s,r]=P.useState(""),[o,n]=P.useState(""),[l,a]=P.useState(null),[u,d]=P.useState(null),[c,h]=P.useState(!1),[p,m]=P.useState(),S=P.useRef(null),E=P.useRef(null),C=P.useRef(),[v,R]=P.useState(null),b=P.useRef(()=>{}),A=P.useCallback(()=>{},[]),F=P.useMemo(()=>i.isDestroyed()?null:i.getBean("beans"),[i]);da(" AG Grid ",E);const O=P.useCallback(j=>{if(E.current=j,!E.current){i.destroyBean(S.current),S.current=null;return}if(i.isDestroyed())return;S.current=i.createBean(new Kl);const Z=S.current;b.current=Z.focusInnerElement.bind(Z);const ce={destroyGridUi:()=>{},setRtlClass:t,forceFocusOutOfContainer:Oe=>{var Le;(Le=C.current)==null||Le.forceFocusOutOfContainer(Oe)},updateLayoutClasses:n,getFocusableContainers:()=>{var Oe,Le;const Ie=[],J=(Oe=E.current)==null?void 0:Oe.querySelector(".ag-root"),X=(Le=E.current)==null?void 0:Le.querySelector(".ag-side-bar:not(.ag-hidden)");return J&&Ie.push(J),X&&Ie.push(X),Ie},setCursor:a,setUserSelect:d};Z.setComp(ce,E.current,E.current),h(!0)},[]);P.useEffect(()=>{if(!p||!F||!S.current||!v||!E.current)return;const j=S.current,Z=[],{agStackComponentsRegistry:ce}=F,Oe=ce.getComponentClass("AG-GRID-HEADER-DROP-ZONES"),Le=ce.getComponentClass("AG-SIDE-BAR"),Ie=ce.getComponentClass("AG-STATUS-BAR"),J=ce.getComponentClass("AG-WATERMARK"),X=ce.getComponentClass("AG-PAGINATION"),re=[],Me=E.current;if(j.showDropZones()&&Oe){const Re=i.createBean(new Oe),Ve=Re.getGui();Me.insertAdjacentElement("afterbegin",Ve),re.push(Ve),Z.push(Re)}if(j.showSideBar()&&Le){const Re=i.createBean(new Le),Ve=Re.getGui(),Kt=v.querySelector(".ag-tab-guard-bottom");Kt&&(Kt.insertAdjacentElement("beforebegin",Ve),re.push(Ve)),Z.push(Re)}if(j.showStatusBar()&&Ie){const Re=i.createBean(new Ie),Ve=Re.getGui();Me.insertAdjacentElement("beforeend",Ve),re.push(Ve),Z.push(Re)}if(X){const Re=i.createBean(new X),Ve=Re.getGui();Me.insertAdjacentElement("beforeend",Ve),re.push(Ve),Z.push(Re)}if(j.showWatermark()&&J){const Re=i.createBean(new J),Ve=Re.getGui();Me.insertAdjacentElement("beforeend",Ve),re.push(Ve),Z.push(Re)}return()=>{i.destroyBeans(Z),re.forEach(Re=>{Re.parentElement&&Re.parentElement.removeChild(Re)})}},[p,v,F]);const L=P.useMemo(()=>_o("ag-root-wrapper",e,s,o),[e,s,o]),G=P.useMemo(()=>_o("ag-root-wrapper-body","ag-focus-managed",o),[o]),k=P.useMemo(()=>({userSelect:u??"",WebkitUserSelect:u??"",cursor:l??""}),[u,l]),se=P.useCallback(j=>{C.current=j,m(j!==null)},[]);return $.createElement("div",{ref:O,className:L,style:k,role:"presentation"},$.createElement("div",{className:G,ref:R,role:"presentation"},c&&v&&F&&$.createElement(vs.Provider,{value:F},$.createElement(GY,{ref:se,eFocusableElement:v,onTabKeyDown:A,gridCtrl:S.current,forceFocusOutWhenTabGuardsAreEmpty:!0},$.createElement(xY,null)))))},VY=P.memo(kY),d0=i=>{var e,t;const s=P.useRef(),r=P.useRef(null),o=P.useRef(null),n=P.useRef([]),l=P.useRef([]),a=P.useRef(i),u=P.useRef(!1),[d,c]=P.useState(void 0),[,h]=P.useState(0),p=P.useCallback(E=>{if(r.current=E,!r.current){n.current.forEach(O=>O()),n.current.length=0;return}const C=i.modules||[];o.current||(o.current=new iY(()=>h(O=>O+1),i.componentWrappingElement,i.maxComponentCreationTimeMs),n.current.push(()=>{var O;(O=o.current)==null||O.destroy(),o.current=null}));const v=GC.combineAttributesAndGridOptions(i.gridOptions,i),R={providedBeanInstances:{frameworkComponentWrapper:new BY(o.current,!!v.reactiveCustomComponents)},modules:C,frameworkOverrides:new UY},b=O=>{c(O),n.current.push(()=>{O.destroy()}),O.getBean(Ga.NAME).whenReady(()=>{if(O.isDestroyed())return;const G=s.current;G&&i.setGridApi&&i.setGridApi(G,new Sc(G))})},A=O=>{O.getBean(Ga.NAME).whenReady(()=>{l.current.forEach(G=>G()),l.current.length=0,u.current=!0})},F=new cK;s.current=F.create(r.current,v,b,A,R)},[]),m=P.useMemo(()=>Gt({height:"100%"},i.containerStyle||{}),[i.containerStyle]),S=P.useCallback(E=>{u.current?E():l.current.push(E)},[]);return P.useEffect(()=>{const E=HY(a.current,i);a.current=i,S(()=>{s.current&&GC.processOnChange(E,s.current)})},[i]),$.createElement("div",{style:m,className:i.className,ref:p},d&&!d.isDestroyed()?$.createElement(VY,{context:d}):null,(t=(e=o.current)==null?void 0:e.getPortals())!=null?t:null)};function HY(i,e){const t={};return Object.keys(e).forEach(s=>{const r=e[s];i[s]!==r&&(t[s]=r)}),t}var BY=class extends hK{constructor(i,e){super(),this.parent=i,this.reactiveCustomComponents=e}createWrapper(i,e){if(this.reactiveCustomComponents){const r=(o=>{switch(o){case"filter":return Y3;case"floatingFilterComponent":return Q3;case"dateComponent":return j3;case"loadingOverlayComponent":return X3;case"noRowsOverlayComponent":return Z3;case"statusPanel":return eY;case"toolPanel":return tY;case"menuItem":return J3}})(e.propertyName);if(r)return new r(i,this.parent,e)}else switch(e.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":zb();break}const t=!e.cellRenderer&&e.propertyName!=="toolPanel";return new r0(i,this.parent,e,t)}},WY=P.forwardRef((i,e)=>{const{ctrlsFactory:t,context:s,gridOptionsService:r,resizeObserverService:o,clientSideRowModel:n,serverSideRowModel:l}=P.useContext(vs),[a,u]=P.useState(()=>new Or),[d,c]=P.useState(()=>new Or),[h,p]=P.useState(),[m,S]=P.useState(),E=P.useRef(),C=P.useRef(null),v=P.useRef(),R=P.useMemo(()=>et.__getGridRegisteredModules(i.api.getGridId()),[i]),b=P.useMemo(()=>a.toString()+" ag-details-row",[a]),A=P.useMemo(()=>d.toString()+" ag-details-grid",[d]);e&&P.useImperativeHandle(e,()=>({refresh(){var L,G;return(G=(L=E.current)==null?void 0:L.refresh())!=null?G:!1}})),i.template&&ye.warnOnce("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const F=P.useCallback(L=>{if(C.current=L,!C.current){s.destroyBean(E.current),v.current&&v.current();return}const G={addOrRemoveCssClass:(se,j)=>u(Z=>Z.setClass(se,j)),addOrRemoveDetailGridCssClass:(se,j)=>c(Z=>Z.setClass(se,j)),setDetailGrid:se=>p(se),setRowData:se=>S(se),getGui:()=>C.current},k=t.getInstance("detailCellRenderer");if(k&&(s.createBean(k),k.init(G,i),E.current=k,r.get("detailRowAutoHeight"))){const se=()=>{if(C.current==null)return;const j=C.current.clientHeight;j!=null&&j>0&&setTimeout(()=>{i.node.setRowHeight(j),n?n.onRowHeightChanged():l&&l.onRowHeightChanged()},0)};v.current=o.observeResize(C.current,se),se()}},[]),O=P.useCallback((L,G)=>{var k;(k=E.current)==null||k.registerDetailWithMaster(L,G)},[]);return $.createElement("div",{className:b,ref:F},h&&$.createElement(d0,us(Gt({className:A},h),{modules:R,rowData:m,setGridApi:O})))}),UY=class extends tG{constructor(){super("react"),this.frameworkComponents={agGroupCellRenderer:qO,agGroupRowRenderer:qO,agDetailCellRenderer:WY},this.wrapIncoming=(i,e)=>e==="ensureVisible"?rY(i):i(),this.renderingEngine="react"}frameworkComponent(i){return this.frameworkComponents[i]}isFrameworkComponent(i){if(!i)return!1;const e=i.prototype;return!(e&&"getGui"in e)}},zY=class extends P.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=(i,e)=>{this.api=i,this.columnApi=e,this.apiListeners.forEach(t=>t(i))}}registerApiListener(i){this.apiListeners.push(i)}componentWillUnmount(){this.apiListeners.length=0}render(){return $.createElement(d0,us(Gt({},this.props),{setGridApi:this.setGridApi}))}},$b=Object.defineProperty,$Y=Object.defineProperties,KY=Object.getOwnPropertyDescriptor,jY=Object.getOwnPropertyDescriptors,dv=Object.getOwnPropertySymbols,c0=Object.prototype.hasOwnProperty,h0=Object.prototype.propertyIsEnumerable,JO=(i,e,t)=>e in i?$b(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,pe=(i,e)=>{for(var t in e||(e={}))c0.call(e,t)&&JO(i,t,e[t]);if(dv)for(var t of dv(e))h0.call(e,t)&&JO(i,t,e[t]);return i},At=(i,e)=>$Y(i,jY(e)),YY=(i,e)=>{var t={};for(var s in i)c0.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&dv)for(var s of dv(i))e.indexOf(s)<0&&h0.call(i,s)&&(t[s]=i[s]);return t},xi=(i,e)=>{for(var t in e)$b(i,t,{get:e[t],enumerable:!0})},f=(i,e,t,s)=>{for(var r=s>1?void 0:s?KY(e,t):e,o=i.length-1,n;o>=0;o--)(n=i[o])&&(r=(s?n(e,t,r):n(r))||r);return s&&r&&$b(e,t,r),r},oo=(i,e)=>(t,s)=>e(t,s,i),p0={};xi(p0,{attrToBoolean:()=>cv,attrToNumber:()=>Tl,attrToString:()=>qY,defaultComparator:()=>QY,exists:()=>H,jsonEquals:()=>HR,makeNull:()=>zo,missing:()=>Ee,missingOrEmpty:()=>er,toStringOrNull:()=>lg,values:()=>Gd});function zo(i){return i==null||i===""?null:i}function H(i,e=!1){return i!=null&&(i!==""||e)}function Ee(i){return!H(i)}function er(i){return i==null||i.length===0}function lg(i){return i!=null&&typeof i.toString=="function"?i.toString():null}function Tl(i){if(i===void 0)return;if(i===null||i==="")return null;if(typeof i=="number")return isNaN(i)?void 0:i;const e=parseInt(i,10);return isNaN(e)?void 0:e}function cv(i){if(i!==void 0)return i===null||i===""?!1:typeof i=="boolean"?i:/true/i.test(i)}function qY(i){if(!(i==null||i===""))return i}function HR(i,e){const t=i?JSON.stringify(i):null,s=e?JSON.stringify(e):null;return t===s}function QY(i,e,t=!1){const s=i==null,r=e==null;if(i&&i.toNumber&&(i=i.toNumber()),e&&e.toNumber&&(e=e.toNumber()),s&&r)return 0;if(s)return-1;if(r)return 1;function o(n,l){return n>l?1:n<l?-1:0}if(typeof i!="string"||!t)return o(i,e);try{return i.localeCompare(e)}catch{return o(i,e)}}function Gd(i){if(i instanceof Set||i instanceof Map){const e=[];return i.forEach(t=>e.push(t)),e}return Object.values(i)}var XY=class{constructor(){this.existingKeys={}}addExistingKeys(i){for(let e=0;e<i.length;e++)this.existingKeys[i[e]]=!0}getUniqueKey(i,e){i=lg(i);let t=0;for(;;){let s;if(i?(s=i,t!==0&&(s+="_"+t)):e?(s=e,t!==0&&(s+="_"+t)):s=t,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);t++}}},g0={};xi(g0,{cloneObject:()=>Kb,deepCloneDefinition:()=>hv,getAllValuesInObject:()=>Ml,getValueUsingField:()=>kd,isNonNullObject:()=>pv,iterateObject:()=>tr,mergeDeep:()=>rr,removeAllReferences:()=>f0});function tr(i,e){if(i!=null){if(Array.isArray(i)){for(let t=0;t<i.length;t++)e(t.toString(),i[t]);return}for(const[t,s]of Object.entries(i))e(t,s)}}function Kb(i){const e={},t=Object.keys(i);for(let s=0;s<t.length;s++){const r=t[s],o=i[r];e[r]=o}return e}function hv(i,e){if(!i)return;const t=i,s={};return Object.keys(t).forEach(r=>{if(e&&e.indexOf(r)>=0)return;const o=t[r];pv(o)&&o.constructor===Object?s[r]=hv(o):s[r]=o}),s}function Ml(i){if(!i)return[];const e=Object;if(typeof e.values=="function")return e.values(i);const t=[];for(const s in i)i.hasOwnProperty(s)&&i.propertyIsEnumerable(s)&&t.push(i[s]);return t}function rr(i,e,t=!0,s=!1){H(e)&&tr(e,(r,o)=>{let n=i[r];n!==o&&(s&&n==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(n={},i[r]=n),pv(o)&&pv(n)&&!Array.isArray(n)?rr(n,o,t,s):(t||o!==void 0)&&(i[r]=o))})}function kd(i,e,t){if(!e||!i)return;if(!t)return i[e];const s=e.split(".");let r=i;for(let o=0;o<s.length;o++){if(r==null)return;r=r[s[o]]}return r}function f0(i,e=[],t){Object.keys(i).forEach(n=>{typeof i[n]=="object"&&!e.includes(n)&&(i[n]=void 0)});const s=Object.getPrototypeOf(i),r={},o=n=>`AG Grid: Grid API function ${n}() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`;Object.getOwnPropertyNames(s).forEach(n=>{if(typeof s[n]=="function"&&!e.includes(n)){const a=()=>{console.warn(o(n))};r[n]={value:a,writable:!0}}}),Object.defineProperties(i,r)}function pv(i){return typeof i=="object"&&i!==null}var m0={};xi(m0,{compose:()=>JY,debounce:()=>ns,doOnce:()=>ka,errorOnce:()=>Uh,executeAfter:()=>v0,executeInAWhile:()=>C0,executeNextVMTurn:()=>BR,getFunctionName:()=>jb,isFunction:()=>BS,noop:()=>ZY,throttle:()=>WR,waitUntil:()=>Yb,warnOnce:()=>ve});var ZO={};function ka(i,e){ZO[e]||(i(),ZO[e]=!0)}function ve(i){ka(()=>console.warn("AG Grid: "+i),i)}function Uh(i){ka(()=>console.error("AG Grid: "+i),i)}function jb(i){if(i.name)return i.name;const e=/function\s+([^\(]+)/.exec(i.toString());return e&&e.length===2?e[1].trim():null}function BS(i){return!!(i&&i.constructor&&i.call&&i.apply)}function C0(i){v0(i,400)}var Py=[],Ay=!1;function BR(i){Py.push(i),!Ay&&(Ay=!0,window.setTimeout(()=>{const e=Py.slice();Py.length=0,Ay=!1,e.forEach(t=>t())},0))}function v0(i,e=0){i.length>0&&window.setTimeout(()=>i.forEach(t=>t()),e)}function ns(i,e){let t;return function(...s){const r=this;window.clearTimeout(t),t=window.setTimeout(function(){i.apply(r,s)},e)}}function WR(i,e){let t=0;return function(...s){const r=this,o=new Date().getTime();o-t<e||(t=o,i.apply(r,s))}}function Yb(i,e,t=100,s){const r=new Date().getTime();let o=null,n=!1;const l=()=>{const a=new Date().getTime()-r>t;(i()||a)&&(e(),n=!0,o!=null&&(window.clearInterval(o),o=null),a&&s&&console.warn(s))};l(),n||(o=window.setInterval(l,10))}function JY(...i){return e=>i.reduce((t,s)=>s(t),e)}var ZY=()=>{},qb=(i=>(i.CommunityCoreModule="@ag-grid-community/core",i.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",i.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",i.CsvExportModule="@ag-grid-community/csv-export",i.EnterpriseCoreModule="@ag-grid-enterprise/core",i.RowGroupingModule="@ag-grid-enterprise/row-grouping",i.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",i.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",i.MenuModule="@ag-grid-enterprise/menu",i.SetFilterModule="@ag-grid-enterprise/set-filter",i.MultiFilterModule="@ag-grid-enterprise/multi-filter",i.StatusBarModule="@ag-grid-enterprise/status-bar",i.SideBarModule="@ag-grid-enterprise/side-bar",i.RangeSelectionModule="@ag-grid-enterprise/range-selection",i.MasterDetailModule="@ag-grid-enterprise/master-detail",i.RichSelectModule="@ag-grid-enterprise/rich-select",i.GridChartsModule="@ag-grid-enterprise/charts",i.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",i.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",i.ExcelExportModule="@ag-grid-enterprise/excel-export",i.ClipboardModule="@ag-grid-enterprise/clipboard",i.SparklinesModule="@ag-grid-enterprise/sparklines",i.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",i.AngularModule="@ag-grid-community/angular",i.ReactModule="@ag-grid-community/react",i.VueModule="@ag-grid-community/vue",i))(qb||{}),WS=class nt{static register(e){nt.__register(e,!0,void 0)}static registerModules(e){nt.__registerModules(e,!0,void 0)}static __register(e,t,s){nt.runVersionChecks(e),s!==void 0?(nt.areGridScopedModules=!0,nt.gridModulesMap[s]===void 0&&(nt.gridModulesMap[s]={}),nt.gridModulesMap[s][e.moduleName]=e):nt.globalModulesMap[e.moduleName]=e,nt.setModuleBased(t)}static __unRegisterGridModules(e){delete nt.gridModulesMap[e]}static __registerModules(e,t,s){nt.setModuleBased(t),e&&e.forEach(r=>nt.__register(r,t,s))}static isValidModuleVersion(e){const[t,s]=e.version.split(".")||[],[r,o]=nt.currentModuleVersion.split(".")||[];return t===r&&s===o}static runVersionChecks(e){if(nt.currentModuleVersion||(nt.currentModuleVersion=e.version),e.version?nt.isValidModuleVersion(e)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is version ${e.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is incompatible. Please update all modules to the same version.`),e.validate){const t=e.validate();t.isValid||console.error(`AG Grid: ${t.message}`)}}static setModuleBased(e){nt.moduleBased===void 0?nt.moduleBased=e:nt.moduleBased!==e&&ka(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){nt.isBundled=!0}static __assertRegistered(e,t,s){var r;if(this.__isRegistered(e,s))return!0;const o=t+e;let n;if(nt.isBundled)n=`AG Grid: unable to use ${t} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(nt.moduleBased||nt.moduleBased===void 0){let l=(r=Object.entries(qb).find(([a,u])=>u===e))==null?void 0:r[0];n=`AG Grid: unable to use ${t} as the ${l} is not registered${nt.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${l} } from '${e}';
    
    ModuleRegistry.registerModules([ ${l} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${t} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';
            
For more info see: https://www.ag-grid.com/javascript-grid/packages/`;return ka(()=>{console.warn(n)},o),!1}static __warnEnterpriseChartDisabled(e){const s="ag-charts-enterprise"+":"+e,o=`AG Grid: the '${e}' chart type is not supported in AG Charts Community as 'ag-grid-charts-enterprise' or '@ag-grid-enterprise/charts-enterprise' hasn't been loaded. See https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/ for more details.`;ka(()=>{console.warn(o)},s)}static __isRegistered(e,t){var s;return!!nt.globalModulesMap[e]||!!((s=nt.gridModulesMap[t])!=null&&s[e])}static __getRegisteredModules(e){return[...Gd(nt.globalModulesMap),...Gd(nt.gridModulesMap[e]||{})]}static __getGridRegisteredModules(e){var t;return Gd((t=nt.gridModulesMap[e])!=null?t:{})||[]}static __isPackageBased(){return!nt.moduleBased}};WS.globalModulesMap={};WS.gridModulesMap={};WS.areGridScopedModules=!1;var wt=WS;function S0(i,e,t){const s=lu(i.constructor);s.preConstructMethods||(s.preConstructMethods=[]),s.preConstructMethods.push(e)}function K(i,e,t){const s=lu(i.constructor);s.postConstructMethods||(s.postConstructMethods=[]),s.postConstructMethods.push(e)}function Ur(i,e,t){const s=lu(i.constructor);s.preDestroyMethods||(s.preDestroyMethods=[]),s.preDestroyMethods.push(e)}function ie(i){return e=>{const t=lu(e);t.beanName=i}}function D(i){return(e,t,s)=>{w0(e,i,!1,e,t,null)}}function Qe(i){return(e,t,s)=>{w0(e,i,!0,e,t,null)}}function w0(i,e,t,s,r,o){if(e===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof o=="number"){console.error("AG Grid: Autowired should be on an attribute");return}const n=lu(i.constructor);n.agClassAttributes||(n.agClassAttributes=[]),n.agClassAttributes.push({attributeName:r,beanName:e,optional:t})}function no(i){return(e,t,s)=>{const r=typeof e=="function"?e:e.constructor;let o;if(typeof s=="number"){let n;t?(o=lu(r),n=t):(o=lu(r),n="agConstructor"),o.autowireMethods||(o.autowireMethods={}),o.autowireMethods[n]||(o.autowireMethods[n]={}),o.autowireMethods[n][s]=i}}}function lu(i){return i.hasOwnProperty("__agBeanMetaData")||(i.__agBeanMetaData={}),i.__agBeanMetaData}var Xo=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(i,e,t=null,s=null){if(this.frameworkOverrides=e,this.gridOptionsService=i,t){const r=i.useAsyncEvents();this.addGlobalListener(t,r)}s&&this.addGlobalListener(s,!1)}setFrameworkOverrides(i){this.frameworkOverrides=i}getListeners(i,e,t){const s=e?this.allAsyncListeners:this.allSyncListeners;let r=s.get(i);return!r&&t&&(r=new Set,s.set(i,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(i,e,t=!1){this.getListeners(i,t,!0).add(e)}removeEventListener(i,e,t=!1){const s=this.getListeners(i,t,!1);s&&(s.delete(e),s.size===0&&(t?this.allAsyncListeners:this.allSyncListeners).delete(i))}addGlobalListener(i,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).add(i)}removeGlobalListener(i,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).delete(i)}dispatchEvent(i){let e=i;this.gridOptionsService&&this.gridOptionsService.addGridCommonParams(e),this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(i){this.firedEvents[i.type]||this.dispatchEvent(i)}dispatchToListeners(i,e){var t;const s=i.type;if(e&&"event"in i){const a=i.event;a instanceof Event&&(i.eventPath=a.composedPath())}const r=(a,u)=>a.forEach(d=>{if(!u.has(d))return;const c=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>d(i)):()=>d(i);e?this.dispatchAsync(c):c()}),o=(t=this.getListeners(s,e,!1))!=null?t:new Set,n=new Set(o);n.size>0&&r(n,o),new Set(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{const u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(s,i)):()=>a(s,i);e?this.dispatchAsync(u):u()})}dispatchAsync(i){this.asyncFunctionsQueue.push(i),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const i=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],i.forEach(e=>e())}};f([oo(0,no("gridOptionsService")),oo(1,no("frameworkOverrides")),oo(2,no("globalEventListener")),oo(3,no("globalSyncEventListener"))],Xo.prototype,"setBeans",1);Xo=f([ie("eventService")],Xo);var Qb=class{constructor(i){this.frameworkOverrides=i,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(i){let e=i;return this.frameworkOverrides.shouldWrapOutgoing&&(e=t=>{this.frameworkOverrides.wrapOutgoing(()=>i(t))},this.wrappedListeners.set(i,e)),e}wrapGlobal(i){let e=i;return this.frameworkOverrides.shouldWrapOutgoing&&(e=(t,s)=>{this.frameworkOverrides.wrapOutgoing(()=>i(t,s))},this.wrappedGlobalListeners.set(i,e)),e}unwrap(i){var e;return(e=this.wrappedListeners.get(i))!=null?e:i}unwrapGlobal(i){var e;return(e=this.wrappedGlobalListeners.get(i))!=null?e:i}},eq={resizable:!0,sortable:!0},tq=0;function y0(){return tq++}var ai=class E0{constructor(e,t,s,r){this.instanceId=y0(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new Xo,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=s,this.primary=r,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=e.sortIndex,s=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):s!==null&&(this.sortIndex=s);const r=e.hide,o=e.initialHide;r!==void 0?this.visible=!r:this.visible=!o,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const n=e.flex,l=e.initialFlex;n!==void 0?this.flex=n:l!==void 0&&(this.flex=l)}setColDef(e,t,s){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",s))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gridOptionsService.get("suppressFieldDotNotation");this.fieldContainsDots=H(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=H(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(e),this.maxWidth=this.columnUtils.calculateColMaxWidth(e)}initTooltip(){this.tooltipEnabled=H(this.colDef.tooltipField)||H(this.colDef.tooltipValueGetter)||H(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Ee(this.colDef)||Ee(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,s=this.colDef.showRowGroup===e;return t||s}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,t){var s,r;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new Qb(this.frameworkOverrides));const o=(r=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(t))!=null?r:t;this.eventService.addEventListener(e,o)}removeEventListener(e,t){var s,r;const o=(r=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(t))!=null?r:t;this.eventService.removeEventListener(e,o)}createColumnFunctionCallbackParams(e){return this.gridOptionsService.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),s=this.colDef.suppressNavigable;return s(t)}return!1}isCellEditable(e){return e.group&&!this.gridOptionsService.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var t;return(t=this.colDef[e])!=null?t:eq[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const s=this.createColumnFunctionCallbackParams(e);return t(s)}return!1}setMoving(e,t){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gridOptionsService.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Ee(this.sort)}isSorting(){return H(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,s){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const r=this.createColumnEvent("filterChanged",t);s&&rr(r,s),this.eventService.dispatchEvent(r)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const s=e===!0;this.visible!==s&&(this.visible=s,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let s=!0;for(;e;){if(!e.isPadding()){s=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:s}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gridOptionsService.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Ee(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),s=this.colDef.colSpan(t);return Math.max(s,1)}getRowSpan(e){if(Ee(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),s=this.colDef.rowSpan(t);return Math.max(s,1)}setActualWidth(e,t,s=!1){this.minWidth!=null&&(e=Math.max(e,this.minWidth)),this.maxWidth!=null&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),s||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return this.maxWidth!=null?e>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){H(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(e){ve("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let t=this.getColDef().menuTabs;return t==null&&(t=e),t}dispatchStateUpdatedEvent(e){this.eventService.dispatchEvent({type:E0.EVENT_STATE_UPDATED,key:e})}};ai.EVENT_MOVING_CHANGED="movingChanged";ai.EVENT_LEFT_CHANGED="leftChanged";ai.EVENT_WIDTH_CHANGED="widthChanged";ai.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";ai.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";ai.EVENT_VISIBLE_CHANGED="visibleChanged";ai.EVENT_FILTER_CHANGED="filterChanged";ai.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";ai.EVENT_SORT_CHANGED="sortChanged";ai.EVENT_COL_DEF_CHANGED="colDefChanged";ai.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";ai.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";ai.EVENT_PIVOT_CHANGED="columnPivotChanged";ai.EVENT_VALUE_CHANGED="columnValueChanged";ai.EVENT_STATE_UPDATED="columnStateUpdated";f([D("gridOptionsService")],ai.prototype,"gridOptionsService",2);f([D("columnUtils")],ai.prototype,"columnUtils",2);f([D("columnHoverService")],ai.prototype,"columnHoverService",2);f([D("frameworkOverrides")],ai.prototype,"frameworkOverrides",2);f([K],ai.prototype,"initialise",1);var dt=ai,US=class zh{constructor(e,t,s,r){this.localEventService=new Xo,this.expandable=!1,this.instanceId=y0(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=s,this.level=r}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e;const t={type:zh.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(t)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{t instanceof dt?e.push(t):t instanceof zh&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,s=!1;const r=this.findChildrenRemovingPadding();for(let n=0,l=r.length;n<l;n++){const a=r[n];if(!a.isVisible())continue;const u=a.getColumnGroupShow();u==="open"?(e=!0,s=!0):u==="closed"?(t=!0,s=!0):(e=!0,t=!0)}const o=e&&t&&s;if(this.expandable!==o){this.expandable=o;const n={type:zh.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(n)}}findChildrenRemovingPadding(){const e=[],t=s=>{s.forEach(r=>{r instanceof zh&&r.isPadding()?t(r.children):e.push(r)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}};US.EVENT_EXPANDED_CHANGED="expandedChanged";US.EVENT_EXPANDABLE_CHANGED="expandableChanged";f([Ur],US.prototype,"destroy",1);var Jt=US,iq={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},R0={};xi(R0,{addSafePassiveEventListener:()=>M0,createEventPath:()=>L0,getCtrlForEventTarget:()=>gv,getEventPath:()=>I0,isElementInEventPath:()=>fv,isEventSupported:()=>Jb,isStopPropagationForAgGrid:()=>ho,stopPropagationForAgGrid:()=>vo});var T0={};xi(T0,{areEqual:()=>Vo,existsAndNotEmpty:()=>D0,flatten:()=>F0,forEachReverse:()=>nq,includes:()=>xr,insertArrayIntoArray:()=>UR,insertIntoArray:()=>ag,last:()=>Ze,moveInArray:()=>zR,pushAll:()=>$R,removeAllFromArray:()=>A0,removeAllFromUnorderedArray:()=>P0,removeFromArray:()=>bs,removeFromUnorderedArray:()=>Xb,removeRepeatsFromArray:()=>rq,shallowCompare:()=>sq,sortNumerically:()=>b0,toStrings:()=>oq});function D0(i){return i!=null&&i.length>0}function Ze(i){if(!(!i||!i.length))return i[i.length-1]}function Vo(i,e,t){return i==null&&e==null?!0:i!=null&&e!=null&&i.length===e.length&&i.every((s,r)=>t?t(s,e[r]):e[r]===s)}function sq(i,e){return Vo(i,e)}function b0(i){return i.sort((e,t)=>e-t)}function rq(i,e){if(i)for(let t=i.length-2;t>=0;t--){const s=i[t]===e,r=i[t+1]===e;s&&r&&i.splice(t+1,1)}}function Xb(i,e){const t=i.indexOf(e);t>=0&&(i[t]=i[i.length-1],i.pop())}function bs(i,e){const t=i.indexOf(e);t>=0&&i.splice(t,1)}function P0(i,e){for(let t=0;t<e.length;t++)Xb(i,e[t])}function A0(i,e){for(let t=0;t<e.length;t++)bs(i,e[t])}function ag(i,e,t){i.splice(t,0,e)}function UR(i,e,t){if(!(i==null||e==null))for(let s=e.length-1;s>=0;s--){const r=e[s];ag(i,r,t)}}function zR(i,e,t){A0(i,e),e.slice().reverse().forEach(s=>ag(i,s,t))}function xr(i,e){return i.indexOf(e)>-1}function F0(i){return[].concat.apply([],i)}function $R(i,e){e==null||i==null||e.forEach(t=>i.push(t))}function oq(i){return i.map(lg)}function nq(i,e){if(i!=null)for(let t=i.length-1;t>=0;t--)e(i[t],t)}var O0="__ag_Grid_Stop_Propagation",lq=["touchstart","touchend","touchmove","touchcancel","scroll"],Fy={};function vo(i){i[O0]=!0}function ho(i){return i[O0]===!0}var Jb=(()=>{const i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if(typeof Fy[t]=="boolean")return Fy[t];const s=document.createElement(i[t]||"div");return t="on"+t,Fy[t]=t in s}})();function gv(i,e,t){let s=e;for(;s;){const r=i.getDomData(s,t);if(r)return r;s=s.parentElement}return null}function fv(i,e){return!e||!i?!1:I0(e).indexOf(i)>=0}function L0(i){const e=[];let t=i.target;for(;t;)e.push(t),t=t.parentElement;return e}function I0(i){const e=i;return e.path?e.path:e.composedPath?e.composedPath():L0(e)}function M0(i,e,t,s){const o=xr(lq,t)?{passive:!0}:void 0;i&&i.addEventListener&&i.addEventListener(e,t,s,o)}var xn=class x0{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){this.destroyFunctions.forEach(e=>e()),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:x0.EVENT_DESTROYED})}addEventListener(e,t){this.localEventService||(this.localEventService=new Xo),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,t,s){if(this.destroyed)return;e instanceof HTMLElement?M0(this.getFrameworkOverrides(),e,t,s):e.addEventListener(t,s);const r=()=>(e.removeEventListener(t,s),this.destroyFunctions=this.destroyFunctions.filter(o=>o!==r),null);return this.destroyFunctions.push(r),r}setupGridOptionListener(e,t){this.gridOptionsService.addEventListener(e,t);const s=()=>(this.gridOptionsService.removeEventListener(e,t),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==s),null);return this.destroyFunctions.push(s),s}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const s=e.join("-")+this.propertyListenerId++,r=o=>{if(o.changeSet){if(o.changeSet&&o.changeSet.id===this.lastChangeSetIdLookup[s])return;this.lastChangeSetIdLookup[s]=o.changeSet.id}const n={type:"gridPropertyChanged",changeSet:o.changeSet,source:o.source};t(n)};e.forEach(o=>this.setupGridOptionListener(o,r))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const s=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),s}createBean(e,t,s){return(t||this.getContext()).createBean(e,s)}destroyBean(e,t){return(t||this.getContext()).destroyBean(e)}destroyBeans(e,t){return e&&e.forEach(s=>this.destroyBean(s,t)),[]}};xn.EVENT_DESTROYED="destroyed";f([D("frameworkOverrides")],xn.prototype,"frameworkOverrides",2);f([D("context")],xn.prototype,"context",2);f([D("eventService")],xn.prototype,"eventService",2);f([D("gridOptionsService")],xn.prototype,"gridOptionsService",2);f([D("localeService")],xn.prototype,"localeService",2);f([D("environment")],xn.prototype,"environment",2);f([Ur],xn.prototype,"destroy",1);var U=xn,ug=class extends U{setBeans(i){this.logger=i.create("ColumnFactory")}createColumnTree(i,e,t,s){const r=new XY,{existingCols:o,existingGroups:n,existingColKeys:l}=this.extractExistingTreeData(t);r.addExistingKeys(l);const a=this.recursivelyCreateColumns(i,0,e,o,r,n,s),u=this.findMaxDept(a,0);this.logger.log("Number of levels for grouped columns is "+u);const d=this.balanceColumnTree(a,0,u,r),c=(h,p)=>{h instanceof Jt&&h.setupExpandable(),h.setOriginalParent(p)};return this.columnUtils.depthFirstOriginalTreeSearch(null,d,c),{columnTree:d,treeDept:u}}extractExistingTreeData(i){const e=[],t=[],s=[];return i&&this.columnUtils.depthFirstOriginalTreeSearch(null,i,r=>{if(r instanceof Jt){const o=r;t.push(o)}else{const o=r;s.push(o.getId()),e.push(o)}}),{existingCols:e,existingGroups:t,existingColKeys:s}}createForAutoGroups(i,e){return i.map(t=>this.createAutoGroupTreeItem(e,t))}createAutoGroupTreeItem(i,e){const t=this.findDepth(i);let s=e;for(let r=t-1;r>=0;r--){const o=new Jt(null,`FAKE_PATH_${e.getId()}}_${r}`,!0,r);this.createBean(o),o.setChildren([s]),s.setOriginalParent(o),s=o}return t===0&&e.setOriginalParent(null),s}findDepth(i){let e=0,t=i;for(;t&&t[0]&&t[0]instanceof Jt;)e++,t=t[0].getChildren();return e}balanceColumnTree(i,e,t,s){const r=[];for(let o=0;o<i.length;o++){const n=i[o];if(n instanceof Jt){const l=n,a=this.balanceColumnTree(l.getChildren(),e+1,t,s);l.setChildren(a),r.push(l)}else{let l,a;for(let u=t-1;u>=e;u--){const d=s.getUniqueKey(null,null),c=this.createMergedColGroupDef(null),h=new Jt(c,d,!0,e);this.createBean(h),a&&a.setChildren([h]),a=h,l||(l=a)}if(l&&a)if(r.push(l),i.some(d=>d instanceof Jt)){a.setChildren([n]);continue}else{a.setChildren(i);break}r.push(n)}}return r}findMaxDept(i,e){let t=e;for(let s=0;s<i.length;s++){const r=i[s];if(r instanceof Jt){const o=r,n=this.findMaxDept(o.getChildren(),e+1);t<n&&(t=n)}}return t}recursivelyCreateColumns(i,e,t,s,r,o,n){if(!i)return[];const l=new Array(i.length);for(let a=0;a<l.length;a++){const u=i[a];this.isColumnGroup(u)?l[a]=this.createColumnGroup(t,u,e,s,r,o,n):l[a]=this.createColumn(t,u,s,r,n)}return l}createColumnGroup(i,e,t,s,r,o,n){const l=this.createMergedColGroupDef(e),a=r.getUniqueKey(l.groupId||null,null),u=new Jt(l,a,!1,t);this.createBean(u);const d=this.findExistingGroup(e,o);d&&o.splice(d.idx,1);let c=d==null?void 0:d.group;c&&u.setExpanded(c.isExpanded());const h=this.recursivelyCreateColumns(l.children,t+1,i,s,r,o,n);return u.setChildren(h),u}createMergedColGroupDef(i){const e={};return Object.assign(e,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(e,i),e}createColumn(i,e,t,s,r){const o=this.findExistingColumn(e,t);o&&(t==null||t.splice(o.idx,1));let n=o==null?void 0:o.column;if(n){const l=this.addColumnDefaultAndTypes(e,n.getColId());n.setColDef(l,e,r),this.applyColumnState(n,l,r)}else{const l=s.getUniqueKey(e.colId,e.field),a=this.addColumnDefaultAndTypes(e,l);n=new dt(a,e,l,i),this.context.createBean(n)}return this.dataTypeService.addColumnListeners(n),n}applyColumnState(i,e,t){const s=Tl(e.flex);if(s!==void 0&&i.setFlex(s),i.getFlex()<=0){const l=Tl(e.width);if(l!=null)i.setActualWidth(l,t);else{const a=i.getActualWidth();i.setActualWidth(a,t)}}e.sort!==void 0&&(e.sort=="asc"||e.sort=="desc"?i.setSort(e.sort,t):i.setSort(void 0,t));const o=Tl(e.sortIndex);o!==void 0&&i.setSortIndex(o);const n=cv(e.hide);n!==void 0&&i.setVisible(!n,t),e.pinned!==void 0&&i.setPinned(e.pinned)}findExistingColumn(i,e){if(e)for(let t=0;t<e.length;t++){const s=e[t].getUserProvidedColDef();if(!s)continue;if(i.colId!=null){if(e[t].getId()===i.colId)return{idx:t,column:e[t]};continue}if(i.field!=null){if(s.field===i.field)return{idx:t,column:e[t]};continue}if(s===i)return{idx:t,column:e[t]}}}findExistingGroup(i,e){if(i.groupId!=null)for(let s=0;s<e.length;s++){const r=e[s];if(r.getColGroupDef()&&r.getId()===i.groupId)return{idx:s,group:r}}}addColumnDefaultAndTypes(i,e){const t={},s=this.gridOptionsService.get("defaultColDef");rr(t,s,!1,!0);const r=this.dataTypeService.updateColDefAndGetColumnType(t,i,e);r&&this.assignColumnTypes(r,t),rr(t,i,!1,!0);const o=this.gridOptionsService.get("autoGroupColumnDef"),n=this.gridOptionsService.isColumnsSortingCoupledToGroup();return i.rowGroup&&o&&n&&rr(t,{sort:o.sort,initialSort:o.initialSort},!1,!0),this.dataTypeService.validateColDef(t),t}assignColumnTypes(i,e){if(!i.length)return;const t=Object.assign({},iq),s=this.gridOptionsService.get("columnTypes")||{};tr(s,(r,o)=>{r in t?console.warn(`AG Grid: the column type '${r}' is a default column type and cannot be overridden.`):(o.type&&ve("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),t[r]=o)}),i.forEach(r=>{const o=t[r.trim()];o?rr(e,o,!1,!0):console.warn("AG Grid: colDef.type '"+r+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(i){return i.children!==void 0}};f([D("columnUtils")],ug.prototype,"columnUtils",2);f([D("dataTypeService")],ug.prototype,"dataTypeService",2);f([oo(0,no("loggerFactory"))],ug.prototype,"setBeans",1);ug=f([ie("columnFactory")],ug);var zS=class Ao{constructor(e,t,s,r){this.displayedChildren=[],this.localEventService=new Xo,this.groupId=t,this.partId=s,this.providedColumnGroup=e,this.pinned=r}static createUniqueId(e,t){return e+"_"+t}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return Ao.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof Ao&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.get("enableRtl")){const t=Ze(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(Ao.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let t=!1;return this.children.forEach(s=>{e===s&&(t=!0),s instanceof Ao&&s.isChildInThisGroupDeepSearch(e)&&(t=!0)}),t}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{t instanceof dt?e.push(t):t instanceof Ao&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{t instanceof dt?e.push(t):t instanceof Ao&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(Ao.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(s=>{if(s instanceof Ao&&(!s.displayedChildren||!s.displayedChildren.length))return;switch(s.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(s);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(s);break;default:this.displayedChildren.push(s);break}}),this.localEventService.dispatchEvent(this.createAgEvent(Ao.EVENT_DISPLAYED_CHILDREN_CHANGED))}};zS.EVENT_LEFT_CHANGED="leftChanged";zS.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";f([D("gridOptionsService")],zS.prototype,"gridOptionsService",2);var Si=zS,y=class{};y.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";y.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";y.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";y.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded";y.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";y.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";y.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";y.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";y.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";y.EVENT_COLUMN_MOVED="columnMoved";y.EVENT_COLUMN_VISIBLE="columnVisible";y.EVENT_COLUMN_PINNED="columnPinned";y.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";y.EVENT_COLUMN_RESIZED="columnResized";y.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";y.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns";y.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide";y.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation";y.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";y.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver";y.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave";y.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked";y.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu";y.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";y.EVENT_ROW_GROUP_OPENED="rowGroupOpened";y.EVENT_ROW_DATA_UPDATED="rowDataUpdated";y.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";y.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";y.EVENT_CHART_CREATED="chartCreated";y.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";y.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";y.EVENT_CHART_DESTROYED="chartDestroyed";y.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";y.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";y.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";y.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";y.EVENT_MODEL_UPDATED="modelUpdated";y.EVENT_CUT_START="cutStart";y.EVENT_CUT_END="cutEnd";y.EVENT_PASTE_START="pasteStart";y.EVENT_PASTE_END="pasteEnd";y.EVENT_FILL_START="fillStart";y.EVENT_FILL_END="fillEnd";y.EVENT_RANGE_DELETE_START="rangeDeleteStart";y.EVENT_RANGE_DELETE_END="rangeDeleteEnd";y.EVENT_UNDO_STARTED="undoStarted";y.EVENT_UNDO_ENDED="undoEnded";y.EVENT_REDO_STARTED="redoStarted";y.EVENT_REDO_ENDED="redoEnded";y.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";y.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";y.EVENT_CELL_CLICKED="cellClicked";y.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";y.EVENT_CELL_MOUSE_DOWN="cellMouseDown";y.EVENT_CELL_CONTEXT_MENU="cellContextMenu";y.EVENT_CELL_VALUE_CHANGED="cellValueChanged";y.EVENT_CELL_EDIT_REQUEST="cellEditRequest";y.EVENT_ROW_VALUE_CHANGED="rowValueChanged";y.EVENT_CELL_FOCUSED="cellFocused";y.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";y.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";y.EVENT_ROW_SELECTED="rowSelected";y.EVENT_SELECTION_CHANGED="selectionChanged";y.EVENT_TOOLTIP_SHOW="tooltipShow";y.EVENT_TOOLTIP_HIDE="tooltipHide";y.EVENT_CELL_KEY_DOWN="cellKeyDown";y.EVENT_CELL_MOUSE_OVER="cellMouseOver";y.EVENT_CELL_MOUSE_OUT="cellMouseOut";y.EVENT_FILTER_CHANGED="filterChanged";y.EVENT_FILTER_MODIFIED="filterModified";y.EVENT_FILTER_OPENED="filterOpened";y.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged";y.EVENT_SORT_CHANGED="sortChanged";y.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";y.EVENT_ROW_CLICKED="rowClicked";y.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";y.EVENT_GRID_READY="gridReady";y.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed";y.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";y.EVENT_VIEWPORT_CHANGED="viewportChanged";y.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";y.EVENT_FIRST_DATA_RENDERED="firstDataRendered";y.EVENT_DRAG_STARTED="dragStarted";y.EVENT_DRAG_STOPPED="dragStopped";y.EVENT_CHECKBOX_CHANGED="checkboxChanged";y.EVENT_ROW_EDITING_STARTED="rowEditingStarted";y.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";y.EVENT_CELL_EDITING_STARTED="cellEditingStarted";y.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";y.EVENT_BODY_SCROLL="bodyScroll";y.EVENT_BODY_SCROLL_END="bodyScrollEnd";y.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";y.EVENT_PAGINATION_CHANGED="paginationChanged";y.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";y.EVENT_STORE_REFRESHED="storeRefreshed";y.EVENT_STATE_UPDATED="stateUpdated";y.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged";y.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";y.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged";y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";y.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";y.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";y.EVENT_FLASH_CELLS="flashCells";y.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";y.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";y.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";y.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";y.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";y.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";y.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";y.EVENT_ROW_DRAG_ENTER="rowDragEnter";y.EVENT_ROW_DRAG_MOVE="rowDragMove";y.EVENT_ROW_DRAG_LEAVE="rowDragLeave";y.EVENT_ROW_DRAG_END="rowDragEnd";y.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";y.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";y.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";y.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";y.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";y.EVENT_STORE_UPDATED="storeUpdated";y.EVENT_FILTER_DESTROYED="filterDestroyed";y.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";y.EVENT_ROW_COUNT_READY="rowCountReady";y.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";y.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";y.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";y.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";y.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var jm=new Set([y.EVENT_GRID_PRE_DESTROYED]),aq=class{constructor(){this.existingIds={}}getInstanceIdForKey(i){const e=this.existingIds[i];let t;return typeof e!="number"?t=0:t=e+1,this.existingIds[i]=t,t}},dg="ag-Grid-AutoColumn",mv=class extends U{createAutoGroupColumns(i){const e=[],t=this.gridOptionsService.get("treeData");let s=this.gridOptionsService.isGroupMultiAutoColumn();return t&&s&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),s=!1),s?i.forEach((r,o)=>{e.push(this.createOneAutoGroupColumn(r,o))}):e.push(this.createOneAutoGroupColumn()),e}updateAutoGroupColumns(i,e){i.forEach((t,s)=>this.updateOneAutoGroupColumn(t,s,e))}createOneAutoGroupColumn(i,e){let t;i?t=`${dg}-${i.getId()}`:t=dg;const s=this.createAutoGroupColDef(t,i,e);s.colId=t;const r=new dt(s,null,t,!0);return this.context.createBean(r),r}updateOneAutoGroupColumn(i,e,t){const s=i.getColDef(),r=typeof s.showRowGroup=="string"?s.showRowGroup:void 0,o=r!=null?this.columnModel.getPrimaryColumn(r):void 0,n=this.createAutoGroupColDef(i.getId(),o??void 0,e);i.setColDef(n,null,t),this.columnFactory.applyColumnState(i,n,t)}createAutoGroupColDef(i,e,t){let s=this.createBaseColDef(e);const r=this.gridOptionsService.get("autoGroupColumnDef");rr(s,r),s=this.columnFactory.addColumnDefaultAndTypes(s,i),this.gridOptionsService.get("treeData")||Ee(s.field)&&Ee(s.valueGetter)&&Ee(s.filterValueGetter)&&s.filter!=="agGroupColumnFilter"&&(s.filter=!1),t&&t>0&&(s.headerCheckboxSelection=!1);const o=this.gridOptionsService.isColumnsSortingCoupledToGroup(),n=s.valueGetter||s.field!=null;return o&&!n&&(s.sortIndex=void 0,s.initialSort=void 0),s}createBaseColDef(i){const e=this.gridOptionsService.get("autoGroupColumnDef"),s={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(e&&(e.cellRenderer||e.cellRendererSelector)||(s.cellRenderer="agGroupCellRenderer"),i){const o=i.getColDef();Object.assign(s,{headerName:this.columnModel.getDisplayNameForColumn(i,"header"),headerValueGetter:o.headerValueGetter}),o.cellRenderer&&Object.assign(s,{cellRendererParams:{innerRenderer:o.cellRenderer,innerRendererParams:o.cellRendererParams}}),s.showRowGroup=i.getColId()}else s.showRowGroup=!0;return s}};f([D("columnModel")],mv.prototype,"columnModel",2);f([D("columnFactory")],mv.prototype,"columnFactory",2);mv=f([ie("autoGroupColService")],mv);var _0={};xi(_0,{camelCaseToHumanText:()=>N0,camelCaseToHyphenated:()=>G0,capitalise:()=>hq,escapeString:()=>gi,utf8_encode:()=>cq});var uq=/[&<>"']/g,dq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function cq(i){const e=String.fromCharCode;function t(c){const h=[];if(!c)return[];const p=c.length;let m=0,S,E;for(;m<p;)S=c.charCodeAt(m++),S>=55296&&S<=56319&&m<p?(E=c.charCodeAt(m++),(E&64512)==56320?h.push(((S&1023)<<10)+(E&1023)+65536):(h.push(S),m--)):h.push(S);return h}function s(c){if(c>=55296&&c<=57343)throw Error("Lone surrogate U+"+c.toString(16).toUpperCase()+" is not a scalar value")}function r(c,h){return e(c>>h&63|128)}function o(c){if(c>=0&&c<=31&&c!==10)return`_x${c.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(c&4294967168))return e(c);let h="";return c&4294965248?c&4294901760?c&4292870144||(h=e(c>>18&7|240),h+=r(c,12),h+=r(c,6)):(s(c),h=e(c>>12&15|224),h+=r(c,6)):h=e(c>>6&31|192),h+=e(c&63|128),h}const n=t(i),l=n.length;let a=-1,u,d="";for(;++a<l;)u=n[a],d+=o(u);return d}function hq(i){return i[0].toUpperCase()+i.substring(1).toLowerCase()}function gi(i,e){if(i==null)return null;const t=i.toString().toString();return e?t:t.replace(uq,s=>dq[s])}function N0(i){if(!i||i==null)return null;const e=/([a-z])([A-Z])/g,t=/([A-Z]+)([A-Z])([a-z])/g;return i.replace(e,"$1 $2").replace(t,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function G0(i){return i.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}var k0={};xi(k0,{convertToMap:()=>tl,keys:()=>gq,mapById:()=>pq});function tl(i){const e=new Map;return i.forEach(t=>e.set(t[0],t[1])),e}function pq(i,e){const t=new Map;return i.forEach(s=>t.set(e(s),s)),t}function gq(i){const e=[];return i.forEach((t,s)=>e.push(s)),e}var Ii=class extends U{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gridOptionsService.get("suppressColumnVirtualisation");const i=this.gridOptionsService.get("pivotMode");this.isPivotSettingAllowed(i)&&(this.pivotMode=i),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.buildAutoGroupColumns(Dd(e.source))),this.addManagedPropertyListener("autoGroupColumnDef",e=>this.onAutoGroupColumnDefChanged(Dd(e.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],e=>this.onSharedColDefChanged(Dd(e.source))),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gridOptionsService.get("pivotMode"),Dd(e.source))),this.addManagedListener(this.eventService,y.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(i){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(i))}onAutoGroupColumnDefChanged(i){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,i)}onSharedColDefChanged(i){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,i),this.createColumnsFromColumnDefs(!0,i))}setColumnDefs(i,e){const t=!!this.columnDefs;this.columnDefs=i,this.createColumnsFromColumnDefs(t,e)}recreateColumnDefs(i){this.onSharedColDefChanged(i)}destroyOldColumns(i,e){const t={};if(!i)return;this.columnUtils.depthFirstOriginalTreeSearch(null,i,r=>{t[r.getInstanceId()]=r}),e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,r=>{t[r.getInstanceId()]=null});const s=Object.values(t).filter(r=>r!=null);this.destroyBeans(s)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(i,e){const t=i?this.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const s=this.primaryColumns,r=this.primaryColumnTree,o=this.columnFactory.createColumnTree(this.columnDefs,!0,r,e);this.destroyOldColumns(this.primaryColumnTree,o.columnTree),this.primaryColumnTree=o.columnTree,this.primaryHeaderRowCount=o.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(a=>this.primaryColumnsMap[a.getId()]=a),this.extractRowGroupColumns(e,s),this.extractPivotColumns(e,s),this.extractValueColumns(e,s),this.ready=!0;const n=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||n||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),i&&this.gridColsArePrimary&&!this.gridOptionsService.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(e),this.checkViewportColumns()),this.dispatchEverythingChanged(e),this.changeEventsDispatching=!0,t&&t(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(e)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(i){const e={type:y.EVENT_NEW_COLUMNS_LOADED,source:i};this.eventService.dispatchEvent(e),i==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(i){const e={type:y.EVENT_COLUMN_EVERYTHING_CHANGED,source:i};this.eventService.dispatchEvent(e)}orderGridColumnsLikePrimary(){const i=this.primaryColumns;if(!i)return;const e=i.filter(s=>this.gridColumns.indexOf(s)>=0),t=this.gridColumns.filter(s=>e.indexOf(s)<0);this.gridColumns=[...t,...e],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gridOptionsService.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}getDisplayedColumnsStartingAt(i){let e=i;const t=[];for(;e!=null;)t.push(e),e=this.getDisplayedColAfter(e);return t}checkViewportColumns(i=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;const t={type:y.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:i};this.eventService.dispatchEvent(t)}setViewportPosition(i,e,t=!1){(i!==this.scrollWidth||e!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=i,this.scrollPosition=e,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(t))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(i){return i&&this.gridOptionsService.get("treeData")?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0}setPivotMode(i,e){if(i===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=i,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(e);const t={type:y.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(t)}getSecondaryPivotColumn(i,e){if(Ee(this.secondaryColumns))return null;const t=this.getPrimaryColumn(e);let s=null;return this.secondaryColumns.forEach(r=>{const o=r.getColDef().pivotKeys,n=r.getColDef().pivotValueColumn;Vo(o,i)&&n===t&&(s=r)}),s}setBeans(i){this.logger=i.create("columnModel")}setFirstRightAndLastLeftPinned(i){let e,t;this.gridOptionsService.get("enableRtl")?(e=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,t=this.displayedColumnsRight?Ze(this.displayedColumnsRight):null):(e=this.displayedColumnsLeft?Ze(this.displayedColumnsLeft):null,t=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(s=>{s.setLastLeftPinned(s===e,i),s.setFirstRightPinned(s===t,i)})}autoSizeColumns(i){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(i));return}const{columns:e,skipHeader:t,skipHeaderGroups:s,stopAtGroup:r,source:o="api"}=i;this.animationFrameService.flushAllFrames();const n=[];let l=-1;const a=t??this.gridOptionsService.get("skipHeaderOnAutoSize"),u=s??a;for(;l!==0;)l=0,this.actionOnGridColumns(e,d=>{if(n.indexOf(d)>=0)return!1;const c=this.autoWidthCalculator.getPreferredWidthForColumn(d,a);if(c>0){const h=this.normaliseColumnWidth(d,c);d.setActualWidth(h,o),n.push(d),l++}return!0},o);u||this.autoSizeColumnGroupsByColumns(e,o,r),this.dispatchColumnResizedEvent(n,!0,"autosizeColumns")}dispatchColumnResizedEvent(i,e,t,s=null){if(i&&i.length){const r={type:y.EVENT_COLUMN_RESIZED,columns:i,column:i.length===1?i[0]:null,flexColumns:s,finished:e,source:t};this.eventService.dispatchEvent(r)}}dispatchColumnChangedEvent(i,e,t){const s={type:i,columns:e,column:e&&e.length==1?e[0]:null,source:t};this.eventService.dispatchEvent(s)}dispatchColumnMovedEvent(i){const{movedColumns:e,source:t,toIndex:s,finished:r}=i,o={type:y.EVENT_COLUMN_MOVED,columns:e,column:e&&e.length===1?e[0]:null,toIndex:s,finished:r,source:t};this.eventService.dispatchEvent(o)}dispatchColumnPinnedEvent(i,e){if(!i.length)return;const t=i.length===1?i[0]:null,s=this.getCommonValue(i,o=>o.getPinned()),r={type:y.EVENT_COLUMN_PINNED,pinned:s??null,columns:i,column:t,source:e};this.eventService.dispatchEvent(r)}dispatchColumnVisibleEvent(i,e){if(!i.length)return;const t=i.length===1?i[0]:null,s=this.getCommonValue(i,o=>o.isVisible()),r={type:y.EVENT_COLUMN_VISIBLE,visible:s,columns:i,column:t,source:e};this.eventService.dispatchEvent(r)}autoSizeColumn(i,e,t){i&&this.autoSizeColumns({columns:[i],skipHeader:t,skipHeaderGroups:!0,source:e})}autoSizeColumnGroupsByColumns(i,e,t){const s=new Set;this.getGridColumns(i).forEach(l=>{let a=l.getParent();for(;a&&a!=t;)a.isPadding()||s.add(a),a=a.getParent()});let o;const n=[];for(const l of s){for(const a of this.ctrlsService.getHeaderRowContainerCtrls())if(o=a.getHeaderCtrlForColumn(l),o)break;o&&o.resizeLeafColumnsToFit(e)}return n}autoSizeAllColumns(i,e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(i,e));return}const t=this.getAllDisplayedColumns();this.autoSizeColumns({columns:t,skipHeader:e,source:i})}getColumnsFromTree(i){const e=[],t=s=>{for(let r=0;r<s.length;r++){const o=s[r];o instanceof dt?e.push(o):o instanceof Jt&&t(o.getChildren())}};return t(i),e}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(i){return this.getAllDisplayedColumns().indexOf(i)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(i){return this.colSpanActive?this.getDisplayedColumnsForRow(i,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(i){return this.colSpanActive?this.getDisplayedColumnsForRow(i,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(i,e,t,s){const r=[];let o=null;for(let n=0;n<e.length;n++){const l=e[n],a=e.length-n,u=Math.min(l.getColSpan(i),a),d=[l];if(u>1){const h=u-1;for(let p=1;p<=h;p++)d.push(e[n+p]);n+=h}let c;t?(c=!1,d.forEach(h=>{t(h)&&(c=!0)})):c=!0,c&&(r.length===0&&o&&(s&&s(l))&&r.push(o),r.push(l)),o=l}return r}getViewportCenterColumnsForRow(i){if(!this.colSpanActive)return this.viewportColumnsCenter;const e=s=>{const r=s.getLeft();return H(r)&&r>this.viewportLeft},t=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(i,this.displayedColumnsCenter,t,e)}isColumnAtEdge(i,e){const t=this.getAllDisplayedColumns();if(!t.length)return!1;const s=e==="first";let r;if(i instanceof Si){const o=i.getDisplayedLeafColumns();if(!o.length)return!1;r=s?o[0]:Ze(o)}else r=i;return(s?t[0]:Ze(t))===r}getAriaColumnIndex(i){let e;return i instanceof Si?e=i.getLeafColumns()[0]:e=i,this.ariaOrderColumns.indexOf(e)+1}isColumnInHeaderViewport(i){return i.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(i)}isColumnInRowViewport(i){if(i.isAutoHeight())return!0;const e=i.getLeft()||0,t=e+i.getActualWidth(),s=this.viewportLeft-200,r=this.viewportRight+200,o=e<s&&t<s,n=e>r&&t>r;return!o&&!n}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(i,e,t,s,r,o){if(!i||er(i))return;let n=!1;if(i.forEach(a=>{if(!a)return;const u=this.getPrimaryColumn(a);if(u){if(t){if(e.indexOf(u)>=0)return;e.push(u)}else{if(e.indexOf(u)<0)return;bs(e,u)}s(u),n=!0}}),!n)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o);const l={type:r,columns:e,column:e.length===1?e[0]:null,source:o};this.eventService.dispatchEvent(l)}setRowGroupColumns(i,e){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(i,this.rowGroupColumns,y.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),e)}setRowGroupActive(i,e,t){i!==e.isRowGroupActive()&&(e.setRowGroupActive(i,t),i&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([e],!1,t),!i&&!this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([e],!0,t))}addRowGroupColumns(i,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(i,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),y.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}removeRowGroupColumns(i,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(i,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),y.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}addPivotColumns(i,e){this.updatePrimaryColumnList(i,this.pivotColumns,!0,t=>t.setPivotActive(!0,e),y.EVENT_COLUMN_PIVOT_CHANGED,e)}setPivotColumns(i,e){this.setPrimaryColumnList(i,this.pivotColumns,y.EVENT_COLUMN_PIVOT_CHANGED,!0,(t,s)=>{s.setPivotActive(t,e)},e)}removePivotColumns(i,e){this.updatePrimaryColumnList(i,this.pivotColumns,!1,t=>t.setPivotActive(!1,e),y.EVENT_COLUMN_PIVOT_CHANGED,e)}setPrimaryColumnList(i,e,t,s,r,o){if(!this.gridColumns)return;const n=new Map;e.forEach((l,a)=>n.set(l,a)),e.length=0,H(i)&&i.forEach(l=>{const a=this.getPrimaryColumn(l);a&&e.push(a)}),e.forEach((l,a)=>{const u=n.get(l);if(u===void 0){n.set(l,0);return}s&&u!==a||n.delete(l)}),(this.primaryColumns||[]).forEach(l=>{const a=e.indexOf(l)>=0;r(a,l)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o),this.dispatchColumnChangedEvent(t,[...n.keys()],o)}setValueColumns(i,e){this.setPrimaryColumnList(i,this.valueColumns,y.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),e)}setValueActive(i,e,t){if(i!==e.isValueActive()&&(e.setValueActive(i,t),i&&!e.getAggFunc())){const s=this.aggFuncService.getDefaultAggFunc(e);e.setAggFunc(s)}}addValueColumns(i,e){this.updatePrimaryColumnList(i,this.valueColumns,!0,this.setValueActive.bind(this,!0),y.EVENT_COLUMN_VALUE_CHANGED,e)}removeValueColumns(i,e){this.updatePrimaryColumnList(i,this.valueColumns,!1,this.setValueActive.bind(this,!1),y.EVENT_COLUMN_VALUE_CHANGED,e)}normaliseColumnWidth(i,e){const t=i.getMinWidth();H(t)&&e<t&&(e=t);const s=i.getMaxWidth();return H(s)&&i.isGreaterThanMax(e)&&(e=s),e}getPrimaryOrGridColumn(i){return this.getPrimaryColumn(i)||this.getGridColumn(i)}setColumnWidths(i,e,t,s){const r=[];i.forEach(o=>{const n=this.getPrimaryOrGridColumn(o.key);if(!n)return;if(r.push({width:o.newWidth,ratios:[1],columns:[n]}),this.gridOptionsService.get("colResizeDefault")==="shift"&&(e=!e),e){const a=this.getDisplayedColAfter(n);if(!a)return;const u=n.getActualWidth()-o.newWidth,d=a.getActualWidth()+u;r.push({width:d,ratios:[1],columns:[a]})}}),r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:t,source:s})}checkMinAndMaxWidthsForSet(i){const{columns:e,width:t}=i;let s=0,r=0,o=!0;e.forEach(a=>{const u=a.getMinWidth();s+=u||0;const d=a.getMaxWidth();H(d)&&d>0?r+=d:o=!1});const n=t>=s,l=!o||t<=r;return n&&l}resizeColumnSets(i){const{resizeSets:e,finished:t,source:s}=i;if(!(!e||e.every(d=>this.checkMinAndMaxWidthsForSet(d)))){if(t){const d=e&&e.length>0?e[0].columns:null;this.dispatchColumnResizedEvent(d,t,s)}return}const o=[],n=[];e.forEach(d=>{const{width:c,columns:h,ratios:p}=d,m={},S={};h.forEach(v=>n.push(v));let E=!0,C=0;for(;E;){if(C++,C>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}E=!1;const v=[];let R=0,b=c;h.forEach((F,O)=>{if(S[F.getId()])b-=m[F.getId()];else{v.push(F);const G=p[O];R+=G}});const A=1/R;v.forEach((F,O)=>{const L=O===v.length-1;let G;L?G=b:(G=Math.round(p[O]*c*A),b-=G);const k=F.getMinWidth(),se=F.getMaxWidth();H(k)&&G<k?(G=k,S[F.getId()]=!0,E=!0):H(se)&&se>0&&G>se&&(G=se,S[F.getId()]=!0,E=!0),m[F.getId()]=G})}h.forEach(v=>{const R=m[v.getId()];v.getActualWidth()!==R&&(v.setActualWidth(R,s),o.push(v))})});const l=o.length>0;let a=[];l&&(a=this.refreshFlexedColumns({resizingCols:n,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());const u=n.concat(a);(l||t)&&this.dispatchColumnResizedEvent(u,t,s,a)}setColumnAggFunc(i,e,t){if(!i)return;const s=this.getPrimaryColumn(i);s&&(s.setAggFunc(e),this.dispatchColumnChangedEvent(y.EVENT_COLUMN_VALUE_CHANGED,[s],t))}moveRowGroupColumn(i,e,t){if(this.isRowGroupEmpty())return;const s=this.rowGroupColumns[i],r=this.rowGroupColumns.slice(i,e);this.rowGroupColumns.splice(i,1),this.rowGroupColumns.splice(e,0,s);const o={type:y.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:r,column:r.length===1?r[0]:null,source:t};this.eventService.dispatchEvent(o)}moveColumns(i,e,t,s=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),e>this.gridColumns.length-i.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+e),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}const r=this.getGridColumns(i);this.doesMovePassRules(r,e)&&(zR(this.gridColumns,r,e),this.updateDisplayedColumns(t),this.dispatchColumnMovedEvent({movedColumns:r,source:t,toIndex:e,finished:s}),this.columnAnimationService.finish())}doesMovePassRules(i,e){const t=this.getProposedColumnOrder(i,e);return this.doesOrderPassRules(t)}doesOrderPassRules(i){return!(!this.doesMovePassMarryChildren(i)||!this.doesMovePassLockedPositions(i))}getProposedColumnOrder(i,e){const t=this.gridColumns.slice();return zR(t,i,e),t}sortColumnsLikeGridColumns(i){!i||i.length<=1||i.filter(t=>this.gridColumns.indexOf(t)<0).length>0||i.sort((t,s)=>{const r=this.gridColumns.indexOf(t),o=this.gridColumns.indexOf(s);return r-o})}doesMovePassLockedPositions(i){let e=0,t=!0;const s=r=>r?r===!0||r==="left"?0:2:1;return i.forEach(r=>{const o=s(r.getColDef().lockPosition);o<e&&(t=!1),e=o}),t}doesMovePassMarryChildren(i){let e=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,t=>{if(!(t instanceof Jt))return;const s=t,r=s.getColGroupDef();if(!(r&&r.marryChildren))return;const n=[];s.getLeafColumns().forEach(c=>{const h=i.indexOf(c);n.push(h)});const l=Math.max.apply(Math,n),a=Math.min.apply(Math,n),u=l-a,d=s.getLeafColumns().length-1;u>d&&(e=!1)}),e}moveColumnByIndex(i,e,t){if(!this.gridColumns)return;const s=this.gridColumns[i];this.moveColumns([s],e,t)}getColumnDefs(){if(!this.primaryColumns)return;const i=this.primaryColumns.slice();return this.gridColsArePrimary?i.sort((e,t)=>this.gridColumns.indexOf(e)-this.gridColumns.indexOf(t)):this.lastPrimaryOrder&&i.sort((e,t)=>this.lastPrimaryOrder.indexOf(e)-this.lastPrimaryOrder.indexOf(t)),this.columnDefFactory.buildColumnDefs(i,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(i){switch(i){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const i=this.getWidthOfColsInList(this.displayedColumnsCenter),e=this.getWidthOfColsInList(this.displayedColumnsLeft),t=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==i,this.bodyWidth!==i||this.leftWidth!==e||this.rightWidth!==t){this.bodyWidth=i,this.leftWidth=e,this.rightWidth=t;const r={type:y.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(r);const o={type:y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(o)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getDisplayedColumns(i){switch(i){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var i;return(i=this.gridColumns)!=null?i:[]}isEmpty(){return er(this.gridColumns)}isRowGroupEmpty(){return er(this.rowGroupColumns)}setColumnsVisible(i,e=!1,t){this.applyColumnState({state:i.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!e}))},t)}setColumnsPinned(i,e,t){if(!this.gridColumns)return;if(this.gridOptionsService.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;e===!0||e==="left"?s="left":e==="right"?s="right":s=null,this.actionOnGridColumns(i,r=>r.getPinned()!==s?(r.setPinned(s),!0):!1,t,()=>({type:y.EVENT_COLUMN_PINNED,pinned:s,column:null,columns:null,source:t})),this.columnAnimationService.finish()}actionOnGridColumns(i,e,t,s){if(er(i))return;const r=[];if(i.forEach(o=>{if(!o)return;const n=this.getGridColumn(o);if(!n)return;e(n)!==!1&&r.push(n)}),!!r.length&&(this.updateDisplayedColumns(t),H(s)&&s)){const o=s();o.columns=r,o.column=r.length===1?r[0]:null,this.eventService.dispatchEvent(o)}}getDisplayedColBefore(i){const e=this.getAllDisplayedColumns(),t=e.indexOf(i);return t>0?e[t-1]:null}getDisplayedColAfter(i){const e=this.getAllDisplayedColumns(),t=e.indexOf(i);return t<e.length-1?e[t+1]:null}getDisplayedGroupAfter(i){return this.getDisplayedGroupAtDirection(i,"After")}getDisplayedGroupBefore(i){return this.getDisplayedGroupAtDirection(i,"Before")}getDisplayedGroupAtDirection(i,e){const t=i.getProvidedColumnGroup().getLevel()+i.getPaddingLevel(),s=i.getDisplayedLeafColumns(),r=e==="After"?Ze(s):s[0],o=`getDisplayedCol${e}`;for(;;){const n=this[o](r);if(!n)return null;const l=this.getColumnGroupAtLevel(n,t);if(l!==i)return l}}getColumnGroupAtLevel(i,e){let t=i.getParent(),s,r;for(;s=t.getProvidedColumnGroup().getLevel(),r=t.getPaddingLevel(),!(s+r<=e);)t=t.getParent();return t}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(i){const e=i.isRowGroupActive()?this.rowGroupColumns.indexOf(i):null,t=i.isPivotActive()?this.pivotColumns.indexOf(i):null,s=i.isValueActive()?i.getAggFunc():null,r=i.getSort()!=null?i.getSort():null,o=i.getSortIndex()!=null?i.getSortIndex():null,n=i.getFlex()!=null&&i.getFlex()>0?i.getFlex():null;return{colId:i.getColId(),width:i.getActualWidth(),hide:!i.isVisible(),pinned:i.getPinned(),sort:r,sortIndex:o,aggFunc:s,rowGroup:i.isRowGroupActive(),rowGroupIndex:e,pivot:i.isPivotActive(),pivotIndex:t,flex:n}}getColumnState(){if(Ee(this.primaryColumns)||!this.isAlive())return[];const e=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(e),e}orderColumnStateList(i){const e=tl(this.gridColumns.map((t,s)=>[t.getColId(),s]));i.sort((t,s)=>{const r=e.has(t.colId)?e.get(t.colId):-1,o=e.has(s.colId)?e.get(s.colId):-1;return r-o})}resetColumnState(i){if(er(this.primaryColumns))return;const e=this.getColumnsFromTree(this.primaryColumnTree),t=[];let s=1e3,r=1e3,o=[];this.groupAutoColumns&&(o=o.concat(this.groupAutoColumns)),e&&(o=o.concat(e)),o.forEach(n=>{const l=this.getColumnStateFromColDef(n);Ee(l.rowGroupIndex)&&l.rowGroup&&(l.rowGroupIndex=s++),Ee(l.pivotIndex)&&l.pivot&&(l.pivotIndex=r++),t.push(l)}),this.applyColumnState({state:t,applyOrder:!0},i)}getColumnStateFromColDef(i){const e=(m,S)=>m??S??null,t=i.getColDef(),s=e(t.sort,t.initialSort),r=e(t.sortIndex,t.initialSortIndex),o=e(t.hide,t.initialHide),n=e(t.pinned,t.initialPinned),l=e(t.width,t.initialWidth),a=e(t.flex,t.initialFlex);let u=e(t.rowGroupIndex,t.initialRowGroupIndex),d=e(t.rowGroup,t.initialRowGroup);u==null&&(d==null||d==!1)&&(u=null,d=null);let c=e(t.pivotIndex,t.initialPivotIndex),h=e(t.pivot,t.initialPivot);c==null&&(h==null||h==!1)&&(c=null,h=null);const p=e(t.aggFunc,t.initialAggFunc);return{colId:i.getColId(),sort:s,sortIndex:r,hide:o,pinned:n,width:l,flex:a,rowGroup:d,rowGroupIndex:u,pivot:h,pivotIndex:c,aggFunc:p}}applyColumnState(i,e){if(er(this.primaryColumns))return!1;if(i&&i.state&&!i.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const t=(o,n,l)=>{const a=this.compareColumnStatesAndDispatchEvents(e);this.autoGroupsNeedBuilding=!0;const u=n.slice(),d={},c={},h=[],p=[];let m=0;const S=this.rowGroupColumns.slice(),E=this.pivotColumns.slice();o.forEach(b=>{const A=b.colId||"";if(A.startsWith(dg)){h.push(b),p.push(b);return}const O=l(A);O?(this.syncColumnWithStateItem(O,b,i.defaultState,d,c,!1,e),bs(u,O)):(p.push(b),m+=1)});const C=b=>this.syncColumnWithStateItem(b,null,i.defaultState,d,c,!1,e);u.forEach(C);const v=(b,A,F,O)=>{const L=b[F.getId()],G=b[O.getId()],k=L!=null,se=G!=null;if(k&&se)return L-G;if(k)return-1;if(se)return 1;const j=A.indexOf(F),Z=A.indexOf(O),ce=j>=0,Oe=Z>=0;return ce&&Oe?j-Z:ce?-1:1};this.rowGroupColumns.sort(v.bind(this,d,S)),this.pivotColumns.sort(v.bind(this,c,E)),this.updateGridColumns();const R=this.groupAutoColumns?this.groupAutoColumns.slice():[];return h.forEach(b=>{const A=this.getAutoColumn(b.colId);bs(R,A),this.syncColumnWithStateItem(A,b,i.defaultState,null,null,!0,e)}),R.forEach(C),this.applyOrderAfterApplyState(i),this.updateDisplayedColumns(e),this.dispatchEverythingChanged(e),a(),{unmatchedAndAutoStates:p,unmatchedCount:m}};this.columnAnimationService.start();let{unmatchedAndAutoStates:s,unmatchedCount:r}=t(i.state||[],this.primaryColumns||[],o=>this.getPrimaryColumn(o));return(s.length>0||H(i.defaultState))&&(r=t(s,this.secondaryColumns||[],o=>this.getSecondaryColumn(o)).unmatchedCount),this.columnAnimationService.finish(),r===0}applyOrderAfterApplyState(i){if(!i.applyOrder||!i.state)return;let e=[];const t={};i.state.forEach(r=>{if(!r.colId||t[r.colId])return;const o=this.gridColumnsMap[r.colId];o&&(e.push(o),t[r.colId]=!0)});let s=0;if(this.gridColumns.forEach(r=>{const o=r.getColId();if(t[o]!=null)return;o.startsWith(dg)?ag(e,r,s++):e.push(r)}),e=this.placeLockedColumns(e),!this.doesMovePassMarryChildren(e)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=e}compareColumnStatesAndDispatchEvents(i){const e={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},t=this.getColumnState(),s={};return t.forEach(r=>{s[r.colId]=r}),()=>{const r=this.getPrimaryAndSecondaryAndAutoColumns(),o=(S,E,C,v)=>{const R=E.map(v),b=C.map(v);if(Vo(R,b))return;const F=new Set(E);C.forEach(G=>{F.delete(G)||F.add(G)});const O=[...F],L={type:S,columns:O,column:O.length===1?O[0]:null,source:i};this.eventService.dispatchEvent(L)},n=S=>{const E=[];return r.forEach(C=>{const v=s[C.getColId()];v&&S(v,C)&&E.push(C)}),E},l=S=>S.getColId();o(y.EVENT_COLUMN_ROW_GROUP_CHANGED,e.rowGroupColumns,this.rowGroupColumns,l),o(y.EVENT_COLUMN_PIVOT_CHANGED,e.pivotColumns,this.pivotColumns,l);const u=n((S,E)=>{const C=S.aggFunc!=null,v=C!=E.isValueActive(),R=C&&S.aggFunc!=E.getAggFunc();return v||R});u.length>0&&this.dispatchColumnChangedEvent(y.EVENT_COLUMN_VALUE_CHANGED,u,i);const d=(S,E)=>S.width!=E.getActualWidth();this.dispatchColumnResizedEvent(n(d),!0,i);const c=(S,E)=>S.pinned!=E.getPinned();this.dispatchColumnPinnedEvent(n(c),i);const h=(S,E)=>S.hide==E.isVisible();this.dispatchColumnVisibleEvent(n(h),i);const m=n((S,E)=>S.sort!=E.getSort()||S.sortIndex!=E.getSortIndex());m.length>0&&this.sortController.dispatchSortChangedEvents(i,m),this.normaliseColumnMovedEventForColumnState(t,i)}}getCommonValue(i,e){if(!i||i.length==0)return;const t=e(i[0]);for(let s=1;s<i.length;s++)if(t!==e(i[s]))return;return t}normaliseColumnMovedEventForColumnState(i,e){const t=this.getColumnState(),s={};t.forEach(a=>s[a.colId]=a);const r={};i.forEach(a=>{s[a.colId]&&(r[a.colId]=!0)});const o=i.filter(a=>r[a.colId]),n=t.filter(a=>r[a.colId]),l=[];n.forEach((a,u)=>{const d=o&&o[u];if(d&&d.colId!==a.colId){const c=this.getGridColumn(d.colId);c&&l.push(c)}}),l.length&&this.dispatchColumnMovedEvent({movedColumns:l,source:e,finished:!0})}syncColumnWithStateItem(i,e,t,s,r,o,n){if(!i)return;const l=(R,b)=>{const A={value1:void 0,value2:void 0};let F=!1;return e&&(e[R]!==void 0&&(A.value1=e[R],F=!0),H(b)&&e[b]!==void 0&&(A.value2=e[b],F=!0)),!F&&t&&(t[R]!==void 0&&(A.value1=t[R]),H(b)&&t[b]!==void 0&&(A.value2=t[b])),A},a=l("hide").value1;a!==void 0&&i.setVisible(!a,n);const u=l("pinned").value1;u!==void 0&&i.setPinned(u);const d=this.columnUtils.calculateColMinWidth(i.getColDef()),c=l("flex").value1;if(c!==void 0&&i.setFlex(c),c==null){const R=l("width").value1;R!=null&&d!=null&&R>=d&&i.setActualWidth(R,n)}const h=l("sort").value1;h!==void 0&&(h==="desc"||h==="asc"?i.setSort(h,n):i.setSort(void 0,n));const p=l("sortIndex").value1;if(p!==void 0&&i.setSortIndex(p),o||!i.isPrimary())return;const m=l("aggFunc").value1;m!==void 0&&(typeof m=="string"?(i.setAggFunc(m),i.isValueActive()||(i.setValueActive(!0,n),this.valueColumns.push(i))):(H(m)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),i.isValueActive()&&(i.setValueActive(!1,n),bs(this.valueColumns,i))));const{value1:S,value2:E}=l("rowGroup","rowGroupIndex");(S!==void 0||E!==void 0)&&(typeof E=="number"||S?(i.isRowGroupActive()||(i.setRowGroupActive(!0,n),this.rowGroupColumns.push(i)),s&&typeof E=="number"&&(s[i.getId()]=E)):i.isRowGroupActive()&&(i.setRowGroupActive(!1,n),bs(this.rowGroupColumns,i)));const{value1:C,value2:v}=l("pivot","pivotIndex");(C!==void 0||v!==void 0)&&(typeof v=="number"||C?(i.isPivotActive()||(i.setPivotActive(!0,n),this.pivotColumns.push(i)),r&&typeof v=="number"&&(r[i.getId()]=v)):i.isPivotActive()&&(i.setPivotActive(!1,n),bs(this.pivotColumns,i)))}getGridColumns(i){return this.getColumns(i,this.getGridColumn.bind(this))}getColumns(i,e){const t=[];return i&&i.forEach(s=>{const r=e(s);r&&t.push(r)}),t}getColumnWithValidation(i){if(i==null)return null;const e=this.getGridColumn(i);return e||console.warn("AG Grid: could not find column "+i),e}getPrimaryColumn(i){return this.primaryColumns?this.getColumn(i,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(i){return this.getColumn(i,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(i){return this.gridColumnsMap[i]}getSecondaryColumn(i){return this.secondaryColumns?this.getColumn(i,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(i,e,t){if(!i||!t)return null;if(typeof i=="string"&&t[i])return t[i];for(let s=0;s<e.length;s++)if(this.columnsMatch(e[s],i))return e[s];return this.getAutoColumn(i)}getSourceColumnsForGroupColumn(i){const e=i.getColDef().showRowGroup;if(!e)return null;if(e===!0)return this.rowGroupColumns.slice(0);const t=this.getPrimaryColumn(e);return t?[t]:null}getAutoColumn(i){return!this.groupAutoColumns||!H(this.groupAutoColumns)||Ee(this.groupAutoColumns)?null:this.groupAutoColumns.find(e=>this.columnsMatch(e,i))||null}columnsMatch(i,e){const t=i===e,s=i.getColDef()===e,r=i.getColId()==e;return t||s||r}getDisplayNameForColumn(i,e,t=!1){if(!i)return null;const s=this.getHeaderName(i.getColDef(),i,null,null,e);return t?this.wrapHeaderNameWithAggFunc(i,s):s}getDisplayNameForProvidedColumnGroup(i,e,t){const s=e?e.getColGroupDef():null;return s?this.getHeaderName(s,null,i,e,t):null}getDisplayNameForColumnGroup(i,e){return this.getDisplayNameForProvidedColumnGroup(i,i.getProvidedColumnGroup(),e)}getHeaderName(i,e,t,s,r){const o=i.headerValueGetter;if(o){const n=this.gridOptionsService.addGridCommonParams({colDef:i,column:e,columnGroup:t,providedColumnGroup:s,location:r});return typeof o=="function"?o(n):typeof o=="string"?this.expressionService.evaluate(o,n):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(i.headerName!=null)return i.headerName;if(i.field)return N0(i.field)}return""}wrapHeaderNameWithAggFunc(i,e){if(this.gridOptionsService.get("suppressAggFuncInHeader"))return e;const t=i.getColDef().pivotValueColumn,s=H(t);let r=null,o;if(s){const n=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,l=i.getColDef().pivotTotalColumnIds!==void 0;if(n&&!l)return e;r=t?t.getAggFunc():null,o=!0}else{const n=i.isValueActive(),l=this.pivotMode||!this.isRowGroupEmpty();n&&l?(r=i.getAggFunc(),o=!0):o=!1}if(o){const n=typeof r=="string"?r:"func";return`${this.localeService.getLocaleTextFunc()(n,n)}(${e})`}return e}getColumnGroup(i,e){if(!i)return null;if(i instanceof Si)return i;const t=this.getAllDisplayedTrees(),s=typeof e=="number";let r=null;return this.columnUtils.depthFirstAllColumnTreeSearch(t,o=>{if(o instanceof Si){const n=o;let l;s?l=i===n.getGroupId()&&e===n.getPartId():l=i===n.getGroupId(),l&&(r=n)}}),r}isReady(){return this.ready}extractValueColumns(i,e){this.valueColumns=this.extractColumns(e,this.valueColumns,(t,s)=>t.setValueActive(s,i),()=>{},()=>{},t=>{const s=t.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},t=>t.initialAggFunc!=null&&t.initialAggFunc!=""),this.valueColumns.forEach(t=>{const s=t.getColDef();s.aggFunc!=null&&s.aggFunc!=""?t.setAggFunc(s.aggFunc):t.getAggFunc()||t.setAggFunc(s.initialAggFunc)})}extractRowGroupColumns(i,e){this.rowGroupColumns=this.extractColumns(e,this.rowGroupColumns,(t,s)=>t.setRowGroupActive(s,i),t=>t.rowGroupIndex,t=>t.initialRowGroupIndex,t=>t.rowGroup,t=>t.initialRowGroup)}extractColumns(i=[],e=[],t,s,r,o,n){const l=[],a=[];(this.primaryColumns||[]).forEach(c=>{const h=i.indexOf(c)<0,p=c.getColDef(),m=cv(o(p)),S=cv(n(p)),E=Tl(s(p)),C=Tl(r(p));let v;m!==void 0?v=m:E!==void 0?E===null?v=!1:v=E>=0:h?S!==void 0?v=S:C!==void 0?v=C!=null&&C>=0:v=!1:v=e.indexOf(c)>=0,v&&((h?E!=null||C!=null:E!=null)?l.push(c):a.push(c))});const u=c=>{const h=s(c.getColDef()),p=r(c.getColDef());return h??p};l.sort((c,h)=>{const p=u(c),m=u(h);return p===m?0:p<m?-1:1});const d=[].concat(l);return e.forEach(c=>{a.indexOf(c)>=0&&d.push(c)}),a.forEach(c=>{d.indexOf(c)<0&&d.push(c)}),e.forEach(c=>{d.indexOf(c)<0&&t(c,!1)}),d.forEach(c=>{e.indexOf(c)<0&&t(c,!0)}),d}extractPivotColumns(i,e){this.pivotColumns=this.extractColumns(e,this.pivotColumns,(t,s)=>t.setPivotActive(s,i),t=>t.pivotIndex,t=>t.initialPivotIndex,t=>t.pivot,t=>t.initialPivot)}resetColumnGroupState(i){if(!this.primaryColumnTree)return;const e=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,t=>{if(t instanceof Jt){const s=t.getColGroupDef(),r={groupId:t.getGroupId(),open:s?s.openByDefault:void 0};e.push(r)}}),this.setColumnGroupState(e,i)}getColumnGroupState(){const i=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,e=>{e instanceof Jt&&i.push({groupId:e.getGroupId(),open:e.isExpanded()})}),i}setColumnGroupState(i,e){if(!this.gridBalancedTree)return;this.columnAnimationService.start();const t=[];if(i.forEach(s=>{const r=s.groupId,o=s.open,n=this.getProvidedColumnGroup(r);n&&n.isExpanded()!==o&&(this.logger.log("columnGroupOpened("+n.getGroupId()+","+o+")"),n.setExpanded(o),t.push(n))}),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e),t.length){const s={type:y.EVENT_COLUMN_GROUP_OPENED,columnGroup:Jt.length===1?t[0]:void 0,columnGroups:t};this.eventService.dispatchEvent(s)}this.columnAnimationService.finish()}setColumnGroupOpened(i,e,t){let s;i instanceof Jt?s=i.getId():s=i||"",this.setColumnGroupState([{groupId:s,open:e}],t)}getProvidedColumnGroup(i){typeof i!="string"&&console.error("AG Grid: group key must be a string");let e=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,t=>{t instanceof Jt&&t.getId()===i&&(e=t)}),e}calculateColumnsForDisplay(){let i;return this.pivotMode&&Ee(this.secondaryColumns)?i=this.gridColumns.filter(e=>{const t=this.groupAutoColumns&&xr(this.groupAutoColumns,e),s=this.valueColumns&&xr(this.valueColumns,e);return t||s}):i=this.gridColumns.filter(e=>this.groupAutoColumns&&xr(this.groupAutoColumns,e)||e.isVisible()),i}checkColSpanActiveInCols(i){let e=!1;return i.forEach(t=>{H(t.getColDef().colSpan)&&(e=!0)}),e}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};const i=e=>{const t=e.getColDef(),s=t.showRowGroup;t&&H(s)&&(this.groupDisplayColumns.push(e),typeof s=="string"?this.groupDisplayColumnsMap[s]=e:s===!0&&this.getRowGroupColumns().forEach(r=>{this.groupDisplayColumnsMap[r.getId()]=e}))};this.gridColumns.forEach(i)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(i){return this.groupDisplayColumnsMap[i]}updateDisplayedColumns(i){const e=this.calculateColumnsForDisplay();this.buildDisplayedTrees(e),this.updateGroupsAndDisplayedColumns(i),this.setFirstRightAndLastLeftPinned(i)}isSecondaryColumnsPresent(){return H(this.secondaryColumns)}setSecondaryColumns(i,e){if(!this.gridColumns)return;const t=i;if(!(!t&&Ee(this.secondaryColumns))){if(t){this.processSecondaryColumnDefinitions(i);const s=this.columnFactory.createColumnTree(i,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,e);this.destroyOldColumns(this.secondaryBalancedTree,s.columnTree),this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(r=>this.secondaryColumnsMap[r.getId()]=r),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(e)}}processSecondaryColumnDefinitions(i){const e=this.gridOptionsService.get("processPivotResultColDef"),t=this.gridOptionsService.get("processPivotResultColGroupDef");if(!e&&!t)return;const s=r=>{r.forEach(o=>{if(H(o.children)){const l=o;t&&t(l),s(l.children)}else e&&e(o)})};i&&s(i)}updateGridColumns(){const i=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){const s=tl(this.groupAutoColumns.map(r=>[r,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(r=>!s.has(r)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(r=>!s.has(r)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let t;if(this.secondaryColumns&&this.secondaryBalancedTree){const s=this.secondaryColumns.some(r=>this.gridColumnsMap[r.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,s&&(t=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,t=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(t),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(s=>this.gridColumnsMap[s.getId()]=s),this.setAutoHeightActive(),!Vo(i,this.gridBalancedTree)){const s={type:y.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(s)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(i=>i.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide")||ve("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(i){if(Ee(i))return;const e=tl(i.map((a,u)=>[a,u]));let t=!0;if(this.gridColumns.forEach(a=>{e.has(a)&&(t=!1)}),t)return;const s=tl(this.gridColumns.map(a=>[a,!0])),r=i.filter(a=>s.has(a)),o=tl(r.map(a=>[a,!0])),n=this.gridColumns.filter(a=>!o.has(a)),l=r.slice();n.forEach(a=>{let u=a.getOriginalParent();if(!u){l.push(a);return}const d=[];for(;!d.length&&u;)u.getLeafColumns().forEach(m=>{const S=l.indexOf(m)>=0,E=d.indexOf(m)<0;S&&E&&d.push(m)}),u=u.getOriginalParent();if(!d.length){l.push(a);return}const c=d.map(p=>l.indexOf(p)),h=Math.max(...c);ag(l,a,h+1)}),this.gridColumns=l}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var i;let e=(i=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)!=null?i:[];this.groupAutoColumns&&(e=e.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")?e:e.filter(t=>t.isVisible()||t.isRowGroupActive())}placeLockedColumns(i){const e=[],t=[],s=[];return i.forEach(r=>{const o=r.getColDef().lockPosition;o==="right"?s.push(r):o==="left"||o===!0?e.push(r):t.push(r)}),[...e,...t,...s]}addAutoGroupToGridColumns(){if(Ee(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const i=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,i),this.groupAutoColsBalancedTree=i,this.gridBalancedTree=i.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(i){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(i),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const e={type:y.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(e)}deriveDisplayedColumns(i){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(i),this.displayedAutoHeightCols=this.displayedColumns.filter(e=>e.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){const i=this.getAllGridColumns(),e=[],t=[],s=[];for(const r of i){const o=r.getPinned();o?o===!0||o==="left"?e.push(r):s.push(r):t.push(r)}this.ariaOrderColumns=e.concat(t).concat(s)}joinDisplayedColumns(){this.gridOptionsService.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(i){this.setLeftValuesOfColumns(i),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(i){if(!this.primaryColumns)return;const e=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),t=this.gridOptionsService.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(s=>{if(t){let r=this.getWidthOfColsInList(s);s.forEach(o=>{r-=o.getActualWidth(),o.setLeft(r,i)})}else{let r=0;s.forEach(o=>{o.setLeft(r,i),r+=o.getActualWidth()})}P0(e,s)}),e.forEach(s=>{s.setLeft(null,i)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(i=>{i.forEach(e=>{e instanceof Si&&e.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(i,e){e.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(i,t=>{t instanceof dt&&e.push(t)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(i,e){let t;switch(i){case"left":t=this.viewportRowLeft[e];break;case"right":t=this.viewportRowRight[e];break;default:t=this.viewportRowCenter[e];break}return Ee(t)&&(t=[]),t}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const i={};this.headerViewportColumns.forEach(t=>i[t.getId()]=!0);const e=(t,s,r)=>{let o=!1;for(let n=0;n<t.length;n++){const l=t[n];let a=!1;if(l instanceof dt)a=i[l.getId()]===!0;else{const d=l.getDisplayedChildren();d&&(a=e(d,s,r+1))}a&&(o=!0,s[r]||(s[r]=[]),s[r].push(l))}return o};e(this.displayedTreeLeft,this.viewportRowLeft,0),e(this.displayedTreeRight,this.viewportRowRight,0),e(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){const i=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const e=this.viewportColumns.map(i).join("#"),t=this.viewportColumnsHash!==e;return t&&(this.viewportColumnsHash=e,this.calculateHeaderRows()),t}refreshFlexedColumns(i={}){var e;const t=i.source?i.source:"flex";if(i.viewportWidth!=null&&(this.flexViewportWidth=i.viewportWidth),!this.flexViewportWidth)return[];let s=-1;if(i.resizingCols){const h=new Set(i.resizingCols);let p=this.displayedColumnsCenter;for(let m=p.length-1;m>=0;m--)if(h.has(p[m])){s=m;break}}let r=0,o=[],n=0,l=0;for(let h=0;h<this.displayedColumnsCenter.length;h++)this.displayedColumnsCenter[h].getFlex()&&h>s?(o.push(this.displayedColumnsCenter[h]),l+=this.displayedColumnsCenter[h].getFlex(),n+=(e=this.displayedColumnsCenter[h].getMinWidth())!=null?e:0):r+=this.displayedColumnsCenter[h].getActualWidth();if(!o.length)return[];let a=[];r+n>this.flexViewportWidth&&(o.forEach(h=>{var p;return h.setActualWidth((p=h.getMinWidth())!=null?p:0,t)}),a=o,o=[]);const u=[];let d;e:for(;;){d=this.flexViewportWidth-r;const h=d/l;for(let p=0;p<o.length;p++){const m=o[p],S=h*m.getFlex();let E=0;const C=m.getMinWidth(),v=m.getMaxWidth();if(H(C)&&S<C?E=C:H(v)&&S>v&&(E=v),E){m.setActualWidth(E,t),Xb(o,m),l-=m.getFlex(),a.push(m),r+=m.getActualWidth();continue e}u[p]=Math.round(S)}break}let c=d;return o.forEach((h,p)=>{h.setActualWidth(Math.min(u[p],c),t),a.push(h),c-=u[p]}),i.skipSetLeft||this.setLeftValues(t),i.updateBodyWidths&&this.updateBodyWidths(),i.fireResizedEvent&&this.dispatchColumnResizedEvent(a,!0,t,o),o}sizeColumnsToFit(i,e="sizeColumnsToFit",t,s){var r,o,n,l,a;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(i,e,t,s));return}const u={};s&&((r=s==null?void 0:s.columnLimits)==null||r.forEach(C=>{var v=C,{key:R}=v,b=YY(v,["key"]);u[typeof R=="string"?R:R.getColId()]=b}));const d=this.getAllDisplayedColumns(),c=i===this.getWidthOfColsInList(d);if(i<=0||!d.length||c)return;const h=[],p=[];d.forEach(C=>{C.getColDef().suppressSizeToFit===!0?p.push(C):h.push(C)});const m=h.slice(0);let S=!1;const E=C=>{bs(h,C),p.push(C)};for(h.forEach(C=>{var v,R;C.resetActualWidth(e);const b=u==null?void 0:u[C.getId()],A=(v=b==null?void 0:b.minWidth)!=null?v:s==null?void 0:s.defaultMinWidth,F=(R=b==null?void 0:b.maxWidth)!=null?R:s==null?void 0:s.defaultMaxWidth,O=C.getActualWidth();typeof A=="number"&&O<A?C.setActualWidth(A,e,!0):typeof F=="number"&&O>F&&C.setActualWidth(F,e,!0)});!S;){S=!0;const C=i-this.getWidthOfColsInList(p);if(C<=0)h.forEach(v=>{var R,b;const A=(b=(R=u==null?void 0:u[v.getId()])==null?void 0:R.minWidth)!=null?b:s==null?void 0:s.defaultMinWidth;if(typeof A=="number"){v.setActualWidth(A,e,!0);return}v.setMinimum(e)});else{const v=C/this.getWidthOfColsInList(h);let R=C;for(let b=h.length-1;b>=0;b--){const A=h[b],F=u==null?void 0:u[A.getId()],O=(o=F==null?void 0:F.minWidth)!=null?o:s==null?void 0:s.defaultMinWidth,L=(n=F==null?void 0:F.maxWidth)!=null?n:s==null?void 0:s.defaultMaxWidth,G=(l=A.getMinWidth())!=null?l:0,k=(a=A.getMaxWidth())!=null?a:Number.MAX_VALUE,se=typeof O=="number"&&O>G?O:A.getMinWidth(),j=typeof L=="number"&&L<k?L:A.getMaxWidth();let Z=Math.round(A.getActualWidth()*v);H(se)&&Z<se?(Z=se,E(A),S=!1):H(j)&&Z>j?(Z=j,E(A),S=!1):b===0&&(Z=R),A.setActualWidth(Z,e,!0),R-=Z}}}m.forEach(C=>{C.fireColumnWidthChangedEvent(e)}),this.setLeftValues(e),this.updateBodyWidths(),!t&&this.dispatchColumnResizedEvent(m,!0,e)}buildDisplayedTrees(i){const e=[],t=[],s=[];i.forEach(o=>{switch(o.getPinned()){case"left":e.push(o);break;case"right":t.push(o);break;default:s.push(o);break}});const r=new aq;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(e,r,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(t,r,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(s,r,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const i=e=>{this.displayedColumnsAndGroupsMap[e.getUniqueId()]=e};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,i),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,i),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,i)}isDisplayed(i){return this.displayedColumnsAndGroupsMap[i.getUniqueId()]===i}updateOpenClosedVisibilityInColumnGroups(){const i=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(i,e=>{e instanceof Si&&e.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const i=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const e=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),t=this.pivotMode?this.gridOptionsService.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gridOptionsService.get("treeData"))&&!t&&!e){const o=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(o,this.groupAutoColumns)||i)return this.groupAutoColumns=o,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gridOptionsService.get("groupDisplayType")==="custom"?!0:this.gridOptionsService.get("treeDataDisplayType")==="custom"}autoColsEqual(i,e){return Vo(i,e,(t,s)=>t.getColId()===s.getColId())}getWidthOfColsInList(i){return i.reduce((e,t)=>e+t.getActualWidth(),0)}getFirstDisplayedColumn(){const i=this.gridOptionsService.get("enableRtl"),e=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];i&&e.reverse();for(let t=0;t<e.length;t++){const s=this[e[t]]();if(s.length)return i?Ze(s):s[0]}return null}setColumnHeaderHeight(i,e){if(i.setAutoHeaderHeight(e)){const s={type:y.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:i,columns:[i],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(s)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const i=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),e=this.getAllDisplayedColumns().filter(t=>t.isAutoHeaderHeight()).map(t=>t.getAutoHeaderHeight()||0);return Math.max(i,...e)}getHeaderHeight(){var i;return(i=this.gridOptionsService.get("headerHeight"))!=null?i:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var i;return(i=this.gridOptionsService.get("floatingFiltersHeight"))!=null?i:this.getHeaderHeight()}getGroupHeaderHeight(){var i;return(i=this.gridOptionsService.get("groupHeaderHeight"))!=null?i:this.getHeaderHeight()}getPivotHeaderHeight(){var i;return(i=this.gridOptionsService.get("pivotHeaderHeight"))!=null?i:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var i;return(i=this.gridOptionsService.get("pivotGroupHeaderHeight"))!=null?i:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(i=>i()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(i,e){const t=i.getUserProvidedColDef();if(!t)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(t,i.getColId());return i.setColDef(s,t,e),!0}isColumnGroupingLocked(i){const e=this.gridOptionsService.get("groupLockGroupColumns");if(!i.isRowGroupActive()||e===0)return!1;if(e===-1)return!0;const t=this.rowGroupColumns.findIndex(s=>s.getColId()===i.getColId());return e>t}generateColumnStateForRowGroupAndPivotIndexes(i,e){let t={};const s=(r,o,n,l,a,u)=>{if(!o.length||!this.primaryColumns)return[];const d=Object.keys(r),c=new Set(d),h=new Set(d),p=new Set(o.map(A=>{const F=A.getColId();return h.delete(F),F}).concat(d)),m=[],S={};let E=0;for(let A=0;A<this.primaryColumns.length;A++){const F=this.primaryColumns[A].getColId();p.has(F)&&(m.push(F),S[F]=E++)}let C=1e3,v=!1,R=0;const b=A=>{const F=S[A];for(let O=R;O<F;O++){const L=m[O];h.has(L)&&(r[L][a]=C++,h.delete(L))}R=F};o.forEach(A=>{const F=A.getColId();if(c.has(F))b(F),r[F][a]=C++;else{const O=A.getColDef();(O[a]===null||O[a]===void 0&&O[u]==null)&&(v||(O[n]||O[n]===void 0&&O[l]?b(F):(h.forEach(k=>{r[k][a]=C+S[k]}),C+=m.length,v=!0)),t[F]||(t[F]={colId:F}),t[F][a]=C++)}})};return s(i,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(e,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(t)}onColumnsReady(){const i=this.gridOptionsService.get("autoSizeStrategy");if(!i)return;const{type:e}=i;setTimeout(()=>{if(e==="fitGridWidth"){const{columnLimits:t,defaultMinWidth:s,defaultMaxWidth:r}=i,o=t==null?void 0:t.map(({colId:n,minWidth:l,maxWidth:a})=>({key:n,minWidth:l,maxWidth:a}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:r,columnLimits:o})}else e==="fitProvidedWidth"&&this.sizeColumnsToFit(i.width,"sizeColumnsToFit")})}onFirstDataRendered(){const i=this.gridOptionsService.get("autoSizeStrategy");if((i==null?void 0:i.type)!=="fitCellContents")return;const{colIds:e,skipHeader:t}=i;setTimeout(()=>{e?this.autoSizeColumns({columns:e,skipHeader:t,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",t)})}};f([D("expressionService")],Ii.prototype,"expressionService",2);f([D("columnFactory")],Ii.prototype,"columnFactory",2);f([D("displayedGroupCreator")],Ii.prototype,"displayedGroupCreator",2);f([D("ctrlsService")],Ii.prototype,"ctrlsService",2);f([D("autoWidthCalculator")],Ii.prototype,"autoWidthCalculator",2);f([D("columnUtils")],Ii.prototype,"columnUtils",2);f([D("columnAnimationService")],Ii.prototype,"columnAnimationService",2);f([D("autoGroupColService")],Ii.prototype,"autoGroupColService",2);f([Qe("aggFuncService")],Ii.prototype,"aggFuncService",2);f([Qe("valueCache")],Ii.prototype,"valueCache",2);f([Qe("animationFrameService")],Ii.prototype,"animationFrameService",2);f([D("sortController")],Ii.prototype,"sortController",2);f([D("columnDefFactory")],Ii.prototype,"columnDefFactory",2);f([K],Ii.prototype,"init",1);f([Ur],Ii.prototype,"destroyColumns",1);f([oo(0,no("loggerFactory"))],Ii.prototype,"setBeans",1);Ii=f([ie("columnModel")],Ii);function Dd(i){return i==="gridOptionsUpdated"?"gridOptionsChanged":i}var eL=class extends U{calculateColMinWidth(i){return i.minWidth!=null?i.minWidth:this.environment.getMinColWidth()}calculateColMaxWidth(i){return i.maxWidth!=null?i.maxWidth:Number.MAX_SAFE_INTEGER}calculateColInitialWidth(i){const e=this.calculateColMinWidth(i),t=this.calculateColMaxWidth(i);let s;const r=Tl(i.width),o=Tl(i.initialWidth);return r!=null?s=r:o!=null?s=o:s=200,Math.max(Math.min(s,t),e)}getOriginalPathForColumn(i,e){const t=[];let s=!1;const r=(o,n)=>{for(let l=0;l<o.length;l++){if(s)return;const a=o[l];a instanceof Jt?(r(a.getChildren(),n+1),t[n]=a):a===i&&(s=!0)}};return r(e,0),s?t:null}depthFirstOriginalTreeSearch(i,e,t){e&&e.forEach(s=>{s instanceof Jt&&this.depthFirstOriginalTreeSearch(s,s.getChildren(),t),t(s,i)})}depthFirstAllColumnTreeSearch(i,e){i&&i.forEach(t=>{t instanceof Si&&this.depthFirstAllColumnTreeSearch(t.getChildren(),e),e(t)})}depthFirstDisplayedColumnTreeSearch(i,e){i&&i.forEach(t=>{t instanceof Si&&this.depthFirstDisplayedColumnTreeSearch(t.getDisplayedChildren(),e),e(t)})}};eL=f([ie("columnUtils")],eL);var tL=class extends U{createDisplayedGroups(i,e,t,s){const r=this.mapOldGroupsById(s),o=[];let n=i;for(;n.length;){const l=n;n=[];let a=0;const u=d=>{const c=a;a=d;const h=l[c],m=(h instanceof Si?h.getProvidedColumnGroup():h).getOriginalParent();if(m==null){for(let E=c;E<d;E++)o.push(l[E]);return}const S=this.createColumnGroup(m,e,r,t);for(let E=c;E<d;E++)S.addChild(l[E]);n.push(S)};for(let d=1;d<l.length;d++){const c=l[d],p=(c instanceof Si?c.getProvidedColumnGroup():c).getOriginalParent(),m=l[a],E=(m instanceof Si?m.getProvidedColumnGroup():m).getOriginalParent();p!==E&&u(d)}a<l.length&&u(l.length)}return this.setupParentsIntoColumns(o,null),o}createColumnGroup(i,e,t,s){const r=i.getGroupId(),o=e.getInstanceIdForKey(r),n=Si.createUniqueId(r,o);let l=t[n];return l&&l.getProvidedColumnGroup()!==i&&(l=null),H(l)?l.reset():(l=new Si(i,r,o,s),this.context.createBean(l)),l}mapOldGroupsById(i){const e={},t=s=>{s.forEach(r=>{if(r instanceof Si){const o=r;e[r.getUniqueId()]=o,t(o.getChildren())}})};return i&&t(i),e}setupParentsIntoColumns(i,e){i.forEach(t=>{if(t.setParent(e),t instanceof Si){const s=t;this.setupParentsIntoColumns(s.getChildren(),s)}})}};tL=f([ie("displayedGroupCreator")],tL);var fq={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},Ai=class{};Ai.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode"];Ai.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];Ai.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];Ai.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];Ai.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents"];Ai.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];Ai.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems"];Ai.FUNCTION_PROPERTIES=[...Ai.FUNCTIONAL_PROPERTIES,...Ai.CALLBACK_PROPERTIES];Ai.ALL_PROPERTIES=[...Ai.ARRAY_PROPERTIES,...Ai.OBJECT_PROPERTIES,...Ai.STRING_PROPERTIES,...Ai.NUMBER_PROPERTIES,...Ai.FUNCTION_PROPERTIES,...Ai.BOOLEAN_PROPERTIES];var Jo=Ai,ti=class Ym{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(e,t){typeof e!="object"&&(e={});const s=pe({},e);return Ym.getGridOptionKeys().forEach(o=>{const n=t[o];typeof n<"u"&&n!==Ym.VUE_OMITTED_PROPERTY&&(s[o]=n)}),s}static processOnChange(e,t){if(!e)return;const s={};let r=!1;if(Object.keys(e).filter(n=>Ym.ALL_PROPERTIES_AND_CALLBACKS_SET.has(n)).forEach(n=>{s[n]=e[n],r=!0}),!r)return;t.__internalUpdateGridOptions(s);const o={type:y.EVENT_COMPONENT_STATE_CHANGED};tr(s,(n,l)=>{o[n]=l}),t.dispatchEvent(o)}};ti.EVENTS=Gd(y);ti.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";ti.EXCLUDED_INTERNAL_EVENTS=[y.EVENT_SCROLLBAR_WIDTH_CHANGED,y.EVENT_CHECKBOX_CHANGED,y.EVENT_HEIGHT_SCALE_CHANGED,y.EVENT_BODY_HEIGHT_CHANGED,y.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,y.EVENT_SCROLL_VISIBILITY_CHANGED,y.EVENT_COLUMN_HOVER_CHANGED,y.EVENT_FLASH_CELLS,y.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,y.EVENT_DISPLAYED_ROWS_CHANGED,y.EVENT_LEFT_PINNED_WIDTH_CHANGED,y.EVENT_RIGHT_PINNED_WIDTH_CHANGED,y.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,y.EVENT_STORE_UPDATED,y.EVENT_COLUMN_PANEL_ITEM_DRAG_START,y.EVENT_COLUMN_PANEL_ITEM_DRAG_END,y.EVENT_FILL_START,y.EVENT_FILL_END,y.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,y.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,y.EVENT_FULL_WIDTH_ROW_FOCUSED,y.EVENT_HEADER_HEIGHT_CHANGED,y.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,y.EVENT_CELL_FOCUS_CLEARED,y.EVENT_GRID_STYLES_CHANGED,y.EVENT_FILTER_DESTROYED,y.EVENT_ROW_DATA_UPDATE_STARTED,y.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,y.EVENT_DATA_TYPES_INFERRED,y.EVENT_FIELD_VALUE_CHANGED,y.EVENT_FIELD_PICKER_VALUE_SELECTED,y.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,y.EVENT_SUPPRESS_MENU_HIDE_CHANGED,y.EVENT_SUPPRESS_FIELD_DOT_NOTATION,y.EVENT_ROW_COUNT_READY,y.EVENT_SIDE_BAR_UPDATED];ti.PUBLIC_EVENTS=ti.EVENTS.filter(i=>!xr(ti.EXCLUDED_INTERNAL_EVENTS,i));ti.EVENT_CALLBACKS=ti.EVENTS.map(i=>ti.getCallbackForEvent(i));ti.STRING_PROPERTIES=Jo.STRING_PROPERTIES;ti.OBJECT_PROPERTIES=Jo.OBJECT_PROPERTIES;ti.ARRAY_PROPERTIES=Jo.ARRAY_PROPERTIES;ti.NUMBER_PROPERTIES=Jo.NUMBER_PROPERTIES;ti.BOOLEAN_PROPERTIES=Jo.BOOLEAN_PROPERTIES;ti.FUNCTION_PROPERTIES=Jo.FUNCTION_PROPERTIES;ti.ALL_PROPERTIES=Jo.ALL_PROPERTIES;ti.ALL_PROPERTIES_AND_CALLBACKS=[...ti.ALL_PROPERTIES,...ti.EVENT_CALLBACKS];ti.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(ti.ALL_PROPERTIES_AND_CALLBACKS);var V0=ti,iL=class extends U{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(i){i&&i.forEach(e=>this.addComponent(e))}addComponent(i){const t=i.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[t]=i.componentClass}getComponentClass(i){return this.componentsMappedByName[i]}};iL=f([ie("agStackComponentsRegistry")],iL);var H0={};xi(H0,{getAriaCheckboxStateName:()=>jS,getAriaLabel:()=>z0,getAriaLevel:()=>mq,getAriaPosInSet:()=>U0,getAriaSortState:()=>W0,removeAriaExpanded:()=>Y0,removeAriaSort:()=>ek,setAriaActiveDescendant:()=>iP,setAriaAtomic:()=>$0,setAriaChecked:()=>vq,setAriaColCount:()=>X0,setAriaColIndex:()=>rP,setAriaColSpan:()=>J0,setAriaControls:()=>oP,setAriaDescribedBy:()=>Cq,setAriaDisabled:()=>tP,setAriaExpanded:()=>Rn,setAriaHidden:()=>Cf,setAriaLabel:()=>So,setAriaLabelledBy:()=>Cv,setAriaLevel:()=>j0,setAriaLive:()=>eP,setAriaMultiSelectable:()=>q0,setAriaPosInSet:()=>KS,setAriaRelevant:()=>K0,setAriaRole:()=>Wt,setAriaRowCount:()=>Q0,setAriaRowIndex:()=>sP,setAriaSelected:()=>Pc,setAriaSetSize:()=>$S,setAriaSort:()=>Z0});function zr(i,e,t){t==null||typeof t=="string"&&t==""?Zb(i,e):$r(i,e,t)}function $r(i,e,t){i.setAttribute(B0(e),t.toString())}function Zb(i,e){i.removeAttribute(B0(e))}function B0(i){return`aria-${i}`}function Wt(i,e){e?i.setAttribute("role",e):i.removeAttribute("role")}function W0(i){let e;return i==="asc"?e="ascending":i==="desc"?e="descending":i==="mixed"?e="other":e="none",e}function mq(i){return parseInt(i.getAttribute("aria-level"),10)}function U0(i){return parseInt(i.getAttribute("aria-posinset"),10)}function z0(i){return i.getAttribute("aria-label")}function So(i,e){zr(i,"label",e)}function Cv(i,e){zr(i,"labelledby",e)}function Cq(i,e){zr(i,"describedby",e)}function eP(i,e){zr(i,"live",e)}function $0(i,e){zr(i,"atomic",e)}function K0(i,e){zr(i,"relevant",e)}function j0(i,e){zr(i,"level",e)}function tP(i,e){zr(i,"disabled",e)}function Cf(i,e){zr(i,"hidden",e)}function iP(i,e){zr(i,"activedescendant",e)}function Rn(i,e){$r(i,"expanded",e)}function Y0(i){Zb(i,"expanded")}function $S(i,e){$r(i,"setsize",e)}function KS(i,e){$r(i,"posinset",e)}function q0(i,e){$r(i,"multiselectable",e)}function Q0(i,e){$r(i,"rowcount",e)}function sP(i,e){$r(i,"rowindex",e)}function X0(i,e){$r(i,"colcount",e)}function rP(i,e){$r(i,"colindex",e)}function J0(i,e){$r(i,"colspan",e)}function Z0(i,e){$r(i,"sort",e)}function ek(i){Zb(i,"sort")}function Pc(i,e){zr(i,"selected",e)}function vq(i,e){$r(i,"checked",e===void 0?"mixed":e)}function oP(i,e){zr(i,"controls",e.id),Cv(e,i.id)}function jS(i,e){return e===void 0?i("ariaIndeterminate","indeterminate"):e===!0?i("ariaChecked","checked"):i("ariaUnchecked","unchecked")}var tk={};xi(tk,{browserSupportsPreventScroll:()=>uP,getBodyHeight:()=>rk,getBodyWidth:()=>sk,getMaxDivHeight:()=>ik,getSafariVersion:()=>nP,getScrollbarWidth:()=>ok,getTabIndex:()=>vv,isBrowserChrome:()=>YS,isBrowserFirefox:()=>lP,isBrowserSafari:()=>Tn,isIOSUserAgent:()=>_n,isInvisibleScrollbar:()=>dP,isMacOsUserAgent:()=>aP});var Oy,hm,Ly,Iy,My,xy,KR,jR;function Tn(){return Oy===void 0&&(Oy=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Oy}function nP(){if(hm===void 0)if(Tn()){const i=navigator.userAgent.match(/version\/(\d+)/i);i&&(hm=i[1]!=null?parseFloat(i[1]):0)}else hm=0;return hm}function YS(){if(Ly===void 0){const i=window;Ly=!!i.chrome&&(!!i.chrome.webstore||!!i.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Ly}function lP(){return Iy===void 0&&(Iy=/(firefox)/i.test(navigator.userAgent)),Iy}function aP(){return My===void 0&&(My=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),My}function _n(){return xy===void 0&&(xy=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),xy}function uP(){return!Tn()||nP()>=15}function vv(i){if(!i)return null;const e=i.tabIndex,t=i.getAttribute("tabIndex");return e===-1&&(t===null||t===""&&!lP())?null:e.toString()}function ik(){if(!document.body)return-1;let i=1e6;const e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,t=document.createElement("div");for(document.body.appendChild(t);;){const s=i*2;if(t.style.height=s+"px",s>e||t.clientHeight!==s)break;i=s}return document.body.removeChild(t),i}function sk(){var i,e,t;return(t=(i=document.body)==null?void 0:i.clientWidth)!=null?t:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientWidth)||-1}function rk(){var i,e,t;return(t=(i=document.body)==null?void 0:i.clientHeight)!=null?t:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientHeight)||-1}function ok(){return jR==null&&nk(),jR}function nk(){const i=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",i.appendChild(e);let t=e.offsetWidth-e.clientWidth;t===0&&e.clientWidth===0&&(t=null),e.parentNode&&e.parentNode.removeChild(e),t!=null&&(jR=t,KR=t===0)}function dP(){return KR==null&&nk(),KR}var lk={};xi(lk,{dateToFormattedString:()=>Hd,parseDateTimeFromString:()=>or,serialiseDate:()=>Dn});var ak={};xi(ak,{cleanNumber:()=>Sq,createArrayOfNumbers:()=>uk,decToHex:()=>wq,formatNumberCommas:()=>cP,formatNumberTwoDecimalPlacesAndCommas:()=>yq,padStartWidthZeros:()=>Vd,sum:()=>Eq});function Vd(i,e){return i.toString().padStart(e,"0")}function uk(i,e){const t=[];for(let s=i;s<=e;s++)t.push(s);return t}function Sq(i){return typeof i=="string"&&(i=parseInt(i,10)),typeof i=="number"?Math.floor(i):null}function wq(i,e){let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(i&255),i>>>=8;return t}function yq(i,e,t){return typeof i!="number"?"":cP(Math.round(i*100)/100,e,t)}function cP(i,e,t){return typeof i!="number"?"":i.toString().replace(".",t).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function Eq(i){return i==null?null:i.reduce((e,t)=>e+t,0)}function Dn(i,e=!0,t="-"){if(!i)return null;let s=[i.getFullYear(),i.getMonth()+1,i.getDate()].map(r=>Vd(r,2)).join(t);return e&&(s+=" "+[i.getHours(),i.getMinutes(),i.getSeconds()].map(r=>Vd(r,2)).join(":")),s}var _y=i=>{if(i>3&&i<21)return"th";switch(i%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Hd(i,e="YYYY-MM-DD"){const t=Vd(i.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>t.slice(t.length-4,t.length),YY:()=>t.slice(t.length-2,t.length),Y:()=>`${i.getFullYear()}`,MMMM:()=>s[i.getMonth()],MMM:()=>s[i.getMonth()].slice(0,3),MM:()=>Vd(i.getMonth()+1,2),Mo:()=>`${i.getMonth()+1}${_y(i.getMonth()+1)}`,M:()=>`${i.getMonth()+1}`,Do:()=>`${i.getDate()}${_y(i.getDate())}`,DD:()=>Vd(i.getDate(),2),D:()=>`${i.getDate()}`,dddd:()=>r[i.getDay()],ddd:()=>r[i.getDay()].slice(0,3),dd:()=>r[i.getDay()].slice(0,2),do:()=>`${i.getDay()}${_y(i.getDay())}`,d:()=>`${i.getDay()}`},n=new RegExp(Object.keys(o).join("|"),"g");return e.replace(n,l=>l in o?o[l]():l)}function or(i){if(!i)return null;const[e,t]=i.split(" ");if(!e)return null;const s=e.split("-").map(c=>parseInt(c,10));if(s.filter(c=>!isNaN(c)).length!==3)return null;const[r,o,n]=s,l=new Date(r,o-1,n);if(l.getFullYear()!==r||l.getMonth()!==o-1||l.getDate()!==n)return null;if(!t||t==="00:00:00")return l;const[a,u,d]=t.split(":").map(c=>parseInt(c,10));return a>=0&&a<24&&l.setHours(a),u>=0&&u<60&&l.setMinutes(u),d>=0&&d<60&&l.setSeconds(d),l}var dk={};xi(dk,{FOCUSABLE_EXCLUDE:()=>hP,FOCUSABLE_SELECTOR:()=>ck,addOrRemoveAttribute:()=>Ba,addStylesToElement:()=>SP,bindCellRendererToHtmlElement:()=>yP,clearElement:()=>ni,copyNodeList:()=>mk,ensureDomOrder:()=>CP,formatSize:()=>qS,getAbsoluteHeight:()=>gP,getAbsoluteWidth:()=>cg,getElementRectWithOffset:()=>fP,getElementSize:()=>Yl,getInnerHeight:()=>vf,getInnerWidth:()=>Ou,getScrollLeft:()=>pg,insertWithDomOrder:()=>pk,isElementChildOfClass:()=>Va,isFocusableFormField:()=>pP,isHorizontalScrollShowing:()=>gk,isInDOM:()=>mP,isNodeOrElement:()=>Sf,isRtlNegativeScroll:()=>hg,isVerticalScrollShowing:()=>fk,isVisible:()=>hr,iterateNamedNodeMap:()=>Ck,loadTemplate:()=>Is,nodeListForEach:()=>wP,radioCssClass:()=>YR,removeFromParent:()=>lo,setDisabled:()=>Ac,setDisplayed:()=>ze,setDomChildOrder:()=>vP,setElementHeight:()=>Rq,setElementWidth:()=>fg,setFixedHeight:()=>Ha,setFixedWidth:()=>_r,setScrollLeft:()=>gg,setVisible:()=>hk});var pm;function YR(i,e,t){const s=i.parentElement;let r=s&&s.firstChild;for(;r;)e&&r.classList.toggle(e,r===i),t&&r.classList.toggle(t,r!==i),r=r.nextSibling}var ck="[tabindex], input, select, button, textarea, [href]",hP="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function pP(i){const e=Element.prototype.matches||Element.prototype.msMatchesSelector,s=e.call(i,"input, select, button, textarea"),r=e.call(i,hP),o=hr(i);return s&&!r&&o}function ze(i,e,t={}){const{skipAriaHidden:s}=t;i.classList.toggle("ag-hidden",!e),s||Cf(i,!e)}function hk(i,e,t={}){const{skipAriaHidden:s}=t;i.classList.toggle("ag-invisible",!e),s||Cf(i,!e)}function Ac(i,e){const t="disabled",s=e?r=>r.setAttribute(t,""):r=>r.removeAttribute(t);s(i),wP(i.querySelectorAll("input"),r=>s(r))}function Va(i,e,t){let s=0;for(;i;){if(i.classList.contains(e))return!0;if(i=i.parentElement,typeof t=="number"){if(++s>t)break}else if(i===t)break}return!1}function Yl(i){const{height:e,width:t,borderTopWidth:s,borderRightWidth:r,borderBottomWidth:o,borderLeftWidth:n,paddingTop:l,paddingRight:a,paddingBottom:u,paddingLeft:d,marginTop:c,marginRight:h,marginBottom:p,marginLeft:m,boxSizing:S}=window.getComputedStyle(i);return{height:parseFloat(e||"0"),width:parseFloat(t||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(n||"0"),paddingTop:parseFloat(l||"0"),paddingRight:parseFloat(a||"0"),paddingBottom:parseFloat(u||"0"),paddingLeft:parseFloat(d||"0"),marginTop:parseFloat(c||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(m||"0"),boxSizing:S}}function vf(i){const e=Yl(i);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function Ou(i){const e=Yl(i);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function gP(i){const e=Yl(i),t=e.marginBottom+e.marginTop;return Math.ceil(i.offsetHeight+t)}function cg(i){const e=Yl(i),t=e.marginLeft+e.marginRight;return Math.ceil(i.offsetWidth+t)}function fP(i){const e=i.getBoundingClientRect(),{borderTopWidth:t,borderLeftWidth:s,borderRightWidth:r,borderBottomWidth:o}=Yl(i);return{top:e.top+(t||0),left:e.left+(s||0),right:e.right+(r||0),bottom:e.bottom+(o||0)}}function hg(){if(typeof pm=="boolean")return pm;const i=document.createElement("div");return i.style.direction="rtl",i.style.width="1px",i.style.height="1px",i.style.position="fixed",i.style.top="0px",i.style.overflow="hidden",i.dir="rtl",i.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(i),i.scrollLeft=1,pm=Math.floor(i.scrollLeft)===0,document.body.removeChild(i),pm}function pg(i,e){let t=i.scrollLeft;return e&&(t=Math.abs(t),YS()&&!hg()&&(t=i.scrollWidth-i.clientWidth-t)),t}function gg(i,e,t){t&&(hg()?e*=-1:(Tn()||YS())&&(e=i.scrollWidth-i.clientWidth-e)),i.scrollLeft=e}function ni(i){for(;i&&i.firstChild;)i.removeChild(i.firstChild)}function lo(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function mP(i){return!!i.offsetParent}function hr(i){const e=i;return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!mP(i)||window.getComputedStyle(i).visibility!=="visible")}function Is(i){const e=document.createElement("div");return e.innerHTML=(i||"").trim(),e.firstChild}function CP(i,e,t){t&&t.nextSibling===e||(t?t.nextSibling?i.insertBefore(e,t.nextSibling):i.appendChild(e):i.firstChild&&i.firstChild!==e&&i.insertAdjacentElement("afterbegin",e))}function vP(i,e){for(let t=0;t<e.length;t++){const s=e[t],r=i.children[t];r!==s&&i.insertBefore(s,r)}}function pk(i,e,t){t?t.insertAdjacentElement("afterend",e):i.firstChild?i.insertAdjacentElement("afterbegin",e):i.appendChild(e)}function SP(i,e){if(e)for(const[t,s]of Object.entries(e)){if(!t||!t.length||s==null)continue;const r=G0(t),o=s.toString(),n=o.replace(/\s*!important/g,""),l=n.length!=o.length?"important":void 0;i.style.setProperty(r,n,l)}}function gk(i){return i.clientWidth<i.scrollWidth}function fk(i){return i.clientHeight<i.scrollHeight}function fg(i,e){e==="flex"?(i.style.removeProperty("width"),i.style.removeProperty("minWidth"),i.style.removeProperty("maxWidth"),i.style.flex="1 1 auto"):_r(i,e)}function _r(i,e){e=qS(e),i.style.width=e.toString(),i.style.maxWidth=e.toString(),i.style.minWidth=e.toString()}function Rq(i,e){e==="flex"?(i.style.removeProperty("height"),i.style.removeProperty("minHeight"),i.style.removeProperty("maxHeight"),i.style.flex="1 1 auto"):Ha(i,e)}function Ha(i,e){e=qS(e),i.style.height=e.toString(),i.style.maxHeight=e.toString(),i.style.minHeight=e.toString()}function qS(i){return typeof i=="number"?`${i}px`:i}function Sf(i){return i instanceof Node||i instanceof HTMLElement}function mk(i){if(i==null)return[];const e=[];return wP(i,t=>e.push(t)),e}function Ck(i,e){if(i)for(let t=0;t<i.length;t++){const s=i[t];e(s.name,s.value)}}function Ba(i,e,t){t==null?i.removeAttribute(e):i.setAttribute(e,t.toString())}function wP(i,e){if(i!=null)for(let t=0;t<i.length;t++)e(i[t])}function yP(i,e){i.then(t=>{const s=t.getGui();s!=null&&(typeof s=="object"?e.appendChild(s):e.innerHTML=s)})}var vk={};xi(vk,{fuzzyCheckStrings:()=>Sk,fuzzySuggestions:()=>wf});function Sk(i,e,t){const s={},r=i.filter(o=>!e.some(n=>n===o));return r.length>0&&r.forEach(o=>s[o]=wf(o,t).values),s}function wf(i,e,t,s){let r=e.map((l,a)=>({value:l,relevance:Tq(i.toLowerCase(),l.toLocaleLowerCase()),idx:a}));if(r.sort((l,a)=>a.relevance-l.relevance),t&&(r=r.filter(l=>l.relevance!==0)),r.length>0&&s&&s>0){const a=r[0].relevance*s;r=r.filter(u=>a-u.relevance<0)}const o=[],n=[];for(const l of r)o.push(l.value),n.push(l.idx);return{values:o,indices:n}}function Tq(i,e){const t=i.replace(/\s/g,""),s=e.replace(/\s/g,"");let r=0,o=-1;for(let n=0;n<t.length;n++){const l=s.indexOf(t[n],o+1);l!==-1&&(o=l,r+=100-o*100/1e4*100)}return r}var wk={};xi(wk,{createIcon:()=>yr,createIconNoSpan:()=>Nt,iconNameClassMap:()=>yk});var yk={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function yr(i,e,t){const s=Nt(i,e,t);if(s){const{className:o}=s;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return s}const r=document.createElement("span");return r.appendChild(s),r}function Nt(i,e,t,s){let r=null;const o=t&&t.getColDef().icons;if(o&&(r=o[i]),e&&!r){const n=e.get("icons");n&&(r=n[i])}if(r){let n;if(typeof r=="function")n=r();else if(typeof r=="string")n=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof n=="string")return Is(n);if(Sf(n))return n;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{const n=document.createElement("span");let l=yk[i];return l||(s?l=i:(console.warn(`AG Grid: Did not find icon ${i}`),l="")),n.setAttribute("class",`ag-icon ag-icon-${l}`),n.setAttribute("unselectable","on"),Wt(n,"presentation"),n}}var Ek={};xi(Ek,{isDeleteKey:()=>Dk,isEventFromPrintableCharacter:()=>QS,isUserSuppressingHeaderKeyboardEvent:()=>Rk,isUserSuppressingKeyboardEvent:()=>Sv,normaliseQwertyAzerty:()=>Tk});var _=class{};_.BACKSPACE="Backspace";_.TAB="Tab";_.ENTER="Enter";_.ESCAPE="Escape";_.SPACE=" ";_.LEFT="ArrowLeft";_.UP="ArrowUp";_.RIGHT="ArrowRight";_.DOWN="ArrowDown";_.DELETE="Delete";_.F2="F2";_.PAGE_UP="PageUp";_.PAGE_DOWN="PageDown";_.PAGE_HOME="Home";_.PAGE_END="End";_.A="KeyA";_.C="KeyC";_.D="KeyD";_.V="KeyV";_.X="KeyX";_.Y="KeyY";_.Z="KeyZ";var Dq=65,bq=67,Pq=86,Aq=68,Fq=90,Oq=89;function QS(i){return i.altKey||i.ctrlKey||i.metaKey?!1:i.key.length===1}function Sv(i,e,t,s,r){const o=s?s.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const n=i.addGridCommonParams({event:e,editing:r,column:s,node:t,data:t.data,colDef:s.getColDef()});return!!(o&&o(n))}function Rk(i,e,t,s){const r=s.getDefinition(),o=r&&r.suppressHeaderKeyboardEvent;if(!H(o))return!1;const n=i.addGridCommonParams({colDef:r,column:s,headerRowIndex:t,event:e});return!!o(n)}function Tk(i){const{keyCode:e}=i;let t;switch(e){case Dq:t=_.A;break;case bq:t=_.C;break;case Pq:t=_.V;break;case Aq:t=_.D;break;case Fq:t=_.Z;break;case Oq:t=_.Y;break;default:t=i.code}return t}function Dk(i,e=!1){return i===_.DELETE?!0:!e&&i===_.BACKSPACE?aP():!1}var bk={};xi(bk,{areEventsNear:()=>EP});function EP(i,e,t){if(t===0)return!1;const s=Math.abs(i.clientX-e.clientX),r=Math.abs(i.clientY-e.clientY);return Math.max(s,r)<=t}var Pk={};xi(Pk,{sortRowNodesByOrder:()=>Lq});function Lq(i,e){if(!i)return!1;const t=(n,l)=>{const a=e[n.id],u=e[l.id],d=a!==void 0,c=u!==void 0,h=d&&c,p=!d&&!c;return h?a-u:p?n.__objectId-l.__objectId:d?1:-1};let s,r,o=!1;for(let n=0;n<i.length-1;n++)if(s=i[n],r=i[n+1],t(s,r)>0){o=!0;break}return o?(i.sort(t),!0):!1}var Ak={};xi(Ak,{convertToSet:()=>RP});function RP(i){const e=new Set;return i.forEach(t=>e.add(t)),e}var Iq=pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe({},H0),T0),tk),lk),dk),R0),m0),vk),p0),wk),Ek),k0),bk),ak),g0),Pk),Ak),_0),tt=Iq,TP=class{constructor(i=0,e=1){this.nextValue=i,this.step=e}next(){const i=this.nextValue;return this.nextValue+=this.step,i}peek(){return this.nextValue}skip(i){this.nextValue+=i}},Pr=class qm{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(t=>this.onDone(t),t=>this.onReject(t))}static all(e){return new qm(t=>{let s=e.length;const r=new Array(s);e.forEach((o,n)=>{o.then(l=>{r[n]=l,s--,s===0&&t(r)})})})}static resolve(e=null){return new qm(t=>t(e))}then(e){return new qm(t=>{this.status===1?t(e(this.resolution)):this.waiters.push(s=>t(e(s)))})}resolveNow(e,t){return this.status===1?t(this.resolution):e}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach(t=>t(e))}onReject(e){console.warn("TBI")}},Mq=class{constructor(i){this.cssClassStates={},this.getGui=i}addCssClass(i){const e=(i||"").split(" ");if(e.length>1){e.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[i]!==!0&&i.length){const s=this.getGui();s&&s.classList.add(i),this.cssClassStates[i]=!0}}removeCssClass(i){const e=(i||"").split(" ");if(e.length>1){e.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[i]!==!1&&i.length){const s=this.getGui();s&&s.classList.remove(i),this.cssClassStates[i]=!1}}containsCssClass(i){const e=this.getGui();return e?e.classList.contains(i):!1}addOrRemoveCssClass(i,e){if(!i)return;if(i.indexOf(" ")>=0){const s=(i||"").split(" ");if(s.length>1){s.forEach(r=>this.addOrRemoveCssClass(r,e));return}}if(this.cssClassStates[i]!==e&&i.length){const s=this.getGui();s&&s.classList.toggle(i,e),this.cssClassStates[i]=e}}},yf=class ra extends U{constructor(e,t,s,r){super(),this.parentComp=e,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=r,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gridOptionsService.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gridOptionsService.get("tooltipMouseTrack");const e=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){const t=this.gridOptionsService.get(e);return t<0&&ve(`${e} should not be lower than 0`),Math.max(200,t)}getTooltipDelay(e){var t,s;return e==="show"?(t=this.tooltipShowDelayOverride)!=null?t:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(s=this.tooltipHideDelayOverride)!=null?s:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gridOptionsService.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!_n()&&(ra.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;const s=e.relatedTarget,r=this.parentComp.getGui(),o=(t=this.tooltipComp)==null?void 0:t.getGui();this.isInteractingWithTooltip||r.contains(s)||this.interactionEnabled&&(o!=null&&o.contains(s))||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||ra.isLocked)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){const e=new Date().getTime(),t=ra.lastTooltipHideTime;return e-t<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=pe({},this.parentComp.getTooltipParams());if(!H(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),ra.lastTooltipHideTime=new Date().getTime());const t={type:y.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(t),this.state=0}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.getContext().destroyBean(t);return}const r=t.getGui();this.tooltipComp=t,r.classList.contains("ag-tooltip")||r.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&r.classList.add("ag-tooltip-animate"),this.interactionEnabled&&r.classList.add("ag-tooltip-interactive");const o=this.localeService.getLocaleTextFunc(),n=this.popupService.addPopup({eChild:r,ariaLabel:o("ariaLabelTooltip","Tooltip")});n&&(this.tooltipPopupDestroyFunc=n.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,y.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,y.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(r,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(r,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(r,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(r,"focusout",this.onTooltipFocusOut.bind(this))||null));const l={type:y.EVENT_TOOLTIP_SHOW,tooltipGui:r,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(l),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var t;const s=this.parentComp.getGui(),r=(t=this.tooltipComp)==null?void 0:t.getGui(),o=e.relatedTarget;r!=null&&r.contains(o)||(this.isInteractingWithTooltip=!1,s.contains(o)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(At(pe({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(At(pe({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,s=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{e(),this.getContext().destroyBean(t)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){ra.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){ra.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};yf.isLocked=!1;f([D("popupService")],yf.prototype,"popupService",2);f([D("userComponentFactory")],yf.prototype,"userComponentFactory",2);f([K],yf.prototype,"postConstruct",1);var xq=yf,Nn=class extends U{constructor(i,e){super(),this.ctrl=i,e&&(this.beans=e)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(i){const e="title",t=this.ctrl.getGui();t&&(i!=null&&i!=""?t.setAttribute(e,i):t.removeAttribute(e))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var i,e,t,s;if(this.tooltipManager!=null)return;const r={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new xq(r,(e=(i=this.ctrl).getTooltipShowDelayOverride)==null?void 0:e.call(i),(s=(t=this.ctrl).getTooltipHideDelayOverride)==null?void 0:s.call(t),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gridOptionsService.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const i=this.ctrl,e=i.getColumn?i.getColumn():void 0,t=i.getColDef?i.getColDef():void 0,s=i.getRowNode?i.getRowNode():void 0;return{location:i.getLocation(),colDef:t,column:e,rowIndex:i.getRowIndex?i.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:i.getValueFormatted?i.getValueFormatted():void 0,hideTooltipCallback:()=>{var r;return(r=this.tooltipManager)==null?void 0:r.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};f([D("beans")],Nn.prototype,"beans",2);f([K],Nn.prototype,"postConstruct",1);var _q=new TP,Ef=class qR extends U{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=_q.next(),this.cssClassManager=new Mq(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gridOptionsService.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const{newTooltipText:t,showDelayOverride:s,hideDelayOverride:r,location:o,shouldDisplayTooltip:n}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==t&&(this.tooltipText=t);const l=()=>this.tooltipText;t!=null&&(this.tooltipFeature=this.createBean(new Nn({getTooltipValue:l,getGui:()=>this.getGui(),getLocation:()=>o??"UNKNOWN",getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:r!=null?()=>r:void 0,shouldDisplayTooltip:n})))}createChildComponentsFromTags(e,t){mk(e.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;const o=this.createComponentFromElement(r,n=>{n.getGui()&&this.copyAttributesFromNode(r,n.getGui())},t);if(o){if(o.addItems&&r.children.length){this.createChildComponentsFromTags(r,t);const n=Array.prototype.slice.call(r.children);o.addItems(n)}this.swapComponentForNode(o,e,r)}else r.childNodes&&this.createChildComponentsFromTags(r,t)})}createComponentFromElement(e,t,s){const r=e.nodeName,o=s?s[e.getAttribute("ref")]:void 0,n=this.agStackComponentsRegistry.getComponentClass(r);if(n){qR.elementGettingCreated=e;const l=new n(o);return l.setParentComponent(this),this.createBean(l,null,t),l}return null}copyAttributesFromNode(e,t){Ck(e.attributes,(s,r)=>t.setAttribute(s,r))}swapComponentForNode(e,t,s){const r=e.getGui();t.replaceChild(r,s),t.insertBefore(document.createComment(s.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,s)}swapInComponentForQuerySelectors(e,t){const s=this;this.iterateOverQuerySelectors(r=>{s[r.attributeName]===t&&(s[r.attributeName]=e)})}iterateOverQuerySelectors(e){let t=Object.getPrototypeOf(this);for(;t!=null;){const s=t.__agComponentMetaData,r=jb(t.constructor);s&&s[r]&&s[r].querySelectors&&s[r].querySelectors.forEach(o=>e(o)),t=Object.getPrototypeOf(t)}}activateTabIndex(e){const t=this.gridOptionsService.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(s=>s.setAttribute("tabindex",t.toString()))}setTemplate(e,t){const s=Is(e);this.setTemplateFromElement(s,t)}setTemplateFromElement(e,t){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),t)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const e=this;this.iterateOverQuerySelectors(t=>{const s=o=>e[t.attributeName]=o;if(t.refSelector&&this.getAttribute("ref")===t.refSelector)s(this.eGui);else{const o=this.eGui.querySelector(t.querySelector);o&&s(o.__agComponent||o)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,t){if(e!=null)if(t||(t=this.eGui),Sf(e))t.appendChild(e);else{const s=e;t.appendChild(s.getGui())}}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:s}=t;hk(this.eGui,e,{skipAriaHidden:s})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:s}=t;ze(this.eGui,e,{skipAriaHidden:s});const r={type:qR.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,t,s){this.eGui.addEventListener(e,t,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}getAttribute(e){const{eGui:t}=this;return t?t.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}};Ef.EVENT_DISPLAYED_CHANGED="displayedChanged";f([D("agStackComponentsRegistry")],Ef.prototype,"agStackComponentsRegistry",2);f([S0],Ef.prototype,"preConstructOnComponent",1);f([S0],Ef.prototype,"createChildComponentsPreConstruct",1);var be=Ef;function q(i){return Nq.bind(this,`[ref=${i}]`,i)}function Nq(i,e,t,s,r){if(i===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof r=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}Gq(t,"querySelectors",{attributeName:s,querySelector:i,refSelector:e})}function Gq(i,e,t){const s=kq(i,jb(i.constructor));s[e]||(s[e]=[]),s[e].push(t)}function kq(i,e){return i.__agComponentMetaData||(i.__agComponentMetaData={}),i.__agComponentMetaData[e]||(i.__agComponentMetaData[e]={}),i.__agComponentMetaData[e]}var DP=class extends be{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(i){this.params=i;const e=this.columnModel.getDisplayNameForColumn(i.column,"header",!0),t=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${e} ${t("ariaFilterInput","Filter Input")}`)}onParentModelChanged(i){if(i==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(e=>{if(e.getModelAsString){const t=e.getModelAsString(i);this.eFloatingFilterText.setValue(t)}})}onParamsUpdated(i){this.refresh(i)}refresh(i){this.init(i)}};f([q("eFloatingFilterText")],DP.prototype,"eFloatingFilterText",2);f([D("columnModel")],DP.prototype,"columnModel",2);var Fk=class{constructor(i,e,t,s){this.alive=!0,this.context=i,this.eParent=s,e.getDateCompDetails(t).newAgStackInstance().then(n=>{if(!this.alive){i.destroyBean(n);return}this.dateComp=n,n&&(s.appendChild(n.getGui()),n.afterGuiAttached&&n.afterGuiAttached(),this.tempValue&&n.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(i){this.dateComp?this.dateComp.setDate(i):this.tempValue=i}setDisabled(i){this.dateComp?this.setDateCompDisabled(i):this.disabled=i}setDisplayed(i){ze(this.eParent,i)}setInputPlaceholder(i){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(i)}setInputAriaLabel(i){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(i)}afterGuiAttached(i){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(i)}updateParams(i){var e,t;let s=!1;(e=this.dateComp)!=null&&e.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(i)!==null&&(s=!0),!s&&((t=this.dateComp)!=null&&t.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(i)!==null&&ve("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(i){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(i)}},Ok=class{constructor(){this.customFilterOptions={}}init(i,e){this.filterOptions=i.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(i)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(i=>{if(typeof i=="string")return;const e=[["displayKey"],["displayName"],["predicate","test"]],t=s=>s.some(r=>i[r]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!e.every(t)){this.filterOptions=this.filterOptions.filter(s=>s===i)||[];return}this.customFilterOptions[i.displayKey]=i})}selectDefaultItem(i){if(i.defaultOption)this.defaultOption=i.defaultOption;else if(this.filterOptions.length>=1){const e=this.filterOptions[0];typeof e=="string"?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(i){return this.customFilterOptions[i]}},Lk={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},XS=class Ik extends U{constructor(e,t={}){super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks=pe({shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const r=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);r&&(r.focus(),s.preventDefault())}},t)}postConstruct(){this.eFocusableElement.classList.add(Ik.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",t=>{if(!(t.defaultPrevented||ho(t))){if(this.callbacks.shouldStopEventPropagation(t)){vo(t);return}t.key===_.TAB?this.callbacks.onTabKeyDown(t):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(t)}})}};XS.FOCUS_MANAGED_CLASS="ag-focus-managed";f([D("focusService")],XS.prototype,"focusService",2);f([K],XS.prototype,"postConstruct",1);var ql=XS,Mk="ag-resizer-wrapper",Vq=`<div class="${Mk}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,sh=class extends U{constructor(i,e){super(),this.element=i,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},e)}center(){const{clientHeight:i,clientWidth:e}=this.offsetParent,t=e/2-this.getWidth()/2,s=i/2-this.getHeight()/2;this.offsetElement(t,s)}initialisePosition(){if(this.positioned)return;const{centered:i,forcePopupParentAsOffsetParent:e,minWidth:t,width:s,minHeight:r,height:o,x:n,y:l}=this.config;this.offsetParent||this.setOffsetParent();let a=0,u=0;const d=hr(this.element);if(d){const c=this.findBoundaryElement(),h=window.getComputedStyle(c);if(h.minWidth!=null){const p=c.offsetWidth-this.element.offsetWidth;u=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){const p=c.offsetHeight-this.element.offsetHeight;a=parseInt(h.minHeight,10)-p}}if(this.minHeight=r||a,this.minWidth=t||u,s&&this.setWidth(s),o&&this.setHeight(o),(!s||!o)&&this.refreshSize(),i)this.center();else if(n||l)this.offsetElement(n,l);else if(d&&e){let c=this.boundaryEl,h=!0;if(c||(c=this.findBoundaryElement(),h=!1),c){const p=parseFloat(c.style.top),m=parseFloat(c.style.left);h?this.offsetElement(isNaN(m)?0:m,isNaN(p)?0:p):this.setPosition(m,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(i,e){if(!this.config.popup||i===this.movable)return;this.movable=i;const t=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};i?(this.dragService.addDragSource(t),this.moveElementDragListener=t):(this.dragService.removeDragSource(t),this.moveElementDragListener=void 0)}setResizable(i){if(this.clearResizeListeners(),i?this.addResizers():this.removeResizers(),typeof i=="boolean"){if(i===!1)return;i={topLeft:i,top:i,topRight:i,right:i,bottomRight:i,bottom:i,bottomLeft:i,left:i}}Object.keys(i).forEach(e=>{const s=!!i[e],r=this.getResizerElement(e),o={dragStartPixels:0,eElement:r,onDragStart:n=>this.onResizeStart(n,e),onDragging:this.onResize.bind(this),onDragStop:n=>this.onResizeEnd(n,e)};(s||!this.isAlive()&&!s)&&(s?(this.dragService.addDragSource(o),this.resizeListeners.push(o),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[e]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:i,width:e}=this.lastSize;e!==-1&&(this.element.style.width=`${e}px`),i!==-1&&(this.element.style.height=`${i}px`)}getHeight(){return this.element.offsetHeight}setHeight(i){const{popup:e}=this.config,t=this.element;let s=!1;if(typeof i=="string"&&i.indexOf("%")!==-1)Ha(t,i),i=gP(t),s=!0;else if(i=Math.max(this.minHeight,i),this.positioned){const r=this.getAvailableHeight();r&&i>r&&(i=r)}this.getHeight()!==i&&(s?(t.style.maxHeight="unset",t.style.minHeight="unset"):e?Ha(t,i):(t.style.height=`${i}px`,t.style.flex="0 0 auto",this.lastSize.height=typeof i=="number"?i:parseFloat(i)))}getAvailableHeight(){const{popup:i,forcePopupParentAsOffsetParent:e}=this.config;this.positioned||this.initialisePosition();const{clientHeight:t}=this.offsetParent;if(!t)return null;const s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=i?this.position.y:s.top,n=i?0:r.top;let l=0;if(e){const u=this.element.parentElement;if(u){const{bottom:d}=u.getBoundingClientRect();l=d-s.bottom}}return t+n-o-l}getWidth(){return this.element.offsetWidth}setWidth(i){const e=this.element,{popup:t}=this.config;let s=!1;if(typeof i=="string"&&i.indexOf("%")!==-1)_r(e,i),i=cg(e),s=!0;else if(this.positioned){i=Math.max(this.minWidth,i);const{clientWidth:r}=this.offsetParent,o=t?this.position.x:this.element.getBoundingClientRect().left;r&&i+o>r&&(i=r-o)}this.getWidth()!==i&&(s?(e.style.maxWidth="unset",e.style.minWidth="unset"):this.config.popup?_r(e,i):(e.style.width=`${i}px`,e.style.flex=" unset",this.lastSize.width=typeof i=="number"?i:parseFloat(i)))}offsetElement(i=0,e=0){const{forcePopupParentAsOffsetParent:t}=this.config,s=t?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:i,y:e})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(i){if(!this.config.forcePopupParentAsOffsetParent)return;const e=()=>{const t=this.getAvailableHeight();this.element.style.setProperty("max-height",`${t}px`)};i?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),e):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(i,e){this.position.x=i,this.position.y=e}updateDragStartPosition(i,e){this.dragStartPosition={x:i,y:e}}calculateMouseMovement(i){const{e,isLeft:t,isTop:s,anywhereWithin:r,topBuffer:o}=i,n=e.clientX-this.dragStartPosition.x,l=e.clientY-this.dragStartPosition.y,a=this.shouldSkipX(e,!!t,!!r,n)?0:n,u=this.shouldSkipY(e,!!s,o,l)?0:l;return{movementX:a,movementY:u}}shouldSkipX(i,e,t,s){const r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),n=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.x:r.left;let a=l<=0&&o.left>=i.clientX||o.right<=i.clientX&&o.right<=n.right;return a?!0:(e?a=s<0&&i.clientX>l+o.left||s>0&&i.clientX<l+o.left:t?a=s<0&&i.clientX>n.right||s>0&&i.clientX<l+o.left:a=s<0&&i.clientX>n.right||s>0&&i.clientX<n.right,a)}shouldSkipY(i,e,t=0,s){const r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),n=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.y:r.top;let a=l<=0&&o.top>=i.clientY||o.bottom<=i.clientY&&o.bottom<=n.bottom;return a?!0:(e?a=s<0&&i.clientY>l+o.top+t||s>0&&i.clientY<l+o.top:a=s<0&&i.clientY>n.bottom||s>0&&i.clientY<n.bottom,a)}createResizeMap(){const i=this.element;this.resizerMap={topLeft:{element:i.querySelector("[ref=eTopLeftResizer]")},top:{element:i.querySelector("[ref=eTopResizer]")},topRight:{element:i.querySelector("[ref=eTopRightResizer]")},right:{element:i.querySelector("[ref=eRightResizer]")},bottomRight:{element:i.querySelector("[ref=eBottomRightResizer]")},bottom:{element:i.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:i.querySelector("[ref=eBottomLeftResizer]")},left:{element:i.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const i=this.element;if(!i)return;const t=new DOMParser().parseFromString(Vq,"text/html").body;i.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const i=this.element.querySelector(`.${Mk}`);i&&this.element.removeChild(i),this.resizersAdded=!1}getResizerElement(i){return this.resizerMap[i].element}onResizeStart(i,e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[e].element.classList.add("ag-active");const{popup:t,forcePopupParentAsOffsetParent:s}=this.config;!t&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(i.clientX,i.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(t=>!t.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const i=this.getSiblings()||[];let e=0,t=0;for(let s=0;s<i.length;s++){const r=i[s],o=!!r.style.flex&&r.style.flex!=="0 0 auto";if(r===this.element)continue;let n=this.minHeight||0,l=this.minWidth||0;if(o){const a=window.getComputedStyle(r);a.minHeight&&(n=parseInt(a.minHeight,10)),a.minWidth&&(l=parseInt(a.minWidth,10))}else n=r.offsetHeight,l=r.offsetWidth;e+=n,t+=l}return{height:e,width:t}}applySizeToSiblings(i){let e=null;const t=this.getSiblings();if(t){for(let s=0;s<t.length;s++){const r=t[s];r!==e&&(i?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(e=t[s+1]))}e&&(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height"),e.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(i=>i)}onResize(i){if(!this.isResizing||!this.currentResizer)return;const{popup:e,forcePopupParentAsOffsetParent:t}=this.config,{isTop:s,isRight:r,isBottom:o,isLeft:n}=this.currentResizer,l=r||n,a=o||s,{movementX:u,movementY:d}=this.calculateMouseMovement({e:i,isLeft:n,isTop:s}),c=this.position.x,h=this.position.y;let p=0,m=0;if(l&&u){const S=n?-1:1,E=this.getWidth(),C=E+u*S;let v=!1;n&&(p=E-C,(c+p<=0||C<=this.minWidth)&&(v=!0,p=0)),v||this.setWidth(C)}if(a&&d){const S=s?-1:1,E=this.getHeight(),C=E+d*S;let v=!1;s?(m=E-C,(h+m<=0||C<=this.minHeight)&&(v=!0,m=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&E<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(v=!0),v||this.setHeight(C)}this.updateDragStartPosition(i.clientX,i.clientY),((e||t)&&p||m)&&this.offsetElement(c+p,h+m)}onResizeEnd(i,e){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;const t={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[e].element.classList.remove("ag-active"),this.dispatchEvent(t)}refreshSize(){const i=this.element;this.config.popup&&(this.config.width||this.setWidth(i.offsetWidth),this.config.height||this.setHeight(i.offsetHeight))}onMoveStart(i){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(i.clientX,i.clientY)}onMove(i){if(!this.isMoving)return;const{x:e,y:t}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:r,movementY:o}=this.calculateMouseMovement({e:i,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(e+r,t+o),this.updateDragStartPosition(i.clientX,i.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let i=this.element;for(;i;){if(window.getComputedStyle(i).position!=="static")return i;i=i.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const i=this.resizeListeners.pop();this.dragService.removeDragSource(i)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};f([D("popupService")],sh.prototype,"popupService",2);f([D("resizeObserverService")],sh.prototype,"resizeObserverService",2);f([D("dragService")],sh.prototype,"dragService",2);var JS=class $h extends be{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new ql(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new sh(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const s=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(s,e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=$h.isUseApplyButton(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=$h.isUseApplyButton(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){const{buttons:e}=this.providedFilterParams,t=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(ni(this.eButtonsPanel),this.buttonListeners.forEach(o=>o==null?void 0:o()),this.buttonListeners=[]):t&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!t){this.eButtonsPanel&&lo(this.eButtonsPanel);return}const s=document.createDocumentFragment(),r=o=>{let n,l;switch(o){case"apply":n=this.translate("applyFilter"),l=d=>this.onBtApply(!1,!1,d);break;case"clear":n=this.translate("clearFilter"),l=()=>this.onBtClear();break;case"reset":n=this.translate("resetFilter"),l=()=>this.onBtReset();break;case"cancel":n=this.translate("cancelFilter"),l=d=>{this.onBtCancel(d)};break;default:console.warn("AG Grid: Unknown button type specified");return}const u=Is(`<button
                    type="${o==="apply"?"submit":"button"}"
                    ref="${o}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${n}
                </button>`);this.buttonListeners.push(this.addManagedListener(u,"click",l)),s.append(u)};RP(e).forEach(o=>r(o)),this.eButtonsPanel.append(s),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=$h.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),t=ns(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const s=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(s):this.resetUiToDefaults().then(s)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const s=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(s,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,s){s&&s.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:r}=this.providedFilterParams;r&&this.applyActive&&!e&&!t&&this.close(s)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,s=t&&t.key;let r;(s==="Enter"||s==="Space")&&(r={keyboardEvent:t}),this.hidePopup(r),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const s=this.isModelValid(this.getModelFromUi()),r=this.getRefElement("applyFilterButton");r&&Ac(r,!s)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:s,gridOptionsService:r}=this;t?(s.restoreLastSize(),s.setResizable(r.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,t){return $h.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}refresh(e){return this.providedFilterParams=e,!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Lk[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}};f([D("rowModel")],JS.prototype,"rowModel",2);f([q("eFilterBody")],JS.prototype,"eFilterBody",2);f([K],JS.prototype,"postConstruct",1);var wv=JS,bP=class extends be{constructor(i,e){super(e),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=i||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:i,label:e,labelWidth:t,labelAlignment:s,disabled:r}=this.config;r!=null&&this.setDisabled(r),i!=null&&this.setLabelSeparator(i),e!=null&&this.setLabel(e),t!=null&&this.setLabelWidth(t),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){ni(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(ze(this.eLabel,!1),Wt(this.eLabel,"presentation")):(ze(this.eLabel,!0),Wt(this.eLabel,null))}setLabelSeparator(i){return this.labelSeparator===i?this:(this.labelSeparator=i,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(i){return this.label===i?this:(this.label=i,this.refreshLabel(),this)}setLabelAlignment(i){const t=this.getGui().classList;return t.toggle("ag-label-align-left",i==="left"),t.toggle("ag-label-align-right",i==="right"),t.toggle("ag-label-align-top",i==="top"),this}setLabelEllipsis(i){return this.eLabel.classList.toggle("ag-label-ellipsis",i),this}setLabelWidth(i){return this.label==null?this:(fg(this.eLabel,i),this)}setDisabled(i){i=!!i;const e=this.getGui();return Ac(e,i),e.classList.toggle("ag-disabled",i),this.disabled=i,this}isDisabled(){return!!this.disabled}};f([K],bP.prototype,"postConstruct",1);var xk=class extends bP{constructor(i,e,t){super(i,e),this.className=t}postConstruct(){super.postConstruct();const{width:i,value:e,onValueChange:t}=this.config;i!=null&&this.setWidth(i),e!=null&&this.setValue(e),t!=null&&this.onValueChange(t),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){const i=this.getAriaElement(),e=this.getLabelId();z0(i)!==null?Cv(i,""):Cv(i,e??"")}setAriaLabel(i){return So(this.getAriaElement(),i),this.refreshAriaLabelledBy(),this}onValueChange(i){return this.addManagedListener(this,y.EVENT_FIELD_VALUE_CHANGED,()=>i(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(i){return _r(this.getGui(),i),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(i,e){return this.value===i?this:(this.previousValue=this.value,this.value=i,e||this.dispatchEvent({type:y.EVENT_FIELD_VALUE_CHANGED}),this)}},Hq=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Lu=class extends xk{constructor(i){if(super(i,(i==null?void 0:i.template)||Hq,i==null?void 0:i.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=i==null?void 0:i.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!i)return;const{pickerGap:e,maxPickerHeight:t,variableWidth:s,minPickerWidth:r,maxPickerWidth:o}=i;e!=null&&(this.pickerGap=e),this.variableWidth=!!s,t!=null&&this.setPickerMaxHeight(t),r!=null&&this.setPickerMinWidth(r),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const i=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",i);const e=this.getAriaElement();this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));const{pickerIcon:t,inputWidth:s}=this.config;if(t){const r=Nt(t,this.gridOptionsService);r&&this.eIcon.appendChild(r)}s!=null&&this.setInputWidth(s)}setupAria(){const i=this.getAriaElement();i.setAttribute("tabindex",this.gridOptionsService.get("tabIndex").toString()),Rn(i,!1),this.ariaRole&&Wt(i,this.ariaRole)}onLabelOrWrapperMouseDown(i){if(i){const e=this.getFocusableElement();if(e!==this.eWrapper&&(i==null?void 0:i.target)===e)return;i.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(i){switch(i.key){case _.UP:case _.DOWN:case _.ENTER:case _.SPACE:i.preventDefault(),this.onLabelOrWrapperMouseDown();break;case _.ESCAPE:this.isPickerDisplayed&&(i.preventDefault(),i.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const i=this.pickerComponent.getGui();i.addEventListener("focusin",this.onPickerFocusIn),i.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const i=this.gridOptionsService.getDocument(),e=this.pickerComponent.getGui();this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,y.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:s,pickerAriaLabelValue:r,modalPicker:o=!0}=this.config,n={modal:o,eChild:e,closeOnEsc:!0,closedCallback:()=>{const p=i.activeElement===i.body;this.beforeHidePicker(),p&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(s,r)},l=this.popupService.addPopup(n),{maxPickerHeight:a,minPickerWidth:u,maxPickerWidth:d,variableWidth:c}=this;c?(u&&(e.style.minWidth=u),e.style.width=qS(cg(this.eWrapper)),d&&(e.style.maxWidth=d)):fg(e,d??cg(this.eWrapper));const h=a??`${vf(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",h),e.style.position="absolute",this.alignPickerToComponent(),l.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:i}=this.config,{pickerGap:e}=this,t=this.gridOptionsService.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:i,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:t,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const i=this.pickerComponent.getGui();i.removeEventListener("focusin",this.onPickerFocusIn),i.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(i){if(!this.isAlive())return;const e=this.getAriaElement();Rn(e,i),this.eWrapper.classList.toggle("ag-picker-expanded",i),this.eWrapper.classList.toggle("ag-picker-collapsed",!i)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(i){var e;(e=this.pickerComponent)!=null&&e.getGui().contains(i.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(i){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",i)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(i){return fg(this.eWrapper,i),this}getFocusableElement(){return this.eWrapper}setPickerGap(i){return this.pickerGap=i,this}setPickerMinWidth(i){return typeof i=="number"&&(i=`${i}px`),this.minPickerWidth=i??void 0,this}setPickerMaxWidth(i){return typeof i=="number"&&(i=`${i}px`),this.maxPickerWidth=i??void 0,this}setPickerMaxHeight(i){return typeof i=="number"&&(i=`${i}px`),this.maxPickerHeight=i??void 0,this}destroy(){this.hidePicker(),super.destroy()}};f([D("popupService")],Lu.prototype,"popupService",2);f([q("eLabel")],Lu.prototype,"eLabel",2);f([q("eWrapper")],Lu.prototype,"eWrapper",2);f([q("eDisplayField")],Lu.prototype,"eDisplayField",2);f([q("eIcon")],Lu.prototype,"eIcon",2);var ZS=class Qm extends be{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.options=[],this.itemEls=[]}init(){const e=this.getGui();this.addManagedListener(e,"mouseleave",()=>this.clearHighlighted()),!this.unFocusable&&this.addManagedListener(e,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){const t=e.key;switch(t){case _.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const o=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(o)}break;case _.DOWN:case _.UP:const s=t===_.DOWN;let r;if(e.preventDefault(),!this.highlightedEl)r=this.itemEls[s?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(s?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),r=this.itemEls[n]}this.highlightItem(r);break}}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:s}=e,r=s||t;return this.options.push({value:t,text:r}),this.renderOption(t,r),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{lo(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,s)=>{KS(t,s+1),$S(t,e.length)})}renderOption(e,t){const s=this.gridOptionsService.getDocument(),r=s.createElement("div");Wt(r,"option"),r.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const o=s.createElement("span");r.appendChild(o),o.innerText=t,this.unFocusable||(r.tabIndex=-1),this.itemEls.push(r),this.addManagedListener(r,"mousemove",()=>this.highlightItem(r)),this.addManagedListener(r,"mousedown",n=>{n.preventDefault(),this.setValue(e)}),this.createManagedBean(new Nn({getTooltipValue:()=>t,getGui:()=>r,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>o.scrollWidth>o.clientWidth})),this.getGui().appendChild(r)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const s=this.options.findIndex(r=>r.value===e);if(s!==-1){const r=this.options[s];this.value=r.value,this.displayValue=r.text,this.highlightItem(this.itemEls[s]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!hr(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(Qm.ACTIVE_CLASS),Pc(this.highlightedEl,!0);const t=this.getGui(),s=t.getBoundingClientRect(),r=s.top+t.scrollTop,o=s.height,{offsetTop:n,offsetHeight:l}=e;(n+l>r+o||n<r)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!hr(this.highlightedEl)||(this.highlightedEl.classList.remove(Qm.ACTIVE_CLASS),Pc(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:y.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:Qm.EVENT_ITEM_SELECTED})}};ZS.EVENT_ITEM_SELECTED="selectedItem";ZS.ACTIVE_CLASS="ag-active-item";f([K],ZS.prototype,"init",1);var sL=ZS,_k=class Nk extends Lu{constructor(e){super(pe({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");const{options:e,value:t,placeholder:s}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),s&&t==null&&(this.eDisplayField.textContent=s),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new sL("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),oP(this.getAriaElement(),e),this.listComponent.addManagedListener(this.listComponent,sL.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:Nk.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,y.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}onKeyDown(e){var t;const{key:s}=e;s===_.TAB?this.hidePicker():!this.isPickerDisplayed||s!==_.ENTER&&s!==_.UP&&s!==_.DOWN?super.onKeyDown(e):(t=this.listComponent)==null||t.handleKeyDown(e)}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,t,s){if(this.value===e||!this.listComponent)return this;if(s||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let o=this.listComponent.getDisplayValue();return o==null&&this.config.placeholder&&(o=this.config.placeholder),this.eDisplayField.innerHTML=o,this.setTooltip({newTooltipText:o??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};_k.EVENT_ITEM_SELECTED="selectedItem";var PP=_k,cn=class extends xk{constructor(i,e,t="text",s="input"){super(i,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,e),this.inputType=t,this.displayFieldTag=s}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:i,inputWidth:e}=this.config;i!=null&&this.setInputName(i),e!=null&&this.setInputWidth(e),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",i=>this.setValue(i.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(i){return fg(this.eWrapper,i),this}setInputName(i){return this.getInputElement().setAttribute("name",i),this}getFocusableElement(){return this.eInput}setMaxLength(i){const e=this.eInput;return e.maxLength=i,this}setInputPlaceholder(i){return Ba(this.eInput,"placeholder",i),this}setInputAriaLabel(i){return So(this.eInput,i),this.refreshAriaLabelledBy(),this}setDisabled(i){return Ac(this.eInput,i),super.setDisabled(i)}setAutoComplete(i){if(i===!0)Ba(this.eInput,"autocomplete",null);else{const e=typeof i=="string"?i:"off";Ba(this.eInput,"autocomplete",e)}return this}};f([q("eLabel")],cn.prototype,"eLabel",2);f([q("eWrapper")],cn.prototype,"eWrapper",2);f([q("eInput")],cn.prototype,"eInput",2);var AP=class extends cn{constructor(i,e="ag-checkbox",t="checkbox"){super(i,e,t),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:i,passive:e}=this.config;typeof i=="boolean"&&this.setReadOnly(i),typeof e=="boolean"&&this.setPassive(e)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(i){this.passive=i}isReadOnly(){return this.readOnly}setReadOnly(i){this.eWrapper.classList.toggle("ag-disabled",i),this.eInput.disabled=i,this.readOnly=i}setDisabled(i){return this.eWrapper.classList.toggle("ag-disabled",i),super.setDisabled(i)}toggle(){if(this.eInput.disabled)return;const i=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,i):this.setValue(e)}getValue(){return this.isSelected()}setValue(i,e){return this.refreshSelectedClass(i),this.setSelected(i,e),this}setName(i){const e=this.getInputElement();return e.name=i,this}isSelected(){return this.selected}setSelected(i,e){this.isSelected()!==i&&(this.previousValue=this.isSelected(),i=this.selected=typeof i=="boolean"?i:void 0,this.eInput.checked=i,this.eInput.indeterminate=i===void 0,e||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(i,e,t){this.dispatchEvent({type:y.EVENT_FIELD_VALUE_CHANGED,selected:i,previousValue:e,event:t});const s=this.getInputElement(),r={type:y.EVENT_CHECKBOX_CHANGED,id:s.id,name:s.name,selected:i,previousValue:e};this.eventService.dispatchEvent(r)}onCheckboxClick(i){if(this.passive||this.eInput.disabled)return;const e=this.isSelected(),t=this.selected=i.target.checked;this.refreshSelectedClass(t),this.dispatchChange(t,e,i)}refreshSelectedClass(i){this.eWrapper.classList.toggle("ag-checked",i===!0),this.eWrapper.classList.toggle("ag-indeterminate",i==null)}},Bq=class extends AP{constructor(i){super(i,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,y.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(i){i.selected&&i.name&&this.eInput.name&&this.eInput.name===i.name&&i.id&&this.eInput.id!==i.id&&this.setValue(!1,!0)}},FP=class{constructor(i,e,t){this.localeService=i,this.optionsFactory=e,this.valueFormatter=t}getModelAsString(i){if(!i)return null;const e=i.operator!=null,t=this.localeService.getLocaleTextFunc();if(e){const s=i;let{conditions:r}=s;if(!r){const{condition1:l,condition2:a}=s;r=[l,a]}const o=r.map(l=>this.getModelAsString(l)),n=s.operator==="AND"?"andCondition":"orCondition";return o.join(` ${t(n,Lk[n])} `)}else{if(i.type===Vt.BLANK||i.type===Vt.NOT_BLANK)return t(i.type,i.type);{const s=i,r=this.optionsFactory.getCustomOption(s.type),{displayKey:o,displayName:n,numberOfInputs:l}=r||{};return o&&n&&l===0?(t(o,n),n):this.conditionToString(s,r)}}}updateParams(i){this.optionsFactory=i.optionsFactory}formatValue(i){var e;return this.valueFormatter?(e=this.valueFormatter(i??null))!=null?e:"":String(i)}},Ss=class nd extends wv{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:r}=t;return r??1}const s=[nd.EMPTY,nd.NOT_BLANK,nd.BLANK];return e&&s.indexOf(e)>=0?0:e===nd.IN_RANGE?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,s)=>{s===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const s=!e.operator,r=!t.operator;if(!s&&r||s&&!r)return!1;let n;if(s){const l=e,a=t;n=this.areSimpleModelsEqual(l,a)}else{const l=e,a=t;n=l.operator===a.operator&&Vo(l.conditions,a.conditions,(u,d)=>this.areSimpleModelsEqual(u,d))}return n}shouldRefresh(e){var t,s,r;const o=this.getModel(),n=o?(t=o.conditions)!=null?t:[o]:null,l=(r=(s=e.filterOptions)==null?void 0:s.map(u=>typeof u=="string"?u:u.displayKey))!=null?r:this.getDefaultFilterOptions();return!(!(!n||n.every(u=>l.find(d=>d===u.type)!==void 0))||typeof e.maxNumConditions=="number"&&n&&n.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let s=e;s.conditions||(s.conditions=[s.condition1,s.condition2]);const r=this.validateAndUpdateConditions(s.conditions),o=this.getNumConditions();if(r<o)this.removeConditionsAndOperators(r);else if(r>o)for(let l=o;l<r;l++)this.createJoinOperatorPanel(),this.createOption();const n=s.operator==="OR";this.eJoinOperatorsAnd.forEach(l=>l.setValue(!n,!0)),this.eJoinOperatorsOr.forEach(l=>l.setValue(n,!0)),s.conditions.forEach((l,a)=>{this.eTypes[a].setValue(l.type,!0),this.setConditionIntoUi(l,a)})}else{const s=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(s.type,!0),this.setConditionIntoUi(s,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Pr.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),ve('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){var t;const s=this.getModel();if(s==null)return!0;const{operator:r}=s,o=[];if(r){const l=s;o.push(...(t=l.conditions)!=null?t:[])}else o.push(s);return o[r&&r==="OR"?"some":"every"](l=>this.individualConditionPasses(e,l))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Ok,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var t,s;e.suppressAndOrCondition!=null&&ve('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),e.alwaysShowBothConditions!=null&&ve('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(t=e.maxNumConditions)!=null?t:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(ve('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(s=e.numAlwaysVisibleConditions)!=null?s:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(ve('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(ve('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new PP);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const s=this.getNumConditions()-1;this.forEachPositionInput(s,r=>this.resetInput(r)),this.addChangedListeners(e,s)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),s=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const r=this.eJoinOperatorPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(t,r,o),this.resetJoinOperatorOr(s,r,o),this.isReadOnly()||(t.onValueChange(this.listener),s.onValueChange(this.listener))}createJoinOperator(e,t,s){const r=this.createManagedBean(new Bq);return e.push(r),r.addCssClass("ag-filter-condition-operator"),r.addCssClass(`ag-filter-condition-operator-${s}`),t.appendChild(r.getGui()),r}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,s=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:s?this.localeService.getLocaleTextFunc()(s.displayKey,s.displayName):this.translate(t)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){var e;let t=-1,s=!0;for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)?t=r:s=!1;if(this.shouldAddNewConditionAtEnd(s))this.createJoinOperatorPanel(),this.createOption();else{const r=(e=this.lastUiCompletePosition)!=null?e:this.getNumConditions()-2;if(t<r){this.removeConditionsAndOperators(r+1);const o=t+1,n=r-o;n>0&&this.removeConditionsAndOperators(o,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=t}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((r,o)=>{const n=this.isConditionDisabled(o,e);r.setDisabled(n||this.filterListOptions.length<=1),o===1&&(Ac(this.eJoinOperatorPanels[0],n),this.eJoinOperatorsAnd[0].setDisabled(n),this.eJoinOperatorsOr[0].setDisabled(n))}),this.eConditionBodies.forEach((r,o)=>{ze(r,this.isConditionBodyVisible(o))});const s=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((r,o)=>{r.setValue(!s,!0)}),this.eJoinOperatorsOr.forEach((r,o)=>{r.setValue(s,!0)}),this.forEachInput((r,o,n,l)=>{this.setElementDisplayed(r,o<l),this.setElementDisabled(r,this.isConditionDisabled(n,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const s=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,s,t),this.removeComponents(this.eJoinOperatorsAnd,s,t),this.removeComponents(this.eJoinOperatorsOr,s,t)}removeElements(e,t,s){this.removeItems(e,t,s).forEach(o=>lo(o))}removeComponents(e,t,s){this.removeItems(e,t,s).forEach(o=>{lo(o.getGui()),this.destroyBean(o)})}removeItems(e,t,s){return s==null?e.splice(t):e.splice(t,s)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const t=this.getInputs(0)[0];if(!t)return;t instanceof cn&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,s=-1,r=!1;const o=this.getJoinOperator();for(let l=this.getNumConditions()-1;l>=0;l--)if(this.isConditionUiComplete(l))t===-1&&(t=l,s=l);else{const a=l>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(l-1),u=l<t;(a||u)&&(this.removeConditionsAndOperators(l,1),r=!0,u&&s--)}let n=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),n=!0),this.shouldAddNewConditionAtEnd(s===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),n=!0),n&&this.updateConditionStatusesAndValues(s,o),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=s}getPlaceholderText(e,t){let s=this.translate(e);if(BS(this.filterPlaceholder)){const r=this.filterPlaceholder,o=this.eTypes[t].getValue(),n=this.translate(o);s=r({filterOptionKey:o,filterOption:n,placeholder:s})}else typeof this.filterPlaceholder=="string"&&(s=this.filterPlaceholder);return s}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,s,r,o)=>{if(!(t instanceof cn))return;const n=s===0&&o>1?"inRangeStart":s===0?"filterOoo":"inRangeEnd",l=s===0&&o>1?e("ariaFilterFromValue","Filter from value"):s===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(n,r)),t.setInputAriaLabel(l)})}setElementValue(e,t,s){e instanceof cn&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof be&&ze(e.getGui(),t)}setElementDisabled(e,t){e instanceof be&&Ac(e.getGui(),t)}attachElementOnChange(e,t){e instanceof cn&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,s)=>{this.forEachPositionTypeInput(s,t,e)})}forEachPositionInput(e,t){const s=this.getConditionType(e);this.forEachPositionTypeInput(e,s,t)}forEachPositionTypeInput(e,t,s){const r=this.getNumberOfInputs(t),o=this.getInputs(e);for(let n=0;n<o.length;n++){const l=o[n];l!=null&&s(l,n,e,r)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===nd.EMPTY||this.getValues(e).some(s=>s==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,s)=>this.resetJoinOperatorAnd(t,s,this.joinOperatorId+s)),this.eJoinOperatorsOr.forEach((t,s)=>this.resetJoinOperatorOr(t,s,this.joinOperatorId+s)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Pr.resolve()}resetType(e){const s=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(s).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,s){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),s)}resetJoinOperatorOr(e,t,s){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),s)}resetJoinOperator(e,t,s,r,o){this.updateJoinOperatorDisabled(e.setValue(s,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${o}`).setLabel(r),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const s=this.mapValuesFromModel(e);this.forEachInput((r,o,n,l)=>{n===t&&this.setElementValue(r,s[o]!=null?s[o]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,s,r,o)=>{this.setElementValue(t,s===0&&r===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,s=>{this.attachElementOnChange(s,this.listener)}))}individualConditionPasses(e,t){const s=this.getCellValue(e.node),r=this.mapValuesFromModel(t),o=this.optionsFactory.getCustomOption(t.type),n=this.evaluateCustomFilter(o,r,s);return n??(s==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(r,s,t,e))}evaluateCustomFilter(e,t,s){if(e==null)return;const{predicate:r}=e;if(r!=null&&!t.some(o=>o==null))return r(t,s)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}};Ss.EMPTY="empty";Ss.BLANK="blank";Ss.NOT_BLANK="notBlank";Ss.EQUALS="equals";Ss.NOT_EQUAL="notEqual";Ss.LESS_THAN="lessThan";Ss.LESS_THAN_OR_EQUAL="lessThanOrEqual";Ss.GREATER_THAN="greaterThan";Ss.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";Ss.IN_RANGE="inRange";Ss.CONTAINS="contains";Ss.NOT_CONTAINS="notContains";Ss.STARTS_WITH="startsWith";Ss.ENDS_WITH="endsWith";var Vt=Ss,di=class mi extends Vt{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case mi.EQUALS:case mi.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case mi.GREATER_THAN:case mi.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case mi.LESS_THAN:case mi.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case mi.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case mi.BLANK:return!0;case mi.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,t,s){const r=this.comparator(),o=e[0]!=null?r(e[0],t):0;switch(s.type){case mi.EQUALS:return o===0;case mi.NOT_EQUAL:return o!==0;case mi.GREATER_THAN:return o>0;case mi.GREATER_THAN_OR_EQUAL:return o>=0;case mi.LESS_THAN:return o<0;case mi.LESS_THAN_OR_EQUAL:return o<=0;case mi.IN_RANGE:{const n=r(e[1],t);return this.scalarFilterParams.inRangeInclusive?o>=0&&n<=0:o>0&&n<0}case mi.BLANK:return this.isBlank(t);case mi.NOT_BLANK:return!this.isBlank(t);default:return console.warn('AG Grid: Unexpected type of filter "'+s.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},rL=1e3,oL=1/0,Gk=class extends FP{constructor(i,e,t){super(e,t),this.dateFilterParams=i}conditionToString(i,e){const{type:t}=i,{numberOfInputs:s}=e||{},r=t==Vt.IN_RANGE||s===2,o=or(i.dateFrom),n=or(i.dateTo),l=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(r){const a=o!==null?Hd(o,l):"null",u=n!==null?Hd(n,l):"null";return`${a}-${u}`}return o!=null?Hd(o,l):`${t}`}updateParams(i){super.updateParams(i),this.dateFilterParams=i.dateFilterParams}},OP=class kk extends di{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=rL,this.maxValidYear=oL,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:s,type:r}=e||{};return[t&&or(t)||null,s&&or(s)||null].slice(0,this.getNumberOfInputs(r))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const s=t;return t==null||s<e?-1:s>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(s,r)=>{if(e[s]!=null)if(isNaN(e[s]))console.warn(`AG Grid: DateFilter ${s} is not a number`);else return e[s]==null?r:Number(e[s]);return r};this.minValidYear=t("minValidYear",rL),this.maxValidYear=t("maxValidYear",oL),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:or(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:or(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Gk(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new Fk(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return kk.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,s,r){const o=document.createElement("div");o.classList.add(`ag-filter-${r}`),o.classList.add(`ag-filter-date-${r}`),t.push(o),e.appendChild(o),s.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,s){this.removeItems(e,t,s).forEach(o=>o.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((s,r,o,n)=>{o!==e||!t||r>=n||(t=t&&this.isValidDateValue(s.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),s={},r=this.getValues(e);return r.length>0&&(s.dateFrom=Dn(r[0])),r.length>1&&(s.dateTo=Dn(r[1])),pe({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},s)}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),s=e("ariaFilterValue","Filter Value");this.forEachInput(r=>{r.setInputPlaceholder(t),r.setInputAriaLabel(s)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(s,r,o,n)=>{r<n&&t.push(s.getDate())}),t}translate(e){return e===di.LESS_THAN?super.translate("before"):e===di.GREATER_THAN?super.translate("after"):super.translate(e)}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!=null?t:""}};OP.DEFAULT_FILTER_OPTIONS=[di.EQUALS,di.NOT_EQUAL,di.LESS_THAN,di.GREATER_THAN,di.IN_RANGE,di.BLANK,di.NOT_BLANK];f([D("userComponentFactory")],OP.prototype,"userComponentFactory",2);var Vk=OP,Hk=class extends be{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(i){return i&&i.afterFloatingFilter}isEventFromDataChange(i){return i==null?void 0:i.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(i){if(!i){this.lastType=this.optionsFactory.getDefaultOption();return}const e=i.operator;let t;e?t=i.conditions[0]:t=i,this.lastType=t.type}canWeEditAfterModelFromParentFilter(i){if(!i)return this.isTypeEditable(this.lastType);if(i.operator)return!1;const t=i;return this.isTypeEditable(t.type)}init(i){this.setSimpleParams(i,!1)}setSimpleParams(i,e=!0){this.optionsFactory=new Ok,this.optionsFactory.init(i.filterParams,this.getDefaultFilterOptions()),e||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!i.filterParams.readOnly;const t=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(t)}onParamsUpdated(i){this.refresh(i)}refresh(i){this.setSimpleParams(i)}doesFilterHaveSingleInput(i){const e=this.optionsFactory.getCustomOption(i),{numberOfInputs:t}=e||{};return t==null||t==1}isTypeEditable(i){const e=[Vt.IN_RANGE,Vt.EMPTY,Vt.BLANK,Vt.NOT_BLANK];return!!i&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(i)&&e.indexOf(i)<0}},ew=class extends Hk{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return Vk.DEFAULT_FILTER_OPTIONS}init(i){super.init(i),this.params=i,this.filterParams=i.filterParams,this.createDateComponent(),this.filterModelFormatter=new Gk(this.filterParams,this.localeService,this.optionsFactory);const e=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(e("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(i){this.refresh(i)}refresh(i){super.refresh(i),this.params=i,this.filterParams=i.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(i.currentParentModel())}updateCompOnModelChange(i){const e=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(i);if(this.setEditable(e),e){if(i){const t=i;this.dateComp.setDate(or(t.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(i)),this.dateComp.setDate(null)}setEditable(i){ze(this.eDateWrapper,i),ze(this.eReadOnlyText.getGui(),!i)}onParentModelChanged(i,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(super.setLastTypeFromModel(i),this.updateCompOnModelChange(i))}onDateChanged(){const i=this.dateComp.getDate(),e=Dn(i);this.params.parentFilterInstance(t=>{if(t){const s=or(e);t.onFloatingFilterChanged(this.getLastType()||null,s)}})}getDateComponentParams(){const i=wv.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:ns(this.onDateChanged.bind(this),i),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Fk(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const i=this.gridOptionsService.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(i)}getFilterModelFormatter(){return this.filterModelFormatter}};f([D("userComponentFactory")],ew.prototype,"userComponentFactory",2);f([q("eReadOnlyText")],ew.prototype,"eReadOnlyText",2);f([q("eDateWrapper")],ew.prototype,"eDateWrapper",2);var Bk=class extends be{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(i){this.params=i,this.setParams(i);const e=this.gridOptionsService.getDocument(),t=this.eDateInput.getInputElement();this.addManagedListener(t,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()}),this.addManagedListener(t,"input",s=>{s.target===e.activeElement&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(i){const e=this.eDateInput.getInputElement(),t=this.shouldUseBrowserDatePicker(i);this.usingSafariDatePicker=t&&Tn(),e.type=t?"date":"text";const{minValidYear:s,maxValidYear:r,minValidDate:o,maxValidDate:n}=i.filterParams||{};if(o&&s&&ve("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),n&&r&&ve("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&n){const[l,a]=[o,n].map(u=>u instanceof Date?u:or(u));l&&a&&l.getTime()>a.getTime()&&ve("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?o instanceof Date?e.min=Hd(o):e.min=o:s&&(e.min=`${s}-01-01`),n?n instanceof Date?e.max=Hd(n):e.max=n:r&&(e.max=`${r}-12-31`)}onParamsUpdated(i){this.refresh(i)}refresh(i){this.params=i,this.setParams(i)}getDate(){return or(this.eDateInput.getValue())}setDate(i){this.eDateInput.setValue(Dn(i,!1))}setInputPlaceholder(i){this.eDateInput.setInputPlaceholder(i)}setDisabled(i){this.eDateInput.setDisabled(i)}afterGuiAttached(i){(!i||!i.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(i){return i.filterParams&&i.filterParams.browserDatePicker!=null?i.filterParams.browserDatePicker:YS()||lP()||Tn()&&nP()>=14.1}};f([q("eDateInput")],Bk.prototype,"eDateInput",2);var Rf=class extends cn{constructor(i,e="ag-text-field",t="text"){super(i,e,t)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(i,e){return this.eInput.value!==i&&(this.eInput.value=H(i)?i:""),super.setValue(i,e)}setStartValue(i){this.setValue(i,!0)}preventDisallowedCharacters(){const i=new RegExp(`[${this.config.allowedCharPattern}]`),e=t=>{QS(t)&&t.key&&!i.test(t.key)&&t.preventDefault()};this.addManagedListener(this.eInput,"keydown",e),this.addManagedListener(this.eInput,"paste",t=>{var s;const r=(s=t.clipboardData)==null?void 0:s.getData("text");r&&r.split("").some(o=>!i.test(o))&&t.preventDefault()})}},Wk=class extends Rf{constructor(i){super(i,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{const r=parseFloat(this.eInput.value),o=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==o&&this.setValue(o)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";const{precision:i,min:e,max:t,step:s}=this.config;typeof i=="number"&&this.setPrecision(i),typeof e=="number"&&this.setMin(e),typeof t=="number"&&this.setMax(t),typeof s=="number"&&this.setStep(s)}onWheel(i){document.activeElement===this.eInput&&i.preventDefault()}normalizeValue(i){if(i==="")return"";this.precision!=null&&(i=this.adjustPrecision(i));const e=parseFloat(i);return this.min!=null&&e<this.min?i=this.min.toString():this.max!=null&&e>this.max&&(i=this.max.toString()),i}adjustPrecision(i,e){if(this.precision==null)return i;if(e){const s=parseFloat(i).toFixed(this.precision);return parseFloat(s).toString()}const t=String(i).split(".");if(t.length>1){if(t[1].length<=this.precision)return i;if(this.precision>0)return`${t[0]}.${t[1].slice(0,this.precision)}`}return t[0]}setMin(i){return this.min===i?this:(this.min=i,Ba(this.eInput,"min",i),this)}setMax(i){return this.max===i?this:(this.max=i,Ba(this.eInput,"max",i),this)}setPrecision(i){return this.precision=i,this}setStep(i){return this.step===i?this:(this.step=i,Ba(this.eInput,"step",i),this)}setValue(i,e){return this.setValueOrInputValue(t=>super.setValue(t,e),()=>this,i)}setStartValue(i){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},i)}setValueOrInputValue(i,e,t){if(H(t)){let s=this.isScientificNotation(t);if(s&&this.eInput.validity.valid)return i(t);if(!s){t=this.adjustPrecision(t);const r=this.normalizeValue(t);s=t!=r}if(s)return e(t)}return i(t)}getValue(){if(!this.eInput.validity.valid)return;const i=this.eInput.value;return this.isScientificNotation(i)?this.adjustPrecision(i,!0):super.getValue()}isScientificNotation(i){return typeof i=="string"&&i.includes("e")}},Uk=class extends FP{conditionToString(i,e){const{numberOfInputs:t}=e||{};return i.type==Vt.IN_RANGE||t===2?`${this.formatValue(i.filter)}-${this.formatValue(i.filterTo)}`:i.filter!=null?this.formatValue(i.filter):`${i.type}`}};function QR(i){const{allowedCharPattern:e}=i??{};return e??null}var zk=class $k extends di{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:s,type:r}=e||{};return[this.processValue(t),this.processValue(s)].slice(0,this.getNumberOfInputs(r))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new Uk(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return $k.DEFAULT_FILTER_OPTIONS}setElementValue(e,t,s){const r=!s&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,r)}createValueElement(){const e=QR(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Wt(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,s,r){const o=this.createManagedBean(r?new Rf({allowedCharPattern:r}):new Wk);o.addCssClass(`ag-filter-${s}`),o.addCssClass("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(s,r,o,n)=>{r<n&&t.push(this.processValue(this.stringToFloat(s.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=zo(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),s={filterType:this.getFilterType(),type:t},r=this.getValues(e);return r.length>0&&(s.filter=r[0]),r.length>1&&(s.filterTo=r[1]),s}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!=null?t:""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}};zk.DEFAULT_FILTER_OPTIONS=[di.EQUALS,di.NOT_EQUAL,di.GREATER_THAN,di.GREATER_THAN_OR_EQUAL,di.LESS_THAN,di.LESS_THAN_OR_EQUAL,di.IN_RANGE,di.BLANK,di.NOT_BLANK];var Kk=zk,jk=class extends FP{conditionToString(i,e){const{numberOfInputs:t}=e||{};return i.type==Vt.IN_RANGE||t===2?`${i.filter}-${i.filterTo}`:i.filter!=null?`${i.filter}`:`${i.type}`}},Zr=class ld extends Vt{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){const t=e&&e.trim();return t===""?e:t}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?ld.DEFAULT_FORMATTER:ld.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new jk(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(tt.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:s,filterText:r})=>e(t,s,r)):this.textFilterParams.textMatcher||ld.DEFAULT_MATCHER}createCondition(e){const t=this.getConditionType(e),s={filterType:this.getFilterType(),type:t},r=this.getValuesWithSideEffects(e,!0);return r.length>0&&(s.filter=r[0]),r.length>1&&(s.filterTo=r[1]),s}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const s=[];return this.forEachPositionInput(e,(r,o,n,l)=>{var a;if(o<l){let u=zo(r.getValue());t&&this.textFilterParams.trimInput&&(u=(a=ld.trimInput(u))!=null?a:null,r.setValue(u,!0)),s.push(u)}}),s}getDefaultFilterOptions(){return ld.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Wt(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,s){const r=this.createManagedBean(new Rf);r.addCssClass(`ag-filter-${s}`),r.addCssClass("ag-filter-filter"),t.push(r),e.appendChild(r.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:s,type:r}=e||{};return[t||null,s||null].slice(0,this.getNumberOfInputs(r))}evaluateNullValue(e){const t=[Vt.NOT_EQUAL,Vt.NOT_CONTAINS,Vt.BLANK];return e?t.indexOf(e)>=0:!1}evaluateNonNullValue(e,t,s,r){const o=e.map(m=>this.formatter(m))||[],n=this.formatter(t),{api:l,colDef:a,column:u,columnApi:d,context:c,textFormatter:h}=this.textFilterParams;if(s.type===Vt.BLANK)return this.isBlank(t);if(s.type===Vt.NOT_BLANK)return!this.isBlank(t);const p={api:l,colDef:a,column:u,columnApi:d,context:c,node:r.node,data:r.data,filterOption:s.type,value:n,textFormatter:h};return o.some(m=>this.matcher(At(pe({},p),{filterText:m})))}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!=null?t:""}};Zr.DEFAULT_FILTER_OPTIONS=[Vt.CONTAINS,Vt.NOT_CONTAINS,Vt.EQUALS,Vt.NOT_EQUAL,Vt.STARTS_WITH,Vt.ENDS_WITH,Vt.BLANK,Vt.NOT_BLANK];Zr.DEFAULT_FORMATTER=i=>i;Zr.DEFAULT_LOWERCASE_FORMATTER=i=>i==null?null:i.toString().toLowerCase();Zr.DEFAULT_MATCHER=({filterOption:i,value:e,filterText:t})=>{if(t==null)return!1;switch(i){case Zr.CONTAINS:return e.indexOf(t)>=0;case Zr.NOT_CONTAINS:return e.indexOf(t)<0;case Zr.EQUALS:return e===t;case Zr.NOT_EQUAL:return e!=t;case Zr.STARTS_WITH:return e.indexOf(t)===0;case Zr.ENDS_WITH:const s=e.lastIndexOf(t);return s>=0&&s===e.length-t.length;default:return!1}};var LP=Zr,Yk=class extends U{constructor(i){super(),this.params=i,this.valueChangedListener=()=>{}}setupGui(i){var e;this.eFloatingFilterTextInput=this.createManagedBean(new Rf((e=this.params)==null?void 0:e.config));const t=this.eFloatingFilterTextInput.getGui();i.appendChild(t),this.addManagedListener(t,"input",s=>this.valueChangedListener(s)),this.addManagedListener(t,"keydown",s=>this.valueChangedListener(s))}setEditable(i){this.eFloatingFilterTextInput.setDisabled(!i)}setAutoComplete(i){this.eFloatingFilterTextInput.setAutoComplete(i)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(i,e){this.eFloatingFilterTextInput.setValue(i,e)}setValueChangedListener(i){this.valueChangedListener=i}setParams(i){this.setAriaLabel(i.ariaLabel),i.autoComplete!==void 0&&this.setAutoComplete(i.autoComplete)}setAriaLabel(i){this.eFloatingFilterTextInput.setInputAriaLabel(i)}},Tf=class extends Hk{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(i,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(this.setLastTypeFromModel(i),this.setEditable(this.canWeEditAfterModelFromParentFilter(i)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(i)))}init(i){this.setupFloatingFilterInputService(i),super.init(i),this.setTextInputParams(i)}setupFloatingFilterInputService(i){this.floatingFilterInputService=this.createFloatingFilterInputService(i),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(i){var e;this.params=i;const t=(e=i.browserAutoComplete)!=null?e:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(i),autoComplete:t}),this.applyActive=wv.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const s=wv.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),r=ns(this.syncUpWithParentFilter.bind(this),s);this.floatingFilterInputService.setValueChangedListener(r)}}onParamsUpdated(i){this.refresh(i)}refresh(i){super.refresh(i),this.setTextInputParams(i)}recreateFloatingFilterInputService(i){const e=this.floatingFilterInputService.getValue();ni(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(i),this.floatingFilterInputService.setValue(e,!0)}getAriaLabel(i){const e=this.columnModel.getDisplayNameForColumn(i.column,"header",!0),t=this.localeService.getLocaleTextFunc();return`${e} ${t("ariaFilterInput","Filter Input")}`}syncUpWithParentFilter(i){const e=i.key===_.ENTER;if(this.applyActive&&!e)return;let t=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(t=LP.trimInput(t),this.floatingFilterInputService.setValue(t,!0)),this.params.parentFilterInstance(s=>{s&&s.onFloatingFilterChanged(this.getLastType()||null,t||null)})}setEditable(i){this.floatingFilterInputService.setEditable(i)}};f([D("columnModel")],Tf.prototype,"columnModel",2);f([q("eFloatingFilterInputContainer")],Tf.prototype,"eFloatingFilterInputContainer",2);f([K],Tf.prototype,"postConstruct",1);var Wq=class extends U{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(i){this.eFloatingFilterNumberInput=this.createManagedBean(new Wk),this.eFloatingFilterTextInput=this.createManagedBean(new Rf),this.eFloatingFilterTextInput.setDisabled(!0);const e=this.eFloatingFilterNumberInput.getGui(),t=this.eFloatingFilterTextInput.getGui();i.appendChild(e),i.appendChild(t),this.setupListeners(e,s=>this.valueChangedListener(s)),this.setupListeners(t,s=>this.valueChangedListener(s))}setEditable(i){this.numberInputActive=i,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(i){this.eFloatingFilterNumberInput.setAutoComplete(i),this.eFloatingFilterTextInput.setAutoComplete(i)}getValue(){return this.getActiveInputElement().getValue()}setValue(i,e){this.getActiveInputElement().setValue(i,e)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(i){this.valueChangedListener=i}setupListeners(i,e){this.addManagedListener(i,"input",e),this.addManagedListener(i,"keydown",e)}setParams(i){this.setAriaLabel(i.ariaLabel),i.autoComplete!==void 0&&this.setAutoComplete(i.autoComplete)}setAriaLabel(i){this.eFloatingFilterNumberInput.setInputAriaLabel(i),this.eFloatingFilterTextInput.setInputAriaLabel(i)}},Uq=class extends Tf{init(i){var e;super.init(i),this.filterModelFormatter=new Uk(this.localeService,this.optionsFactory,(e=i.filterParams)==null?void 0:e.numberFormatter)}onParamsUpdated(i){this.refresh(i)}refresh(i){QR(i.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(i),super.refresh(i),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Kk.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(i){return this.allowedCharPattern=QR(i.filterParams),this.allowedCharPattern?this.createManagedBean(new Yk({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Wq)}},zq=class extends Tf{init(i){super.init(i),this.filterModelFormatter=new jk(this.localeService,this.optionsFactory)}onParamsUpdated(i){this.refresh(i)}refresh(i){super.refresh(i),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return LP.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new Yk)}},Df=class Kh{constructor(e,t=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new Xo,this.eElement=e,this.preventMouseClick=t;const s=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",s,{passive:!0}),this.eElement.addEventListener("touchmove",r,{passive:!0}),this.eElement.addEventListener("touchend",o,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",s,{passive:!0}),this.eElement.removeEventListener("touchmove",r,{passive:!0}),this.eElement.removeEventListener("touchend",o,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.eventService.addEventListener(e,t)}removeEventListener(e,t){this.eventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const s=this.touchStart===t;if(this.touching&&s&&!this.moved){this.moved=!0;const r={type:Kh.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:e};this.eventService.dispatchEvent(r)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!EP(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:Kh.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>Kh.DOUBLE_TAP_MILLIS){const s={type:Kh.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(s),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};Df.EVENT_TAP="tap";Df.EVENT_DOUBLE_TAP="doubleTap";Df.EVENT_LONG_TAP="longTap";Df.DOUBLE_TAP_MILLIS=500;var Oi=Df,Gn=class qk extends be{constructor(e){super(),e||this.setTemplate(qk.TEMPLATE)}attachCustomElements(e,t,s,r,o){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=s,this.eSortMixed=r,this.eSortNone=o}setupSort(e,t=!1){this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),this.column.isSortable()&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,y.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,t,s){if(t==null)return;const r=Nt(e,this.gridOptionsService,s);r&&t.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";ze(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";ze(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.get("unSortIcon"),s=e==null;ze(this.eSortNone,!t&&s,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,y.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";ze(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;const t=this.sortController.getColumnsWithSortingOrdered(),s=(e=this.sortController.getDisplaySortIndexForColumn(this.column))!=null?e:-1,r=t.some(n=>{var l;return(l=this.sortController.getDisplaySortIndexForColumn(n))!=null?l:!1}),o=s>=0&&r;ze(this.eSortOrder,o,{skipAriaHidden:!0}),s>=0?this.eSortOrder.textContent=(s+1).toString():ni(this.eSortOrder)}};Gn.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;f([q("eSortOrder")],Gn.prototype,"eSortOrder",2);f([q("eSortAsc")],Gn.prototype,"eSortAsc",2);f([q("eSortDesc")],Gn.prototype,"eSortDesc",2);f([q("eSortMixed")],Gn.prototype,"eSortMixed",2);f([q("eSortNone")],Gn.prototype,"eSortNone",2);f([D("columnModel")],Gn.prototype,"columnModel",2);f([D("sortController")],Gn.prototype,"sortController",2);var Qk=Gn,Zi=class Xk extends be{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide?!1:(this.setDisplayName(e),!0)}workOutTemplate(){var e;let t=(e=this.params.template)!=null?e:Xk.TEMPLATE;return t=t&&t.trim?t.trim():t,t}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=gi(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,s){if(t==null)return;const r=Nt(e,this.gridOptionsService,s);r&&t.appendChild(r)}setupTap(){const{gridOptionsService:e}=this;if(e.get("suppressTouch"))return;const t=new Oi(this.getGui(),!0),s=this.shouldSuppressMenuHide(),r=s&&H(this.eMenu),o=r?new Oi(this.eMenu,!0):t;if(this.params.enableMenu){const n=r?"EVENT_TAP":"EVENT_LONG_TAP",l=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListener(o,Oi[n],l)}if(this.params.enableSorting){const n=l=>{var a,u;const d=l.touchStart.target;s&&((a=this.eMenu)!=null&&a.contains(d)||(u=this.eFilterButton)!=null&&u.contains(d))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(t,Oi.EVENT_TAP,n)}if(this.params.enableFilterButton){const n=new Oi(this.eFilterButton,!0);this.addManagedListener(n,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>n.destroy())}this.addDestroyFunc(()=>t.destroy()),r&&this.addDestroyFunc(()=>o.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){lo(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){var t,s,r,o;const{column:n}=this.params,l=this.menuService.isLegacyMenuEnabled();if(e&&!l){if(this.menuService.isFilterMenuInHeaderEnabled(n))return this.params.showFilter((s=(t=this.eFilterButton)!=null?t:this.eMenu)!=null?s:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((o=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?o:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new Qk(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,dt.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",t=>{const s=this.params.column.isMoving(),o=new Date().getTime()-this.lastMovingChanged<50;if(!(s||o)){const a=this.gridOptionsService.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}});const e=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const t=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),r=!(t==null?void 0:t.every(o=>this.params.column.getSort()==o.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};this.addManagedListener(this.eventService,y.EVENT_SORT_CHANGED,e),this.addManagedListener(this.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0}configureFilter(e,t,s){if(!e)return lo(t),!1;const{column:r}=this.params;return this.addInIcon("filter",t,r),this.addManagedListener(r,dt.EVENT_FILTER_CHANGED,s),s(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();ze(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var t,s,r,o;return e?(s=(t=this.eFilterButton)!=null?t:this.eMenu)!=null?s:this.getGui():(o=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?o:this.getGui()}};Zi.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;f([D("sortController")],Zi.prototype,"sortController",2);f([D("menuService")],Zi.prototype,"menuService",2);f([D("columnModel")],Zi.prototype,"columnModel",2);f([q("eFilter")],Zi.prototype,"eFilter",2);f([q("eFilterButton")],Zi.prototype,"eFilterButton",2);f([q("eSortIndicator")],Zi.prototype,"eSortIndicator",2);f([q("eMenu")],Zi.prototype,"eMenu",2);f([q("eLabel")],Zi.prototype,"eLabel",2);f([q("eText")],Zi.prototype,"eText",2);f([q("eSortOrder")],Zi.prototype,"eSortOrder",2);f([q("eSortAsc")],Zi.prototype,"eSortAsc",2);f([q("eSortDesc")],Zi.prototype,"eSortDesc",2);f([q("eSortMixed")],Zi.prototype,"eSortMixed",2);f([q("eSortNone")],Zi.prototype,"eSortNone",2);var XR=Zi,bf=class Jk extends be{constructor(){super(Jk.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&ve("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const e=r=>{if(ho(r))return;const o=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),o,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);const t=r=>{vo(r)};this.addManagedListener(this.eCloseIcon,"dblclick",t),this.addManagedListener(this.eOpenIcon,"dblclick",t),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();const s=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(s,Jt.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(s,Jt.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,t){const s=new Oi(e,!0);this.addManagedListener(s,Oi.EVENT_TAP,t),this.addDestroyFunc(()=>s.destroy()),this.addManagedListener(e,"click",t)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();ze(this.eOpenIcon,t),ze(this.eCloseIcon,!t)}else ze(this.eOpenIcon,!1),ze(this.eCloseIcon,!1)}addInIcon(e,t){const s=Nt(e,this.gridOptionsService,null);s&&this.getRefElement(t).appendChild(s)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){ze(this.eOpenIcon,!1),ze(this.eCloseIcon,!1);return}}setupLabel(){var e;const{displayName:t,columnGroup:s}=this.params;if(H(t)){const r=gi(t,!0);this.getRefElement("agLabel").textContent=r}this.addOrRemoveCssClass("ag-sticky-label",!((e=s.getColGroupDef())!=null&&e.suppressStickyLabel))}};bf.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;f([D("columnModel")],bf.prototype,"columnModel",2);f([q("agOpened")],bf.prototype,"eOpenIcon",2);f([q("agClosed")],bf.prototype,"eCloseIcon",2);var $q=bf,Iu=class extends be{isPopup(){return!0}setParentComponent(i){i.addCssClass("ag-has-popup"),super.setParentComponent(i)}destroy(){const i=this.parentComponent;i&&i.isAlive()&&i.getGui().classList.remove("ag-has-popup"),super.destroy()}},IP=class Zk extends Iu{constructor(){super(Zk.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),H(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===_.LEFT||t===_.UP||t===_.RIGHT||t===_.DOWN||e.shiftKey&&t===_.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!H(e)&&!H(this.params.value)?this.params.value:this.params.parseValue(e)}};IP.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;f([q("eTextArea")],IP.prototype,"eTextArea",2);var Kq=IP,MP=class extends Iu{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(i){this.focusAfterAttached=i.cellStartedEdit;const{eSelect:e,valueFormatterService:t,gridOptionsService:s}=this,{values:r,value:o,eventKey:n}=i;if(Ee(r)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=n!=null?n===_.ENTER:!1;let l=!1;r.forEach(c=>{const h={value:c},p=t.formatValue(i.column,null,c),m=p!=null;h.text=m?p:c,e.addOption(h),l=l||o===c}),l?e.setValue(i.value,!0):i.values.length&&e.setValue(i.values[0],!0);const{valueListGap:a,valueListMaxWidth:u,valueListMaxHeight:d}=i;a!=null&&e.setPickerGap(a),d!=null&&e.setPickerMaxHeight(d),u!=null&&e.setPickerMaxWidth(u),s.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,PP.EVENT_ITEM_SELECTED,()=>i.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};f([D("valueFormatterService")],MP.prototype,"valueFormatterService",2);f([q("eSelect")],MP.prototype,"eSelect",2);var Pf=class extends Iu{constructor(i){super(`
            <div class="ag-cell-edit-wrapper">
                ${i.getTemplate()}
            </div>`),this.cellEditorInput=i}init(i){this.params=i;const e=this.eInput;this.cellEditorInput.init(e,i);let t;if(i.cellStartedEdit){this.focusAfterAttached=!0;const s=i.eventKey;s===_.BACKSPACE||i.eventKey===_.DELETE?t="":s&&s.length===1?t=s:(t=this.cellEditorInput.getStartValue(),s!==_.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,t=this.cellEditorInput.getStartValue();t!=null&&e.setStartValue(t),this.addManagedListener(e.getGui(),"keydown",s=>{const{key:r}=s;(r===_.PAGE_UP||r===_.PAGE_DOWN)&&s.preventDefault()})}afterGuiAttached(){var i,e;const t=this.localeService.getLocaleTextFunc(),s=this.eInput;if(s.setInputAriaLabel(t("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Tn()||s.getFocusableElement().focus();const r=s.getInputElement();this.highlightAllOnFocus?r.select():(e=(i=this.cellEditorInput).setCaret)==null||e.call(i)}focusIn(){const i=this.eInput,e=i.getFocusableElement(),t=i.getInputElement();e.focus(),t.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};f([q("eInput")],Pf.prototype,"eInput",2);var jq=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(i,e){this.eInput=i,this.params=e,e.maxLength!=null&&i.setMaxLength(e.maxLength)}getValue(){const i=this.eInput.getValue();return!H(i)&&!H(this.params.value)?this.params.value:this.params.parseValue(i)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const i=this.eInput.getValue(),e=H(i)&&i.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)}},nL=class extends Pf{constructor(){super(new jq)}},Yq="↑",qq="↓",eV=class extends be{constructor(){super(),this.refreshCount=0;const i=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-change-delta");const t=document.createElement("span");t.setAttribute("class","ag-value-change-value"),i.appendChild(e),i.appendChild(t),this.setTemplateFromElement(i)}init(i){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(i,!0)}showDelta(i,e){const t=Math.abs(e),s=i.formatValue(t),r=H(s)?s:t,o=e>=0;o?this.eDelta.textContent=Yq+r:this.eDelta.textContent=qq+r,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const i=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{i===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),ni(this.eDelta)}refresh(i,e=!1){const t=i.value;if(t===this.lastValue||(H(i.valueFormatted)?this.eValue.textContent=i.valueFormatted:H(i.value)?this.eValue.textContent=t:ni(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof t=="number"&&typeof this.lastValue=="number"){const s=t-this.lastValue;this.showDelta(i,s)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),e||this.setTimerToRemoveDelta(),this.lastValue=t,!0}};f([D("filterManager")],eV.prototype,"filterManager",2);var tV=class extends be{constructor(){super(),this.refreshCount=0;const i=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-slide-current"),i.appendChild(e),this.setTemplateFromElement(i),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(i){this.refresh(i,!0)}addSlideAnimation(){this.refreshCount++;const i=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const e=document.createElement("span");e.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=e,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{i===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{i===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(i,e=!1){let t=i.value;return Ee(t)&&(t=""),t===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(e||this.addSlideAnimation(),this.lastValue=t,H(i.valueFormatted)?this.eCurrent.textContent=i.valueFormatted:H(i.value)?this.eCurrent.textContent=t:ni(this.eCurrent),!0)}};f([D("filterManager")],tV.prototype,"filterManager",2);var Ot=class St{constructor(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=St.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const s=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(e,s,t);this.dispatchLocalEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,s){return{type:St.EVENT_DATA_CHANGED,node:this,oldData:t,newData:e,update:s}}createLocalRowEvent(e){return{type:e,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const e=new St(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e}setDataAndId(e,t){const s=H(this.id)?this.createDaemonNode():null,r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);const o=this.createDataChangedEvent(e,r,!1);this.dispatchLocalEvent(o)}checkRowSelectable(){const e=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(e?e(this):!0)}setRowSelectable(e,t){if(this.selectable!==e){if(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_SELECTABLE_CHANGED)),t)return;if(this.beans.gridOptionsService.get("groupSelectsChildren")){const r=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:r??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(e){const t=this.beans.gridOptionsService.getCallback("getRowId");if(t)if(this.data){const s=this.getGroupKeys(!0);this.id=t({data:this.data,parentKeys:s.length>0?s:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(St.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${St.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=e}getGroupKeys(e=!1){const t=[];let s=this;for(e&&(s=s.parent);s&&s.level>=0;)t.push(s.key),s=s.parent;return t.reverse(),t}isPixelInRange(e){return!H(this.rowTop)||!H(this.rowHeight)?!1:e>=this.rowTop&&e<this.rowTop+this.rowHeight}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_TOP_CHANGED)),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_DISPLAYED_CHANGED)))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_DRAGGING_CHANGED)))}setHighlighted(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_HIGHLIGHT_CHANGED)))}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_MASTER_CHANGED)))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_GROUP_CHANGED)))}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(e,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=e,e!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=ns(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,t=!0,s=0;const r=this.__autoHeights;if(r==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(l=>{let a=r[l.getId()];if(a==null)if(this.beans.columnModel.isColSpanActive()){let u=[];switch(l.getPinned()){case"left":u=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":u=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:u=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(u.includes(l)){e=!0;return}a=-1}else{e=!0;return}else t=!1;a>s&&(s=a)}),e)||((t||s<10)&&(s=this.beans.gridOptionsService.getRowHeightForNode(this).height),s==this.rowHeight))return;this.setRowHeight(s);const n=this.beans.rowModel;n.onRowHeightChangedDebounced&&n.onRowHeightChangedDebounced()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_UI_LEVEL_CHANGED)))}setExpanded(e,t){if(this.expanded===e)return;this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_EXPANDED_CHANGED));const s=Object.assign({},this.createGlobalRowEvent(y.EVENT_ROW_GROUP_OPENED),{expanded:e,event:t||null});this.beans.rowNodeEventThrottle.dispatchExpanded(s),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gridOptionsService.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(e){this.eventService&&this.eventService.dispatchEvent(e)}setDataValue(e,t,s){const o=(()=>{var a;return typeof e!="string"?e:(a=this.beans.columnModel.getGridColumn(e))!=null?a:this.beans.columnModel.getPrimaryColumn(e)})(),n=this.getValueFromValueService(o);if(this.beans.gridOptionsService.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(o,n,t,s),!1;const l=this.beans.valueService.setValue(this,o,t,s);return this.dispatchCellChangedEvent(o,t,n),this.checkRowSelectable(),l}getValueFromValueService(e){const t=this.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.group&&this.expanded&&!this.footer&&!t,o=this.beans.gridOptionsService.getGroupIncludeFooter()({node:this}),n=this.beans.gridOptionsService.get("groupSuppressBlankHeader"),l=s&&o&&!n;return this.beans.valueService.getValue(e,this,!1,l)}dispatchEventForSaveValueReadOnly(e,t,s,r){const o=this.beans.gridOptionsService.addGridCommonParams({type:y.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),data:this.data,node:this,oldValue:t,newValue:s,value:s,source:r});this.beans.eventService.dispatchEvent(o)}setGroupValue(e,t){const s=this.beans.columnModel.getGridColumn(e);Ee(this.groupData)&&(this.groupData={});const r=s.getColId(),o=this.groupData[r];o!==t&&(this.groupData[r]=t,this.dispatchCellChangedEvent(s,t,o))}setAggData(e){const t=this.aggData;if(this.aggData=e,this.eventService){const s=r=>{const o=this.aggData?this.aggData[r]:void 0,n=t?t[r]:void 0;if(o===n)return;const l=this.beans.columnModel.lookupGridColumn(r);l&&this.dispatchCellChangedEvent(l,o,n)};for(const r in this.aggData)s(r);for(const r in e)r in this.aggData||s(r)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){const s=this.beans.gridOptionsService.get("treeData"),r=this.beans.gridOptionsService.get("isServerSideGroup");e=!this.stub&&!this.footer&&(s?!!r&&r(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(St.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&er(this.childrenAfterGroup)}dispatchCellChangedEvent(e,t,s){const r={type:St.EVENT_CELL_CHANGED,node:this,column:e,newValue:t,oldValue:s};this.dispatchLocalEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(t=>t.depthFirstSearch(e)),e(this)}calculateSelectedFromChildren(){var e;let t=!1,s=!1,r=!1;if(!((e=this.childrenAfterGroup)!=null&&e.length))return this.selectable?this.selected:null;for(let o=0;o<this.childrenAfterGroup.length;o++){const n=this.childrenAfterGroup[o];let l=n.isSelected();if(!n.selectable){const a=n.calculateSelectedFromChildren();if(a===null)continue;l=a}switch(l){case!0:t=!0;break;case!1:s=!0;break;default:r=!0;break}}if(!(r||t&&s))return t?!0:s?!1:this.selectable?this.selected:null}setSelectedInitialValue(e){this.selected=e}selectThisNode(e,t,s="api"){const r=!this.selectable&&e,o=this.selected===e;if(r||o)return!1;if(this.selected=e,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(St.EVENT_ROW_SELECTED));const l=this.sibling;l&&l.footer&&l.dispatchLocalEvent(l.createLocalRowEvent(St.EVENT_ROW_SELECTED))}const n=At(pe({},this.createGlobalRowEvent(y.EVENT_ROW_SELECTED)),{event:t||null,source:s});return this.beans.eventService.dispatchEvent(n),!0}setSelected(e,t=!1,s="api"){if(typeof s=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:e,clearSelection:t,rangeSelect:!1,source:s})}setSelectedParams(e){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(At(pe({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(e){let t=this.parent;for(;t;){if(t===e)return!0;t=t.parent}return!1}addEventListener(e,t){var s,r;this.eventService||(this.eventService=new Xo),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new Qb(this.beans.frameworkOverrides));const o=(r=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(t))!=null?r:t;this.eventService.addEventListener(e,o)}removeEventListener(e,t){var s,r;if(!this.eventService)return;const o=(r=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(t))!=null?r:t;this.eventService.removeEventListener(e,o),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(St.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(St.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(e){let t=this,s=!0,r=!1,o=null;for(;s&&!r;){const n=t.parent;H(n)&&t.firstChild?n.rowGroupColumn===e&&(r=!0,o=n):s=!1,t=n}return r?o:null}isFullWidthCell(){if(this.detail)return!0;const e=this.beans.gridOptionsService.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.key==null)return;const e=[];let t=this;for(;t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}createFooter(){if(this.sibling)return;const e=new Set(["eventService","__objectId","sticky"]),t=new St(this.beans);Object.keys(this).forEach(s=>{e.has(s)||(t[s]=this[s])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Ot.ID_PREFIX_ROW_GROUP="row-group-";Ot.ID_PREFIX_TOP_PINNED="t-";Ot.ID_PREFIX_BOTTOM_PINNED="b-";Ot.OBJECT_ID_SEQUENCE=0;Ot.EVENT_ROW_SELECTED="rowSelected";Ot.EVENT_DATA_CHANGED="dataChanged";Ot.EVENT_CELL_CHANGED="cellChanged";Ot.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";Ot.EVENT_MASTER_CHANGED="masterChanged";Ot.EVENT_GROUP_CHANGED="groupChanged";Ot.EVENT_MOUSE_ENTER="mouseEnter";Ot.EVENT_MOUSE_LEAVE="mouseLeave";Ot.EVENT_HEIGHT_CHANGED="heightChanged";Ot.EVENT_TOP_CHANGED="topChanged";Ot.EVENT_DISPLAYED_CHANGED="displayedChanged";Ot.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";Ot.EVENT_LAST_CHILD_CHANGED="lastChildChanged";Ot.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";Ot.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";Ot.EVENT_EXPANDED_CHANGED="expandedChanged";Ot.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";Ot.EVENT_SELECTABLE_CHANGED="selectableChanged";Ot.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";Ot.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";Ot.EVENT_DRAGGING_CHANGED="draggingChanged";var Ge=Ot,tw=class extends be{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const i=this.localeService.getLocaleTextFunc(),e=this.rowNode.isSelected(),t=jS(i,e),[s,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=i(s,r);this.eCheckbox.setValue(e,!0),this.eCheckbox.setInputAriaLabel(`${o} (${t})`)}onClicked(i,e,t){return this.rowNode.setSelectedParams({newValue:i,rangeSelect:t.shiftKey,groupSelectsFiltered:e,event:t,source:"checkboxSelected"})}init(i){if(this.rowNode=i.rowNode,this.column=i.column,this.overrides=i.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",s=>{vo(s)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",s=>{vo(s);const r=this.gridOptionsService.get("groupSelectsFiltered"),o=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(o,r)?this.onClicked(!0,r,s||{})===0&&this.onClicked(!1,r,s):o?this.onClicked(!1,r,s):this.onClicked(!0,r,s||{})}),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||typeof this.getIsVisible()=="function"){const s=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,s),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,s),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(i,e){return e&&(this.eCheckbox.getPreviousValue()===void 0||i===void 0)&&this.gridOptionsService.isRowModelType("clientSide")}showOrHideSelect(){var i,e,t;let s=this.rowNode.selectable;const r=this.getIsVisible();if(s)if(typeof r=="function"){const n=(i=this.overrides)==null?void 0:i.callbackParams;if(!this.column)s=r(At(pe({},n),{node:this.rowNode,data:this.rowNode.data}));else{const l=this.column.createColumnFunctionCallbackParams(this.rowNode);s=r(pe(pe({},n),l))}}else s=r??!1;if((e=this.column)==null?void 0:e.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!s),this.setVisible(!0),this.setDisplayed(!0);return}if((t=this.overrides)!=null&&t.removeHidden){this.setDisplayed(s);return}this.setVisible(s)}getIsVisible(){var i,e;return this.overrides?this.overrides.isVisible:(e=(i=this.column)==null?void 0:i.getColDef())==null?void 0:e.checkboxSelection}};f([q("eCheckbox")],tw.prototype,"eCheckbox",2);f([K],tw.prototype,"postConstruct",1);var iV=(i=>(i[i.Left=0]="Left",i[i.Right=1]="Right",i))(iV||{}),Fe=class extends U{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=yr("columnMovePin",this.gridOptionsService,null),this.eHideIcon=yr("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=yr("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=yr("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=yr("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=yr("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=yr("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=yr("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=yr("dropNotAllowed",this.gridOptionsService,null)}addDragSource(i,e=!1){const t={eElement:i.eElement,dragStartPixels:i.dragStartPixels,onDragStart:this.onDragStart.bind(this,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:e};this.dragSourceAndParamsList.push({params:t,dragSource:i}),this.dragService.addDragSource(t)}removeDragSource(i){const e=this.dragSourceAndParamsList.find(t=>t.dragSource===i);e&&(this.dragService.removeDragSource(e.params),bs(this.dragSourceAndParamsList,e))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(i=>this.dragService.removeDragSource(i.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(i,e){this.dragging=!0,this.dragSource=i,this.eventLastTime=e,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(i){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const e=this.createDropTargetEvent(this.lastDropTarget,i,null,null,!1);this.lastDropTarget.onDragStop(e)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(i,e){var t,s,r,o;const n=this.getHorizontalDirection(i),l=this.getVerticalDirection(i);this.eventLastTime=i,this.positionGhost(i);const a=this.dropTargets.filter(d=>this.isMouseOnDropTarget(i,d)),u=this.findCurrentDropTarget(i,a);if(u!==this.lastDropTarget)this.leaveLastTargetIfExists(i,n,l,e),this.lastDropTarget!==null&&u===null&&((s=(t=this.dragSource).onGridExit)==null||s.call(t,this.dragItem)),this.lastDropTarget===null&&u!==null&&((o=(r=this.dragSource).onGridEnter)==null||o.call(r,this.dragItem)),this.enterDragTargetIfExists(u,i,n,l,e),this.lastDropTarget=u;else if(u&&u.onDragging){const d=this.createDropTargetEvent(u,i,n,l,e);u.onDragging(d)}}getAllContainersFromDropTarget(i){const e=i.getSecondaryContainers?i.getSecondaryContainers():null,t=[[i.getContainer()]];return e?t.concat(e):t}allContainersIntersect(i,e){for(const t of e){const s=t.getBoundingClientRect();if(s.width===0||s.height===0)return!1;const r=i.clientX>=s.left&&i.clientX<s.right,o=i.clientY>=s.top&&i.clientY<s.bottom;if(!r||!o)return!1}return!0}isMouseOnDropTarget(i,e){const t=this.getAllContainersFromDropTarget(e);let s=!1;for(const r of t)if(this.allContainersIntersect(i,r)){s=!0;break}return e.targetContainsSource&&!e.getContainer().contains(this.dragSource.eElement)?!1:s&&e.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(i,e){const t=e.length;if(t===0)return null;if(t===1)return e[0];const r=this.gridOptionsService.getRootNode().elementsFromPoint(i.clientX,i.clientY);for(const o of r)for(const n of e)if(F0(this.getAllContainersFromDropTarget(n)).indexOf(o)!==-1)return n;return null}enterDragTargetIfExists(i,e,t,s,r){if(i){if(i.onDragEnter){const o=this.createDropTargetEvent(i,e,t,s,r);i.onDragEnter(o)}this.setGhostIcon(i.getIconName?i.getIconName():null)}}leaveLastTargetIfExists(i,e,t,s){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const r=this.createDropTargetEvent(this.lastDropTarget,i,e,t,s);this.lastDropTarget.onDragLeave(r)}this.setGhostIcon(null)}}addDropTarget(i){this.dropTargets.push(i)}removeDropTarget(i){this.dropTargets=this.dropTargets.filter(e=>e.getContainer()!==i.getContainer())}hasExternalDropZones(){return this.dropTargets.some(i=>i.external)}findExternalZone(i){return this.dropTargets.filter(t=>t.external).find(t=>t.getContainer()===i.getContainer())||null}getHorizontalDirection(i){const e=this.eventLastTime&&this.eventLastTime.clientX,t=i.clientX;return e===t?null:e>t?0:1}getVerticalDirection(i){const e=this.eventLastTime&&this.eventLastTime.clientY,t=i.clientY;return e===t?null:e>t?0:1}createDropTargetEvent(i,e,t,s,r){const o=i.getContainer(),n=o.getBoundingClientRect(),{gridApi:l,columnApi:a,dragItem:u,dragSource:d}=this,c=e.clientX-n.left,h=e.clientY-n.top;return{event:e,x:c,y:h,vDirection:s,hDirection:t,dragSource:d,fromNudge:r,dragItem:u,api:l,columnApi:a,dropZoneTarget:o}}positionGhost(i){const e=this.eGhost;if(!e)return;const s=e.getBoundingClientRect().height,r=sk()-2,o=rk()-2,n=fP(e.offsetParent),{clientY:l,clientX:a}=i;let u=l-n.top-s/2,d=a-n.left-10;const c=this.gridOptionsService.getDocument(),h=c.defaultView||window,p=h.pageYOffset||c.documentElement.scrollTop,m=h.pageXOffset||c.documentElement.scrollLeft;r>0&&d+e.clientWidth>r+m&&(d=r+m-e.clientWidth),d<0&&(d=0),o>0&&u+e.clientHeight>o+p&&(u=o+p-e.clientHeight),u<0&&(u=0),e.style.left=`${d}px`,e.style.top=`${u}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Is(Fe.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:i}=this.environment.getTheme();i&&this.eGhost.classList.add(i),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const e=this.eGhost.querySelector(".ag-dnd-ghost-label");let t=this.dragSource.dragItemName;BS(t)&&(t=t()),e.innerHTML=gi(t)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const s=this.gridOptionsService.getDocument();let r=null,o=null;try{r=s.fullscreenElement}catch{}finally{r||(r=this.gridOptionsService.getRootNode());const n=r.querySelector("body");n?o=n:r instanceof ShadowRoot?o=r:r instanceof Document?o=r==null?void 0:r.documentElement:o=r}this.eGhostParent=o,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(i,e=!1){ni(this.eGhostIcon);let t=null;switch(i||(i=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():Fe.ICON_NOT_ALLOWED),i){case Fe.ICON_PINNED:t=this.ePinnedIcon;break;case Fe.ICON_MOVE:t=this.eMoveIcon;break;case Fe.ICON_LEFT:t=this.eLeftIcon;break;case Fe.ICON_RIGHT:t=this.eRightIcon;break;case Fe.ICON_GROUP:t=this.eGroupIcon;break;case Fe.ICON_AGGREGATE:t=this.eAggregateIcon;break;case Fe.ICON_PIVOT:t=this.ePivotIcon;break;case Fe.ICON_NOT_ALLOWED:t=this.eDropNotAllowedIcon;break;case Fe.ICON_HIDE:t=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",e),!(t===this.eHideIcon&&this.gridOptionsService.get("suppressDragLeaveHidesColumns"))&&t&&this.eGhostIcon.appendChild(t)}};Fe.ICON_PINNED="pinned";Fe.ICON_MOVE="move";Fe.ICON_LEFT="left";Fe.ICON_RIGHT="right";Fe.ICON_GROUP="group";Fe.ICON_AGGREGATE="aggregate";Fe.ICON_PIVOT="pivot";Fe.ICON_NOT_ALLOWED="notAllowed";Fe.ICON_HIDE="hide";Fe.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;f([D("dragService")],Fe.prototype,"dragService",2);f([D("mouseEventService")],Fe.prototype,"mouseEventService",2);f([D("columnApi")],Fe.prototype,"columnApi",2);f([D("gridApi")],Fe.prototype,"gridApi",2);f([K],Fe.prototype,"init",1);f([Ur],Fe.prototype,"clearDragSourceParamsList",1);Fe=f([ie("dragAndDropService")],Fe);var au=class extends be{constructor(i,e,t,s,r,o){super(),this.cellValueFn=i,this.rowNode=e,this.column=t,this.customGui=s,this.dragStartPixels=r,this.suppressVisibilityChange=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Nt("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const i=this.gridOptionsService.get("rowDragManaged")?new oV(this,this.beans,this.rowNode,this.column):new rV(this,this.beans,this.rowNode,this.column);this.createManagedBean(i,this.beans.context)}}setDragElement(i,e){this.setTemplateFromElement(i),this.addDragSource(e)}getSelectedNodes(){if(!this.gridOptionsService.get("rowDragMultiRow"))return[this.rowNode];const e=this.beans.selectionService.getSelectedNodes();return e.indexOf(this.rowNode)!==-1?e:[this.rowNode]}checkCompatibility(){const i=this.gridOptionsService.get("rowDragManaged");this.gridOptionsService.get("treeData")&&i&&ve("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(i){if(i){const e=i.getColDef();if(e.rowDragText)return e.rowDragText}return this.gridOptionsService.get("rowDragText")}addDragSource(i=4){this.dragSource&&this.removeDragSource();const e=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var t;const s=this.getDragItem(),r=((t=s.rowNodes)==null?void 0:t.length)||1,o=this.getRowDragText(this.column);return o?o(s,r):r===1?this.cellValueFn():`${r} ${e("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:i,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};f([D("beans")],au.prototype,"beans",2);f([K],au.prototype,"postConstruct",1);f([Ur],au.prototype,"removeDragSource",1);var sV=class extends U{constructor(i,e,t){super(),this.parent=i,this.rowNode=e,this.column=t}setDisplayedOrVisible(i){const e={skipAriaHidden:!0};if(i)this.parent.setDisplayed(!1,e);else{let t=!0,s=!1;this.column&&(t=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),s=BS(this.column.getColDef().rowDrag)),s?(this.parent.setDisplayed(!0,e),this.parent.setVisible(t,e)):(this.parent.setDisplayed(t,e),this.parent.setVisible(!0,e))}}},rV=class extends sV{constructor(i,e,t,s){super(i,t,s),this.beans=e}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,y.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const i=this.gridOptionsService.get("suppressRowDrag");this.setDisplayedOrVisible(i)}};f([K],rV.prototype,"postConstruct",1);var oV=class extends sV{constructor(i,e,t,s){super(i,t,s),this.beans=e}postConstruct(){this.addManagedListener(this.beans.eventService,y.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,y.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,y.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),t=e&&e.shouldPreventRowMove(),s=this.gridOptionsService.get("suppressRowDrag"),r=this.beans.dragAndDropService.hasExternalDropZones(),o=t&&!r||s;this.setDisplayedOrVisible(o)}};f([K],oV.prototype,"postConstruct",1);var rh=class extends U{init(i,e,t,s,r,o,n){var l,a,u,d;this.params=n,this.eGui=e,this.eCheckbox=t,this.eExpanded=s,this.eContracted=r,this.comp=i,this.compClass=o;const{node:c,value:h,colDef:p}=n,m=this.isTopLevelFooter();if(!m){if(this.isEmbeddedRowMismatch())return;if(c.footer&&this.gridOptionsService.get("groupHideOpenParents")){const E=p&&p.showRowGroup,C=c.rowGroupColumn&&c.rowGroupColumn.getColId();if(E!==C)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!m){const S=n.node.footer&&n.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(F=>{var O;return F.getColId()===((O=n.colDef)==null?void 0:O.showRowGroup)}),C=this.gridOptionsService.get("groupDisplayType")!="multipleColumns"||this.gridOptionsService.get("treeData")||this.gridOptionsService.get("showOpenedGroup")&&!n.node.footer&&(!n.node.group||n.node.rowGroupIndex!=null&&n.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(F=>{var O;return F.getColId()===((O=n.colDef)==null?void 0:O.showRowGroup)})),v=!c.group&&(((l=this.params.colDef)==null?void 0:l.field)||((a=this.params.colDef)==null?void 0:a.valueGetter)),R=this.isExpandable(),b=this.columnModel.isPivotMode()&&c.leafGroup&&((u=c.rowGroupColumn)==null?void 0:u.getColId())===((d=n.column)==null?void 0:d.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!R&&!v&&!C&&!S&&!b)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var i,e;const t=(i=this.params.colDef)==null?void 0:i.cellAriaRole,s=(e=this.params.column)==null?void 0:e.getColDef().cellAriaRole;return t||s||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:i,eGridCell:e}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){Y0(e);return}const t=()=>{Rn(e,!!i.expanded)};this.expandListener=this.addManagedListener(i,Ge.EVENT_EXPANDED_CHANGED,t)||null,t()}isTopLevelFooter(){if(!this.gridOptionsService.get("groupIncludeTotalFooter")||this.params.value!=null||this.params.node.level!=-1)return!1;const i=this.params.colDef;if(i==null||i.showRowGroup===!0)return!0;const t=this.columnModel.getRowGroupColumns();return!t||t.length===0?!0:t[0].getId()===i.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gridOptionsService.get("embedFullWidthRows"))return!1;const i=this.params.pinned==="left",e=this.params.pinned==="right",t=!i&&!e;return this.gridOptionsService.get("enableRtl")?this.columnModel.isPinningLeft()?!e:!t:this.columnModel.isPinningLeft()?!i:!t}findDisplayedGroupNode(){const i=this.params.column,e=this.params.node;if(this.showingValueForOpenedParent){let t=e.parent;for(;t!=null;){if(t.rowGroupColumn&&i.isRowGroupDisplayed(t.rowGroupColumn.getId())){this.displayedGroupNode=t;break}t=t.parent}}Ee(this.displayedGroupNode)&&(this.displayedGroupNode=e)}setupShowingValueForOpenedParent(){const i=this.params.node,e=this.params.column;if(!this.gridOptionsService.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!i.groupData){this.showingValueForOpenedParent=!1;return}if(i.rowGroupColumn!=null){const r=i.rowGroupColumn.getId();if(e.isRowGroupDisplayed(r)){this.showingValueForOpenedParent=!1;return}}const s=i.groupData[e.getId()]!=null;this.showingValueForOpenedParent=s}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var i;const e=this.adjustParamsWithDetailsFromRelatedColumn(),t=this.getInnerCompDetails(e),{valueFormatted:s,value:r}=e;let o=s;if(o==null){const n=this.displayedGroupNode.rowGroupColumn&&((i=this.params.column)==null?void 0:i.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&n?o=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):o=r??null}this.comp.setInnerRenderer(t,o)}adjustParamsWithDetailsFromRelatedColumn(){const i=this.displayedGroupNode.rowGroupColumn,e=this.params.column;if(!i)return this.params;if(e!=null&&!e.isRowGroupDisplayed(i.getId()))return this.params;const s=this.params,{value:r,node:o}=this.params,n=this.valueFormatterService.formatValue(i,o,r);return At(pe({},s),{valueFormatted:n})}addFooterValue(){const i=this.params.footerValueGetter;let e="";if(i){const s=Kb(this.params);s.value=this.params.value,typeof i=="function"?e=i(s):typeof i=="string"?e=this.expressionService.evaluate(i,s):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else e=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(this.params.value!=null?this.params.value:"");const t=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(t,e)}getInnerCompDetails(i){if(i.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),i);const e=this.userComponentFactory.getInnerRendererDetails(i,i),t=n=>n&&n.componentClass==this.compClass;if(e&&!t(e))return e;const s=this.displayedGroupNode.rowGroupColumn,r=s?s.getColDef():void 0;if(!r)return;const o=this.userComponentFactory.getCellRendererDetails(r,i);if(o&&!t(o))return o;if(t(o)&&r.cellRendererParams&&r.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(r.cellRendererParams,i)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Ge.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const i=this.displayedGroupNode.allChildrenCount,s=this.isShowRowGroupForThisRow()&&i!=null&&i>=0?`(${i})`:"";this.comp.setChildCount(s)}isShowRowGroupForThisRow(){if(this.gridOptionsService.get("treeData"))return!0;const i=this.displayedGroupNode.rowGroupColumn;if(!i)return!1;const e=this.params.column;return e==null||e.isRowGroupDisplayed(i.getId())}addExpandAndContract(){var i;const e=this.params,t=Nt("groupExpanded",this.gridOptionsService,null),s=Nt("groupContracted",this.gridOptionsService,null);t&&this.eExpanded.appendChild(t),s&&this.eContracted.appendChild(s);const r=e.eGridCell;!(((i=this.params.column)==null?void 0:i.isCellEditable(e.node))&&this.gridOptionsService.get("enableGroupEdit"))&&this.isExpandable()&&!e.suppressDoubleClickExpand&&this.addManagedListener(r,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(r,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,Ge.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const n=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Ge.EVENT_ALL_CHILDREN_COUNT_CHANGED,n),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_MASTER_CHANGED,n),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_GROUP_CHANGED,n),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_HAS_CHILDREN_CHANGED,n)}onExpandClicked(i){ho(i)||(vo(i),this.onExpandOrContract(i))}onExpandOrContract(i){const e=this.displayedGroupNode,t=!e.expanded;!t&&e.sticky&&this.scrollToStickyNode(e),e.setExpanded(t,i)}scrollToStickyNode(i){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(i.rowTop-i.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const i=this.displayedGroupNode,e=this.columnModel.isPivotMode()&&i.leafGroup;if(!(i.isExpandable()&&!i.footer&&!e))return!1;const s=this.params.column;return s!=null&&typeof s.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){const{params:i,displayedGroupNode:e,columnModel:t}=this,{node:s}=i,r=this.isExpandable();if(r){const u=this.showingValueForOpenedParent?!0:s.expanded;this.comp.setExpandedDisplayed(u),this.comp.setContractedDisplayed(!u)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const o=t.isPivotMode(),n=o&&e.leafGroup,l=r&&!n,a=s.footer&&s.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",l),this.comp.addOrRemoveCssClass("ag-row-group",l),o?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",n):a||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!l)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const i=this.params.node;this.params.suppressPadding||(this.addManagedListener(i,Ge.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gridOptionsService.get("groupHideOpenParents"))return;const i=this.params,e=i.node,t=!!i.colDef,s=this.gridOptionsService.get("treeData"),o=!t||s||i.colDef.showRowGroup===!0?e.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+o,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const i=new au(()=>this.params.value,this.params.node);this.createManagedBean(i,this.context),this.eGui.insertAdjacentElement("afterbegin",i.getGui())}isUserWantsSelected(){const i=this.params.checkbox;return typeof i=="function"||i===!0}addCheckboxIfNeeded(){const i=this.displayedGroupNode,e=this.isUserWantsSelected()&&!i.footer&&!i.rowPinned&&!i.detail;if(e){const t=new tw;this.getContext().createBean(t),t.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(t.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(t))}this.comp.setCheckboxVisible(e)}onKeyDown(i){!(i.key===_.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(i)}onCellDblClicked(i){if(ho(i))return;fv(this.eExpanded,i)||fv(this.eContracted,i)||this.onExpandOrContract(i)}};f([D("expressionService")],rh.prototype,"expressionService",2);f([D("valueFormatterService")],rh.prototype,"valueFormatterService",2);f([D("columnModel")],rh.prototype,"columnModel",2);f([D("userComponentFactory")],rh.prototype,"userComponentFactory",2);f([D("ctrlsService")],rh.prototype,"ctrlsService",2);var Mu=class nV extends be{constructor(){super(nV.TEMPLATE)}init(e){const t={setInnerRenderer:(n,l)=>this.setRenderDetails(n,l),setChildCount:n=>this.eChildCount.textContent=n,addOrRemoveCssClass:(n,l)=>this.addOrRemoveCssClass(n,l),setContractedDisplayed:n=>ze(this.eContracted,n),setExpandedDisplayed:n=>ze(this.eExpanded,n),setCheckboxVisible:n=>this.eCheckbox.classList.toggle("ag-invisible",!n)},s=this.createManagedBean(new rh),r=!e.colDef,o=this.getGui();s.init(t,o,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),r&&Wt(o,s.getCellAriaRole())}setRenderDetails(e,t){if(e){const s=e.newAgStackInstance();if(!s)return;s.then(r=>{if(!r)return;const o=()=>this.context.destroyBean(r);this.isAlive()?(this.eValue.appendChild(r.getGui()),this.addDestroyFunc(o)):o()})}else this.eValue.innerText=t}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};Mu.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;f([q("eExpanded")],Mu.prototype,"eExpanded",2);f([q("eContracted")],Mu.prototype,"eContracted",2);f([q("eCheckbox")],Mu.prototype,"eCheckbox",2);f([q("eValue")],Mu.prototype,"eValue",2);f([q("eChildCount")],Mu.prototype,"eChildCount",2);var lL=Mu,iw=class lV extends be{constructor(){super(lV.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Nt("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}};iw.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;f([q("eLoadingIcon")],iw.prototype,"eLoadingIcon",2);f([q("eLoadingText")],iw.prototype,"eLoadingText",2);var Qq=iw,aV=class uV extends be{constructor(){super()}destroy(){super.destroy()}init(e){const t=this.gridOptionsService.get("overlayLoadingTemplate");if(this.setTemplate(t??uV.DEFAULT_LOADING_OVERLAY_TEMPLATE),!t){const s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("loadingOoo","Loading...")})}}};aV.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var Xq=aV,dV=class cV extends be{constructor(){super()}destroy(){super.destroy()}init(e){const t=this.gridOptionsService.get("overlayNoRowsTemplate");if(this.setTemplate(t??cV.DEFAULT_NO_ROWS_TEMPLATE),!t){const s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("noRowsToShow","No Rows To Show")})}}};dV.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var Jq=dV,Zq=class extends Iu{constructor(){super('<div class="ag-tooltip"></div>')}init(i){const{value:e}=i;this.getGui().textContent=gi(e,!0)}},eQ=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(i,e){this.eInput=i,this.params=e,e.max!=null&&i.setMax(e.max),e.min!=null&&i.setMin(e.min),e.precision!=null&&i.setPrecision(e.precision),e.step!=null&&i.setStep(e.step);const t=i.getInputElement();e.preventStepping?i.addManagedListener(t,"keydown",this.preventStepping):e.showStepperButtons&&t.classList.add("ag-number-field-input-stepper")}preventStepping(i){(i.key===_.UP||i.key===_.DOWN)&&i.preventDefault()}getValue(){const i=this.eInput.getValue();if(!H(i)&&!H(this.params.value))return this.params.value;let e=this.params.parseValue(i);if(e==null)return e;if(typeof e=="string"){if(e==="")return null;e=Number(e)}return isNaN(e)?null:e}getStartValue(){return this.params.value}},tQ=class extends Pf{constructor(){super(new eQ)}},iQ=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(i,e){this.eInput=i,this.params=e,e.min!=null&&i.setMin(e.min),e.max!=null&&i.setMax(e.max),e.step!=null&&i.setStep(e.step)}getValue(){const i=this.eInput.getDate();return!H(i)&&!H(this.params.value)?this.params.value:i??null}getStartValue(){const{value:i}=this.params;if(i instanceof Date)return Dn(i,!1)}},sQ=class extends Pf{constructor(){super(new iQ)}},rQ=class{constructor(i){this.getDataTypeService=i}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(i,e){this.eInput=i,this.params=e,e.min!=null&&i.setMin(e.min),e.max!=null&&i.setMax(e.max),e.step!=null&&i.setStep(e.step)}getValue(){const i=this.formatDate(this.eInput.getDate());return!H(i)&&!H(this.params.value)?this.params.value:this.params.parseValue(i??"")}getStartValue(){var i,e;return Dn((e=this.parseDate((i=this.params.value)!=null?i:void 0))!=null?e:null,!1)}parseDate(i){return this.getDataTypeService().getDateParserFunction(this.params.column)(i)}formatDate(i){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(i)}},hV=class extends Pf{constructor(){super(new rQ(()=>this.dataTypeService))}};f([D("dataTypeService")],hV.prototype,"dataTypeService",2);var xP=class pV extends be{constructor(){super(pV.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),eP(t,"polite"),this.addManagedListener(t,"click",r=>{if(vo(r),this.eCheckbox.isDisabled())return;const o=this.eCheckbox.getValue();this.onCheckboxChanged(o)}),this.addManagedListener(t,"dblclick",r=>{vo(r)});const s=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",r=>{if(r.key===_.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===s.activeElement&&this.eCheckbox.toggle();const o=this.eCheckbox.getValue();this.onCheckboxChanged(o),r.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t,s,r;let o,n=!0;if(e.node.group&&e.column){const c=e.column.getColId();c.startsWith(dg)?o=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[c]!==void 0?o=(t=e.value)!=null?t:void 0:n=!1}else o=(s=e.value)!=null?s:void 0;if(!n){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(o);const l=e.disabled!=null?e.disabled:!((r=e.column)!=null&&r.isCellEditable(e.node));this.eCheckbox.setDisabled(l);const a=this.localeService.getLocaleTextFunc(),u=jS(a,o),d=l?u:`${a("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;this.eCheckbox.setInputAriaLabel(d)}onCheckboxChanged(e){const{column:t,node:s,rowIndex:r,value:o}=this.params,n={type:y.EVENT_CELL_EDITING_STARTED,column:t,colDef:t==null?void 0:t.getColDef(),data:s.data,node:s,rowIndex:r,rowPinned:s.rowPinned,value:o};this.eventService.dispatchEvent(n);const l=this.params.node.setDataValue(this.params.column,e,"edit"),a={type:y.EVENT_CELL_EDITING_STOPPED,column:t,colDef:t==null?void 0:t.getColDef(),data:s.data,node:s,rowIndex:r,rowPinned:s.rowPinned,value:o,oldValue:o,newValue:e,valueChanged:l};this.eventService.dispatchEvent(a)}};xP.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;f([q("eCheckbox")],xP.prototype,"eCheckbox",2);var oQ=xP,gV=class extends Iu{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(i){var e;this.params=i;const t=(e=i.value)!=null?e:void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListener(this.eCheckbox,y.EVENT_FIELD_VALUE_CHANGED,r=>this.setAriaLabel(r.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(i){const e=this.localeService.getLocaleTextFunc(),t=jS(e,i),s=e("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${t})`)}};f([q("eCheckbox")],gV.prototype,"eCheckbox",2);var nQ=class extends be{constructor(){super(),this.setTemplate("<div></div>")}init(i){var e;this.params=i,this.cssClassPrefix=(e=this.params.cssClassPrefix)!=null?e:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;const i=Is(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?i.appendChild(Nt("check",this.gridOptionsService)):this.params.icon&&(Sf(this.params.icon)?i.appendChild(this.params.icon):typeof this.params.icon=="string"?i.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(i)}addName(){const i=Is(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(i)}addShortcut(){if(this.params.isCompact)return;const i=Is(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(i)}addSubMenu(){const i=Is(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),e=this.getGui();if(this.params.subMenu){const t=this.gridOptionsService.get("enableRtl")?"smallLeft":"smallRight";Rn(e,!1),i.appendChild(Nt(t,this.gridOptionsService))}e.appendChild(i)}getClassName(i){return`${this.cssClassPrefix}-${i}`}destroy(){super.destroy()}},yv=class extends U{constructor(){super(...arguments),this.agGridDefaults={agDateInput:Bk,agColumnHeader:XR,agColumnGroupHeader:$q,agSortIndicator:Qk,agTextColumnFloatingFilter:zq,agNumberColumnFloatingFilter:Uq,agDateColumnFloatingFilter:ew,agReadOnlyFloatingFilter:DP,agAnimateShowChangeCellRenderer:eV,agAnimateSlideCellRenderer:tV,agGroupCellRenderer:lL,agGroupRowRenderer:lL,agLoadingCellRenderer:Qq,agCheckboxCellRenderer:oQ,agCellEditor:nL,agTextCellEditor:nL,agNumberCellEditor:tQ,agDateCellEditor:sQ,agDateStringCellEditor:hV,agSelectCellEditor:MP,agLargeTextCellEditor:Kq,agCheckboxCellEditor:gV,agTextColumnFilter:LP,agNumberColumnFilter:Kk,agDateColumnFilter:Vk,agLoadingOverlay:Xq,agNoRowsOverlay:Jq,agTooltipComponent:Zq,agMenuItem:nQ},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){this.gridOptions.components!=null&&tr(this.gridOptions.components,(i,e)=>this.registerJsComponent(i,e))}registerDefaultComponent(i,e){if(this.agGridDefaults[i]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[i]=e}registerJsComponent(i,e){this.jsComps[i]=e}retrieve(i,e){const t=(l,a)=>({componentFromFramework:a,component:l}),s=this.getFrameworkOverrides().frameworkComponent(e,this.gridOptions.components);if(s!=null)return t(s,!0);const r=this.jsComps[e];if(r){const l=this.getFrameworkOverrides().isFrameworkComponent(r);return t(r,l)}const o=this.agGridDefaults[e];if(o)return t(o,!1);const n=this.enterpriseAgDefaultCompsModule[e];return n?wt.__assertRegistered(n,`AG Grid '${i}' component: ${e}`,this.context.getGridId()):ka(()=>{this.warnAboutMissingComponent(i,e)},"MissingComp"+e),null}warnAboutMissingComponent(i,e){const t=[...Object.keys(this.agGridDefaults).filter(r=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(r)),...Object.keys(this.jsComps)],s=wf(e,t,!0,.8).values;console.warn(`AG Grid: Could not find '${e}' component. It was configured as "${i}: '${e}'" but it wasn't found in the list of registered components.`),s.length>0&&console.warn(`         Did you mean: [${s.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};f([D("gridOptions")],yv.prototype,"gridOptions",2);f([K],yv.prototype,"init",1);yv=f([ie("userComponentRegistry")],yv);var lQ={propertyName:"dateComponent",cellRenderer:!1},aQ={propertyName:"headerComponent",cellRenderer:!1},uQ={propertyName:"headerGroupComponent",cellRenderer:!1},aL={propertyName:"cellRenderer",cellRenderer:!0},dQ={propertyName:"cellEditor",cellRenderer:!1},uL={propertyName:"innerRenderer",cellRenderer:!0},cQ={propertyName:"loadingOverlayComponent",cellRenderer:!1},hQ={propertyName:"noRowsOverlayComponent",cellRenderer:!1},pQ={propertyName:"tooltipComponent",cellRenderer:!1},JR={propertyName:"filter",cellRenderer:!1},gQ={propertyName:"floatingFilterComponent",cellRenderer:!1},fQ={propertyName:"toolPanel",cellRenderer:!1},mQ={propertyName:"statusPanel",cellRenderer:!1},CQ={propertyName:"fullWidthCellRenderer",cellRenderer:!0},vQ={propertyName:"loadingCellRenderer",cellRenderer:!0},SQ={propertyName:"groupRowRenderer",cellRenderer:!0},wQ={propertyName:"detailCellRenderer",cellRenderer:!0},yQ={propertyName:"menuItem",cellRenderer:!1},fV=class{static getFloatingFilterType(i){return this.filterToFloatingFilterMapping[i]}};fV.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var uu=class extends U{getHeaderCompDetails(i,e){return this.getCompDetails(i,aQ,"agColumnHeader",e)}getHeaderGroupCompDetails(i){const e=i.columnGroup.getColGroupDef();return this.getCompDetails(e,uQ,"agColumnGroupHeader",i)}getFullWidthCellRendererDetails(i){return this.getCompDetails(this.gridOptions,CQ,null,i,!0)}getFullWidthLoadingCellRendererDetails(i){return this.getCompDetails(this.gridOptions,vQ,"agLoadingCellRenderer",i,!0)}getFullWidthGroupCellRendererDetails(i){return this.getCompDetails(this.gridOptions,SQ,"agGroupRowRenderer",i,!0)}getFullWidthDetailCellRendererDetails(i){return this.getCompDetails(this.gridOptions,wQ,"agDetailCellRenderer",i,!0)}getInnerRendererDetails(i,e){return this.getCompDetails(i,uL,null,e)}getFullWidthGroupRowInnerCellRenderer(i,e){return this.getCompDetails(i,uL,null,e)}getCellRendererDetails(i,e){return this.getCompDetails(i,aL,null,e)}getCellEditorDetails(i,e){return this.getCompDetails(i,dQ,"agCellEditor",e,!0)}getFilterDetails(i,e,t){return this.getCompDetails(i,JR,t,e,!0)}getDateCompDetails(i){return this.getCompDetails(this.gridOptions,lQ,"agDateInput",i,!0)}getLoadingOverlayCompDetails(i){return this.getCompDetails(this.gridOptions,cQ,"agLoadingOverlay",i,!0)}getNoRowsOverlayCompDetails(i){return this.getCompDetails(this.gridOptions,hQ,"agNoRowsOverlay",i,!0)}getTooltipCompDetails(i){return this.getCompDetails(i.colDef,pQ,"agTooltipComponent",i,!0)}getSetFilterCellRendererDetails(i,e){return this.getCompDetails(i,aL,null,e)}getFloatingFilterCompDetails(i,e,t){return this.getCompDetails(i,gQ,t,e)}getToolPanelCompDetails(i,e){return this.getCompDetails(i,fQ,null,e,!0)}getStatusPanelCompDetails(i,e){return this.getCompDetails(i,mQ,null,e,!0)}getMenuItemCompDetails(i,e){return this.getCompDetails(i,yQ,"agMenuItem",e,!0)}getCompDetails(i,e,t,s,r=!1){const{propertyName:o,cellRenderer:n}=e;let{compName:l,jsComp:a,fwComp:u,paramsFromSelector:d,popupFromSelector:c,popupPositionFromSelector:h}=this.getCompKeys(i,e,s);const p=C=>{const v=this.userComponentRegistry.retrieve(o,C);v&&(a=v.componentFromFramework?void 0:v.component,u=v.componentFromFramework?v.component:void 0)};if(l!=null&&p(l),a==null&&u==null&&t!=null&&p(t),a&&n&&!this.agComponentUtils.doesImplementIComponent(a)&&(a=this.agComponentUtils.adaptFunction(o,a)),!a&&!u){r&&console.error(`AG Grid: Could not find component ${l}, did you forget to configure this component?`);return}const m=this.mergeParamsWithApplicationProvidedParams(i,e,s,d),S=a==null,E=a||u;return{componentFromFramework:S,componentClass:E,params:m,type:e,popupFromSelector:c,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(E,S,m,e)}}getCompKeys(i,e,t){const{propertyName:s}=e;let r,o,n,l,a,u;if(i){const d=i,c=d[s+"Selector"],h=c?c(t):null,p=m=>{typeof m=="string"?r=m:m!=null&&m!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(m)?n=m:o=m)};h?(p(h.component),l=h.params,a=h.popup,u=h.popupPosition):p(d[s])}return{compName:r,jsComp:o,fwComp:n,paramsFromSelector:l,popupFromSelector:a,popupPositionFromSelector:u}}newAgStackInstance(i,e,t,s){const r=s.propertyName,o=!e;let n;if(o)n=new i;else{const a=this.componentMetadataProvider.retrieve(r);n=this.frameworkComponentWrapper.wrap(i,a.mandatoryMethodList,a.optionalMethodList,s)}const l=this.initComponent(n,t);return l==null?Pr.resolve(n):l.then(()=>n)}mergeParamsWithApplicationProvidedParams(i,e,t,s=null){const r=this.gridOptionsService.getGridCommonParams();rr(r,t);const o=i,n=o&&o[e.propertyName+"Params"];if(typeof n=="function"){const l=n(t);rr(r,l)}else typeof n=="object"&&rr(r,n);return rr(r,s),r}initComponent(i,e){if(this.context.createBean(i),i.init!=null)return i.init(e)}getDefaultFloatingFilterType(i,e){if(i==null)return null;let t=null,{compName:s,jsComp:r,fwComp:o}=this.getCompKeys(i,JR);return s?t=fV.getFloatingFilterType(s):r==null&&o==null&&i.filter===!0&&(t=e()),t}};f([D("gridOptions")],uu.prototype,"gridOptions",2);f([D("agComponentUtils")],uu.prototype,"agComponentUtils",2);f([D("componentMetadataProvider")],uu.prototype,"componentMetadataProvider",2);f([D("userComponentRegistry")],uu.prototype,"userComponentRegistry",2);f([Qe("frameworkComponentWrapper")],uu.prototype,"frameworkComponentWrapper",2);uu=f([ie("userComponentFactory")],uu);var Ev=class{};Ev.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0};Ev.ALL_PROPERTIES=Object.keys(Ev.ColDefPropertyMap);var EQ=Ev,Xm=(i=>(i[i.Above=0]="Above",i[i.Below=1]="Below",i))(Xm||{}),mV=class{constructor(i){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=i.scrollContainer,this.scrollHorizontally=i.scrollAxis.indexOf("x")!==-1,this.scrollVertically=i.scrollAxis.indexOf("y")!==-1,this.scrollByTick=i.scrollByTick!=null?i.scrollByTick:20,i.onScrollCallback&&(this.onScrollCallback=i.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=i.getVerticalPosition,this.setVerticalPosition=i.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=i.getHorizontalPosition,this.setHorizontalPosition=i.setHorizontalPosition),this.shouldSkipVerticalScroll=i.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=i.shouldSkipHorizontalScroll||(()=>!1)}check(i,e=!1){const t=e||this.shouldSkipVerticalScroll();if(t&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=i.clientX<s.left+r,this.tickRight=i.clientX>s.right-r,this.tickUp=i.clientY<s.top+r&&!t,this.tickDown=i.clientY>s.bottom-r&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let i;if(i=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-i),this.tickDown&&this.setVerticalPosition(e+i)}if(this.scrollHorizontally){const e=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(e-i),this.tickRight&&this.setHorizontalPosition(e+i)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},mr=class extends U{constructor(i){super(),this.isMultiRowDrag=!1,this.eContainer=i}postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(()=>{const i=this.ctrlsService.getGridBodyCtrl();this.autoScrollService=new mV({scrollContainer:i.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>i.getScrollFeature().getVScrollPosition().top,setVerticalPosition:e=>i.getScrollFeature().setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(i){return i===2}getIconName(){return this.gridOptionsService.get("rowDragManaged")&&this.shouldPreventRowMove()?Fe.ICON_NOT_ALLOWED:Fe.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(i){if(!this.isFromThisGrid(i))return i.dragItem.rowNodes||[];const e=this.gridOptionsService.get("rowDragMultiRow"),t=[...this.selectionService.getSelectedNodes()].sort((r,o)=>r.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(r)-this.getRowIndexNumber(o)),s=i.dragItem.rowNode;return e&&t.indexOf(s)!==-1?(this.isMultiRowDrag=!0,t):(this.isMultiRowDrag=!1,[s])}onDragEnter(i){i.dragItem.rowNodes=this.getRowNodes(i),this.dispatchGridEvent(y.EVENT_ROW_DRAG_ENTER,i),this.getRowNodes(i).forEach(e=>{e.setDragging(!0)}),this.onEnterOrDragging(i)}onDragging(i){this.onEnterOrDragging(i)}isFromThisGrid(i){const{dragSourceDomDataKey:e}=i.dragSource;return e===this.gridOptionsService.getDomDataKey()}isDropZoneWithinThisGrid(i){const t=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:s}=i;return!t.contains(s)}onEnterOrDragging(i){this.dispatchGridEvent(y.EVENT_ROW_DRAG_MOVE,i),this.lastDraggingEvent=i;const e=this.mouseEventService.getNormalisedPosition(i).y;this.gridOptionsService.get("rowDragManaged")&&this.doManagedDrag(i,e),this.autoScrollService.check(i.event)}doManagedDrag(i,e){const t=this.isFromThisGrid(i),s=this.gridOptionsService.get("rowDragManaged"),r=i.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!t?this.isDropZoneWithinThisGrid(i)||this.clientSideRowModel.highlightRowAtPixel(r[0],e):this.moveRows(r,e))}getRowIndexNumber(i){return parseInt(Ze(i.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(i){const e=this.clientSideRowModel.getLastHighlightedRowNode(),t=e&&e.highlighted===1,s=this.mouseEventService.getNormalisedPosition(i).y,r=i.dragItem.rowNodes;let o=t?1:0;if(this.isFromThisGrid(i))r.forEach(n=>{n.rowTop<s&&(o-=1)}),this.moveRows(r,s,o);else{const n=this.gridOptionsService.getCallback("getRowId");let l=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===0&&l--,this.clientSideRowModel.updateRowData({add:r.map(a=>a.data).filter(a=>!this.clientSideRowModel.getRowNode(n?n({data:a,level:0}):a.id)),addIndex:l})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(i,e,t=0){this.clientSideRowModel.ensureRowsAtPixel(i,e,t)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())}addRowDropZone(i){if(!i.getContainer()){ve("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(i)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let e={getContainer:i.getContainer};i.fromGrid?e=i:(i.onDragEnter&&(e.onDragEnter=t=>{i.onDragEnter(this.draggingToRowDragEvent(y.EVENT_ROW_DRAG_ENTER,t))}),i.onDragLeave&&(e.onDragLeave=t=>{i.onDragLeave(this.draggingToRowDragEvent(y.EVENT_ROW_DRAG_LEAVE,t))}),i.onDragging&&(e.onDragging=t=>{i.onDragging(this.draggingToRowDragEvent(y.EVENT_ROW_DRAG_MOVE,t))}),i.onDragStop&&(e.onDragStop=t=>{i.onDragStop(this.draggingToRowDragEvent(y.EVENT_ROW_DRAG_END,t))})),this.dragAndDropService.addDropTarget(pe({isInterestedIn:t=>t===2,getIconName:()=>Fe.ICON_MOVE,external:!0},e))}getRowDropZone(i){const e=this.getContainer.bind(this),t=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),r=this.onDragging.bind(this),o=this.onDragStop.bind(this);return i?{getContainer:e,onDragEnter:i.onDragEnter?n=>{t(n),i.onDragEnter(this.draggingToRowDragEvent(y.EVENT_ROW_DRAG_ENTER,n))}:t,onDragLeave:i.onDragLeave?n=>{s(n),i.onDragLeave(this.draggingToRowDragEvent(y.EVENT_ROW_DRAG_LEAVE,n))}:s,onDragging:i.onDragging?n=>{r(n),i.onDragging(this.draggingToRowDragEvent(y.EVENT_ROW_DRAG_MOVE,n))}:r,onDragStop:i.onDragStop?n=>{o(n),i.onDragStop(this.draggingToRowDragEvent(y.EVENT_ROW_DRAG_END,n))}:o,fromGrid:!0}:{getContainer:e,onDragEnter:t,onDragLeave:s,onDragging:r,onDragStop:o,fromGrid:!0}}draggingToRowDragEvent(i,e){const t=this.mouseEventService.getNormalisedPosition(e).y,s=t>this.paginationProxy.getCurrentPageHeight();let r=-1,o;s||(r=this.rowModel.getRowIndexAtPixel(t),o=this.rowModel.getRow(r));let n;switch(e.vDirection){case 1:n="down";break;case 0:n="up";break;default:n=null;break}return this.gridOptionsService.addGridCommonParams({type:i,event:e.event,node:e.dragItem.rowNode,nodes:e.dragItem.rowNodes,overIndex:r,overNode:o,y:t,vDirection:n})}dispatchGridEvent(i,e){const t=this.draggingToRowDragEvent(i,e);this.eventService.dispatchEvent(t)}onDragLeave(i){this.dispatchGridEvent(y.EVENT_ROW_DRAG_LEAVE,i),this.stopDragging(i),this.gridOptionsService.get("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(i)&&(this.isMultiRowDrag=!1)}onDragStop(i){this.dispatchGridEvent(y.EVENT_ROW_DRAG_END,i),this.stopDragging(i),this.gridOptionsService.get("rowDragManaged")&&(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(i))&&!this.isDropZoneWithinThisGrid(i)&&this.moveRowAndClearHighlight(i)}stopDragging(i){this.autoScrollService.ensureCleared(),this.getRowNodes(i).forEach(e=>{e.setDragging(!1)})}};f([D("dragAndDropService")],mr.prototype,"dragAndDropService",2);f([D("rowModel")],mr.prototype,"rowModel",2);f([D("paginationProxy")],mr.prototype,"paginationProxy",2);f([D("columnModel")],mr.prototype,"columnModel",2);f([D("focusService")],mr.prototype,"focusService",2);f([D("sortController")],mr.prototype,"sortController",2);f([D("filterManager")],mr.prototype,"filterManager",2);f([D("selectionService")],mr.prototype,"selectionService",2);f([D("mouseEventService")],mr.prototype,"mouseEventService",2);f([D("ctrlsService")],mr.prototype,"ctrlsService",2);f([Qe("rangeService")],mr.prototype,"rangeService",2);f([K],mr.prototype,"postConstruct",1);var Rv=class extends U{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(i){const e=i.dragSource.eElement,t=i.mouseDownListener;if(e.removeEventListener("mousedown",t),i.touchEnabled){const s=i.touchStartListener;e.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(i){const e=this.dragSources.find(t=>t.dragSource===i);e&&(this.removeListener(e),bs(this.dragSources,e))}isDragging(){return this.dragging}addDragSource(i){const e=this.onMouseDown.bind(this,i),{eElement:t,includeTouch:s,stopPropagationForTouch:r}=i;t.addEventListener("mousedown",e);let o=null;const n=this.gridOptionsService.get("suppressTouch");s&&!n&&(o=l=>{pP(l.target)||(l.cancelable&&(l.preventDefault(),r&&l.stopPropagation()),this.onTouchStart(i,l))},t.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:i,mouseDownListener:e,touchStartListener:o,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(i,e){this.currentDragParams=i,this.dragging=!1;const t=e.touches[0];this.touchLastTime=t,this.touchStart=t;const s=a=>this.onTouchMove(a,i.eElement),r=a=>this.onTouchUp(a,i.eElement),o=a=>{a.cancelable&&a.preventDefault()},n=e.target,l=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:o,options:{passive:!1}},{target:n,type:"touchmove",listener:s,options:{passive:!0}},{target:n,type:"touchend",listener:r,options:{passive:!0}},{target:n,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(l),i.dragStartPixels===0&&this.onCommonMove(t,this.touchStart,i.eElement)}onMouseDown(i,e){const t=e;if(i.skipMouseEvent&&i.skipMouseEvent(e)||t._alreadyProcessedByDragService||(t._alreadyProcessedByDragService=!0,e.button!==0))return;this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.currentDragParams=i,this.dragging=!1,this.mouseStartEvent=e,this.startTarget=e.target;const s=a=>this.onMouseMove(a,i.eElement),r=a=>this.onMouseUp(a,i.eElement),o=a=>a.preventDefault(),n=this.gridOptionsService.getRootNode(),l=[{target:n,type:"mousemove",listener:s},{target:n,type:"mouseup",listener:r},{target:n,type:"contextmenu",listener:o}];this.addTemporaryEvents(l),i.dragStartPixels===0&&this.onMouseMove(e,i.eElement)}addTemporaryEvents(i){i.forEach(e=>{const{target:t,type:s,listener:r,options:o}=e;t.addEventListener(s,r,o)}),this.dragEndFunctions.push(()=>{i.forEach(e=>{const{target:t,type:s,listener:r,options:o}=e;t.removeEventListener(s,r,o)})})}isEventNearStartEvent(i,e){const{dragStartPixels:t}=this.currentDragParams,s=H(t)?t:4;return EP(i,e,s)}getFirstActiveTouch(i){for(let e=0;e<i.length;e++)if(i[e].identifier===this.touchStart.identifier)return i[e];return null}onCommonMove(i,e,t){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(i,e))return;this.dragging=!0;const s={type:y.EVENT_DRAG_STARTED,target:t};this.eventService.dispatchEvent(s),this.currentDragParams.onDragStart(e),this.currentDragParams.onDragging(e)}this.currentDragParams.onDragging(i)}onTouchMove(i,e){const t=this.getFirstActiveTouch(i.touches);t&&this.onCommonMove(t,this.touchStart,e)}onMouseMove(i,e){var t;Tn()&&((t=this.gridOptionsService.getDocument().getSelection())==null||t.removeAllRanges()),this.shouldPreventMouseEvent(i)&&i.preventDefault(),this.onCommonMove(i,this.mouseStartEvent,e)}shouldPreventMouseEvent(i){const e=this.gridOptionsService.get("enableCellTextSelection"),t=i.type==="mousemove";return e&&t&&i.cancelable&&this.mouseEventService.isEventFromThisGrid(i)&&!this.isOverFormFieldElement(i)}isOverFormFieldElement(i){const e=i.target,t=e==null?void 0:e.tagName.toLocaleLowerCase();return!!(t!=null&&t.match("^a$|textarea|input|select|button"))}onTouchUp(i,e){let t=this.getFirstActiveTouch(i.changedTouches);t||(t=this.touchLastTime),this.onUpCommon(t,e)}onMouseUp(i,e){this.onUpCommon(i,e)}onUpCommon(i,e){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(i);const t={type:y.EVENT_DRAG_STOPPED,target:e};this.eventService.dispatchEvent(t)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(t=>t()),this.dragEndFunctions.length=0}};f([D("mouseEventService")],Rv.prototype,"mouseEventService",2);f([Ur],Rv.prototype,"removeAllListeners",1);Rv=f([ie("dragService")],Rv);var Ny="ag-list-item-hovered",CV=class extends U{constructor(i,e,t){super(),this.comp=i,this.virtualList=e,this.params=t,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(i){this.currentDragValue=this.params.getCurrentDragValue(i),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){const i={isInterestedIn:e=>e===this.params.dragSourceType,getIconName:()=>this.moveBlocked?Fe.ICON_PINNED:Fe.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:e=>this.onDragging(e),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(i)}createAutoScrollService(){const i=this.virtualList.getGui();this.autoScrollService=new mV({scrollContainer:i,scrollAxis:"y",getVerticalPosition:()=>i.scrollTop,setVerticalPosition:e=>i.scrollTop=e})}onDragging(i){if(!this.currentDragValue||this.moveBlocked)return;const e=this.getListDragItem(i),t=this.virtualList.getComponentAt(e.rowIndex);if(!t)return;const s=t.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===e.rowIndex&&this.lastHoveredListItem.position===e.position||(this.autoScrollService.check(i.event),this.clearHoveredItems(),this.lastHoveredListItem=e,YR(s,Ny),YR(s,`ag-item-highlight-${e.position}`))}getListDragItem(i){const e=this.virtualList.getGui(),t=parseFloat(window.getComputedStyle(e).paddingTop),s=this.virtualList.getRowHeight(),r=this.virtualList.getScrollTop(),o=Math.max(0,(i.y-t+r)/s),n=this.params.getNumRows(this.comp)-1,l=Math.min(n,o)|0;return{rowIndex:l,position:Math.round(o)>o||o>n?"bottom":"top",component:this.virtualList.getComponentAt(l)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${Ny}`).forEach(e=>{[Ny,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(t=>{e.classList.remove(t)})}),this.lastHoveredListItem=null}};f([D("dragAndDropService")],CV.prototype,"dragAndDropService",2);f([K],CV.prototype,"postConstruct",1);function Sa(i){const e=i;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():i}var Be=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()})}__getAlignedGridService(){return this.alignedGridsService}__getContext(){return this.context}__getModel(){return this.rowModel}getGridId(){return this.context.getGridId()}addDetailGridInfo(i,e){this.detailGridInfoMap[i]=e}removeDetailGridInfo(i){this.detailGridInfoMap[i]=void 0}getDetailGridInfo(i){return this.detailGridInfoMap[i]}forEachDetailGridInfo(i){let e=0;tr(this.detailGridInfoMap,(t,s)=>{H(s)&&(i(s,e),e++)})}getDataAsCsv(i){if(wt.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(i)}exportDataAsCsv(i){wt.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(i)}assertNotExcelMultiSheet(i,e){return wt.__assertRegistered("@ag-grid-enterprise/excel-export","api."+i,this.context.getGridId())?this.excelCreator.getFactoryMode()===1?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1}getDataAsExcel(i){if(this.assertNotExcelMultiSheet("getDataAsExcel",i))return this.excelCreator.getDataAsExcel(i)}exportDataAsExcel(i){this.assertNotExcelMultiSheet("exportDataAsExcel",i)&&this.excelCreator.exportDataAsExcel(i)}getSheetDataForExcel(i){if(wt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(i)}getMultipleSheetsAsExcel(i){if(wt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(i)}exportMultipleSheetsAsExcel(i){wt.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(i)}setGridAriaProperty(i,e){if(!i)return;const t=this.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${i}`;e===null?t.removeAttribute(s):t.setAttribute(s,e)}logMissingRowModel(i,...e){console.error(`AG Grid: api.${i} can only be called when gridOptions.rowModelType is ${e.join(" or ")}`)}logDeprecation(i,e,t,s){ve(`Since ${i} api.${e} is deprecated. Please use ${t} instead. ${s}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(i){return this.pinnedRowModel.getPinnedTopRow(i)}getPinnedBottomRow(i){return this.pinnedRowModel.getPinnedBottomRow(i)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(i={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(i))}flashCells(i={}){const e=t=>ve(`Since v31.1 api.flashCells parameter '${t}Delay' is deprecated. Please use '${t}Duration' instead.`);H(i.fadeDelay)&&e("fade"),H(i.flashDelay)&&e("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(i))}redrawRows(i={}){const e=i?i.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(e))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>i.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return ve("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(i,e,t){this.expansionService.setRowNodeExpanded(i,e,t)}onGroupExpandedOrCollapsed(){if(Ee(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(i){if(Ee(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(i)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(i){return this.rowModel.getRowNode(i)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(i,e,t){this.rowRenderer.addRenderedRowListener(i,e,t)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return wt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(i){this.filterManager.setAdvancedFilterModel(i)}showAdvancedFilterBuilder(){wt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(i){if(!i.nodes.every(n=>n.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):n.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;const{nodes:t,source:s,newValue:r}=i,o=t;this.selectionService.setNodesSelected({nodes:o,source:s??"api",newValue:r})}selectAll(i="apiSelectAll"){this.selectionService.selectAllRowNodes({source:i})}deselectAll(i="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:i})}selectAllFiltered(i="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:i,justFiltered:!0})}deselectAllFiltered(i="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:i,justFiltered:!0})}getServerSideSelectionState(){return Ee(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(i){if(Ee(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(i,"api")}selectAllOnCurrentPage(i="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:i,justCurrentPage:!0})}deselectAllOnCurrentPage(i="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:i,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(Ee(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(i,e="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(i,e),"ensureVisible")}ensureIndexVisible(i,e){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(i,e),"ensureVisible")}ensureNodeVisible(i,e=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(i,e),"ensureVisible")}forEachLeafNode(i){if(Ee(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(i)}forEachNode(i,e){this.rowModel.forEachNode(i,e)}forEachNodeAfterFilter(i){if(Ee(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(i)}forEachNodeAfterFilterAndSort(i){if(Ee(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(i)}getFilterInstance(i,e){return ve("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(i,e)}getColumnFilterInstance(i){return this.filterManager.getColumnFilterInstance(i)}destroyFilter(i){const e=this.columnModel.getPrimaryColumn(i);if(e)return this.filterManager.destroyFilter(e,"api")}getStatusPanel(i){if(!wt.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;const e=this.statusBarService.getStatusPanel(i);return Sa(e)}getColumnDef(i){const e=this.columnModel.getPrimaryColumn(i);return e?e.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(i="api"){this.filterManager.onFilterChanged({source:i})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(i){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(i))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(i){return this.filterManager.getColumnFilterModel(i)}setColumnFilterModel(i,e){return this.filterManager.setColumnFilterModel(i,e)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(i,e,t){this.focusService.setFocusedCell({rowIndex:i,column:e,rowPinned:t,forceBrowserFocus:!0})}addRowDropZone(i){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(i)}removeRowDropZone(i){const e=this.dragAndDropService.findExternalZone(i);e&&this.dragAndDropService.removeDropTarget(e)}getRowDropZoneParams(i){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(i)}assertSideBarLoaded(i){return wt.__assertRegistered("@ag-grid-enterprise/side-bar","api."+i,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(i){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(i)}setSideBarPosition(i){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(i)}openToolPanel(i){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(i,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(i){if(this.assertSideBarLoaded("getToolPanelInstance")){const e=this.sideBarService.getSideBarComp().getToolPanelInstance(i);return Sa(e)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(H(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setRowCount(i,e){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(i,e);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(i,e);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(i,e){let t=this.columnModel.getPrimaryColumn(i);return Ee(t)&&(t=this.columnModel.getGridColumn(i)),Ee(t)?null:this.valueService.getValue(t,e)}addEventListener(i,e){this.apiEventService.addEventListener(i,e)}addGlobalListener(i){this.apiEventService.addGlobalListener(i)}removeEventListener(i,e){this.apiEventService.removeEventListener(i,e)}removeGlobalListener(i){this.apiEventService.removeGlobalListener(i)}dispatchEvent(i){this.eventService.dispatchEvent(i)}destroy(){const i=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;const e={type:y.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(e),this.destroyCalled=!0;const t=this.ctrlsService.getGridCtrl();t&&t.destroyGridUi(),this.context.destroy(),f0(this,["isDestroyed"],i)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(wt.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(i){if(this.rangeService){this.rangeService.addCellRange(i);return}wt.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),wt.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(i,e){if(wt.__assertRegistered("@ag-grid-enterprise/charts","api."+i,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>e())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(i){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(i))}getChartImageDataURL(i){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(i))}downloadChart(i){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(i))}openChartToolPanel(i){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(i))}closeChartToolPanel(i){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(i.chartId))}createRangeChart(i){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(i))}createPivotChart(i){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(i))}createCrossFilterChart(i){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(i))}updateChart(i){return this.assertChart("updateChart",()=>this.chartService.updateChart(i))}restoreChart(i,e){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(i,e))}assertClipboard(i,e){wt.__assertRegistered("@ag-grid-enterprise/clipboard","api"+i,this.context.getGridId())&&e()}copyToClipboard(i){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(i))}cutToClipboard(i){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(i))}copySelectedRowsToClipboard(i){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(i))}copySelectedRangeToClipboard(i){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(i))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(i,e){ve("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");const t=this.columnModel.getGridColumn(i);this.menuService.showColumnMenu({column:t,buttonElement:e,positionBy:"button"})}showColumnMenuAfterMouseClick(i,e){ve("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let t=this.columnModel.getGridColumn(i);if(t||(t=this.columnModel.getPrimaryColumn(i)),!t){console.error(`AG Grid: column '${i}' not found`);return}this.menuService.showColumnMenu({column:t,mouseEvent:e,positionBy:"mouse"})}showColumnChooser(i){this.menuService.showColumnChooser({chooserParams:i})}showColumnFilter(i){const e=this.columnModel.getGridColumn(i);if(!e){console.error(`AG Grid: column '${i}' not found`);return}this.menuService.showFilterMenu({column:e,containerType:"columnFilter",positionBy:"auto"})}showColumnMenu(i){const e=this.columnModel.getGridColumn(i);if(!e){console.error(`AG Grid: column '${i}' not found`);return}this.menuService.showColumnMenu({column:e,positionBy:"auto"})}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(i){return this.navigationService.tabToNextCell(!1,i)}tabToPreviousCell(i){return this.navigationService.tabToNextCell(!0,i)}getCellRendererInstances(i={}){return this.rowRenderer.getCellRendererInstances(i).map(Sa)}getCellEditorInstances(i={}){return this.rowRenderer.getCellEditorInstances(i).map(Sa)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(i=!1){this.rowRenderer.stopEditing(i)}startEditingCell(i){const e=this.columnModel.getGridColumn(i.colKey);if(!e){console.warn(`AG Grid: no column found for ${i.colKey}`);return}const t={rowIndex:i.rowIndex,rowPinned:i.rowPinned||null,column:e};i.rowPinned==null&&this.ensureIndexVisible(i.rowIndex),this.ensureColumnVisible(i.colKey);const r=this.navigationService.getCellByPosition(t);r&&(this.focusService.isCellFocused(t)||this.focusService.setFocusedCell(t),r.startRowOrCellEdit(i.key))}addAggFunc(i,e){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:e})}addAggFuncs(i){this.aggFuncService&&this.aggFuncService.addAggFuncs(i)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(i){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(i)}applyServerSideTransactionAsync(i,e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(i,e)}applyServerSideRowData(i){var e,t;const s=(e=i.startRow)!=null?e:0,r=(t=i.route)!=null?t:[];if(s<0){console.warn(`AG Grid: invalid value ${i.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(i.successParams,s,r):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(i){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(i))}applyTransactionAsync(i,e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(i,e))}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions())}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(i){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(i)}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(i){return this.rowModel.getRow(i)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(i){this.paginationProxy.goToPage(i)}sizeColumnsToFit(i){typeof i=="number"?this.columnModel.sizeColumnsToFit(i,"api"):this.gridBodyCtrl.sizeColumnsToFit(i)}setColumnGroupOpened(i,e){this.columnModel.setColumnGroupOpened(i,e,"api")}getColumnGroup(i,e){return this.columnModel.getColumnGroup(i,e)}getProvidedColumnGroup(i){return this.columnModel.getProvidedColumnGroup(i)}getDisplayNameForColumn(i,e){return this.columnModel.getDisplayNameForColumn(i,e)||""}getDisplayNameForColumnGroup(i,e){return this.columnModel.getDisplayNameForColumnGroup(i,e)||""}getColumn(i){return this.columnModel.getPrimaryColumn(i)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(i){return this.columnModel.applyColumnState(i,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(i){this.columnModel.setColumnGroupState(i,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(i){return this.columnModel.getDisplayedColAfter(i)}getDisplayedColBefore(i){return this.columnModel.getDisplayedColBefore(i)}setColumnVisible(i,e){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([i],e,"api")}setColumnsVisible(i,e){this.columnModel.setColumnsVisible(i,e,"api")}setColumnPinned(i,e){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([i],e,"api")}setColumnsPinned(i,e){this.columnModel.setColumnsPinned(i,e,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(i,e){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([i],e,"api")}moveColumnByIndex(i,e){this.columnModel.moveColumnByIndex(i,e,"api")}moveColumns(i,e){this.columnModel.moveColumns(i,e,"api")}moveRowGroupColumn(i,e){this.columnModel.moveRowGroupColumn(i,e,"api")}setColumnAggFunc(i,e){this.columnModel.setColumnAggFunc(i,e,"api")}setColumnWidth(i,e,t=!0,s="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:i,newWidth:e}],!1,t,s)}setColumnWidths(i,e=!0,t="api"){this.columnModel.setColumnWidths(i,!1,e,t)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(i,e){return this.columnModel.getSecondaryPivotColumn(i,e)}setValueColumns(i){this.columnModel.setValueColumns(i,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(i){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([i],"api")}removeValueColumns(i){this.columnModel.removeValueColumns(i,"api")}addValueColumn(i){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([i],"api")}addValueColumns(i){this.columnModel.addValueColumns(i,"api")}setRowGroupColumns(i){this.columnModel.setRowGroupColumns(i,"api")}removeRowGroupColumn(i){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([i],"api")}removeRowGroupColumns(i){this.columnModel.removeRowGroupColumns(i,"api")}addRowGroupColumn(i){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([i],"api")}addRowGroupColumns(i){this.columnModel.addRowGroupColumns(i,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(i){this.columnModel.setPivotColumns(i,"api")}removePivotColumn(i){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([i],"api")}removePivotColumns(i){this.columnModel.removePivotColumns(i,"api")}addPivotColumn(i){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([i],"api")}addPivotColumns(i){this.columnModel.addPivotColumns(i,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(i,e){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[i],skipHeader:e,source:"api"})}autoSizeColumns(i,e){this.columnModel.autoSizeColumns({columns:i,skipHeader:e,source:"api"})}autoSizeAllColumns(i){this.columnModel.autoSizeAllColumns("api",i)}setPivotResultColumns(i){this.columnModel.setSecondaryColumns(i,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(i){return this.gos.get(i)}setGridOption(i,e){this.updateGridOptions({[i]:e})}updateGridOptions(i){this.gos.updateGridOptions({options:i})}__internalUpdateGridOptions(i){this.gos.updateGridOptions({options:i,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(i,e){ve(`set${i.charAt(0).toUpperCase()}${i.slice(1,i.length)} is deprecated. Please use 'api.setGridOption('${i}', newValue)' or 'api.updateGridOptions({ ${i}: newValue })' instead.`),this.setGridOption(i,e)}setPivotMode(i){this.deprecatedUpdateGridOption("pivotMode",i)}setPinnedTopRowData(i){this.deprecatedUpdateGridOption("pinnedTopRowData",i)}setPinnedBottomRowData(i){this.deprecatedUpdateGridOption("pinnedBottomRowData",i)}setPopupParent(i){this.deprecatedUpdateGridOption("popupParent",i)}setSuppressModelUpdateAfterUpdateTransaction(i){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",i)}setDataTypeDefinitions(i){this.deprecatedUpdateGridOption("dataTypeDefinitions",i)}setPagination(i){this.deprecatedUpdateGridOption("pagination",i)}paginationSetPageSize(i){this.deprecatedUpdateGridOption("paginationPageSize",i)}setSideBar(i){this.deprecatedUpdateGridOption("sideBar",i)}setSuppressClipboardPaste(i){this.deprecatedUpdateGridOption("suppressClipboardPaste",i)}setGroupRemoveSingleChildren(i){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",i)}setGroupRemoveLowestSingleChildren(i){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",i)}setGroupDisplayType(i){this.deprecatedUpdateGridOption("groupDisplayType",i)}setGroupIncludeFooter(i){this.deprecatedUpdateGridOption("groupIncludeFooter",i)}setGroupIncludeTotalFooter(i){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",i)}setRowClass(i){this.deprecatedUpdateGridOption("rowClass",i)}setDeltaSort(i){this.deprecatedUpdateGridOption("deltaSort",i)}setSuppressRowDrag(i){this.deprecatedUpdateGridOption("suppressRowDrag",i)}setSuppressMoveWhenRowDragging(i){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",i)}setSuppressRowClickSelection(i){this.deprecatedUpdateGridOption("suppressRowClickSelection",i)}setEnableAdvancedFilter(i){this.deprecatedUpdateGridOption("enableAdvancedFilter",i)}setIncludeHiddenColumnsInAdvancedFilter(i){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",i)}setAdvancedFilterParent(i){this.deprecatedUpdateGridOption("advancedFilterParent",i)}setAdvancedFilterBuilderParams(i){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",i)}setQuickFilter(i){ve("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:i}})}setExcludeHiddenColumnsFromQuickFilter(i){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!i)}setIncludeHiddenColumnsInQuickFilter(i){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",i)}setQuickFilterParser(i){this.deprecatedUpdateGridOption("quickFilterParser",i)}setQuickFilterMatcher(i){this.deprecatedUpdateGridOption("quickFilterMatcher",i)}setAlwaysShowHorizontalScroll(i){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",i)}setAlwaysShowVerticalScroll(i){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",i)}setFunctionsReadOnly(i){this.deprecatedUpdateGridOption("functionsReadOnly",i)}setColumnDefs(i,e="api"){ve("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:i},source:e})}setAutoGroupColumnDef(i,e="api"){ve("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:i},source:e})}setDefaultColDef(i,e="api"){ve("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:i},source:e})}setColumnTypes(i,e="api"){ve("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:i},source:e})}setTreeData(i){this.deprecatedUpdateGridOption("treeData",i)}setServerSideDatasource(i){this.deprecatedUpdateGridOption("serverSideDatasource",i)}setCacheBlockSize(i){this.deprecatedUpdateGridOption("cacheBlockSize",i)}setDatasource(i){this.deprecatedUpdateGridOption("datasource",i)}setViewportDatasource(i){this.deprecatedUpdateGridOption("viewportDatasource",i)}setRowData(i){this.deprecatedUpdateGridOption("rowData",i)}setEnableCellTextSelection(i){this.deprecatedUpdateGridOption("enableCellTextSelection",i)}setHeaderHeight(i){this.deprecatedUpdateGridOption("headerHeight",i)}setDomLayout(i){this.deprecatedUpdateGridOption("domLayout",i)}setFillHandleDirection(i){this.deprecatedUpdateGridOption("fillHandleDirection",i)}setGroupHeaderHeight(i){this.deprecatedUpdateGridOption("groupHeaderHeight",i)}setFloatingFiltersHeight(i){this.deprecatedUpdateGridOption("floatingFiltersHeight",i)}setPivotHeaderHeight(i){this.deprecatedUpdateGridOption("pivotHeaderHeight",i)}setPivotGroupHeaderHeight(i){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",i)}setAnimateRows(i){this.deprecatedUpdateGridOption("animateRows",i)}setIsExternalFilterPresent(i){this.deprecatedUpdateGridOption("isExternalFilterPresent",i)}setDoesExternalFilterPass(i){this.deprecatedUpdateGridOption("doesExternalFilterPass",i)}setNavigateToNextCell(i){this.deprecatedUpdateGridOption("navigateToNextCell",i)}setTabToNextCell(i){this.deprecatedUpdateGridOption("tabToNextCell",i)}setTabToNextHeader(i){this.deprecatedUpdateGridOption("tabToNextHeader",i)}setNavigateToNextHeader(i){this.deprecatedUpdateGridOption("navigateToNextHeader",i)}setRowGroupPanelShow(i){this.deprecatedUpdateGridOption("rowGroupPanelShow",i)}setGetGroupRowAgg(i){this.deprecatedUpdateGridOption("getGroupRowAgg",i)}setGetBusinessKeyForNode(i){this.deprecatedUpdateGridOption("getBusinessKeyForNode",i)}setGetChildCount(i){this.deprecatedUpdateGridOption("getChildCount",i)}setProcessRowPostCreate(i){this.deprecatedUpdateGridOption("processRowPostCreate",i)}setGetRowId(i){ve("getRowId is a static property and can no longer be updated.")}setGetRowClass(i){this.deprecatedUpdateGridOption("getRowClass",i)}setIsFullWidthRow(i){this.deprecatedUpdateGridOption("isFullWidthRow",i)}setIsRowSelectable(i){this.deprecatedUpdateGridOption("isRowSelectable",i)}setIsRowMaster(i){this.deprecatedUpdateGridOption("isRowMaster",i)}setPostSortRows(i){this.deprecatedUpdateGridOption("postSortRows",i)}setGetDocument(i){this.deprecatedUpdateGridOption("getDocument",i)}setGetContextMenuItems(i){this.deprecatedUpdateGridOption("getContextMenuItems",i)}setGetMainMenuItems(i){this.deprecatedUpdateGridOption("getMainMenuItems",i)}setProcessCellForClipboard(i){this.deprecatedUpdateGridOption("processCellForClipboard",i)}setSendToClipboard(i){this.deprecatedUpdateGridOption("sendToClipboard",i)}setProcessCellFromClipboard(i){this.deprecatedUpdateGridOption("processCellFromClipboard",i)}setProcessPivotResultColDef(i){this.deprecatedUpdateGridOption("processPivotResultColDef",i)}setProcessPivotResultColGroupDef(i){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",i)}setPostProcessPopup(i){this.deprecatedUpdateGridOption("postProcessPopup",i)}setInitialGroupOrderComparator(i){this.deprecatedUpdateGridOption("initialGroupOrderComparator",i)}setGetChartToolbarItems(i){this.deprecatedUpdateGridOption("getChartToolbarItems",i)}setPaginationNumberFormatter(i){this.deprecatedUpdateGridOption("paginationNumberFormatter",i)}setGetServerSideGroupLevelParams(i){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",i)}setIsServerSideGroupOpenByDefault(i){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",i)}setIsApplyServerSideTransaction(i){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",i)}setIsServerSideGroup(i){this.deprecatedUpdateGridOption("isServerSideGroup",i)}setGetServerSideGroupKey(i){this.deprecatedUpdateGridOption("getServerSideGroupKey",i)}setGetRowStyle(i){this.deprecatedUpdateGridOption("getRowStyle",i)}setGetRowHeight(i){this.deprecatedUpdateGridOption("getRowHeight",i)}};f([Qe("csvCreator")],Be.prototype,"csvCreator",2);f([Qe("excelCreator")],Be.prototype,"excelCreator",2);f([D("rowRenderer")],Be.prototype,"rowRenderer",2);f([D("navigationService")],Be.prototype,"navigationService",2);f([D("filterManager")],Be.prototype,"filterManager",2);f([D("columnModel")],Be.prototype,"columnModel",2);f([D("selectionService")],Be.prototype,"selectionService",2);f([D("gridOptionsService")],Be.prototype,"gos",2);f([D("valueService")],Be.prototype,"valueService",2);f([D("alignedGridsService")],Be.prototype,"alignedGridsService",2);f([D("eventService")],Be.prototype,"eventService",2);f([D("pinnedRowModel")],Be.prototype,"pinnedRowModel",2);f([D("context")],Be.prototype,"context",2);f([D("rowModel")],Be.prototype,"rowModel",2);f([D("sortController")],Be.prototype,"sortController",2);f([D("paginationProxy")],Be.prototype,"paginationProxy",2);f([D("focusService")],Be.prototype,"focusService",2);f([D("dragAndDropService")],Be.prototype,"dragAndDropService",2);f([Qe("rangeService")],Be.prototype,"rangeService",2);f([Qe("clipboardService")],Be.prototype,"clipboardService",2);f([Qe("aggFuncService")],Be.prototype,"aggFuncService",2);f([D("menuService")],Be.prototype,"menuService",2);f([D("valueCache")],Be.prototype,"valueCache",2);f([D("animationFrameService")],Be.prototype,"animationFrameService",2);f([Qe("statusBarService")],Be.prototype,"statusBarService",2);f([Qe("chartService")],Be.prototype,"chartService",2);f([Qe("undoRedoService")],Be.prototype,"undoRedoService",2);f([Qe("rowNodeBlockLoader")],Be.prototype,"rowNodeBlockLoader",2);f([Qe("ssrmTransactionManager")],Be.prototype,"serverSideTransactionManager",2);f([D("ctrlsService")],Be.prototype,"ctrlsService",2);f([D("overlayService")],Be.prototype,"overlayService",2);f([Qe("sideBarService")],Be.prototype,"sideBarService",2);f([D("stateService")],Be.prototype,"stateService",2);f([D("expansionService")],Be.prototype,"expansionService",2);f([D("apiEventService")],Be.prototype,"apiEventService",2);f([D("frameworkOverrides")],Be.prototype,"frameworkOverrides",2);f([K],Be.prototype,"init",1);Be=f([ie("gridApi")],Be);var nr=class extends U{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,y.EVENT_COLUMN_VISIBLE,()=>{this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",i=>this.setQuickFilter(i.currentValue)),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",()=>this.onIncludeHiddenColumnsInQuickFilterChanged()),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(i){const e=this.gridOptionsService.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(e,i):this.quickFilterParts.every(t=>e?this.doesRowPassQuickFilterCache(i,t):this.doesRowPassQuickFilterNoCache(i,t))}resetQuickFilterCache(){this.rowModel.forEachNode(i=>i.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:i,parser:e}=this;i?this.quickFilterParts=e?e(i):i.split(" "):this.quickFilterParts=null}parseQuickFilter(i){return H(i)?this.gridOptionsService.isRowModelType("clientSide")?i.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(i){if(i!=null&&typeof i!="string"){console.warn(`AG Grid - Grid option quickFilterText only supports string inputs, received: ${typeof i}`);return}const e=this.parseQuickFilter(i);this.quickFilter!==e&&(this.quickFilter=e,this.setQuickFilterParts(),this.dispatchEvent({type:nr.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){const i=this.gridOptionsService.get("quickFilterParser"),e=this.gridOptionsService.get("quickFilterMatcher"),t=i!==this.parser||e!==this.matcher;this.parser=i,this.matcher=e,t&&(this.setQuickFilterParts(),this.dispatchEvent({type:nr.EVENT_QUICK_FILTER_CHANGED}))}onIncludeHiddenColumnsInQuickFilterChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:nr.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(i,e){return this.columnModel.getAllColumnsForQuickFilter().some(s=>{const r=this.getQuickFilterTextForColumn(s,i);return H(r)&&r.indexOf(e)>=0})}doesRowPassQuickFilterCache(i,e){return this.checkGenerateQuickFilterAggregateText(i),i.quickFilterAggregateText.indexOf(e)>=0}doesRowPassQuickFilterMatcher(i,e){let t;i?(this.checkGenerateQuickFilterAggregateText(e),t=e.quickFilterAggregateText):t=this.getQuickFilterAggregateText(e);const{quickFilterParts:s,matcher:r}=this;return r(s,t)}checkGenerateQuickFilterAggregateText(i){i.quickFilterAggregateText||(i.quickFilterAggregateText=this.getQuickFilterAggregateText(i))}getQuickFilterTextForColumn(i,e){let t=this.valueService.getValue(i,e,!0);const s=i.getColDef();if(s.getQuickFilterText){const r=this.gridOptionsService.addGridCommonParams({value:t,node:e,data:e.data,column:i,colDef:s});t=s.getQuickFilterText(r)}return H(t)?t.toString().toUpperCase():null}getQuickFilterAggregateText(i){const e=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(s=>{const r=this.getQuickFilterTextForColumn(s,i);H(r)&&e.push(r)}),e.join(nr.QUICK_FILTER_SEPARATOR)}};nr.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";nr.QUICK_FILTER_SEPARATOR=`
`;f([D("valueService")],nr.prototype,"valueService",2);f([D("columnModel")],nr.prototype,"columnModel",2);f([D("rowModel")],nr.prototype,"rowModel",2);f([K],nr.prototype,"postConstruct",1);nr=f([ie("quickFilterService")],nr);var wo=class extends U{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var i,e,t;this.addManagedListener(this.eventService,y.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,y.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,y.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,y.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",s=>this.setAdvancedFilterModel(s.currentValue)),this.addManagedListener(this.eventService,y.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:s})=>this.onAdvancedFilterEnabledChanged(s)),this.addManagedListener(this.eventService,y.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,nr.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=pe({},(t=(e=(i=this.gridOptionsService.get("initialState"))==null?void 0:i.filter)==null?void 0:e.filterModel)!=null?t:{})}isExternalFilterPresentCallback(){const i=this.gridOptionsService.getCallback("isExternalFilterPresent");return typeof i=="function"?i({}):!1}doesExternalFilterPass(i){const e=this.gridOptionsService.get("doesExternalFilterPass");return typeof e=="function"?e(i):!1}setFilterModel(i,e="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:i,source:e});return}const t=[],s=this.getFilterModel();if(i){const r=RP(Object.keys(i));this.allColumnFilters.forEach((o,n)=>{const l=i[n];t.push(this.setModelOnFilterWrapper(o.filterPromise,l)),r.delete(n)}),r.forEach(o=>{const n=this.columnModel.getPrimaryColumn(o)||this.columnModel.getGridColumn(o);if(!n){console.warn("AG Grid: setFilterModel() - no column found for colId: "+o);return}if(!n.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+o);return}const l=this.getOrCreateFilterWrapper(n,"NO_UI");if(!l){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+o);return}t.push(this.setModelOnFilterWrapper(l.filterPromise,i[o]))})}else this.allColumnFilters.forEach(r=>{t.push(this.setModelOnFilterWrapper(r.filterPromise,null))});Pr.all(t).then(()=>{const r=this.getFilterModel(),o=[];this.allColumnFilters.forEach((n,l)=>{const a=s?s[l]:null,u=r?r[l]:null;tt.jsonEquals(a,u)||o.push(n.column)}),o.length>0&&this.onFilterChanged({columns:o,source:e})})}setModelOnFilterWrapper(i,e){return new Pr(t=>{i.then(s=>{typeof s.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),t()),(s.setModel(e)||Pr.resolve()).then(()=>t())})})}getFilterModel(){const i={};return this.allColumnFilters.forEach((e,t)=>{const s=this.getModelFromFilterWrapper(e);H(s)&&(i[t]=s)}),i}getModelFromFilterWrapper(i){var e;const s=i.filterPromise.resolveNow(null,r=>r);return s==null?(e=this.initialFilterModel[i.column.getColId()])!=null?e:null:typeof s.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):s.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(i){var e;i?this.allColumnFilters.size&&(this.allColumnFilters.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):(e=this.advancedFilterService)!=null&&e.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var i;return!!((i=this.advancedFilterService)!=null&&i.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(i,e){return this.doColumnFiltersPass(i,e,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const i=s=>s?s.isFilterActive?s.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,e=!!this.gridOptionsService.getGroupAggFiltering(),t=s=>{if(!s.isPrimary())return!0;const o=!this.columnModel.isPivotActive();return!s.isValueActive()||!o?!1:this.columnModel.isPivotMode()?!0:e};this.allColumnFilters.forEach(s=>{if(s.filterPromise.resolveNow(!1,i)){const r=s.filterPromise.resolveNow(null,o=>o);t(s.column)?this.activeAggregateFilters.push(r):this.activeColumnFilters.push(r)}})}updateFilterFlagInColumns(i,e){this.allColumnFilters.forEach(t=>{const s=t.filterPromise.resolveNow(!1,r=>r.isFilterActive());t.column.setFilterActive(s,i,e)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(i,e,t){const{data:s,aggData:r}=i,o=t?this.activeAggregateFilters:this.activeColumnFilters,n=t?r:s;for(let l=0;l<o.length;l++){const a=o[l];if(!(a==null||a===e)){if(typeof a.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!a.doesFilterPass({node:i,data:n}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(i){const e=()=>this.onFilterChanged(i);this.rowRenderer.isRefreshInProgress()?setTimeout(e,0):e()}onFilterChanged(i={}){const{source:e,filterInstance:t,additionalEventAttributes:s,columns:r}=i;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",s),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(n=>{n.filterPromise&&n.filterPromise.then(l=>{l&&l!==t&&l.onAnyFilterChanged&&l.onAnyFilterChanged()})});const o={source:e,type:y.EVENT_FILTER_CHANGED,columns:r||[]};s&&rr(o,s),this.processingFilterChange=!0,this.eventService.dispatchEvent(o),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var i;return!((i=this.gridOptionsService.get("allowShowChangeAfterFilter"))!=null?i:!1)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())}doesRowPassOtherFilters(i,e){return this.doesRowPassFilter({rowNode:e,filterInstanceToSkip:i})}doesRowPassAggregateFilters(i){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(i.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(i.rowNode,i.filterInstanceToSkip))}doesRowPassFilter(i){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(i.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(i.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(i.rowNode,i.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(i.rowNode))}onNewRowsLoaded(i){this.allColumnFilters.forEach(e=>{e.filterPromise.then(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(i,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(i){return({node:e})=>this.valueService.getValue(i,e,!0)}createGetValue(i){return(e,t)=>{const s=t?this.columnModel.getGridColumn(t):i;return s?this.valueService.getValue(s,e,!0):void 0}}getFilterComponent(i,e,t=!0){var s;if(t)return((s=this.getOrCreateFilterWrapper(i,e))==null?void 0:s.filterPromise)||null;const r=this.cachedFilter(i);return r?r.filterPromise:null}isFilterActive(i){const e=this.cachedFilter(i);return!!e&&e.filterPromise.resolveNow(!1,t=>t.isFilterActive())}getOrCreateFilterWrapper(i,e){if(!i.isFilterAllowed())return null;let t=this.cachedFilter(i);return t?e!=="NO_UI"&&this.putIntoGui(t,e):(t=this.createFilterWrapper(i,e),this.setColumnFilterWrapper(i,t)),t}cachedFilter(i){return this.allColumnFilters.get(i.getColId())}getDefaultFilter(i){let e;if(wt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFilter";else{const t=this.dataTypeService.getBaseDataType(i);t==="number"?e="agNumberColumnFilter":t==="date"||t==="dateString"?e="agDateColumnFilter":e="agTextColumnFilter"}return e}getDefaultFloatingFilter(i){let e;if(wt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFloatingFilter";else{const t=this.dataTypeService.getBaseDataType(i);t==="number"?e="agNumberColumnFloatingFilter":t==="date"||t==="dateString"?e="agDateColumnFloatingFilter":e="agTextColumnFloatingFilter"}return e}createFilterInstance(i){const e=this.getDefaultFilter(i),t=i.getColDef();let s;const r=At(pe({},this.createFilterParams(i,t)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,i)(),filterChangedCallback:n=>this.filterChangedCallbackFactory(s,i)(n),doesRowPassOtherFilter:n=>this.doesRowPassOtherFilters(s,n)}),o=this.userComponentFactory.getFilterDetails(t,r,e);return o?{filterPromise:()=>{const n=o.newAgStackInstance();return n&&n.then(l=>s=l),n},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(i,e){return this.gridOptionsService.addGridCommonParams({column:i,colDef:Kb(e),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(i),getValue:this.createGetValue(i),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(i,e){var t;const s={column:i,filterPromise:null,compiledElement:null,guiPromise:Pr.resolve(null),compDetails:null},{filterPromise:r,compDetails:o}=this.createFilterInstance(i);return s.filterPromise=(t=r==null?void 0:r())!=null?t:null,s.compDetails=o,r&&this.putIntoGui(s,e),s}putIntoGui(i,e){const t=document.createElement("div");t.className="ag-filter",i.guiPromise=new Pr(s=>{i.filterPromise.then(r=>{let o=r.getGui();H(o)||console.warn(`AG Grid: getGui method from filter returned ${o}, it should be a DOM element or an HTML template string.`),typeof o=="string"&&(o=Is(o)),t.appendChild(o),s(t);const n={type:y.EVENT_FILTER_OPENED,column:i.column,source:e,eGui:t};this.eventService.dispatchEvent(n)})})}onColumnsChanged(){const i=[];this.allColumnFilters.forEach((e,t)=>{let s;e.column.isPrimary()?s=this.columnModel.getPrimaryColumn(t):s=this.columnModel.getGridColumn(t),!s&&(i.push(e.column),this.disposeFilterWrapper(e,"columnChanged"),this.disposeColumnListener(t))}),i.length>0?this.onFilterChanged({columns:i,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){const i=this.columnModel.getGroupAutoColumns();i==null||i.forEach(e=>{e.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(e,"NO_UI")})}isFilterAllowed(i){var e,t;if(this.isAdvancedFilterEnabled()||!i.isFilterAllowed())return!1;const r=this.allColumnFilters.get(i.getColId());return(t=(e=r==null?void 0:r.filterPromise)==null?void 0:e.resolveNow(!0,o=>typeof(o==null?void 0:o.isFilterAllowed)=="function"?o==null?void 0:o.isFilterAllowed():!0))!=null?t:!0}getFloatingFilterCompDetails(i,e){const t=a=>{const u=this.getFilterComponent(i,"NO_UI");u!=null&&u.then(d=>{a(Sa(d))})},s=i.getColDef(),r=At(pe({},this.createFilterParams(i,s)),{filterChangedCallback:()=>t(a=>this.filterChangedCallbackFactory(a,i)())}),o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,JR,r);let n=this.userComponentFactory.getDefaultFloatingFilterType(s,()=>this.getDefaultFloatingFilter(i));n==null&&(n="agReadOnlyFloatingFilter");const l={column:i,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(i),parentFilterInstance:t,showParentFilter:e,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,l,n)}getCurrentFloatingFilterParentModel(i){const e=this.getFilterComponent(i,"NO_UI",!1);return e?e.resolveNow(null,t=>t&&t.getModel()):null}destroyFilter(i,e="api"){const t=i.getColId(),s=this.allColumnFilters.get(t);this.disposeColumnListener(t),delete this.initialFilterModel[t],s&&(this.disposeFilterWrapper(s,e),this.onFilterChanged({columns:[i],source:"api"}))}disposeColumnListener(i){const e=this.allColumnListeners.get(i);e&&(this.allColumnListeners.delete(i),e())}disposeFilterWrapper(i,e){i.filterPromise.then(t=>{this.getContext().destroyBean(t),i.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(i.column.getColId());const s={type:y.EVENT_FILTER_DESTROYED,source:e,column:i.column};this.eventService.dispatchEvent(s)})}filterModifiedCallbackFactory(i,e){return()=>{const t={type:y.EVENT_FILTER_MODIFIED,column:e,filterInstance:i};this.eventService.dispatchEvent(t)}}filterChangedCallbackFactory(i,e){return t=>{var s;const r=(s=t==null?void 0:t.source)!=null?s:"api",o={filter:i,additionalEventAttributes:t,columns:[e],source:r};this.callOnFilterChangedOutsideRenderCycle(o)}}checkDestroyFilter(i){const e=this.allColumnFilters.get(i);if(!e)return;const t=e.column,{compDetails:s}=t.isFilterAllowed()?this.createFilterInstance(t):{compDetails:null};if(this.areFilterCompsDifferent(e.compDetails,s)){this.destroyFilter(t,"paramsUpdated");return}const r=t.getColDef().filterParams;if(!e.filterPromise){this.destroyFilter(t,"paramsUpdated");return}e.filterPromise.then(o=>{(o!=null&&o.refresh?o.refresh(pe(At(pe({},this.createFilterParams(t,t.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(o,t),filterChangedCallback:this.filterChangedCallbackFactory(o,t),doesRowPassOtherFilter:l=>this.doesRowPassOtherFilters(o,l)}),r)):!0)===!1&&this.destroyFilter(t,"paramsUpdated")})}setColumnFilterWrapper(i,e){const t=i.getColId();this.allColumnFilters.set(t,e),this.allColumnListeners.set(t,this.addManagedListener(i,dt.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(t)))}areFilterCompsDifferent(i,e){if(!e||!i)return!0;const{componentClass:t}=i,{componentClass:s}=e;return!(t===s||(t==null?void 0:t.render)&&(s==null?void 0:s.render)&&t.render===s.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(i){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(i);return}this.advancedFilterService.setModel(i??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(i){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(i,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:this.columnModel.getAllGridColumns().some(e=>e.getColDef().floatingFilter)}getFilterInstance(i,e){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}const t=this.getFilterInstanceImpl(i,r=>{if(!e)return;const o=Sa(r);e(o)});return Sa(t)}getColumnFilterInstance(i){return new Promise(e=>{this.getFilterInstance(i,t=>{e(t)})})}getFilterInstanceImpl(i,e){const t=this.columnModel.getPrimaryColumn(i);if(!t)return;const s=this.getFilterComponent(t,"NO_UI"),r=s&&s.resolveNow(null,o=>o);return r?setTimeout(e,0,r):s&&s.then(o=>{e(o)}),r}warnAdvancedFilters(){ve("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(i){var e;(e=this.advancedFilterService)==null||e.getCtrl().setupHeaderComp(i)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:i,source:e})=>this.setFilterModel(i,e)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:i,model:e,resolve:t})=>{this.setColumnFilterModel(i,e).then(()=>t())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(i=>this.setAdvancedFilterModel(i)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(i){const e=this.getFilterWrapper(i);return e?this.getModelFromFilterWrapper(e):null}setColumnFilterModel(i,e){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let o=()=>{};const n=new Promise(l=>{o=l});return this.columnFilterModelUpdateQueue.push({key:i,model:e,resolve:o}),n}const t=this.columnModel.getPrimaryColumn(i),s=t?this.getOrCreateFilterWrapper(t,"NO_UI"):null;return s?(o=>new Promise(n=>{o.then(l=>n(l))}))(this.setModelOnFilterWrapper(s.filterPromise,e)):Promise.resolve()}getFilterWrapper(i){var e;const t=this.columnModel.getPrimaryColumn(i);return t&&(e=this.cachedFilter(t))!=null?e:null}destroy(){super.destroy(),this.allColumnFilters.forEach(i=>this.disposeFilterWrapper(i,"gridDestroyed")),this.allColumnListeners.clear()}};f([D("valueService")],wo.prototype,"valueService",2);f([D("columnModel")],wo.prototype,"columnModel",2);f([D("rowModel")],wo.prototype,"rowModel",2);f([D("userComponentFactory")],wo.prototype,"userComponentFactory",2);f([D("rowRenderer")],wo.prototype,"rowRenderer",2);f([D("dataTypeService")],wo.prototype,"dataTypeService",2);f([D("quickFilterService")],wo.prototype,"quickFilterService",2);f([Qe("advancedFilterService")],wo.prototype,"advancedFilterService",2);f([K],wo.prototype,"init",1);wo=f([ie("filterManager")],wo);var _P=class extends be{constructor(i,e){super(i),this.ctrl=e}getCtrl(){return this.ctrl}},xu=class vV extends _P{constructor(e){super(vV.TEMPLATE,e)}postConstruct(){const e=this.getGui(),t={addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),addOrRemoveBodyCssClass:(s,r)=>this.eFloatingFilterBody.classList.toggle(s,r),setButtonWrapperDisplayed:s=>ze(this.eButtonWrapper,s),setCompDetails:s=>this.setCompDetails(s),getFloatingFilterComp:()=>this.compPromise,setWidth:s=>e.style.width=s,setMenuIcon:s=>this.eButtonShowMainFilter.appendChild(s)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}};xu.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;f([q("eFloatingFilterBody")],xu.prototype,"eFloatingFilterBody",2);f([q("eButtonWrapper")],xu.prototype,"eButtonWrapper",2);f([q("eButtonShowMainFilter")],xu.prototype,"eButtonShowMainFilter",2);f([K],xu.prototype,"postConstruct",1);f([Ur],xu.prototype,"destroyFloatingFilterComp",1);var RQ=xu,sw=class extends U{constructor(i){super(),this.view=i}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const i=this.getDomLayout(),e={autoHeight:i==="autoHeight",normal:i==="normal",print:i==="print"},t=e.autoHeight?"ag-layout-auto-height":e.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(t,e)}getDomLayout(){var i;const e=(i=this.gridOptionsService.get("domLayout"))!=null?i:"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(ve(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}};f([K],sw.prototype,"postConstruct",1);var kn=class extends U{constructor(i){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=i,this.resetLastHScrollDebounced=ns(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=ns(()=>this.lastScrollSource[0]=null,500)}postConstruct(){this.enableRtl=this.gridOptionsService.get("enableRtl"),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(i=>{this.centerRowContainerCtrl=i.centerRowContainerCtrl,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const i=this.ctrlsService.getFakeHScrollComp(),e=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),i.onScrollCallback(this.onFakeHScroll.bind(this));const t=this.gridOptionsService.get("debounceVerticalScrollbar"),s=t?ns(this.onVScroll.bind(this),100):this.onVScroll.bind(this),r=t?ns(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",s),e.onScrollCallback(r)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(i){if(this.centerRowContainerCtrl==null)return;i===void 0&&(i=this.centerRowContainerCtrl.getCenterViewportScrollLeft());const t=this.enableRtl?i:-i,s=this.ctrlsService.getTopCenterRowContainerCtrl(),r=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),o=this.ctrlsService.getBottomCenterRowContainerCtrl(),n=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-t),o.setContainerTranslateX(t),s.setContainerTranslateX(t),r.setContainerTranslateX(t);const a=this.centerRowContainerCtrl.getViewportElement(),u=this.lastScrollSource[1]===0;i=Math.abs(i),u?n.setScrollPosition(i):gg(a,i,this.enableRtl)}isControllingScroll(i,e){return this.lastScrollSource[e]==null?(this.lastScrollSource[e]=i,!0):this.lastScrollSource[e]===i}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(i){const e=this.centerRowContainerCtrl.getViewportElement(),{scrollLeft:t}=e;if(this.shouldBlockScrollUpdate(1,t,!0))return;let s;i===0?s=pg(e,this.enableRtl):s=this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(s)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(i){let e;i===0?e=this.eBodyViewport.scrollTop:e=this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate(0,e,!0)&&(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,i===0?this.ctrlsService.getFakeVScrollComp().setScrollPosition(e):this.eBodyViewport.scrollTop=e,this.gridOptionsService.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(i){const e=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===i&&i===e||(this.scrollLeft=i,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(i),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(i){const e={type:y.EVENT_BODY_SCROLL,direction:i===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const t=At(pe({},e),{type:y.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(t)},100)}shouldBlockScrollUpdate(i,e,t=!1){return t&&!_n()?!1:i===0?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e)}shouldBlockVerticalScroll(i){const e=vf(this.eBodyViewport),{scrollHeight:t}=this.eBodyViewport;return i<0||i+e>t}shouldBlockHorizontalScroll(i){const e=this.centerRowContainerCtrl.getCenterWidth(),{scrollWidth:t}=this.centerRowContainerCtrl.getViewportElement();if(this.enableRtl&&hg()){if(i>0)return!0}else if(i<0)return!0;return Math.abs(i)+e>t}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){const i=this.scrollTop!=this.nextScrollTop;return i&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),i}setHorizontalScrollPosition(i,e=!1){const s=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(1,i)&&(this.enableRtl&&hg()?i=i>0?0:s:i=Math.min(Math.max(i,0),s)),gg(this.centerRowContainerCtrl.getViewportElement(),Math.abs(i),this.enableRtl),this.doHorizontalScroll(i)}setVerticalScrollPosition(i){this.eBodyViewport.scrollTop=i}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowContainerCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()}scrollHorizontally(i){const e=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(e+i),this.centerRowContainerCtrl.getViewportElement().scrollLeft-e}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(i,e=null){const t=this.rowModel.getRowCount();let s=-1;for(let r=0;r<t;r++){const o=this.rowModel.getRow(r);if(typeof i=="function"){if(o&&i(o)){s=r;break}}else if(i===o||i===o.data){s=r;break}}s>=0&&this.ensureIndexVisible(s,e)}ensureIndexVisible(i,e){if(this.gridOptionsService.isDomLayout("print"))return;const t=this.paginationProxy.getRowCount();if(typeof i!="number"||i<0||i>=t){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+i);return}const r=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{r||this.paginationProxy.goToPageWithIndex(i);const n=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),l=this.paginationProxy.getRow(i);let a;do{const u=l.rowTop,d=l.rowHeight,c=this.paginationProxy.getPixelOffset(),h=l.rowTop-c,p=h+l.rowHeight,m=this.getVScrollPosition(),S=this.heightScaler.getDivStretchOffset(),E=m.top+S,C=m.bottom+S,v=C-E,R=this.heightScaler.getScrollPositionForPixel(h),b=this.heightScaler.getScrollPositionForPixel(p-v),A=Math.min((R+b)/2,h),F=E+n>h,O=C<p;let L=null;e==="top"?L=R:e==="bottom"?L=b:e==="middle"?L=A:F?L=R-n:O&&(L=b),L!==null&&(this.setVerticalScrollPosition(L),this.rowRenderer.redraw({afterScroll:!0})),a=u!==l.rowTop||d!==l.rowHeight}while(a);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(i,e="auto"){const t=this.columnModel.getGridColumn(i);if(!t||t.isPinned()||!this.columnModel.isColumnDisplayed(t))return;const s=this.getPositionedHorizontalScroll(t,e);this.getFrameworkOverrides().wrapIncoming(()=>{s!==null&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(s),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(i,e){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowContainerCtrl.setCenterViewportScrollLeft(e),this.setVerticalScrollPosition(i),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(i,e){const{columnBeforeStart:t,columnAfterEnd:s}=this.isColumnOutsideViewport(i),r=this.centerRowContainerCtrl.getCenterWidth()<i.getActualWidth(),o=this.centerRowContainerCtrl.getCenterWidth(),n=this.enableRtl;let l=(n?t:s)||r,a=n?s:t;e!=="auto"&&(l=e==="start",a=e==="end");const u=e==="middle";if(l||a||u){const{colLeft:d,colMiddle:c,colRight:h}=this.getColumnBounds(i);return u?c-o/2:l?n?h:d:n?d-o:h-o}return null}isColumnOutsideViewport(i){const{start:e,end:t}=this.getViewportBounds(),{colLeft:s,colRight:r}=this.getColumnBounds(i),o=this.enableRtl,n=o?e>r:t<r,l=o?t<s:e>s;return{columnBeforeStart:n,columnAfterEnd:l}}getColumnBounds(i){const e=this.enableRtl,t=this.columnModel.getBodyContainerWidth(),s=i.getActualWidth(),r=i.getLeft(),o=e?-1:1,n=e?t-r:r,l=n+s*o,a=n+s/2*o;return{colLeft:n,colMiddle:a,colRight:l}}getViewportBounds(){const i=this.centerRowContainerCtrl.getCenterWidth(),e=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),t=e,s=i+e;return{start:t,end:s,width:i}}};f([D("ctrlsService")],kn.prototype,"ctrlsService",2);f([D("animationFrameService")],kn.prototype,"animationFrameService",2);f([D("paginationProxy")],kn.prototype,"paginationProxy",2);f([D("rowModel")],kn.prototype,"rowModel",2);f([D("rowContainerHeightService")],kn.prototype,"heightScaler",2);f([D("rowRenderer")],kn.prototype,"rowRenderer",2);f([D("columnModel")],kn.prototype,"columnModel",2);f([K],kn.prototype,"postConstruct",1);var SV="ag-force-vertical-scroll",TQ="ag-selectable",DQ="ag-column-moving",ws=class extends U{constructor(){super(...arguments),this.stickyTopHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(i,e,t,s,r,o){this.comp=i,this.eGridBody=e,this.eBodyViewport=t,this.eTop=s,this.eBottom=r,this.eStickyTop=o,this.setCellTextSelection(this.gridOptionsService.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",n=>this.setCellTextSelection(n.currentValue)),this.createManagedBean(new sw(this.comp)),this.bodyScrollFeature=this.createManagedBean(new kn(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,t,r,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(s),this.ctrlsService.registerGridBodyCtrl(this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,y.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(i){i.forEach(e=>{this.addManagedListener(e,"focusin",t=>{const{target:s}=t,r=Va(s,"ag-root",e);e.classList.toggle("ag-has-focus",!r)}),this.addManagedListener(e,"focusout",t=>{const{target:s,relatedTarget:r}=t,o=e.contains(r),n=Va(r,"ag-root",e);Va(s,"ag-root",e)||(!o||n)&&e.classList.remove("ag-has-focus")})})}setColumnMovingCss(i){this.comp.setColumnMovingCss(DQ,i)}setCellTextSelection(i=!1){this.comp.setCellSelectableCss(TQ,i)}onScrollVisibilityChanged(){const i=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(i),this.setStickyTopWidth(i);const e=i&&this.gridOptionsService.getScrollbarWidth()||0,t=dP()?16:0,s=`calc(100% + ${e+t}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(s))}onGridColumnsChanged(){const i=this.columnModel.getAllGridColumns();this.comp.setColumnCount(i.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",i=>{if(i.target instanceof HTMLImageElement)return i.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gridOptionsService.get("stopEditingWhenCellsLoseFocus"))return;const i=t=>{const s=t.relatedTarget;if(vv(s)===null){this.rowRenderer.stopEditing();return}let r=e.some(o=>o.contains(s))&&this.mouseEventService.isElementInThisGrid(s);if(!r){const o=this.popupService;r=o.getActivePopups().some(n=>n.contains(s))||o.isElementWithinCustomPopup(s)}r||this.rowRenderer.stopEditing()},e=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];e.forEach(t=>this.addManagedListener(t,"focusout",i))}updateRowCount(){const i=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),e=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,t=e===-1?-1:i+e;this.comp.setRowCount(t)}registerBodyViewportResizeListener(i){this.comp.registerBodyViewportResizeListener(i)}setVerticalScrollPaddingVisible(i){const e=i?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)}isVerticalScrollShowing(){const i=this.gridOptionsService.get("alwaysShowVerticalScroll"),e=i?SV:null,t=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(e,i),i||t&&fk(this.eBodyViewport)}setupRowAnimationCssClass(){const i=()=>{const e=this.gridOptionsService.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),t=e?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(t,e)};i(),this.addManagedListener(this.eventService,y.EVENT_HEIGHT_SCALE_CHANGED,i),this.addManagedPropertyListener("animateRows",i)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const i=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",i),this.mockContextMenuForIPad(i),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const i=this.eBodyViewport.querySelector(".ag-full-width-container"),e=this.eBodyViewport.querySelector(".ag-center-cols-viewport");i&&e&&this.addManagedListener(i,"wheel",t=>this.onFullWidthContainerWheel(t,e))}onFullWidthContainerWheel(i,e){!i.deltaX||Math.abs(i.deltaY)>Math.abs(i.deltaX)||!this.mouseEventService.isEventFromThisGrid(i)||(i.preventDefault(),e.scrollBy({left:i.deltaX}))}onBodyViewportContextMenu(i,e,t){if(!i&&!t)return;this.gridOptionsService.get("preventDefaultOnContextMenu")&&(i||t).preventDefault();const{target:s}=i||e;(s===this.eBodyViewport||s===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&this.menuService.showContextMenu({mouseEvent:i,touchEvent:t,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(i){if(!_n())return;const e=new Oi(this.eBodyViewport),t=s=>{i(void 0,s.touchStart,s.touchEvent)};this.addManagedListener(e,Oi.EVENT_LONG_TAP,t),this.addDestroyFunc(()=>e.destroy())}onBodyViewportWheel(i){this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&i.preventDefault()}onStickyTopWheel(i){i.preventDefault(),i.offsetY&&this.scrollVertically(i.deltaY)}getGui(){return this.eGridBody}scrollVertically(i){const e=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(e+i),this.eBodyViewport.scrollTop-e}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new mr(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:i}=this;let e=i.getPinnedTopTotalHeight(),t=i.getPinnedBottomTotalHeight();this.comp.setTopHeight(e),this.comp.setBottomHeight(t),this.comp.setTopDisplay(e?"inherit":"none"),this.comp.setBottomDisplay(t?"inherit":"none"),this.setStickyTopOffsetTop()}setStickyTopHeight(i=0){this.comp.setStickyTopHeight(`${i}px`),this.stickyTopHeight=i}getStickyTopHeight(){return this.stickyTopHeight}setStickyTopWidth(i){if(!i)this.comp.setStickyTopWidth("100%");else{const e=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const e=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight()+this.filterManager.getHeaderHeight(),t=this.pinnedRowModel.getPinnedTopTotalHeight();let s=0;e>0&&(s+=e+1),t>0&&(s+=t+1),this.comp.setStickyTopTop(`${s}px`)}sizeColumnsToFit(i,e){const s=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,o=Ou(this.eGridBody)-s;if(o>0){this.columnModel.sizeColumnsToFit(o,"sizeColumnsToFit",!1,i);return}e===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(i,100)},0):e===100?window.setTimeout(()=>{this.sizeColumnsToFit(i,500)},100):e===500?window.setTimeout(()=>{this.sizeColumnsToFit(i,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(i){this.eBodyViewport.addEventListener("scroll",i,{passive:!0})}removeScrollEventListener(i){this.eBodyViewport.removeEventListener("scroll",i)}};f([D("animationFrameService")],ws.prototype,"animationFrameService",2);f([D("rowContainerHeightService")],ws.prototype,"rowContainerHeightService",2);f([D("ctrlsService")],ws.prototype,"ctrlsService",2);f([D("columnModel")],ws.prototype,"columnModel",2);f([D("scrollVisibleService")],ws.prototype,"scrollVisibleService",2);f([D("menuService")],ws.prototype,"menuService",2);f([D("headerNavigationService")],ws.prototype,"headerNavigationService",2);f([D("dragAndDropService")],ws.prototype,"dragAndDropService",2);f([D("pinnedRowModel")],ws.prototype,"pinnedRowModel",2);f([D("rowRenderer")],ws.prototype,"rowRenderer",2);f([D("popupService")],ws.prototype,"popupService",2);f([D("mouseEventService")],ws.prototype,"mouseEventService",2);f([D("rowModel")],ws.prototype,"rowModel",2);f([D("filterManager")],ws.prototype,"filterManager",2);var bh="ag-cell-range-selected",bQ="ag-cell-range-chart",PQ="ag-cell-range-single-cell",AQ="ag-cell-range-chart-category",FQ="ag-cell-range-handle",OQ="ag-cell-range-top",LQ="ag-cell-range-right",IQ="ag-cell-range-bottom",MQ="ag-cell-range-left",xQ=class{constructor(i,e){this.beans=i,this.cellCtrl=e}setComp(i,e){this.cellComp=i,this.eGui=e,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(bh,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${bh}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${bh}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${bh}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${bh}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(bQ,this.hasChartRange),Pc(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(PQ,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const i=this.getRangeBorders(),e=this.isSingleCell(),t=!e&&i.top,s=!e&&i.right,r=!e&&i.bottom,o=!e&&i.left;this.cellComp.addOrRemoveCssClass(OQ,t),this.cellComp.addOrRemoveCssClass(LQ,s),this.cellComp.addOrRemoveCssClass(IQ,r),this.cellComp.addOrRemoveCssClass(MQ,o)}isSingleCell(){const{rangeService:i}=this.beans;return this.rangeCount===1&&i&&!i.isMoreThanOneCell()}getHasChartRange(){const{rangeService:i}=this.beans;if(!this.rangeCount||!i)return!1;const e=i.getCellRanges();return e.length>0&&e.every(t=>xr([1,0],t.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const i=this.beans.gridOptionsService.get("enableRtl");let e=!1,t=!1,s=!1,r=!1;const o=this.cellCtrl.getCellPosition().column,{rangeService:n,columnModel:l}=this.beans;let a,u;i?(a=l.getDisplayedColAfter(o),u=l.getDisplayedColBefore(o)):(a=l.getDisplayedColBefore(o),u=l.getDisplayedColAfter(o));const d=n.getCellRanges().filter(c=>n.isCellInSpecificRange(this.cellCtrl.getCellPosition(),c));a||(r=!0),u||(t=!0);for(let c=0;c<d.length&&!(e&&t&&s&&r);c++){const h=d[c],p=n.getRangeStartRow(h),m=n.getRangeEndRow(h);!e&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(e=!0),!s&&this.beans.rowPositionUtils.sameRow(m,this.cellCtrl.getCellPosition())&&(s=!0),!r&&a&&h.columns.indexOf(a)<0&&(r=!0),!t&&u&&h.columns.indexOf(u)<0&&(t=!0)}return{top:e,right:t,bottom:s,left:r}}refreshHandle(){if(!this.beans.rangeService||this.beans.context.isDestroyed())return;const i=this.shouldHaveSelectionHandle();this.selectionHandle&&!i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),i&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(FQ,!!this.selectionHandle)}shouldHaveSelectionHandle(){const{gridOptionsService:i,rangeService:e}=this.beans,t=e.getCellRanges(),s=t.length;if(this.rangeCount<1||s<1)return!1;const r=Ze(t),o=this.cellCtrl.getCellPosition(),n=i.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),l=i.get("enableRangeHandle");let a=s===1&&!this.cellCtrl.isEditing()&&(n||l);if(this.hasChartRange){const d=t[0].type===1&&e.isCellInSpecificRange(o,t[0]);this.cellComp.addOrRemoveCssClass(AQ,d),a=r.type===0}return a&&r.endRow!=null&&e.isContiguousRange(r)&&e.isBottomRightCell(r,o)}addSelectionHandle(){const{gridOptionsService:i,rangeService:e}=this.beans,t=Ze(e.getCellRanges()).type,r=i.get("enableFillHandle")&&Ee(t)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==r&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(r)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},_Q=class extends U{constructor(i,e){super(),this.cellCtrl=i,this.beans=e,this.column=i.getColumn(),this.rowNode=i.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,y.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(i){this.eGui=i,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const i=this.column.getRowSpan(this.rowNode);this.rowSpan!==i&&(this.rowSpan=i,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const i=this.getColSpanningList();Vo(this.colsSpanning,i)||(this.colsSpanning=i,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const i=this.getCellWidth();this.eGui.style.width=`${i}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((i,e)=>i+e.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const i=this.column.getColSpan(this.rowNode),e=[];if(i===1)e.push(this.column);else{let t=this.column;const s=this.column.getPinned();for(let r=0;t&&r<i&&(e.push(t),t=this.beans.columnModel.getDisplayedColAfter(t),!(!t||Ee(t)||s!==t.getPinned()));r++);}return e}onLeftChanged(){if(!this.eGui)return;const i=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=i+"px"}getCellLeft(){let i;return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?i=Ze(this.colsSpanning):i=this.column,i.getLeft()}modifyLeftForPrintLayout(i){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return i;const e=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){const t=this.beans.columnModel.getBodyContainerWidth();return e+t+(i||0)}return e+(i||0)}applyRowSpan(i){if(this.rowSpan===1&&!i)return;const t=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${t}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},NQ=class extends U{constructor(i,e){super(),this.staticClasses=[],this.cellCtrl=i,this.beans=e,this.column=i.getColumn(),this.rowNode=i.getRowNode()}setComp(i){this.cellComp=i,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const i=this.column.getColDef(),{cellClassRules:e}=i,t=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:i,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(e===this.cellClassRules?void 0:this.cellClassRules,e,t,s=>this.cellComp.addOrRemoveCssClass(s,!0),s=>this.cellComp.addOrRemoveCssClass(s,!1)),this.cellClassRules=e}applyUserStyles(){const i=this.column.getColDef();if(!i.cellStyle)return;let e;if(typeof i.cellStyle=="function"){const t=this.beans.gridOptionsService.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:i,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),s=i.cellStyle;e=s(t)}else e=i.cellStyle;e&&this.cellComp.setUserStyles(e)}applyClassesFromColDef(){const i=this.column.getColDef(),e=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:i,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(t=>this.cellComp.addOrRemoveCssClass(t,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(i,e),this.staticClasses.length&&this.staticClasses.forEach(t=>this.cellComp.addOrRemoveCssClass(t,!0))}destroy(){super.destroy()}},Pe=class{postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};f([D("resizeObserverService")],Pe.prototype,"resizeObserverService",2);f([D("paginationProxy")],Pe.prototype,"paginationProxy",2);f([D("context")],Pe.prototype,"context",2);f([D("columnApi")],Pe.prototype,"columnApi",2);f([D("gridApi")],Pe.prototype,"gridApi",2);f([D("gridOptionsService")],Pe.prototype,"gridOptionsService",2);f([D("expressionService")],Pe.prototype,"expressionService",2);f([D("environment")],Pe.prototype,"environment",2);f([D("rowRenderer")],Pe.prototype,"rowRenderer",2);f([D("templateService")],Pe.prototype,"templateService",2);f([D("valueService")],Pe.prototype,"valueService",2);f([D("eventService")],Pe.prototype,"eventService",2);f([D("columnModel")],Pe.prototype,"columnModel",2);f([D("headerNavigationService")],Pe.prototype,"headerNavigationService",2);f([D("navigationService")],Pe.prototype,"navigationService",2);f([D("columnAnimationService")],Pe.prototype,"columnAnimationService",2);f([Qe("rangeService")],Pe.prototype,"rangeService",2);f([D("focusService")],Pe.prototype,"focusService",2);f([D("popupService")],Pe.prototype,"popupService",2);f([D("valueFormatterService")],Pe.prototype,"valueFormatterService",2);f([D("stylingService")],Pe.prototype,"stylingService",2);f([D("columnHoverService")],Pe.prototype,"columnHoverService",2);f([D("userComponentFactory")],Pe.prototype,"userComponentFactory",2);f([D("userComponentRegistry")],Pe.prototype,"userComponentRegistry",2);f([D("animationFrameService")],Pe.prototype,"animationFrameService",2);f([D("dragService")],Pe.prototype,"dragService",2);f([D("dragAndDropService")],Pe.prototype,"dragAndDropService",2);f([D("sortController")],Pe.prototype,"sortController",2);f([D("filterManager")],Pe.prototype,"filterManager",2);f([D("rowContainerHeightService")],Pe.prototype,"rowContainerHeightService",2);f([D("frameworkOverrides")],Pe.prototype,"frameworkOverrides",2);f([D("cellPositionUtils")],Pe.prototype,"cellPositionUtils",2);f([D("rowPositionUtils")],Pe.prototype,"rowPositionUtils",2);f([D("selectionService")],Pe.prototype,"selectionService",2);f([Qe("selectionHandleFactory")],Pe.prototype,"selectionHandleFactory",2);f([D("rowCssClassCalculator")],Pe.prototype,"rowCssClassCalculator",2);f([D("rowModel")],Pe.prototype,"rowModel",2);f([D("ctrlsService")],Pe.prototype,"ctrlsService",2);f([D("ctrlsFactory")],Pe.prototype,"ctrlsFactory",2);f([D("agStackComponentsRegistry")],Pe.prototype,"agStackComponentsRegistry",2);f([D("valueCache")],Pe.prototype,"valueCache",2);f([D("rowNodeEventThrottle")],Pe.prototype,"rowNodeEventThrottle",2);f([D("localeService")],Pe.prototype,"localeService",2);f([D("valueParserService")],Pe.prototype,"valueParserService",2);f([D("syncService")],Pe.prototype,"syncService",2);f([D("ariaAnnouncementService")],Pe.prototype,"ariaAnnouncementService",2);f([K],Pe.prototype,"postConstruct",1);Pe=f([ie("beans")],Pe);var GQ=class extends Pe{constructor(i,e,t){super(),this.cellCtrl=i,this.beans=e,this.column=t}onMouseEvent(i,e){if(!ho(e))switch(i){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}}onCellClicked(i){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(i),i.preventDefault();return}const{eventService:e,rangeService:t,gridOptionsService:s}=this.beans,r=i.ctrlKey||i.metaKey;t&&r&&t.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&t.intersectLastRange(!0);const o=this.cellCtrl.createEvent(i,y.EVENT_CELL_CLICKED);e.dispatchEvent(o);const n=this.column.getColDef();n.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{n.onCellClicked(o)})},0),(s.get("singleClickEdit")||n.singleClickEdit)&&!s.get("suppressClickEdit")&&!(i.shiftKey&&(t==null?void 0:t.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!_n()||Jb("dblclick"))return!1;const i=new Date().getTime(),e=i-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=i,e}onCellDoubleClicked(i){const e=this.column.getColDef(),t=this.cellCtrl.createEvent(i,y.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(t),typeof e.onCellDoubleClicked=="function"&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{e.onCellDoubleClicked(t)})},0),!this.beans.gridOptionsService.get("singleClickEdit")&&!this.beans.gridOptionsService.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,i)}onMouseDown(i){const{ctrlKey:e,metaKey:t,shiftKey:s}=i,r=i.target,{cellCtrl:o,beans:n}=this,{eventService:l,rangeService:a,focusService:u}=n;if(this.isRightClickInExistingRange(i))return;const d=a&&a.getCellRanges().length!=0;if(!s||!d){const c=Tn()&&!o.isEditing()&&!pP(r);o.focusCell(c)}if(s&&d&&!u.isCellFocused(o.getCellPosition())){i.preventDefault();const c=u.getFocusedCell();if(c){const{column:h,rowIndex:p,rowPinned:m}=c,S=n.rowRenderer.getRowByPosition({rowIndex:p,rowPinned:m}),E=S==null?void 0:S.getCellCtrl(h);E!=null&&E.isEditing()&&E.stopEditing(),u.setFocusedCell({column:h,rowIndex:p,rowPinned:m,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(a){const c=this.cellCtrl.getCellPosition();if(s)a.extendLatestRangeToCell(c);else{const h=e||t;a.setRangeToCell(c,h)}}l.dispatchEvent(this.cellCtrl.createEvent(i,y.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(i){const{rangeService:e}=this.beans;if(e){const t=e.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=i.button===2||i.ctrlKey&&this.beans.gridOptionsService.get("allowContextMenuWithControlKey");if(t&&s)return!0}return!1}containsWidget(i){return Va(i,"ag-selection-checkbox",3)}onMouseOut(i){if(this.mouseStayingInsideCell(i))return;const e=this.cellCtrl.createEvent(i,y.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.clearMouseOver()}onMouseOver(i){if(this.mouseStayingInsideCell(i))return;const e=this.cellCtrl.createEvent(i,y.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(i){if(!i.target||!i.relatedTarget)return!1;const e=this.cellCtrl.getGui(),t=e.contains(i.target),s=e.contains(i.relatedTarget);return t&&s}destroy(){}},kQ=class extends U{constructor(i,e,t,s,r){super(),this.cellCtrl=i,this.beans=e,this.rowNode=s,this.rowCtrl=r}setComp(i){this.eGui=i}onKeyDown(i){const e=i.key;switch(e){case _.ENTER:this.onEnterKeyDown(i);break;case _.F2:this.onF2KeyDown(i);break;case _.ESCAPE:this.onEscapeKeyDown(i);break;case _.TAB:this.onTabKeyDown(i);break;case _.BACKSPACE:case _.DELETE:this.onBackspaceOrDeleteKeyDown(e,i);break;case _.DOWN:case _.UP:case _.RIGHT:case _.LEFT:this.onNavigationKeyDown(i,e);break}}onNavigationKeyDown(i,e){this.cellCtrl.isEditing()||(i.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(i):this.beans.navigationService.navigateToNextCell(i,e,this.cellCtrl.getCellPosition(),!0),i.preventDefault())}onShiftRangeSelect(i){if(!this.beans.rangeService)return;const e=this.beans.rangeService.extendLatestRangeInDirection(i);e&&this.beans.navigationService.ensureCellVisible(e)}onTabKeyDown(i){this.beans.navigationService.onTabKeyDown(this.cellCtrl,i)}onBackspaceOrDeleteKeyDown(i,e){const{cellCtrl:t,beans:s,rowNode:r}=this,{gridOptionsService:o,rangeService:n,eventService:l}=s;t.isEditing()||(l.dispatchEvent({type:y.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),Dk(i,o.get("enableCellEditingOnBackspace"))?n&&o.get("enableRangeSelection")?n.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):t.isCellEditable()&&r.setDataValue(t.getColumn(),null,"cellClear"):t.startRowOrCellEdit(i,e),l.dispatchEvent({type:y.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))}onEnterKeyDown(i){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,i.shiftKey);else if(this.beans.gridOptionsService.get("enterNavigatesVertically")){const e=i.shiftKey?_.UP:_.DOWN;this.beans.navigationService.navigateToNextCell(null,e,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(_.ENTER,i),this.cellCtrl.isEditing()&&i.preventDefault()}onF2KeyDown(i){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(_.F2,i)}onEscapeKeyDown(i){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(i){if(i.target!==this.eGui||this.cellCtrl.isEditing())return;const s=i.key;s===" "?this.onSpaceKeyDown(i):(this.cellCtrl.startRowOrCellEdit(s,i),i.preventDefault())}onSpaceKeyDown(i){const{gridOptionsService:e}=this.beans;if(!this.cellCtrl.isEditing()&&e.isRowSelection()){const t=this.rowNode.isSelected(),s=!t;if(s||!e.get("suppressRowDeselection")){const r=this.beans.gridOptionsService.get("groupSelectsFiltered"),o=this.rowNode.setSelectedParams({newValue:s,rangeSelect:i.shiftKey,groupSelectsFiltered:r,event:i,source:"spaceKey"});t===void 0&&o===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:i.shiftKey,groupSelectsFiltered:r,event:i,source:"spaceKey"})}}i.preventDefault()}destroy(){super.destroy()}},wV=class extends be{constructor(i,e,t){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=i,this.column=e,this.eCell=t}postConstruct(){this.getGui().appendChild(Nt("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(i){const e=this.column.getColDef().dndSourceOnRowDrag;i.dataTransfer.setDragImage(this.eCell,0,0);const t=()=>{try{const s=JSON.stringify(this.rowNode.data);i.dataTransfer.setData("application/json",s),i.dataTransfer.setData("text/plain",s)}catch{}};if(e){const s=this.gridOptionsService.addGridCommonParams({rowNode:this.rowNode,dragEvent:i});e(s)}else t()}checkVisibility(){const i=this.column.isDndSource(this.rowNode);this.setDisplayed(i)}};f([K],wV.prototype,"postConstruct",1);var VQ="ag-column-first",HQ="ag-column-last",rw=class{static getHeaderClassesFromColDef(i,e,t,s){return Ee(i)?[]:this.getColumnClassesFromCollDef(i.headerClass,i,e,t,s)}static getToolPanelClassesFromColDef(i,e,t,s){return Ee(i)?[]:this.getColumnClassesFromCollDef(i.toolPanelClass,i,e,t,s)}static refreshFirstAndLastStyles(i,e,t){i.addOrRemoveCssClass(VQ,t.isColumnAtEdge(e,"first")),i.addOrRemoveCssClass(HQ,t.isColumnAtEdge(e,"last"))}static getClassParams(i,e,t,s){return e.addGridCommonParams({colDef:i,column:t,columnGroup:s})}static getColumnClassesFromCollDef(i,e,t,s,r){if(Ee(i))return[];let o;if(typeof i=="function"){const n=this.getClassParams(e,t,s,r);o=i(n)}else o=i;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}},BQ="ag-cell",WQ="ag-cell-auto-height",UQ="ag-cell-normal-height",zQ="ag-cell-focus",$Q="ag-cell-first-right-pinned",KQ="ag-cell-last-left-pinned",jQ="ag-cell-not-inline-editing",YQ="ag-column-hover",qQ="ag-cell-wrap-text",QQ=0,yV=class ZR extends U{constructor(e,t,s,r){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=e,this.rowNode=t,this.beans=s,this.rowCtrl=r,this.instanceId=e.getId()+"-"+QQ++,this.colIdSanitised=gi(this.column.getId()),s.gridOptionsService.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new _Q(this,this.beans),this.addDestroyFunc(()=>{var t;(t=this.cellPositionFeature)==null||t.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new NQ(this,this.beans),this.addDestroyFunc(()=>{var t;(t=this.cellCustomStyleFeature)==null||t.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new GQ(this,this.beans,this.column),this.addDestroyFunc(()=>{var t;(t=this.cellMouseListenerFeature)==null||t.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new kQ(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var t;(t=this.cellKeyboardListenerFeature)==null||t.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gridOptionsService.get("enableRangeSelection")&&(this.cellRangeFeature=new xQ(this.beans,this),this.addDestroyFunc(()=>{var t;(t=this.cellRangeFeature)==null||t.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(e,t){const s=()=>{const n=this.column.getColDef(),l=this.rowNode.data;if(n.tooltipField&&H(l))return kd(l,n.tooltipField,this.column.isTooltipFieldContainsDots());const a=n.tooltipValueGetter;return a?a(this.beans.gridOptionsService.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},r=this.beans.gridOptionsService.get("tooltipShowMode")==="whenTruncated";!t&&r&&!this.isCellRenderer()&&(t=()=>{const n=this.getGui(),l=n.children.length===0?n:n.querySelector(".ag-cell-value");return l?l.scrollWidth>l.clientWidth:!0});const o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:e!=null?()=>e:s,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:t};this.tooltipFeature=new Nn(o,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(e,t,s,r,o){var n,l,a,u;this.cellComp=e,this.eGui=t,this.printLayout=r,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(n=this.cellPositionFeature)==null||n.setComp(t),(l=this.cellCustomStyleFeature)==null||l.setComp(e),(a=this.tooltipFeature)==null||a.refreshToolTip(),(u=this.cellKeyboardListenerFeature)==null||u.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,t),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(d=>d()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;const t=e.parentElement,s=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,r=l=>{if(this.editing||!this.isAlive())return;const{paddingTop:a,paddingBottom:u,borderBottomWidth:d,borderTopWidth:c}=Yl(t),h=a+u+d+c,m=e.offsetHeight+h;if(l<5){const E=this.beans.gridOptionsService.getDocument(),C=!E||!E.contains(e),v=m==0;if(C||v){window.setTimeout(()=>r(l+1),0);return}}const S=Math.max(m,s);this.rowNode.setRowAutoHeight(S,this.column)},o=()=>r(0);o();const n=this.beans.resizeObserverService.observeResize(e,o);this.addDestroyFunc(()=>{n(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var e;return(e=this.column.getColDef().cellAriaRole)!=null?e:"gridcell"}getInstanceId(){return this.instanceId}getIncludeSelection(){return this.includeSelection}getIncludeRowDrag(){return this.includeRowDrag}getIncludeDndSource(){return this.includeDndSource}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted!=null?this.valueFormatted:this.value}showValue(e=!1){const t=this.getValueToDisplay();let s;if(this.isCellRenderer()){const r=this.createCellRendererParams();s=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),r)}this.cellComp.setRenderDetails(s,t,e),this.refreshHandle()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gridOptionsService.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),s=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource);return t||s||r}startEditing(e=null,t=!1,s=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(e,t,s)});return}const r=this.createCellEditorParams(e,t),o=this.column.getColDef(),n=this.beans.userComponentFactory.getCellEditorDetails(o,r);this.editCompDetails=n;const l=(n==null?void 0:n.popupFromSelector)!=null?n.popupFromSelector:!!o.cellEditorPopup,a=(n==null?void 0:n.popupPositionFromSelector)!=null?n.popupPositionFromSelector:o.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(n,l,a,this.beans.gridOptionsService.get("reactiveCustomComponents"));const u=this.createEvent(s,y.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(u)}setEditing(e){this.editing!==e&&(this.editing=e,this.refreshHandle())}stopRowOrCellEdit(e=!1){this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(e){const t={newValueExists:!1};if(e)return t;const s=this.cellComp.getCellEditor();return!s||s.isCancelAfterEnd&&s.isCancelAfterEnd()?t:{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,t){if(t===e)return!1;this.suppressRefreshCell=!0;const s=this.rowNode.setDataValue(this.column,t,"edit");return this.suppressRefreshCell=!1,s}stopEditing(e=!1){if(!this.editing)return!1;const{newValue:t,newValueExists:s}=this.takeValueFromCellEditor(e),r=this.rowNode.getValueFromValueService(this.column);let o=!1;return s&&(o=this.saveNewValue(r,t)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(r,t,!e&&!!o),o}dispatchEditingStoppedEvent(e,t,s){const r=At(pe({},this.createEvent(null,y.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:t,valueChanged:s});this.beans.eventService.dispatchEvent(r)}createCellEditorParams(e,t){return this.beans.gridOptionsService.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:t,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gridOptionsService.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:t=>this.beans.valueService.setValue(this.rowNode,this.column,t),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(t,s,r,o)=>this.registerRowDragger(t,s,o),setTooltip:(t,s)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(t,s),this.refreshToolTip()}})}parseValue(e){return this.beans.valueParserService.parseValue(this.column,this.rowNode,e,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?(t=this.rowCtrl)==null||t.refreshCell(this):this.refreshCell(e)}refreshCell(e){var t,s,r;if(this.suppressRefreshCell||this.editing)return;const o=this.column.getColDef(),n=e!=null&&!!e.newData,l=e!=null&&!!e.suppressFlash||!!o.suppressCellFlash,a=o.field==null&&o.valueGetter==null&&o.showRowGroup==null,u=e&&e.forceRefresh||a||n,d=!!this.cellComp,c=this.updateAndFormatValue(d),h=u||c;if(d){if(h){this.showValue(n);const p=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!p&&(this.beans.gridOptionsService.get("enableCellChangeFlash")||o.enableCellChangeFlash)&&this.flashCell(),(t=this.cellCustomStyleFeature)==null||t.applyUserStyles(),(s=this.cellCustomStyleFeature)==null||s.applyClassesFromColDef()}this.refreshToolTip(),(r=this.cellCustomStyleFeature)==null||r.applyCellClassRules()}}stopEditingAndFocus(e=!1,t=!1){this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(t)}navigateAfterEdit(e){if(this.beans.gridOptionsService.get("enterNavigatesVerticallyAfterEdit")){const s=e?_.UP:_.DOWN;this.beans.navigationService.navigateToNextCell(null,s,this.getCellPosition(),!1)}}flashCell(e){var t,s;const r=(t=e==null?void 0:e.flashDuration)!=null?t:e==null?void 0:e.flashDelay,o=(s=e==null?void 0:e.fadeDuration)!=null?s:e==null?void 0:e.fadeDelay;this.animateCell("data-changed",r,o)}animateCell(e,t,s){if(!this.cellComp)return;const r=`ag-cell-${e}`,o=`ag-cell-${e}-animation`,{gridOptionsService:n}=this.beans;t||(t=n.get("cellFlashDuration")),H(s)||(s=n.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(o,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(o,!0),this.eGui.style.transition=`background-color ${s}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.eGui.style.transition="")},s))},t)})}onFlashCells(e){if(!this.cellComp)return;const t=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[t]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){var t;return(t=this.callValueFormatter(e))!=null?t:e}callValueFormatter(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,s=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(e,t){const s=this.column.getColDef();return s.equals?s.equals(e,t):e===t}getComp(){return this.cellComp}getValue(){return this.value}getValueFormatted(){return this.valueFormatted}addDomData(){const e=this.getGui();this.beans.gridOptionsService.setDomData(e,ZR.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gridOptionsService.setDomData(e,ZR.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,t){return this.beans.gridOptionsService.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){var t;(t=this.cellKeyboardListenerFeature)==null||t.processCharacter(e)}onKeyDown(e){var t;(t=this.cellKeyboardListenerFeature)==null||t.onKeyDown(e)}onMouseEvent(e,t){var s;(s=this.cellMouseListenerFeature)==null||s.onMouseEvent(e,t)}getGui(){return this.eGui}refreshToolTip(){var e;(e=this.tooltipFeature)==null||e.refreshToolTip()}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&((e=this.cellPositionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:e,column:t,beans:s}=this;rw.refreshFirstAndLastStyles(e,t,s.columnModel)}refreshAriaColIndex(){const e=this.beans.columnModel.getAriaColumnIndex(this.column);rP(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return(e=this.cellPositionFeature)==null?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}getBeans(){return this.beans}isPrintLayout(){return this.printLayout}appendChild(e){this.eGui.appendChild(e)}refreshHandle(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,t=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,t)});return}this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,t)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass($Q,e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(KQ,e)}onCellFocused(e){if(this.beans.gridOptionsService.get("suppressCellFocus"))return;const t=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){t&&(e!=null&&e.forceBrowserFocus)&&(this.focusEventToRestore=e);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(zQ,t),t&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});const s=this.beans.gridOptionsService.get("editType")==="fullRow";!t&&!s&&this.editing&&this.stopRowOrCellEdit(),t&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:zo(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(BQ,!0),this.cellComp.addOrRemoveCssClass(jQ,!0);const e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(WQ,e),this.cellComp.addOrRemoveCssClass(UQ,!e)}onColumnHover(){if(!this.cellComp||!this.beans.gridOptionsService.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(YQ,e)}onColDefChanged(){var e;if(!this.cellComp)return;if(this.column.isAutoHeight()!==this.isAutoHeight&&((e=this.rowCtrl)==null||e.refreshCell(this)),this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{const r=this.getCellEditor();if(r!=null&&r.refresh){const{eventKey:o,cellStartedEdit:n}=this.editCompDetails.params,l=this.createCellEditorParams(o,n),a=this.column.getColDef(),u=this.beans.userComponentFactory.getCellEditorDetails(a,l);r.refresh(u.params)}}}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(qQ,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),s=this.createEvent(e,y.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(s),t.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(s)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new tw;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new wV(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,t,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const r=this.createRowDragComp(e,t,s);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(e,t,s){const r=this.beans.gridOptionsService.get("pagination"),o=this.beans.gridOptionsService.get("rowDragManaged"),n=this.beans.gridOptionsService.isRowModelType("clientSide");if(o){if(!n){ve("managed row dragging is only allowed in the Client Side Row Model");return}if(r){ve("managed row dragging is not possible when doing pagination");return}}const l=new au(()=>this.value,this.rowNode,this.column,e,t,s);return this.beans.context.createBean(l),l}};yV.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Wa=yV,XQ=0,EV=class eT extends U{constructor(e,t,s,r,o){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=t,this.gridOptionsService=t.gridOptionsService,this.rowNode=e,this.paginationPage=t.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=r,this.printLayout=o,this.suppressRowTransform=this.gridOptionsService.get("suppressRowTransform"),this.instanceId=e.id+"-"+XQ++,this.rowId=gi(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gridOptionsService.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=gi(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getBeans(){return this.beans}getInstanceId(){return this.instanceId}setComp(e,t,s){const r={rowComp:e,element:t,containerType:s};this.allRowGuis.push(r),s==="left"?this.leftGui=r:s==="right"?this.rightGui=r:s==="fullWidth"?this.fullWidthGui=r:this.centerGui=r,this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){switch(this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),e){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0;break}}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gridOptionsService.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach(s=>s.element.style.display=t)}initialiseRowComp(e){const t=this.gridOptionsService;this.listenOnDomOrder(e),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),t.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(o=>s.addOrRemoveCssClass(o,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&Rn(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),t.setDomData(e.element,eT.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>t.setDomData(e.element,eT.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=gi(this.rowNode.id),this.rowId!=null&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(BR(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(BR(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){if(this.gridOptionsService.get("enableRangeSelection")){ve("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}const t=this.beans.localeService.getLocaleTextFunc(),s=new au(()=>`1 ${t("rowDragRow","row")}`,this.rowNode,void 0,e.element,void 0,!0),r=this.createBean(s,this.beans.context);this.rowDragComps.push(r)}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType);if(this.rowType=="FullWidthDetail"&&!wt.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;const s=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var e,t;return this.gridOptionsService.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var r;return(r=s==null?void 0:s.rowComp)==null?void 0:r.getFullWidthCellRenderer()}):[(t=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:t.getFullWidthCellRenderer()]}getCellElement(e){const t=this.getCellCtrl(e);return t?t.getGui():null}executeProcessRowPostCreateFunc(){const e=this.gridOptionsService.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),t=!!this.centerGui,s=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&t&&s}setRowType(){const e=this.rowNode.stub,t=this.rowNode.isFullWidthCell(),s=this.gridOptionsService.get("masterDetail")&&this.rowNode.detail,r=this.beans.columnModel.isPivotMode(),n=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(r);e?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":n?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;if(e||this.gridOptionsService.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,t,s=null){const r={list:[],map:{}},o=(n,l)=>{r.list.push(l),r.map[n]=l};return t.forEach(n=>{const l=n.getInstanceId();let a=e.map[l];a||(a=new Wa(n,this.rowNode,this.beans,this)),o(l,a)}),e.list.forEach(n=>{if(r.map[n.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(n,s)){o(n.getColumn().getInstanceId(),n);return}n.destroy()}),r}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{const s=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(s,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:const t=e;throw new Error(`Unhandled case: ${t}`)}}createAllCellCtrls(){const e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const t=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t);const s=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const r=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,t){if(e.getColumn().getPinned()!=t)return!0;const n=e.isEditing(),l=this.beans.focusService.isCellFocused(e.getCellPosition());if(n||l){const u=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(u)>=0)}return!0}getDomOrder(){return this.gridOptionsService.get("ensureDomOrder")||this.gridOptionsService.isDomLayout("print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",t),this.addManagedPropertyListener("ensureDomOrder",t)}setAnimateFlags(e){if(this.isSticky()||!e)return;const t=H(this.rowNode.oldRowTop),s=this.beans.columnModel.isPinningLeft(),r=this.beans.columnModel.isPinningRight();if(t){if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=s,this.slideInAnimation.right=r}else{if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=s,this.fadeInAnimation.right=r}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}getRowType(){return this.rowType}refreshFullWidth(){const e=(l,a)=>l?l.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(l.element,a).params):!0,t=e(this.fullWidthGui,null),s=e(this.centerGui,null),r=e(this.leftGui,"left"),o=e(this.rightGui,"right");return t&&s&&r&&o}addListeners(){this.addManagedListener(this.rowNode,Ge.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Ge.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const e=this.beans.eventService;this.addManagedListener(e,y.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,y.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,y.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,y.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,y.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,y.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,y.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,y.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(e,y.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gridOptionsService.get("rowDragEntireRow")){this.allRowGuis.forEach(s=>{this.addRowDraggerToRow(s)});return}this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[]}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,Ge.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())}),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,e=>{this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(s=>s.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(s=>{this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach(t=>{const s=e===0,r=e===1;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",s),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",r)})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}updateExpandedCss(){const e=this.rowNode.isExpandable(),t=this.rowNode.expanded==!0;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass("ag-row-group",e),s.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&t),s.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!t),Rn(s.element,e&&t)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:zo(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.allRowGuis.find(a=>a.element.contains(e.target));if(!((t?t.element:null)===e.target))return;const o=this.rowNode,n=this.beans.focusService.getFocusedCell(),l={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:n&&n.column};this.beans.navigationService.navigateToNextCell(e,e.key,l,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||ho(e))return;const t=this.allRowGuis.find(n=>n.element.contains(e.target)),s=t?t.element:null,r=s===e.target;let o=null;r||(o=this.beans.focusService.findNextFocusableElement(s,!1,e.shiftKey)),(this.isFullWidth()&&r||!o)&&this.beans.navigationService.onTabKeyDown(this,e)}onFullWidthRowFocused(e){var t;const s=this.rowNode,r=e?this.isFullWidth()&&e.rowIndex===s.rowIndex&&e.rowPinned==s.rowPinned:!1,o=this.fullWidthGui?this.fullWidthGui.element:(t=this.centerGui)==null?void 0:t.element;o&&(o.classList.toggle("ag-full-width-focus",r),r&&o.focus({preventScroll:!0}))}refreshCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()}removeCellCtrl(e,t){const s={list:[],map:{}};return e.list.forEach(r=>{r!==t&&(s.list.push(r),s.map[r.getInstanceId()]=r)}),s}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){return this.gridOptionsService.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:t})}createRowEventWithSource(e,t){const s=this.createRowEvent(e,t);return s.source=this,s}onRowDblClick(e){if(ho(e))return;const t=this.createRowEventWithSource(y.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(t)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Va(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,s=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:s.getAllDisplayedColumns()[0],rowPinned:t.rowPinned,forceBrowserFocus:!0})}onRowClick(e){if(ho(e)||this.lastMouseDownOnDragger)return;const s=this.createRowEventWithSource(y.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(s);const r=e.ctrlKey||e.metaKey,o=e.shiftKey;if(this.gridOptionsService.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gridOptionsService.get("suppressRowClickSelection"))return;const l=this.gridOptionsService.get("rowMultiSelectWithClick"),a=!this.gridOptionsService.get("suppressRowDeselection"),u="rowClicked";if(this.rowNode.isSelected())l?this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):r?a&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!o,rangeSelect:o,event:e,source:u});else{const d=l?!1:!r;this.rowNode.setSelectedParams({newValue:!0,clearSelection:d,rangeSelect:o,event:e,source:u})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()}setupDetailRowAutoHeight(e){if(this.rowType!=="FullWidthDetail"||!this.gridOptionsService.get("detailRowAutoHeight"))return;const t=()=>{const r=e.clientHeight;if(r!=null&&r>0){const o=()=>{this.rowNode.setRowHeight(r),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(o,0)}},s=this.beans.resizeObserverService.observeResize(e,t);this.addDestroyFunc(s),t()}createFullWidthCompDetails(e,t){const s=this.gridOptionsService.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,o,n,l)=>this.addFullWidthRowDragging(r,o,n,l),setTooltip:(r,o)=>this.refreshRowTooltip(r,o)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(s);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(s);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(s);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(s)}}refreshRowTooltip(e,t){if(!this.fullWidthGui)return;const s={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:t};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Nn(s,this.beans))}addFullWidthRowDragging(e,t,s="",r){if(!this.isFullWidth())return;const o=new au(()=>s,this.rowNode,void 0,e,t,r);this.createBean(o,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(o,this.beans.context)})}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,s="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass(t,!0),r.rowComp.addOrRemoveCssClass(s,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-last",t)))}stopEditing(e=!1){if(this.stoppingRowEdit)return;const t=this.getAllCellCtrls(),s=this.editingRow;this.stoppingRowEdit=!0;let r=!1;for(const o of t){const n=o.stopEditing(e);s&&!e&&!r&&n&&(r=!0)}if(r){const o=this.createRowEvent(y.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(o)}s&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(e){this.allRowGuis.forEach(t=>{t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})}setEditingRow(e){this.editingRow=e,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-editing",e));const t=e?this.createRowEvent(y.EVENT_ROW_EDITING_STARTED):this.createRowEvent(y.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(t)}startRowEditing(e=null,t=null,s=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((o,n)=>{const l=n===t;return l?n.startEditing(e,l,s):n.startEditing(null,l,s),o?!0:n.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!e||!e.length||e.forEach(t=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(t,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(t=>t.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"?"left":e==="right"?"right":null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)}processStylesFromGridOptions(){const e=this.gridOptionsService.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const t=this.gridOptionsService.getCallback("getRowStyle");let s;if(t){const r={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};s=t(r)}return s||e?Object.assign({},e,s):this.emptyStyle}onRowSelected(e){const t=this.beans.gridOptionsService.getDocument(),s=!!this.rowNode.isSelected();this.forEachGui(e,r=>{r.rowComp.addOrRemoveCssClass("ag-row-selected",s),Pc(r.element,s),r.element.contains(t.activeElement)&&(r===this.centerGui||r===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const e=this.rowNode.isSelected();if(e&&this.beans.gridOptionsService.get("suppressRowDeselection"))return;const s=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(s)}isUseAnimationFrameForCreate(){return this.useAnimationFrameForCreate}addHoverFunctionality(e){this.active&&(this.addManagedListener(e,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,Ge.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gridOptionsService.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,Ge.EVENT_MOUSE_LEAVE,()=>{e.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(e){const t=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(t.top,!0)-100,r=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(s,e),r)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),o=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,n=o?`${Math.min(s,o)-2}px`:void 0;this.forEachGui(e,l=>{l.element.style.height=`${t}px`,n&&l.element.style.setProperty("--ag-line-height",n)})}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}destroyFirstPass(e=!1){if(this.active=!1,!e&&this.gridOptionsService.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){const r=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(r)}else this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const t=this.createRowEvent(y.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(t),this.beans.eventService.dispatchEvent(t),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const e=t=>(t.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),t.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const s=this.beans.paginationProxy.getPixelOffset();return e+s*(t?1:-1)}setRowTop(e){if(!this.printLayout&&H(e)){const t=this.applyPaginationOffset(e),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeightService.getRealPixelPosition(t)}px`;this.setRowTopStyle(o)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let t;if(this.isSticky())t=this.rowNode.stickyRowTop;else{const s=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,r=this.applyPaginationOffset(s);t=this.rowNode.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return t+"px"}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getRowNode(){return this.rowNode}getCellCtrl(e){let t=null;return this.getAllCellCtrls().forEach(s=>{s.getColumn()==e&&(t=s)}),t!=null||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(e)>=0&&(t=s)}),t}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){const t=this.rowNode.getRowIndexString(),s=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),r=this.rowNode.rowIndex%2===0,o=s+this.rowNode.rowIndex+1;this.forEachGui(e,n=>{n.rowComp.setRowIndex(t),n.rowComp.addOrRemoveCssClass("ag-row-even",r),n.rowComp.addOrRemoveCssClass("ag-row-odd",!r),sP(n.element,o)})}};EV.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Ua=EV,Vs=class extends U{constructor(i){super(),this.element=i}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const i="keydown",e=this.processKeyboardEvent.bind(this,i);this.addManagedListener(this.element,i,e)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",Jb("touchstart")?"touchstart":"mousedown"].forEach(t=>{const s=this.processMouseEvent.bind(this,t);this.addManagedListener(this.element,t,s)})}processMouseEvent(i,e){if(!this.mouseEventService.isEventFromThisGrid(e)||ho(e))return;const t=this.getRowForEvent(e),s=this.mouseEventService.getRenderedCellForEvent(e);i==="contextmenu"?this.handleContextMenuMouseEvent(e,void 0,t,s):(s&&s.onMouseEvent(i,e),t&&t.onMouseEvent(i,e))}mockContextMenuForIPad(){if(!_n())return;const i=new Oi(this.element),e=t=>{const s=this.getRowForEvent(t.touchEvent),r=this.mouseEventService.getRenderedCellForEvent(t.touchEvent);this.handleContextMenuMouseEvent(void 0,t.touchEvent,s,r)};this.addManagedListener(i,Oi.EVENT_LONG_TAP,e),this.addDestroyFunc(()=>i.destroy())}getRowForEvent(i){let e=i.target;for(;e;){const t=this.gridOptionsService.getDomData(e,Ua.DOM_DATA_KEY_ROW_CTRL);if(t)return t;e=e.parentElement}return null}handleContextMenuMouseEvent(i,e,t,s){const r=t?t.getRowNode():null,o=s?s.getColumn():null;let n=null;if(o){const u=i||e;s.dispatchCellContextMenuEvent(u??null),n=this.valueService.getValue(o,r)}const l=this.ctrlsService.getGridBodyCtrl(),a=s?s.getGui():l.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:i,touchEvent:e,rowNode:r,column:o,value:n,anchorToElement:a})}getControlsForEventTarget(i){return{cellCtrl:gv(this.gridOptionsService,i,Wa.DOM_DATA_KEY_CELL_CTRL),rowCtrl:gv(this.gridOptionsService,i,Ua.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(i,e){const{cellCtrl:t,rowCtrl:s}=this.getControlsForEventTarget(e.target);e.defaultPrevented||(t?this.processCellKeyboardEvent(t,i,e):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,i,e))}processCellKeyboardEvent(i,e,t){const s=i.getRowNode(),r=i.getColumn(),o=i.isEditing();if(!Sv(this.gridOptionsService,t,s,r,o)&&e==="keydown"&&(!o&&this.navigationService.handlePageScrollingKey(t)||i.onKeyDown(t),this.doGridOperations(t,i.isEditing()),QS(t)&&i.processCharacter(t)),e==="keydown"){const l=i.createEvent(t,y.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(l)}}processFullWidthRowKeyboardEvent(i,e,t){const s=i.getRowNode(),r=this.focusService.getFocusedCell(),o=r&&r.column;if(!Sv(this.gridOptionsService,t,s,o,!1)){const l=t.key;if(e==="keydown")switch(l){case _.PAGE_HOME:case _.PAGE_END:case _.PAGE_UP:case _.PAGE_DOWN:this.navigationService.handlePageScrollingKey(t,!0);break;case _.UP:case _.DOWN:i.onKeyboardNavigate(t);break;case _.TAB:i.onTabKeyDown(t);break}}if(e==="keydown"){const l=i.createRowEvent(y.EVENT_CELL_KEY_DOWN,t);this.eventService.dispatchEvent(l)}}doGridOperations(i,e){if(!i.ctrlKey&&!i.metaKey||e||!this.mouseEventService.isEventFromThisGrid(i))return;const t=Tk(i);if(t===_.A)return this.onCtrlAndA(i);if(t===_.C)return this.onCtrlAndC(i);if(t===_.D)return this.onCtrlAndD(i);if(t===_.V)return this.onCtrlAndV(i);if(t===_.X)return this.onCtrlAndX(i);if(t===_.Y)return this.onCtrlAndY();if(t===_.Z)return this.onCtrlAndZ(i)}onCtrlAndA(i){const{pinnedRowModel:e,paginationProxy:t,rangeService:s}=this;if(s&&t.isRowsToRender()){const[r,o]=[e.isEmpty("top"),e.isEmpty("bottom")],n=r?null:"top";let l,a;o?(l=null,a=this.paginationProxy.getRowCount()-1):(l="bottom",a=e.getPinnedBottomRowData().length-1);const u=this.columnModel.getAllDisplayedColumns();if(er(u))return;s.setCellRange({rowStartIndex:0,rowStartPinned:n,rowEndIndex:a,rowEndPinned:l,columnStart:u[0],columnEnd:Ze(u)})}i.preventDefault()}onCtrlAndC(i){if(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection"))return;const{cellCtrl:e,rowCtrl:t}=this.getControlsForEventTarget(i.target);e!=null&&e.isEditing()||t!=null&&t.isEditing()||(i.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(i){if(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection")||this.gridOptionsService.get("suppressCutToClipboard"))return;const{cellCtrl:e,rowCtrl:t}=this.getControlsForEventTarget(i.target);e!=null&&e.isEditing()||t!=null&&t.isEditing()||(i.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(i){const{cellCtrl:e,rowCtrl:t}=this.getControlsForEventTarget(i.target);e!=null&&e.isEditing()||t!=null&&t.isEditing()||this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(i){this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),i.preventDefault()}onCtrlAndZ(i){this.gridOptionsService.get("undoRedoCellEditing")&&(i.preventDefault(),i.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};f([D("mouseEventService")],Vs.prototype,"mouseEventService",2);f([D("valueService")],Vs.prototype,"valueService",2);f([D("menuService")],Vs.prototype,"menuService",2);f([D("ctrlsService")],Vs.prototype,"ctrlsService",2);f([D("navigationService")],Vs.prototype,"navigationService",2);f([D("focusService")],Vs.prototype,"focusService",2);f([D("undoRedoService")],Vs.prototype,"undoRedoService",2);f([D("columnModel")],Vs.prototype,"columnModel",2);f([D("paginationProxy")],Vs.prototype,"paginationProxy",2);f([D("pinnedRowModel")],Vs.prototype,"pinnedRowModel",2);f([Qe("rangeService")],Vs.prototype,"rangeService",2);f([Qe("clipboardService")],Vs.prototype,"clipboardService",2);f([K],Vs.prototype,"postConstruct",1);var oh=class extends U{constructor(i){super(),this.centerContainerCtrl=i}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.listenForResize()}),this.addManagedListener(this.eventService,y.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const i=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(i),this.gridBodyCtrl.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const i=this.gridBodyCtrl.getBodyViewportElement(),e=Ou(i);if(e<=50)return;let t=this.getPinnedColumnsOverflowingViewport(e-50);const s=this.gridOptionsService.getCallback("processUnpinnedColumns");t.length&&(s&&(t=s({columns:t,viewportWidth:e})),this.columnModel.setColumnsPinned(t,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(i){const e=this.pinnedWidthService.getPinnedRightWidth(),t=this.pinnedWidthService.getPinnedLeftWidth(),s=e+t;if(s<i)return[];const r=[...this.columnModel.getDisplayedLeftColumns()],o=[...this.columnModel.getDisplayedRightColumns()];let n=0,l=0,a=0;const u=[];let d=s-a-i;for(;(l<r.length||n<o.length)&&d>0;){if(n<o.length){const c=o[n++];d-=c.getActualWidth(),u.push(c)}if(l<r.length&&d>0){const c=r[l++];d-=c.getActualWidth(),u.push(c)}}return u}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const i=this.gridBodyCtrl.getBodyViewportElement(),e=vf(i);if(this.bodyHeight!==e){this.bodyHeight=e;const t={type:y.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(t)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const i={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(i)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const i=this.centerContainerCtrl.getCenterWidth(),e=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(i,e)}};f([D("ctrlsService")],oh.prototype,"ctrlsService",2);f([D("pinnedWidthService")],oh.prototype,"pinnedWidthService",2);f([D("columnModel")],oh.prototype,"columnModel",2);f([D("scrollVisibleService")],oh.prototype,"scrollVisibleService",2);f([K],oh.prototype,"postConstruct",1);var NP=class extends U{constructor(i){super(),this.element=i}postConstruct(){this.addManagedListener(this.eventService,y.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const i=this.pinnedWidthService.getPinnedLeftWidth(),e=i>0;ze(this.element,e),_r(this.element,i)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};f([D("pinnedWidthService")],NP.prototype,"pinnedWidthService",2);f([K],NP.prototype,"postConstruct",1);var GP=class extends U{constructor(i){super(),this.element=i}postConstruct(){this.addManagedListener(this.eventService,y.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const i=this.pinnedWidthService.getPinnedRightWidth(),e=i>0;ze(this.element,e),_r(this.element,i)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};f([D("pinnedWidthService")],GP.prototype,"pinnedWidthService",2);f([K],GP.prototype,"postConstruct",1);var ow=class extends U{constructor(i,e){super(),this.eContainer=i,this.eViewport=e}postConstruct(){this.addManagedListener(this.eventService,y.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const i=this.maxDivHeightScaler.getUiContainerHeight(),e=i!=null?`${i}px`:"";this.eContainer.style.height=e,this.eViewport&&(this.eViewport.style.height=e)}};f([D("rowContainerHeightService")],ow.prototype,"maxDivHeightScaler",2);f([K],ow.prototype,"postConstruct",1);var nw=class extends U{constructor(i){super(),this.eContainer=i}postConstruct(){if(Ee(this.rangeService))return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",e=>{if(e.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gridOptionsService.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};f([Qe("rangeService")],nw.prototype,"rangeService",2);f([D("dragService")],nw.prototype,"dragService",2);f([K],nw.prototype,"postConstruct",1);var nh=class extends U{constructor(i,e=!1){super(),this.callback=i,this.addSpacer=e}postConstruct(){const i=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",i),this.addManagedListener(this.eventService,y.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addSpacer&&(this.addManagedListener(this.eventService,y.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_SCROLLBAR_WIDTH_CHANGED,i)),this.setWidth()}setWidth(){const{columnModel:i}=this,e=this.gridOptionsService.isDomLayout("print"),t=i.getBodyContainerWidth(),s=i.getDisplayedColumnsLeftWidth(),r=i.getDisplayedColumnsRightWidth();let o;e?o=t+s+r:(o=t,this.addSpacer&&(this.gridOptionsService.get("enableRtl")?s:r)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(o+=this.gridOptionsService.getScrollbarWidth())),this.callback(o)}};f([D("columnModel")],nh.prototype,"columnModel",2);f([D("scrollVisibleService")],nh.prototype,"scrollVisibleService",2);f([K],nh.prototype,"postConstruct",1);function JQ(i){switch(i){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var ZQ=tl([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),e4=tl([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"]]),_u=class RV extends U{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name==="topFullWidth"||this.name==="stickyTopFullWidth"||this.name==="bottomFullWidth"||this.name==="fullWidth"}static getRowContainerCssClasses(e){const t=ZQ.get(e),s=e4.get(e);return{container:t,viewport:s}}static getPinned(e){switch(e){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gridOptionsService.get("enableRtl"),this.forContainers(["center"],()=>this.viewportSizeFeature=this.createManagedBean(new oh(this)))}registerWithCtrlsService(){switch(this.name){case"center":this.ctrlsService.registerCenterRowContainerCtrl(this);break;case"left":this.ctrlsService.registerLeftRowContainerCtrl(this);break;case"right":this.ctrlsService.registerRightRowContainerCtrl(this);break;case"topCenter":this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case"topLeft":this.ctrlsService.registerTopLeftRowContainerCon(this);break;case"topRight":this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case"stickyTopCenter":this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case"stickyTopLeft":this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case"stickyTopRight":this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case"bottomCenter":this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case"bottomLeft":this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case"bottomRight":this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,s){this.comp=e,this.eContainer=t,this.eViewport=s,this.createManagedBean(new Vs(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const r=["topCenter","topLeft","topRight"],o=["stickyTopCenter","stickyTopLeft","stickyTopRight"],n=["bottomCenter","bottomLeft","bottomRight"],l=["center","left","right"],a=[...r,...n,...l,...o],u=["center","left","right","fullWidth"],d=["center","topCenter","stickyTopCenter","bottomCenter"],c=["left","bottomLeft","topLeft","stickyTopLeft"],h=["right","bottomRight","topRight","stickyTopRight"];this.forContainers(c,()=>{this.pinnedWidthFeature=this.createManagedBean(new NP(this.eContainer)),this.addManagedListener(this.eventService,y.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(h,()=>{this.pinnedWidthFeature=this.createManagedBean(new GP(this.eContainer)),this.addManagedListener(this.eventService,y.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(u,()=>this.createManagedBean(new ow(this.eContainer,this.name==="center"?s:void 0))),this.forContainers(a,()=>this.createManagedBean(new nw(this.eContainer))),this.forContainers(d,()=>this.createManagedBean(new nh(p=>this.comp.setContainerWidth(`${p}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth"].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const s=()=>{const r=this.gridOptionsService.get("ensureDomOrder"),o=this.gridOptionsService.isDomLayout("print");this.comp.setDomOrder(r||o)};this.addManagedPropertyListener("domLayout",s),s()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter"],()=>{const e=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",e)})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),s=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(t,s,e)}getCenterWidth(){return Ou(this.eViewport)}getCenterViewportScrollLeft(){return pg(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return mP(this.eViewport)}getViewportScrollLeft(){return pg(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gridOptionsService.get("alwaysShowHorizontalScroll")||gk(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){gg(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!RV.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){if(!this.visible){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const t=this.gridOptionsService.isDomLayout("print"),r=this.gridOptionsService.get("embedFullWidthRows")||t,o=this.getRowCtrls().filter(n=>{const l=n.isFullWidth();return this.isFullWithContainer?!r&&l:r||!l});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};f([D("dragService")],_u.prototype,"dragService",2);f([D("ctrlsService")],_u.prototype,"ctrlsService",2);f([D("columnModel")],_u.prototype,"columnModel",2);f([D("resizeObserverService")],_u.prototype,"resizeObserverService",2);f([D("rowRenderer")],_u.prototype,"rowRenderer",2);f([K],_u.prototype,"postConstruct",1);var TV=_u,t4=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="topLeft"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="topCenter"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="topRight"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="topFullWidth"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="left"></ag-row-container>
                <ag-row-container ref="centerContainer" name="center"></ag-row-container>
                <ag-row-container ref="rightContainer" name="right"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="fullWidth"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="stickyTopLeft"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="stickyTopCenter"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="stickyTopRight"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="stickyTopFullWidth"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="bottomLeft"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="bottomCenter"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="bottomRight"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="bottomFullWidth"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,Vn=class extends be{constructor(){super(t4)}init(){const i=(t,s)=>{const r=`${t}px`;s.style.minHeight=r,s.style.height=r},e={setRowAnimationCssOnBodyViewport:(t,s)=>this.setRowAnimationCssOnBodyViewport(t,s),setColumnCount:t=>X0(this.getGui(),t),setRowCount:t=>Q0(this.getGui(),t),setTopHeight:t=>i(t,this.eTop),setBottomHeight:t=>i(t,this.eBottom),setTopDisplay:t=>this.eTop.style.display=t,setBottomDisplay:t=>this.eBottom.style.display=t,setStickyTopHeight:t=>this.eStickyTop.style.height=t,setStickyTopTop:t=>this.eStickyTop.style.top=t,setStickyTopWidth:t=>this.eStickyTop.style.width=t,setColumnMovingCss:(t,s)=>this.addOrRemoveCssClass(t,s),updateLayoutClasses:(t,s)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(o=>{o.toggle("ag-layout-auto-height",s.autoHeight),o.toggle("ag-layout-normal",s.normal),o.toggle("ag-layout-print",s.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",s.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",s.normal),this.addOrRemoveCssClass("ag-layout-print",s.print)},setAlwaysVerticalScrollClass:(t,s)=>this.eBodyViewport.classList.toggle(SV,s),registerBodyViewportResizeListener:t=>{const s=this.resizeObserverService.observeResize(this.eBodyViewport,t);this.addDestroyFunc(()=>s())},setPinnedTopBottomOverflowY:t=>this.eTop.style.overflowY=this.eBottom.style.overflowY=t,setCellSelectableCss:(t,s)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(r=>r.classList.toggle(t,s))},setBodyViewportWidth:t=>this.eBodyViewport.style.width=t};this.ctrl=this.createManagedBean(new ws),this.ctrl.setComp(e,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService&&this.gridOptionsService.get("enableRangeSelection")||this.gridOptionsService.get("rowSelection")==="multiple")&&q0(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(i,e){const t=this.eBodyViewport.classList;t.toggle("ag-row-animation",e),t.toggle("ag-row-no-animation",!e)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};f([D("resizeObserverService")],Vn.prototype,"resizeObserverService",2);f([Qe("rangeService")],Vn.prototype,"rangeService",2);f([q("eBodyViewport")],Vn.prototype,"eBodyViewport",2);f([q("eStickyTop")],Vn.prototype,"eStickyTop",2);f([q("eTop")],Vn.prototype,"eTop",2);f([q("eBottom")],Vn.prototype,"eBottom",2);f([q("gridHeader")],Vn.prototype,"headerRootComp",2);f([q("eBody")],Vn.prototype,"eBody",2);f([K],Vn.prototype,"init",1);var mg=class extends U{postConstruct(){this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){const i=this.ctrlsService.getCenterRowContainerCtrl();if(!i||this.columnAnimationService.isActive())return;const e={horizontalScrollShowing:i.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(e)}setScrollsVisible(i){if(this.horizontalScrollShowing!==i.horizontalScrollShowing||this.verticalScrollShowing!==i.verticalScrollShowing){this.horizontalScrollShowing=i.horizontalScrollShowing,this.verticalScrollShowing=i.verticalScrollShowing;const t={type:y.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(t)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};f([D("ctrlsService")],mg.prototype,"ctrlsService",2);f([D("columnAnimationService")],mg.prototype,"columnAnimationService",2);f([K],mg.prototype,"postConstruct",1);mg=f([ie("scrollVisibleService")],mg);var Dl=class extends U{constructor(){super(...arguments),this.gridInstanceId=Dl.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(i){i[Dl.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(i){return gv(this.gridOptionsService,i.target,Wa.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(i){return this.isElementInThisGrid(i.target)}isElementInThisGrid(i){let e=i;for(;e;){const t=e[Dl.GRID_DOM_KEY];if(H(t))return t===this.gridInstanceId;e=e.parentElement}return!1}getCellPositionForEvent(i){const e=this.getRenderedCellForEvent(i);return e?e.getCellPosition():null}getNormalisedPosition(i){const e=this.gridOptionsService.isDomLayout("normal"),t=i;let s,r;if(t.clientX!=null||t.clientY!=null?(s=t.clientX,r=t.clientY):(s=t.x,r=t.y),e){const o=this.ctrlsService.getGridBodyCtrl(),n=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();s+=l.left,r+=n.top}return{x:s,y:r}}};Dl.gridInstanceSequence=new TP;Dl.GRID_DOM_KEY="__ag_grid_instance";f([D("ctrlsService")],Dl.prototype,"ctrlsService",2);Dl=f([ie("mouseEventService")],Dl);var ds=class extends U{constructor(){super(),this.onPageDown=WR(this.onPageDown,100),this.onPageUp=WR(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(i=>{this.gridBodyCon=i.gridBodyCtrl})}handlePageScrollingKey(i,e=!1){const t=i.key,s=i.altKey,r=i.ctrlKey||i.metaKey,o=!!this.rangeService&&i.shiftKey,n=this.mouseEventService.getCellPositionForEvent(i);let l=!1;switch(t){case _.PAGE_HOME:case _.PAGE_END:!r&&!s&&(this.onHomeOrEndKey(t),l=!0);break;case _.LEFT:case _.RIGHT:case _.UP:case _.DOWN:if(!n)return!1;r&&!s&&!o&&(this.onCtrlUpDownLeftRight(t,n),l=!0);break;case _.PAGE_DOWN:case _.PAGE_UP:!r&&!s&&(l=this.handlePageUpDown(t,n,e));break}return l&&i.preventDefault(),l}handlePageUpDown(i,e,t){return t&&(e=this.focusService.getFocusedCell()),e?(i===_.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0):!1}navigateTo(i){const{scrollIndex:e,scrollType:t,scrollColumn:s,focusIndex:r,focusColumn:o}=i;if(H(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),H(e)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e,t),i.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(r),this.focusService.setFocusedCell({rowIndex:r,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){const n={rowIndex:r,rowPinned:null,column:o};this.rangeService.setRangeToCell(n)}}onPageDown(i){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.getViewportHeight(),r=this.paginationProxy.getPixelOffset(),o=t.top+s,n=this.paginationProxy.getRowIndexAtPixel(o+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(i,n):this.navigateToNextPage(i,n)}onPageUp(i){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.paginationProxy.getPixelOffset(),r=t.top,o=this.paginationProxy.getRowIndexAtPixel(r+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(i,o,!0):this.navigateToNextPage(i,o,!0)}navigateToNextPage(i,e,t=!1){const s=this.getViewportHeight(),r=this.paginationProxy.getPageFirstRow(),o=this.paginationProxy.getPageLastRow(),n=this.paginationProxy.getPixelOffset(),l=this.paginationProxy.getRow(i.rowIndex),a=t?(l==null?void 0:l.rowHeight)-s-n:s-n,u=(l==null?void 0:l.rowTop)+a;let d=this.paginationProxy.getRowIndexAtPixel(u+n);if(d===i.rowIndex){const h=t?-1:1;e=d=i.rowIndex+h}let c;t?(c="bottom",d<r&&(d=r),e<r&&(e=r)):(c="top",d>o&&(d=o),e>o&&(e=o)),this.isRowTallerThanView(d)&&(e=d,c="top"),this.navigateTo({scrollIndex:e,scrollType:c,scrollColumn:null,focusIndex:d,focusColumn:i.column})}navigateToNextPageWithAutoHeight(i,e,t=!1){this.navigateTo({scrollIndex:e,scrollType:t?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:i.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(i,t);this.navigateTo({scrollIndex:e,scrollType:t?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:i.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(i,e=!1){var t;const s=e?-1:1,r=this.getViewportHeight(),o=this.paginationProxy.getPageLastRow();let n=0,l=i.rowIndex;for(;l>=0&&l<=o;){const a=this.paginationProxy.getRow(l);if(a){const u=(t=a.rowHeight)!=null?t:0;if(n+u>r)break;n+=u}l+=s}return Math.max(0,Math.min(l,o))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.gridOptionsService.getScrollbarWidth();let s=e.bottom-e.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(s-=t),s}isRowTallerThanView(i){const e=this.paginationProxy.getRow(i);if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(i,e){const t=this.cellNavigationService.getNextCellToFocus(i,e,!0),{rowIndex:s,column:r}=t;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:r,focusIndex:s,focusColumn:r})}onHomeOrEndKey(i){const e=i===_.PAGE_HOME,t=this.columnModel.getAllDisplayedColumns(),s=e?t[0]:Ze(t),r=e?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:s,focusIndex:r,focusColumn:s})}onTabKeyDown(i,e){const t=e.shiftKey;if(this.tabToNextCellCommon(i,t,e)){e.preventDefault();return}if(t){const{rowIndex:r,rowPinned:o}=i.getRowPosition();(o?r===0:r===this.paginationProxy.getPageFirstRow())&&(this.gridOptionsService.get("headerHeight")===0||this.gridOptionsService.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(e.preventDefault(),this.focusService.focusPreviousFromFirstCell(e)))}else i instanceof Wa&&i.focusCell(!0),this.focusService.focusNextGridCoreContainer(t)&&e.preventDefault()}tabToNextCell(i,e){const t=this.focusService.getFocusedCell();if(!t)return!1;let s=this.getCellByPosition(t);return!s&&(s=this.rowRenderer.getRowByPosition(t),!s||!s.isFullWidth())?!1:this.tabToNextCellCommon(s,i,e)}tabToNextCellCommon(i,e,t){let s=i.isEditing();if(!s&&i instanceof Wa){const n=i.getRowCtrl();n&&(s=n.isEditing())}let r;return s?this.gridOptionsService.get("editType")==="fullRow"?r=this.moveToNextEditingRow(i,e,t):r=this.moveToNextEditingCell(i,e,t):r=this.moveToNextCellNotEditing(i,e),r||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(i,e,t=null){const s=i.getCellPosition();i.getGui().focus(),i.stopEditing();const r=this.findNextCellToFocusOn(s,e,!0);return r==null?!1:(r.startEditing(null,!0,t),r.focusCell(!1),!0)}moveToNextEditingRow(i,e,t=null){const s=i.getCellPosition(),r=this.findNextCellToFocusOn(s,e,!0);if(r==null)return!1;const o=r.getCellPosition(),n=this.isCellEditable(s),l=this.isCellEditable(o),a=o&&s.rowIndex===o.rowIndex&&s.rowPinned===o.rowPinned;return n&&i.setFocusOutOnEditor(),a||(i.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,t)),l?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(i,e){const t=this.columnModel.getAllDisplayedColumns();let s;i instanceof Ua?s=At(pe({},i.getRowPosition()),{column:e?t[0]:Ze(t)}):s=i.getCellPosition();const r=this.findNextCellToFocusOn(s,e,!1);if(r instanceof Wa)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),e);return H(r)}findNextCellToFocusOn(i,e,t){let s=i;for(;;){i!==s&&(i=s),e||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,e);const r=this.gridOptionsService.getCallback("tabToNextCell");if(H(r)){const a=r({backwards:e,editing:t,previousCellPosition:i,nextCellPosition:s||null});H(a)?(a.floating&&(ve("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),a.rowPinned=a.floating),s={rowIndex:a.rowIndex,column:a.column,rowPinned:a.rowPinned}):s=null}if(!s)return null;if(s.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+s.rowIndex,column:s.column},fromCell:!0}),null}const o=this.gridOptionsService.get("editType")==="fullRow";if(t&&!o&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const n=this.getCellByPosition(s);if(!n){const l=this.rowRenderer.getRowByPosition(s);if(!l||!l.isFullWidth()||t)continue;return l}if(!n.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(s),n}}isCellEditable(i){const e=this.lookupRowNodeForCell(i);return e?i.column.isCellEditable(e):!1}getCellByPosition(i){const e=this.rowRenderer.getRowByPosition(i);return e?e.getCellCtrl(i.column):null}lookupRowNodeForCell(i){return i.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(i.rowIndex):i.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(i.rowIndex):this.paginationProxy.getRow(i.rowIndex)}navigateToNextCell(i,e,t,s){let r=t,o=!1;for(;r&&(r===t||!this.isValidNavigateCell(r));)this.gridOptionsService.get("enableRtl")?e===_.LEFT&&(r=this.getLastCellOfColSpan(r)):e===_.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(e,r),o=Ee(r);if(o&&i&&i.key===_.UP&&(r={rowIndex:-1,rowPinned:null,column:t.column}),s){const l=this.gridOptionsService.getCallback("navigateToNextCell");if(H(l)){const u=l({key:e,previousCellPosition:t,nextCellPosition:r||null,event:i});H(u)?(u.floating&&(ve("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),u.rowPinned=u.floating),r={rowPinned:u.rowPinned,rowIndex:u.rowIndex,column:u.column}):r=null}}if(!r)return;if(r.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+r.rowIndex,column:t.column},event:i||void 0,fromCell:!0});return}const n=this.getNormalisedPosition(r);n?this.focusPosition(n):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(i){this.ensureCellVisible(i);const e=this.getCellByPosition(i);return e?(i=e.getCellPosition(),this.ensureCellVisible(i),i):null}tryToFocusFullWidthRow(i,e=!1){const t=this.columnModel.getAllDisplayedColumns(),s=this.rowRenderer.getRowByPosition(i);if(!s||!s.isFullWidth())return!1;const r=this.focusService.getFocusedCell(),o={rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:i.column||(e?Ze(t):t[0])};this.focusPosition(o);const n=r!=null?this.rowPositionUtils.before(o,r):!1,l={type:y.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,floating:o.rowPinned,fromBelow:n};return this.eventService.dispatchEvent(l),!0}focusPosition(i){this.focusService.setFocusedCell({rowIndex:i.rowIndex,column:i.column,rowPinned:i.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(i)}isValidNavigateCell(i){return!!this.rowPositionUtils.getRowNode(i)}getLastCellOfColSpan(i){const e=this.getCellByPosition(i);if(!e)return i;const t=e.getColSpanningList();return t.length===1?i:{rowIndex:i.rowIndex,column:Ze(t),rowPinned:i.rowPinned}}ensureCellVisible(i){const e=this.gridOptionsService.isGroupRowsSticky(),t=this.rowModel.getRow(i.rowIndex);!(e&&(t==null?void 0:t.sticky))&&Ee(i.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i.rowIndex),i.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(i.column)}};f([D("mouseEventService")],ds.prototype,"mouseEventService",2);f([D("paginationProxy")],ds.prototype,"paginationProxy",2);f([D("focusService")],ds.prototype,"focusService",2);f([Qe("rangeService")],ds.prototype,"rangeService",2);f([D("columnModel")],ds.prototype,"columnModel",2);f([D("rowModel")],ds.prototype,"rowModel",2);f([D("ctrlsService")],ds.prototype,"ctrlsService",2);f([D("rowRenderer")],ds.prototype,"rowRenderer",2);f([D("headerNavigationService")],ds.prototype,"headerNavigationService",2);f([D("rowPositionUtils")],ds.prototype,"rowPositionUtils",2);f([D("cellNavigationService")],ds.prototype,"cellNavigationService",2);f([D("pinnedRowModel")],ds.prototype,"pinnedRowModel",2);f([K],ds.prototype,"postConstruct",1);ds=f([ie("navigationService")],ds);var kP=class DV extends Iu{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gridOptionsService.setDomData(this.getGui(),DV.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,s=r=>{Sv(this.gridOptionsService,r,t.node,t.column,!0)||t.onKeyDown(r)};this.addManagedListener(e,"keydown",s)}};kP.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";f([K],kP.prototype,"postConstruct",1);var i4=kP,s4=class extends be{constructor(i,e,t,s,r){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=i,this.column=e.getColumn(),this.rowNode=e.getRowNode(),this.rowCtrl=e.getRowCtrl(),this.eRow=s,this.cellCtrl=e;const o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(o);const n=this.getGui();this.forceWrapper=e.isForceWrapper(),this.refreshWrapper(!1);const l=(d,c)=>{c!=null&&c!=""?n.setAttribute(d,c):n.removeAttribute(d)};Wt(n,e.getCellAriaRole()),l("col-id",e.getColumnIdSanitised());const a=e.getTabIndex();a!==void 0&&l("tabindex",a.toString());const u={addOrRemoveCssClass:(d,c)=>this.addOrRemoveCssClass(d,c),setUserStyles:d=>SP(n,d),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:d=>this.includeSelection=d,setIncludeRowDrag:d=>this.includeRowDrag=d,setIncludeDndSource:d=>this.includeDndSource=d,setRenderDetails:(d,c,h)=>this.setRenderDetails(d,c,h),setEditDetails:(d,c,h)=>this.setEditDetails(d,c,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};e.setComp(u,this.getGui(),this.eCellWrapper,t,r)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(i,e,t){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const r=this.refreshWrapper(!1);this.refreshEditStyles(!1),i?!(t||r)&&this.refreshCellRenderer(i)||(this.destroyRenderer(),this.createCellRendererInstance(i)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(e))}setEditDetails(i,e,t){i?this.createCellEditorInstance(i,e,t):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(i){const e=this.includeRowDrag||this.includeDndSource||this.includeSelection,t=e||this.forceWrapper,s=t&&this.eCellWrapper==null;if(s){const u=document.createElement("div");u.setAttribute("role","presentation"),u.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=u,this.getGui().appendChild(this.eCellWrapper)}const r=!t&&this.eCellWrapper!=null;r&&(lo(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!t);const o=!i&&t,n=o&&this.eCellValue==null;if(n){const u=document.createElement("span");u.setAttribute("role","presentation"),u.setAttribute("class","ag-cell-value"),this.eCellValue=u,this.eCellWrapper.appendChild(this.eCellValue)}const l=!o&&this.eCellValue!=null;l&&(lo(this.eCellValue),this.eCellValue=void 0);const a=s||r||n||l;return a&&this.removeControls(),i||e&&this.addControls(),a}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(i,e,t){const s=this.editorVersion,r=i.newAgStackInstance();if(!r)return;const{params:o}=i;r.then(l=>this.afterCellEditorCreated(s,l,o,e,t)),Ee(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(i){const e=this.getParentOfValue();ni(e);const t=i!=null?gi(i,!0):null;t!=null&&(e.textContent=t)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:i}=this.beans;this.cellRenderer=i.destroyBean(this.cellRenderer),lo(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:i}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=i.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=i.destroyBean(this.cellEditorPopupWrapper),lo(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(i){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==i.componentClass)return!1;const e=this.cellRenderer.refresh(i.params);return e===!0||e===void 0}createCellRendererInstance(i){const t=!this.beans.gridOptionsService.get("suppressAnimationFrame"),s=this.rendererVersion,{componentClass:r}=i,o=()=>{if(this.rendererVersion!==s||!this.isAlive())return;const l=i.newAgStackInstance(),a=this.afterCellRendererCreated.bind(this,s,r);l&&l.then(a)};t&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(i,e,t){if(!this.isAlive()||i!==this.rendererVersion){this.beans.context.destroyBean(t);return}if(this.cellRenderer=t,this.cellRendererClass=e,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const r=this.getParentOfValue();ni(r),r.appendChild(this.cellRendererGui)}}afterCellEditorCreated(i,e,t,s,r){if(i!==this.editorVersion){this.beans.context.destroyBean(e);return}if(e.isCancelBeforeStart&&e.isCancelBeforeStart()){this.beans.context.destroyBean(e),this.cellCtrl.stopEditing(!0);return}if(!e.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(e);return}this.cellEditor=e,this.cellEditorGui=e.getGui();const l=s||e.isPopup!==void 0&&e.isPopup();l?this.addPopupCellEditor(t,r):this.addInCellEditor(),this.refreshEditStyles(!0,l),e.afterGuiAttached&&e.afterGuiAttached()}refreshEditStyles(i,e){var t;this.addOrRemoveCssClass("ag-cell-inline-editing",i&&!e),this.addOrRemoveCssClass("ag-cell-popup-editing",i&&!!e),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!i||!!e),(t=this.rowCtrl)==null||t.setInlineEditingCss(i)}addInCellEditor(){const i=this.getGui(),e=this.beans.gridOptionsService.getDocument();i.contains(e.activeElement)&&i.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(i,e){this.beans.gridOptionsService.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const t=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new i4(i));const s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);const r=this.beans.popupService,o=this.beans.gridOptionsService.get("stopEditingWhenCellsLoseFocus"),n=e??(t.getPopupPosition?t.getPopupPosition():"over"),l=this.beans.gridOptionsService.get("enableRtl"),a={ePopup:s,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:n,alignSide:l?"right":"left",keepWithinBounds:!0},u=r.positionPopupByComponent.bind(r,a),d=this.beans.localeService.getLocaleTextFunc(),c=r.addPopup({modal:o,eChild:s,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:u,ariaLabel:d("ariaLabelCellEditor","Cell Editor")});c&&(this.hideEditorPopup=c.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const i=this.getGui(),e=this.beans.gridOptionsService.getDocument();i.contains(e.activeElement)&&uP()&&i.focus({preventScroll:!0}),ni(this.getParentOfValue())}},r4=class extends be{constructor(i,e,t){super(),this.cellComps={},this.beans=e,this.rowCtrl=i;const s=document.createElement("div");s.setAttribute("comp-id",`${this.getCompId()}`),s.setAttribute("style",this.getInitialStyle(t)),this.setTemplateFromElement(s);const r=this.getGui(),o=r.style;this.domOrder=this.rowCtrl.getDomOrder(),Wt(r,"row");const n=this.rowCtrl.getTabIndex();n!=null&&r.setAttribute("tabindex",n.toString());const l={setDomOrder:a=>this.domOrder=a,setCellCtrls:a=>this.setCellCtrls(a),showFullWidth:a=>this.showFullWidth(a),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(a,u)=>this.addOrRemoveCssClass(a,u),setUserStyles:a=>SP(r,a),setTop:a=>o.top=a,setTransform:a=>o.transform=a,setRowIndex:a=>r.setAttribute("row-index",a),setRowId:a=>r.setAttribute("row-id",a),setRowBusinessKey:a=>r.setAttribute("row-business-key",a),refreshFullWidth:a=>this.refreshFullWidth(a)};i.setComp(l,this.getGui(),t),this.addDestroyFunc(()=>{i.unsetComp(t)})}getInitialStyle(i){const e=this.rowCtrl.getInitialTransform(i);return e?`transform: ${e}`:`top: ${this.rowCtrl.getInitialRowTop(i)}`}showFullWidth(i){const e=s=>{if(this.isAlive()){const r=s.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(s)}else this.beans.context.destroyBean(s)},t=i.newAgStackInstance();t&&t.then(e)}setCellCtrls(i){const e=Object.assign({},this.cellComps);i.forEach(s=>{const r=s.getInstanceId();this.cellComps[r]==null?this.newCellComp(s):e[r]=null});const t=Ml(e).filter(s=>s!=null);this.destroyCells(t),this.ensureDomOrder(i)}ensureDomOrder(i){if(!this.domOrder)return;const e=[];i.forEach(t=>{const s=this.cellComps[t.getInstanceId()];s&&e.push(s.getGui())}),vP(this.getGui(),e)}newCellComp(i){const e=new s4(this.beans,i,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[i.getInstanceId()]=e,this.getGui().appendChild(e.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const i=Ml(this.cellComps).filter(e=>e!=null);this.destroyCells(i)}setFullWidthRowComp(i){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=i,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(i){i.forEach(e=>{if(!e)return;const t=e.getCtrl().getInstanceId();this.cellComps[t]===e&&(e.detach(),e.destroy(),this.cellComps[t]=null)})}refreshFullWidth(i){const{fullWidthCellRenderer:e}=this;if(!e||!e.refresh)return!1;const t=i();return e.refresh(t)}};function o4(){const i=be.elementGettingCreated.getAttribute("name"),e=TV.getRowContainerCssClasses(i);let t;return i==="center"||i==="topCenter"||i==="stickyTopCenter"||i==="bottomCenter"?t=`<div class="${e.viewport}" ref="eViewport" role="presentation">
                <div class="${e.container}" ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" ref="eContainer"></div>`,t}var Af=class extends be{constructor(){super(o4()),this.rowComps={},this.name=be.elementGettingCreated.getAttribute("name"),this.type=JQ(this.name)}postConstruct(){const i={setViewportHeight:t=>this.eViewport.style.height=t,setRowCtrls:({rowCtrls:t})=>this.setRowCtrls(t),setDomOrder:t=>{this.domOrder=t},setContainerWidth:t=>this.eContainer.style.width=t};this.createManagedBean(new TV(this.name)).setComp(i,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(i){const e=pe({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;const t=s=>{const r=s.getInstanceId(),o=e[r];if(o)this.rowComps[r]=o,delete e[r],this.ensureDomOrder(o.getGui());else{if(!s.getRowNode().displayed)return;const n=new r4(s,this.beans,this.type);this.rowComps[r]=n,this.appendRow(n.getGui())}};i.forEach(t),Ml(e).forEach(s=>{this.eContainer.removeChild(s.getGui()),s.destroy()}),Wt(this.eContainer,"rowgroup")}appendRow(i){this.domOrder?pk(this.eContainer,i,this.lastPlacedElement):this.eContainer.appendChild(i),this.lastPlacedElement=i}ensureDomOrder(i){this.domOrder&&(CP(this.eContainer,i,this.lastPlacedElement),this.lastPlacedElement=i)}};f([D("beans")],Af.prototype,"beans",2);f([q("eViewport")],Af.prototype,"eViewport",2);f([q("eContainer")],Af.prototype,"eContainer",2);f([K],Af.prototype,"postConstruct",1);f([Ur],Af.prototype,"preDestroy",1);var VP=class{constructor(i){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=i}onDragEnter(i){if(this.clearColumnsList(),this.gridOptionsService.get("functionsReadOnly"))return;const e=i.dragItem.columns;e&&e.forEach(t=>{t.isPrimary()&&(t.isAnyFunctionActive()||(t.isAllowValue()?this.columnsToAggregate.push(t):t.isAllowRowGroup()?this.columnsToGroup.push(t):t.isAllowPivot()&&this.columnsToPivot.push(t)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Fe.ICON_PINNED:Fe.ICON_MOVE:null}onDragLeave(i){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(i){}onDragStop(i){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};f([D("columnModel")],VP.prototype,"columnModel",2);f([D("gridOptionsService")],VP.prototype,"gridOptionsService",2);var za=class{static attemptMoveColumns(i){const{isFromHeader:e,hDirection:t,xPosition:s,fromEnter:r,fakeEvent:o,pinned:n,gridOptionsService:l,columnModel:a}=i,u=t===0,d=t===1;let{allMovingColumns:c}=i;if(e){let b=[];c.forEach(A=>{var F;let O=null,L=A.getParent();for(;L!=null&&L.getDisplayedLeafColumns().length===1;)O=L,L=L.getParent();O!=null?(!!((F=O.getColGroupDef())!=null&&F.marryChildren)?O.getProvidedColumnGroup().getLeafColumns():O.getLeafColumns()).forEach(se=>{b.includes(se)||b.push(se)}):b.includes(A)||b.push(A)}),c=b}const h=c.slice();a.sortColumnsLikeGridColumns(h);const p=this.calculateValidMoves({movingCols:h,draggingRight:d,xPosition:s,pinned:n,gridOptionsService:l,columnModel:a}),m=this.calculateOldIndex(h,a);if(p.length===0)return;const S=p[0];let E=m!==null&&!r;if(e&&(E=m!==null),E&&!o&&(u&&S>=m||d&&S<=m))return;const C=a.getAllDisplayedColumns();let v=[],R=null;for(let b=0;b<p.length;b++){const A=p[b],F=a.getProposedColumnOrder(h,A);if(!a.doesOrderPassRules(F))continue;const O=F.filter(G=>C.includes(G));if(R===null)R=O;else if(!Vo(O,R))break;const L=this.groupFragCount(F);v.push({move:A,fragCount:L})}if(v.length!==0)return v.sort((b,A)=>b.fragCount-A.fragCount),this.moveColumns(c,v[0].move,"uiColumnMoved",!1,a)}static moveColumns(i,e,t,s,r){return r.moveColumns(i,e,t,s),s?null:{columns:i,toIndex:e}}static calculateOldIndex(i,e){const t=e.getAllGridColumns(),s=b0(i.map(a=>t.indexOf(a))),r=s[0];return Ze(s)-r!==s.length-1?null:r}static groupFragCount(i){function e(s){let r=[],o=s.getOriginalParent();for(;o!=null;)r.push(o),o=o.getOriginalParent();return r}let t=0;for(let s=0;s<i.length-1;s++){let r=e(i[s]),o=e(i[s+1]);[r,o]=r.length>o.length?[r,o]:[o,r],r.forEach(n=>{o.indexOf(n)===-1&&t++})}return t}static calculateValidMoves(i){const{movingCols:e,draggingRight:t,xPosition:s,pinned:r,gridOptionsService:o,columnModel:n}=i;if(o.get("suppressMovableColumns")||e.some(v=>v.getColDef().suppressMovable))return[];const a=n.getDisplayedColumns(r),u=n.getAllGridColumns(),d=a.filter(v=>xr(e,v)),c=a.filter(v=>!xr(e,v)),h=u.filter(v=>!xr(e,v));let p=0,m=s;if(t){let v=0;d.forEach(R=>v+=R.getActualWidth()),m-=v}if(m>0){for(let v=0;v<c.length;v++){const R=c[v];if(m-=R.getActualWidth(),m<0)break;p++}t&&p++}let S;if(p>0){const v=c[p-1];S=h.indexOf(v)+1}else S=h.indexOf(c[0]),S===-1&&(S=0);const E=[S],C=(v,R)=>v-R;if(t){let v=S+1;const R=u.length-1;for(;v<=R;)E.push(v),v++;E.sort(C)}else{let v=S;const R=u.length-1;let b=u[v];for(;v<=R&&a.indexOf(b)<0;)v++,E.push(v),b=u[v];v=S-1;const A=0;for(;v>=A;)E.push(v),v--;E.sort(C).reverse()}return E}static normaliseX(i,e,t,s,r){const o=r.getHeaderRowContainerCtrl(e).getViewport();return t&&(i-=o.getBoundingClientRect().left),s.get("enableRtl")&&(i=o.clientWidth-i),e==null&&(i+=r.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),i}},lh=class{constructor(i,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=i,this.eContainer=e,this.centerContainer=!H(i)}init(){this.ctrlsService.whenReady(()=>{this.gridBodyCon=this.ctrlsService.getGridBodyCtrl()})}getIconName(){return this.pinned?Fe.ICON_PINNED:Fe.ICON_MOVE}onDragEnter(i){const e=i.dragItem.columns;if(i.dragSource.type===0)this.setColumnsVisible(e,!0,"uiColumnDragged");else{const s=i.dragItem.visibleState,r=(e||[]).filter(o=>s[o.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(i,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(i,e,t){if(i){const s=i.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColumnsVisible(s,e,t)}}setColumnsPinned(i,e,t){if(i){const s=i.filter(r=>!r.getColDef().lockPinned);this.columnModel.setColumnsPinned(s,e,t)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(i){if(this.centerContainer){const e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),t=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.get("enableRtl")?(this.needToMoveRight=i<e+50,this.needToMoveLeft=i>t-50):(this.needToMoveLeft=i<e+50,this.needToMoveRight=i>t-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(i=this.lastDraggingEvent,e=!1,t=!1,s=!1){var r;if(s){if(this.lastMovedInfo){const{columns:d,toIndex:c}=this.lastMovedInfo;za.moveColumns(d,c,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=i,Ee(i.hDirection))return;const o=za.normaliseX(i.x,this.pinned,!1,this.gridOptionsService,this.ctrlsService);e||this.checkCenterForScrolling(o);const n=this.normaliseDirection(i.hDirection),l=i.dragSource.type,a=((r=i.dragSource.getDragItem().columns)==null?void 0:r.filter(d=>d.getColDef().lockPinned?d.getPinned()==this.pinned:!0))||[],u=za.attemptMoveColumns({allMovingColumns:a,isFromHeader:l===1,hDirection:n,xPosition:o,pinned:this.pinned,fromEnter:e,fakeEvent:t,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel});u&&(this.lastMovedInfo=u)}normaliseDirection(i){if(this.gridOptionsService.get("enableRtl"))switch(i){case 0:return 1;case 1:return 0;default:console.error(`AG Grid: Unknown direction ${i}`)}else return i}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(Fe.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(Fe.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Fe.ICON_MOVE))}moveInterval(){let i;this.intervalCount++,i=10+this.intervalCount*5,i>100&&(i=100);let e=null;const t=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=t.scrollHorizontally(-i):this.needToMoveRight&&(e=t.scrollHorizontally(i)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const r=this.lastDraggingEvent.dragItem.columns.filter(o=>!o.getColDef().lockPinned);if(r.length>0&&(this.dragAndDropService.setGhostIcon(Fe.ICON_PINNED),this.failedMoveAttempts>7)){const o=this.needToMoveLeft?"left":"right";this.setColumnsPinned(r,o,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};f([D("columnModel")],lh.prototype,"columnModel",2);f([D("dragAndDropService")],lh.prototype,"dragAndDropService",2);f([D("gridOptionsService")],lh.prototype,"gridOptionsService",2);f([D("ctrlsService")],lh.prototype,"ctrlsService",2);f([K],lh.prototype,"init",1);var ah=class extends U{constructor(i,e){super(),this.pinned=i,this.eContainer=e}postConstruct(){this.ctrlsService.whenReady(i=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.leftRowContainerCtrl.getContainerElement()],[i.bottomLeftRowContainerCtrl.getContainerElement()],[i.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.rightRowContainerCtrl.getContainerElement()],[i.bottomRightRowContainerCtrl.getContainerElement()],[i.topRightRowContainerCtrl.getContainerElement()]];break;default:this.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.centerRowContainerCtrl.getViewportElement()],[i.bottomCenterRowContainerCtrl.getViewportElement()],[i.topCenterRowContainerCtrl.getViewportElement()]];break}})}isInterestedIn(i){return i===1||i===0&&this.gridOptionsService.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new lh(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new VP(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(i){return this.columnModel.isPivotMode()&&i.dragSource.type===0}onDragEnter(i){this.currentDropListener=this.isDropColumnInPivotMode(i)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(i)}onDragLeave(i){this.currentDropListener.onDragLeave(i)}onDragging(i){this.currentDropListener.onDragging(i)}onDragStop(i){this.currentDropListener.onDragStop(i)}};f([D("dragAndDropService")],ah.prototype,"dragAndDropService",2);f([D("columnModel")],ah.prototype,"columnModel",2);f([D("ctrlsService")],ah.prototype,"ctrlsService",2);f([K],ah.prototype,"postConstruct",1);f([K],ah.prototype,"init",1);var uh=class bV extends _P{constructor(e){super(bV.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui();((o,n)=>{n!=null&&n!=""?e.setAttribute(o,n):e.removeAttribute(o)})("col-id",this.column.getColId());const s={setWidth:o=>e.style.width=o,addOrRemoveCssClass:(o,n)=>this.addOrRemoveCssClass(o,n),setAriaSort:o=>o?Z0(e,o):ek(e),setUserCompDetails:o=>this.setUserCompDetails(o),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(s,this.getGui(),this.eResize,this.eHeaderCompWrapper);const r=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",r)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(s=>this.afterCompCreated(t,s))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};uh.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;f([q("eResize")],uh.prototype,"eResize",2);f([q("eHeaderCompWrapper")],uh.prototype,"eHeaderCompWrapper",2);f([K],uh.prototype,"postConstruct",1);f([Ur],uh.prototype,"destroyHeaderComp",1);var n4=uh,lw=class PV extends _P{constructor(e){super(PV.TEMPLATE,e)}postConstruct(){const e=this.getGui(),t=(r,o)=>o!=null?e.setAttribute(r,o):e.removeAttribute(r);e.setAttribute("col-id",this.ctrl.getColId());const s={addOrRemoveCssClass:(r,o)=>this.addOrRemoveCssClass(r,o),setResizableDisplayed:r=>ze(this.eResize,r),setWidth:r=>e.style.width=r,setAriaExpanded:r=>t("aria-expanded",r),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(s,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}const s=this.getGui(),r=e.getGui();s.appendChild(r),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(s)}};lw.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;f([q("eResize")],lw.prototype,"eResize",2);f([K],lw.prototype,"postConstruct",1);var l4=lw,HP=class extends be{constructor(i){super(),this.headerComps={},this.ctrl=i,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){sP(this.getGui(),this.ctrl.getAriaRowIndex());const i={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,t)=>this.setHeaderCtrls(e,t),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(i)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(i,e){if(!this.isAlive())return;const t=this.headerComps;if(this.headerComps={},i.forEach(s=>{const r=s.getInstanceId();let o=t[r];delete t[r],o==null&&(o=this.createHeaderComp(s),this.getGui().appendChild(o.getGui())),this.headerComps[r]=o}),tr(t,(s,r)=>{this.getGui().removeChild(r.getGui()),this.destroyBean(r)}),e){const s=Ml(this.headerComps);s.sort((o,n)=>{const l=o.getCtrl().getColumnGroupChild().getLeft(),a=n.getCtrl().getColumnGroupChild().getLeft();return l-a});const r=s.map(o=>o.getGui());vP(this.getGui(),r)}}createHeaderComp(i){let e;switch(this.ctrl.getType()){case"group":e=new l4(i);break;case"filter":e=new RQ(i);break;default:e=new n4(i);break}return this.createBean(e),e.setParentComponent(this),e}};f([K],HP.prototype,"init",1);f([Ur],HP.prototype,"destroyHeaderCtrls",1);var a4=0,Hn=class AV extends U{constructor(e,t,s){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=s,this.beans=t,this.instanceId=e.getUniqueId()+"-"+a4++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(e){const{headerRowIndex:t,column:s}=this.focusService.getFocusedHeader();return Rk(this.gridOptionsService,e,t,s)}getWrapperHasFocus(){return this.gridOptionsService.getDocument().activeElement===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListener(this.beans.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:s}=this;rw.refreshFirstAndLastStyles(e,t,s.columnModel)}refreshAriaColIndex(){const{beans:e,column:t}=this,s=e.columnModel.getAriaColumnIndex(t);rP(this.eGui,s)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gridOptionsService.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){var t;const r=this.gridOptionsService.getDocument().activeElement,o=e.key===_.LEFT||e.key===_.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),r!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||o)&&(e.preventDefault(),e.stopImmediatePropagation()),!o))return;const n=e.key===_.LEFT!==this.gridOptionsService.get("enableRtl"),l=iV[n?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(a,e.shiftKey),(t=this.resizeFeature)==null||t.toggleColumnResizing(!0)}else this.moveHeader(l)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e);if(this.column.getPinned()){const r=this.pinnedWidthService.getPinnedLeftWidth(),o=this.pinnedWidthService.getPinnedRightWidth(),n=Ou(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(r+o+t>n)if(n>r+o)t=n-r-o;else return 0}return t}getResizeDiff(e){let t=e.key===_.LEFT!==this.gridOptionsService.get("enableRtl");const s=this.column.getPinned(),r=this.gridOptionsService.get("enableRtl");return s&&r!==(s==="right")&&(t=!t),(t?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case _.PAGE_DOWN:case _.PAGE_UP:case _.PAGE_HOME:case _.PAGE_END:t&&e.preventDefault()}}addDomData(){const e=AV.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gridOptionsService.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,s){const r=e??t;this.gridOptionsService.get("preventDefaultOnContextMenu")&&r.preventDefault();const o=s instanceof dt?s:void 0;this.menuService.isHeaderContextMenuEnabled(o)&&this.menuService.showHeaderContextMenu(o,e,t),this.dispatchColumnMouseEvent(y.EVENT_COLUMN_HEADER_CONTEXT_MENU,s)}dispatchColumnMouseEvent(e,t){const s={type:e,column:t};this.eventService.dispatchEvent(s)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};Hn.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";f([D("pinnedWidthService")],Hn.prototype,"pinnedWidthService",2);f([D("focusService")],Hn.prototype,"focusService",2);f([D("userComponentFactory")],Hn.prototype,"userComponentFactory",2);f([D("ctrlsService")],Hn.prototype,"ctrlsService",2);f([D("dragAndDropService")],Hn.prototype,"dragAndDropService",2);f([D("menuService")],Hn.prototype,"menuService",2);f([K],Hn.prototype,"postConstruct",1);var aw=Hn,uw=class extends U{constructor(i,e,t,s){super(),this.columnOrGroup=i,this.eCell=e,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=t}setColsSpanning(i){this.colsSpanning=i,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?Ze(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,dt.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const i=this.beans.gridOptionsService.get("suppressColumnMoveAnimation"),e=H(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&e&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const i=this.getColumnOrGroup(),e=i.getLeft(),t=i.getOldLeft(),s=this.modifyLeftForPrintLayout(i,t),r=this.modifyLeftForPrintLayout(i,e);this.setLeft(s),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===r&&this.setLeft(r)})}onLeftChanged(){const i=this.getColumnOrGroup(),e=i.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(i,e),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(i,e){if(!this.beans.gridOptionsService.isDomLayout("print")||i.getPinned()==="left")return e;const s=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(i.getPinned()==="right"){const r=this.beans.columnModel.getBodyContainerWidth();return s+r+e}return s+e}setLeft(i){if(H(i)&&(this.eCell.style.left=`${i}px`),this.columnOrGroup instanceof dt)this.columnOrGroup;else{const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&J0(this.ariaEl,t.length),t[0]}}};f([K],uw.prototype,"postConstruct",1);var Ff=class extends U{constructor(i,e){super(),this.columns=i,this.element=e}postConstruct(){this.gridOptionsService.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};f([D("columnHoverService")],Ff.prototype,"columnHoverService",2);f([K],Ff.prototype,"postConstruct",1);var u4=class extends aw{constructor(i,e,t){super(i,e,t),this.iconCreated=!1,this.column=i}setComp(i,e,t,s){this.comp=i,this.eButtonShowMainFilter=t,this.eFloatingFilterBody=s,this.setGui(e),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,dt.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){const i=this.column.getColDef(),e=!!i.filter,t=!!i.floatingFilter;this.active=e&&t}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const i=Nt("filter",this.gridOptionsService,this.column);i&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(i))}setupFocus(){this.createManagedBean(new ql(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const i=this.localeService.getLocaleTextFunc();So(this.eButtonShowMainFilter,i("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(i){if(this.gridOptionsService.getDocument().activeElement===this.eGui)return;const r=this.focusService.findNextFocusableElement(this.eGui,null,i.shiftKey);if(r){this.beans.headerNavigationService.scrollToColumn(this.column),i.preventDefault(),r.focus();return}const o=this.findNextColumnWithFloatingFilter(i.shiftKey);o&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:o},event:i})&&i.preventDefault()}findNextColumnWithFloatingFilter(i){const e=this.beans.columnModel;let t=this.column;do if(t=i?e.getDisplayedColBefore(t):e.getDisplayedColAfter(t),!t)break;while(!t.getColDef().filter||!t.getColDef().floatingFilter);return t}handleKeyDown(i){super.handleKeyDown(i);const e=this.getWrapperHasFocus();switch(i.key){case _.UP:case _.DOWN:e||i.preventDefault();case _.LEFT:case _.RIGHT:if(e)return;i.stopPropagation();case _.ENTER:e&&this.focusService.focusInto(this.eGui)&&i.preventDefault();break;case _.ESCAPE:e||this.eGui.focus()}}onFocusIn(i){if(this.eGui.contains(i.relatedTarget))return;const t=!!i.relatedTarget&&!i.relatedTarget.classList.contains("ag-floating-filter"),s=!!i.relatedTarget&&Va(i.relatedTarget,"ag-floating-filter");if(t&&s&&i.target===this.eGui){const o=this.lastFocusEvent,n=!!(o&&o.key===_.TAB);if(o&&n){const l=o.shiftKey;this.focusService.focusInto(this.eGui,l)}}const r=this.getRowIndex();this.beans.focusService.setFocusedHeader(r,this.column)}setupHover(){this.createManagedBean(new Ff([this.column],this.eGui));const i=()=>{if(!this.gridOptionsService.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,y.EVENT_COLUMN_HOVER_CHANGED,i),i()}setupLeft(){const i=new uw(this.column,this.eGui,this.beans);this.createManagedBean(i)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const i=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());i&&this.setCompDetails(i)}setCompDetails(i){this.userCompDetails=i,this.comp.setCompDetails(i)}showParentFilter(){const i=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:i,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:i}=this.beans,e=t=>{const s=this.comp.getFloatingFilterComp();s&&s.then(r=>{if(r){const o=i.getCurrentFloatingFilterParentModel(this.column);r.onParentModelChanged(o,t)}})};this.destroySyncListener=this.addManagedListener(this.column,dt.EVENT_FILTER_CHANGED,e),i.isFilterActive(this.column)&&e(null)}setupWidth(){const i=()=>{const e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};this.addManagedListener(this.column,dt.EVENT_WIDTH_CHANGED,i),i()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,dt.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const i=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(i),this.highlightFilterButtonWhenActive&&i&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var i,e;const t=this.active;this.setupActive();const s=!t&&this.active;t&&!this.active&&((i=this.destroySyncListener)==null||i.call(this),(e=this.destroyFilterChangedListener)==null||e.call(this));const r=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!r?this.updateCompDetails(r,s):o.then(n=>{var l;!n||this.beans.filterManager.areFilterCompsDifferent((l=this.userCompDetails)!=null?l:null,r)?this.updateCompDetails(r,s):this.updateFloatingFilterParams(r)})}updateCompDetails(i,e){this.isAlive()&&(this.setCompDetails(i),this.setupFilterButton(),this.setupUi(),e&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(i){var e;if(!i)return;const t=i.params;(e=this.comp.getFloatingFilterComp())==null||e.then(s=>{let r=!1;s!=null&&s.refresh&&typeof s.refresh=="function"&&s.refresh(t)!==null&&(r=!0),!r&&(s!=null&&s.onParamsUpdated)&&typeof s.onParamsUpdated=="function"&&s.onParamsUpdated(t)!==null&&ve("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},dh=class extends U{constructor(i,e,t,s,r){super(),this.pinned=i,this.column=e,this.eResize=t,this.comp=s,this.ctrl=r}postConstruct(){const i=[];let e,t;const s=()=>{if(ze(this.eResize,e),!e)return;const n=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(i.push(n),t){const l=this.gridOptionsService.get("skipHeaderOnAutoSize"),a=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",l)};this.eResize.addEventListener("dblclick",a);const u=new Oi(this.eResize);u.addEventListener(Oi.EVENT_DOUBLE_TAP,a),i.push(()=>{this.eResize.removeEventListener("dblclick",a),u.removeEventListener(Oi.EVENT_DOUBLE_TAP,a),u.destroy()})}},r=()=>{i.forEach(n=>n()),i.length=0},o=()=>{const n=this.column.isResizable(),l=!this.gridOptionsService.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(n!==e||l!==t)&&(e=n,t=l,r(),s())};o(),this.addDestroyFunc(r),this.ctrl.addRefreshFunction(o)}onResizing(i,e){const{column:t,lastResizeAmount:s,resizeStartWidth:r}=this,o=this.normaliseResizeAmount(e),n=r+o,l=[{key:t,newWidth:n}];if(this.column.getPinned()){const a=this.pinnedWidthService.getPinnedLeftWidth(),u=this.pinnedWidthService.getPinnedRightWidth(),d=Ou(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(a+u+(o-s)>d)return}this.lastResizeAmount=o,this.columnModel.setColumnWidths(l,this.resizeWithShiftKey,i,"uiColumnResized"),i&&this.toggleColumnResizing(!1)}onResizeStart(i){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=i,this.toggleColumnResizing(!0)}toggleColumnResizing(i){this.comp.addOrRemoveCssClass("ag-column-resizing",i)}normaliseResizeAmount(i){let e=i;const t=this.pinned!=="left",s=this.pinned==="right";return this.gridOptionsService.get("enableRtl")?t&&(e*=-1):s&&(e*=-1),e}};f([D("horizontalResizeService")],dh.prototype,"horizontalResizeService",2);f([D("pinnedWidthService")],dh.prototype,"pinnedWidthService",2);f([D("ctrlsService")],dh.prototype,"ctrlsService",2);f([D("columnModel")],dh.prototype,"columnModel",2);f([K],dh.prototype,"postConstruct",1);var BP=class extends U{constructor(i){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=i}onSpaceKeyDown(i){const e=this.cbSelectAll,t=this.gridOptionsService.getDocument();e.isDisplayed()&&!e.getGui().contains(t.activeElement)&&(i.preventDefault(),e.setValue(!e.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(i){this.headerCellCtrl=i,this.cbSelectAll=this.createManagedBean(new AP),this.cbSelectAll.addCssClass("ag-header-select-all"),Wt(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,y.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),Cf(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const i=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(i);const e=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const i=this.localeService.getLocaleTextFunc(),t=this.cbSelectAll.getValue()?i("ariaChecked","checked"):i("ariaUnchecked","unchecked"),s=i("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${s} (${t})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${s} (${t})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(i){return this.gridOptionsService.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${i} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(i){const e=this.rowModel.getType();return e==="clientSide"||e==="serverSide"?!0:(console.warn(`AG Grid: ${i} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${e}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const i=this.cbSelectAll.getValue(),e=this.isFilteredOnly(),t=this.isCurrentPageOnly();let s="uiSelectAll";t?s="uiSelectAllCurrentPage":e&&(s="uiSelectAllFiltered");const r={source:s,justFiltered:e,justCurrentPage:t};i?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){let i=this.column.getColDef().headerCheckboxSelection;if(typeof i=="function"){const e=i,t=this.gridOptionsService.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});i=e(t)}return i?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};f([D("rowModel")],BP.prototype,"rowModel",2);f([D("selectionService")],BP.prototype,"selectionService",2);var d4=class extends aw{constructor(i,e,t){super(i,e,t),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=i}setComp(i,e,t,s){this.comp=i,this.setGui(e),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(s),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new dh(this.getPinned(),this.column,t,i,this)),this.createManagedBean(new Ff([this.column],e)),this.createManagedBean(new uw(this.column,e,this.beans)),this.createManagedBean(new ql(e,{shouldStopEventPropagation:r=>this.shouldStopEventPropagation(r),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,dt.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(i,e){var t,s;if(!this.column.isResizable())return;const r=this.column.getActualWidth(),o=(t=this.column.getMinWidth())!=null?t:0,n=(s=this.column.getMaxWidth())!=null?s:Number.MAX_SAFE_INTEGER,l=Math.min(Math.max(r+i,o),n);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:l}],e,!0,"uiColumnResized")}moveHeader(i){const{eGui:e,column:t,gridOptionsService:s,ctrlsService:r}=this,o=this.getPinned(),n=e.getBoundingClientRect().left,l=t.getActualWidth(),a=s.get("enableRtl"),u=i===0!==a,d=za.normaliseX(u?n-20:n+l+20,o,!0,s,r);za.attemptMoveColumns({allMovingColumns:[t],isFromHeader:!0,hDirection:i,xPosition:d,pinned:o,fromEnter:!1,fakeEvent:!1,gridOptionsService:s,columnModel:this.beans.columnModel}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,"auto")}setupUserComp(){const i=this.lookupUserCompDetails();this.setCompDetails(i)}setCompDetails(i){this.userCompDetails=i,this.comp.setUserCompDetails(i)}lookupUserCompDetails(){const i=this.createParams(),e=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(e,i)}createParams(){return this.gridOptionsService.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,t)=>{this.beans.sortController.setSortForColumn(this.column,e,!!t,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(e,t)=>{this.setupTooltip(e,t)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new BP(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(i){super.handleKeyDown(i),i.key===_.SPACE&&this.selectAllFeature.onSpaceKeyDown(i),i.key===_.ENTER&&this.onEnterKeyDown(i),i.key===_.DOWN&&i.altKey&&this.showMenuOnKeyPress(i,!1)}onEnterKeyDown(i){if(i.ctrlKey||i.metaKey)this.showMenuOnKeyPress(i,!0);else if(this.sortable){const e=i.shiftKey;this.beans.sortController.progressSort(this.column,e,"uiColumnSorted")}}showMenuOnKeyPress(i,e){const t=this.comp.getUserCompInstance();!t||!(t instanceof XR)||t.onMenuKeyboardShortcut(e)&&i.preventDefault()}onFocusIn(i){if(!this.getGui().contains(i.relatedTarget)){const e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(i){this.getGui().contains(i.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(i,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const t=this.gridOptionsService.get("tooltipShowMode")==="whenTruncated",s=this.eGui,r=this.column.getColDef();!e&&t&&!r.headerComponent&&(e=()=>{const l=s.querySelector(".ag-header-cell-text");return l?l.scrollWidth>l.clientWidth:!0});const o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>i??this.column.getColDef().headerTooltip,shouldDisplayTooltip:e},n=this.createManagedBean(new Nn(o));this.refreshFunctions.push(()=>n.refreshToolTip())}setupClassesFromColDef(){const i=()=>{const e=this.column.getColDef(),t=rw.getHeaderClassesFromColDef(e,this.gridOptionsService,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(t),t.forEach(r=>{s.has(r)?s.delete(r):this.comp.addOrRemoveCssClass(r,!0)}),s.forEach(r=>this.comp.addOrRemoveCssClass(r,!1))};this.refreshFunctions.push(i),i()}setDragSource(i){if(this.dragSourceElement=i,this.removeDragSource(),!i||!this.draggable)return;const{column:e,beans:t,displayName:s,dragAndDropService:r,gridOptionsService:o}=this,{columnModel:n}=t;let l=!this.gridOptionsService.get("suppressDragLeaveHidesColumns");const a=this.dragSource={type:1,eElement:i,getDefaultIconName:()=>l?Fe.ICON_HIDE:Fe.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(e),dragItemName:s,onDragStarted:()=>{l=!o.get("suppressDragLeaveHidesColumns"),e.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>e.setMoving(!1,"uiColumnMoved"),onGridEnter:u=>{var d;if(l){const c=((d=u==null?void 0:u.columns)==null?void 0:d.filter(h=>!h.getColDef().lockVisible))||[];n.setColumnsVisible(c,!0,"uiColumnMoved")}},onGridExit:u=>{var d;if(l){const c=((d=u==null?void 0:u.columns)==null?void 0:d.filter(h=>!h.getColDef().lockVisible))||[];n.setColumnsVisible(c,!1,"uiColumnMoved")}}};r.addDragSource(a,!0)}createDragItem(i){const e={};return e[i.getId()]=i.isVisible(),{columns:[i],visibleState:e}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(i){this.refreshFunctions.push(i)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(i=>i())}refreshHeaderComp(){const i=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==i.componentClass?this.attemptHeaderCompRefresh(i.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(i)}attemptHeaderCompRefresh(i){const e=this.comp.getUserCompInstance();return!e||!e.refresh?!1:e.refresh(i)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const i=this.column.getColDef();return!!(!this.gridOptionsService.get("suppressMovableColumns")&&!i.suppressMovable&&!i.lockPosition)||!!i.enableRowGroup||!!i.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const i=()=>{const e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};this.addManagedListener(this.column,dt.EVENT_WIDTH_CHANGED,i),i()}setupMovingCss(){const i=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,dt.EVENT_MOVING_CHANGED,i),i()}setupMenuClass(){const i=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,dt.EVENT_MENU_VISIBLE_CHANGED,i),i()}setupSortableClass(){const i=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};i(),this.addRefreshFunction(i),this.addManagedListener(this.eventService,dt.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){const i=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};this.addManagedListener(this.column,dt.EVENT_FILTER_ACTIVE_CHANGED,i),i()}setupWrapTextClass(){const i=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};i(),this.addRefreshFunction(i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:i,column:e,comp:t,beans:s}=this;if(!e.isSpanHeaderHeight()){i.style.removeProperty("top"),i.style.removeProperty("height"),t.addOrRemoveCssClass("ag-header-span-height",!1),t.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:o}=this.column.getColumnGroupPaddingInfo();t.addOrRemoveCssClass("ag-header-span-height",r>0);const{columnModel:n}=s,l=n.getColumnHeaderRowHeight();if(r===0){t.addOrRemoveCssClass("ag-header-span-total",!1),i.style.setProperty("top","0px"),i.style.setProperty("height",`${l}px`);return}t.addOrRemoveCssClass("ag-header-span-total",o);const u=n.isPivotMode()?n.getPivotGroupHeaderHeight():n.getGroupHeaderHeight(),d=r*u;i.style.setProperty("top",`${-d}px`),i.style.setProperty("height",`${l+d}px`)}setupAutoHeight(i){const{columnModel:e,resizeObserverService:t}=this.beans,s=u=>{if(!this.isAlive())return;const{paddingTop:d,paddingBottom:c,borderBottomWidth:h,borderTopWidth:p}=Yl(this.getGui()),m=d+c+h+p,E=i.offsetHeight+m;if(u<5){const C=this.beans.gridOptionsService.getDocument(),v=!C||!C.contains(i),R=E==0;if(v||R){window.setTimeout(()=>s(u+1),0);return}}e.setColumnHeaderHeight(this.column,E)};let r=!1,o;const n=()=>{const u=this.column.isAutoHeaderHeight();u&&!r&&l(),!u&&r&&a()},l=()=>{r=!0,s(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),o=t.observeResize(i,()=>s(0))},a=()=>{r=!1,o&&o(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),o=void 0};n(),this.addDestroyFunc(()=>a()),this.addManagedListener(this.column,dt.EVENT_WIDTH_CHANGED,()=>r&&s(0)),this.addManagedListener(this.eventService,dt.EVENT_SORT_CHANGED,()=>{r&&window.setTimeout(()=>s(0))}),this.addRefreshFunction(n)}refreshAriaSort(){if(this.sortable){const i=this.localeService.getLocaleTextFunc(),e=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(W0(e)),this.setAriaDescriptionProperty("sort",i("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const i=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",i("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const i=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",i("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const i=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",i("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(i,e){e!=null?this.ariaDescriptionProperties.set(i,e):this.ariaDescriptionProperties.delete(i)}announceAriaDescription(){const i=this.beans.gridOptionsService.getDocument();if(!this.eGui.contains(i.activeElement))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,s)=>t==="filter"?-1:s.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const i=()=>{if(!this.gridOptionsService.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,y.EVENT_COLUMN_HOVER_CHANGED,i),i()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const i=s=>this.handleMouseOverChange(s.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(y.EVENT_COLUMN_HEADER_CLICKED,this.column),t=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);this.addManagedListener(this.getGui(),"mouseenter",i),this.addManagedListener(this.getGui(),"mouseleave",i),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",t)}handleMouseOverChange(i){this.setActiveHeader(i);const t={type:i?y.EVENT_COLUMN_HEADER_MOUSE_OVER:y.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(t)}setActiveHeader(i){this.comp.addOrRemoveCssClass("ag-header-active",i)}getAnchorElementForMenu(i){const e=this.comp.getUserCompInstance();return e instanceof XR?e.getAnchorElementForMenu(i):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},Of=class extends U{constructor(i,e,t,s){super(),this.eResize=e,this.comp=i,this.pinned=t,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const i=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(i),!this.gridOptionsService.get("suppressAutoSize")){const e=this.gridOptionsService.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const t=[];this.columnGroup.getDisplayedLeafColumns().forEach(r=>{r.getColDef().suppressAutoSize||t.push(r.getColId())}),t.length>0&&this.columnModel.autoSizeColumns({columns:t,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(i){const e=this.getInitialValues(i);this.storeLocalValues(e),this.toggleColumnResizing(!0)}onResizing(i,e,t="uiColumnResized"){const s=this.normaliseDragChange(e),r=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(r,t,i)}getInitialValues(i){const e=this.getColumnsToResize(),t=this.getInitialSizeOfColumns(e),s=this.getSizeRatiosOfColumns(e,t),r={columnsToResize:e,resizeStartWidth:t,resizeRatios:s};let o=null;if(i&&(o=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),o){const n=o.getDisplayedLeafColumns(),l=r.groupAfterColumns=n.filter(u=>u.isResizable()),a=r.groupAfterStartWidth=this.getInitialSizeOfColumns(l);r.groupAfterRatios=this.getSizeRatiosOfColumns(l,a)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}storeLocalValues(i){const{columnsToResize:e,resizeStartWidth:t,resizeRatios:s,groupAfterColumns:r,groupAfterStartWidth:o,groupAfterRatios:n}=i;this.resizeCols=e,this.resizeStartWidth=t,this.resizeRatios=s,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=n}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(i){const e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),t=this.getInitialValues();e>t.resizeStartWidth&&this.resizeColumns(t,e,i,!0)}resizeColumnsFromLocalValues(i,e,t=!0){var s,r,o;if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(s=this.resizeTakeFromCols)!=null?s:void 0,groupAfterStartWidth:(r=this.resizeTakeFromStartWidth)!=null?r:void 0,groupAfterRatios:(o=this.resizeTakeFromRatios)!=null?o:void 0};this.resizeColumns(n,i,e,t)}resizeColumns(i,e,t,s=!0){const{columnsToResize:r,resizeStartWidth:o,resizeRatios:n,groupAfterColumns:l,groupAfterStartWidth:a,groupAfterRatios:u}=i,d=[];if(d.push({columns:r,ratios:n,width:e}),l){const c=e-o;d.push({columns:l,ratios:u,width:a-c})}this.columnModel.resizeColumnSets({resizeSets:d,finished:s,source:t}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(i){this.comp.addOrRemoveCssClass("ag-column-resizing",i)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}getInitialSizeOfColumns(i){return i.reduce((e,t)=>e+t.getActualWidth(),0)}getSizeRatiosOfColumns(i,e){return i.map(t=>t.getActualWidth()/e)}normaliseDragChange(i){let e=i;return this.gridOptionsService.get("enableRtl")?this.pinned!=="left"&&(e*=-1):this.pinned==="right"&&(e*=-1),e}destroy(){super.destroy(),this.clearLocalValues()}};f([D("horizontalResizeService")],Of.prototype,"horizontalResizeService",2);f([D("autoWidthCalculator")],Of.prototype,"autoWidthCalculator",2);f([D("columnModel")],Of.prototype,"columnModel",2);f([K],Of.prototype,"postConstruct",1);var FV=class extends U{constructor(i,e){super(),this.removeChildListenersFuncs=[],this.columnGroup=e,this.comp=i}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,Si.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const i=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(e=>{e.addEventListener("widthChanged",i),e.addEventListener("visibleChanged",i),this.removeChildListenersFuncs.push(()=>{e.removeEventListener("widthChanged",i),e.removeEventListener("visibleChanged",i)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(i=>i()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const i=this.columnGroup.getActualWidth();this.comp.setWidth(`${i}px`),this.comp.addOrRemoveCssClass("ag-hidden",i===0)}};f([K],FV.prototype,"postConstruct",1);var c4=class extends aw{constructor(i,e,t){super(i,e,t),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const s=this.getGui();this.setDragSource(s)}},this.column=i}setComp(i,e,t){this.comp=i,this.setGui(e),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();const s=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new Ff(r,e)),this.createManagedBean(new uw(this.column,e,this.beans)),this.createManagedBean(new FV(i,this.column)),this.resizeFeature=this.createManagedBean(new Of(i,t,s,this.column)),this.createManagedBean(new ql(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(y.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(i,e){if(!this.resizeFeature)return;const t=this.resizeFeature.getInitialValues(e);this.resizeFeature.resizeColumns(t,t.resizeStartWidth+i,"uiColumnResized",!0)}moveHeader(i){const{beans:e,eGui:t,column:s,gridOptionsService:r,ctrlsService:o}=this,n=r.get("enableRtl"),l=i===0,a=this.getPinned(),u=t.getBoundingClientRect(),d=u.left,c=u.width,h=za.normaliseX(l!==n?d-20:d+c+20,a,!0,r,o),p=s.getGroupId(),m=this.focusService.getFocusedHeader();za.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:i,xPosition:h,pinned:a,fromEnter:!1,fakeEvent:!1,gridOptionsService:r,columnModel:e.columnModel});const S=s.getDisplayedLeafColumns(),E=l?S[0]:Ze(S);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(E,"auto"),!this.isAlive()&&m&&this.restoreFocus(p,s,m)}restoreFocus(i,e,t){const s=e.getLeafColumns();if(!s.length)return;const r=s[0].getParent();if(!r)return;const o=this.findGroupWidthId(r,i);o&&this.focusService.focusHeaderPosition({headerPosition:At(pe({},t),{column:o})})}findGroupWidthId(i,e){for(;i;){if(i.getGroupId()===e)return i;i=i.getParent()}return null}resizeLeafColumnsToFit(i){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(i)}setupUserComp(){const i=this.gridOptionsService.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:t=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),t,"gridInitializing")},setTooltip:(t,s)=>{this.setupTooltip(t,s)}}),e=this.userComponentFactory.getHeaderGroupCompDetails(i);this.comp.setUserCompDetails(e)}addHeaderMouseListeners(){const i=s=>this.handleMouseOverChange(s.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(y.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()),t=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());this.addManagedListener(this.getGui(),"mouseenter",i),this.addManagedListener(this.getGui(),"mouseleave",i),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",t)}handleMouseOverChange(i){const t={type:i?y.EVENT_COLUMN_HEADER_MOUSE_OVER:y.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(t)}setupTooltip(i,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const t=this.column.getColGroupDef(),s=this.gridOptionsService.get("tooltipShowMode")==="whenTruncated",r=this.eGui;!e&&s&&!(t!=null&&t.headerGroupComponent)&&(e=()=>{const n=r.querySelector(".ag-header-group-text");return n?n.scrollWidth>n.clientWidth:!0});const o={getColumn:()=>this.column,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>i??(t&&t.headerTooltip),shouldDisplayTooltip:e};t&&(o.getColDef=()=>t),this.createBean(new Nn(o))}setupExpandable(){const i=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(i,Jt.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(i,Jt.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const i=this.column;this.expandable=i.isExpandable();const e=i.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const i=this.column.getColGroupDef(),e=rw.getHeaderClassesFromColDef(i,this.gridOptionsService,null,this.column);this.column.isPadding()?(e.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&e.push("ag-header-span-height")):e.push("ag-header-group-cell-with-group"),e.forEach(t=>this.comp.addOrRemoveCssClass(t,!0))}setupMovingCss(){const e=this.column.getProvidedColumnGroup().getLeafColumns(),t=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());e.forEach(s=>{this.addManagedListener(s,dt.EVENT_MOVING_CHANGED,t)}),t()}onFocusIn(i){if(!this.eGui.contains(i.relatedTarget)){const e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(i){super.handleKeyDown(i);const e=this.getWrapperHasFocus();if(!(!this.expandable||!e)&&i.key===_.ENTER){const t=this.column,s=!t.isExpanded();this.beans.columnModel.setColumnGroupOpened(t.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(i){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!i))return;const{beans:e,column:t,displayName:s,gridOptionsService:r,dragAndDropService:o}=this,{columnModel:n}=e,l=t.getProvidedColumnGroup().getLeafColumns();let a=!r.get("suppressDragLeaveHidesColumns");const u=this.dragSource={type:1,eElement:i,getDefaultIconName:()=>a?Fe.ICON_HIDE:Fe.ICON_NOT_ALLOWED,dragItemName:s,getDragItem:()=>this.getDragItemForGroup(t),onDragStarted:()=>{a=!r.get("suppressDragLeaveHidesColumns"),l.forEach(d=>d.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>l.forEach(d=>d.setMoving(!1,"uiColumnDragged")),onGridEnter:d=>{var c;if(a){const h=((c=d==null?void 0:d.columns)==null?void 0:c.filter(p=>!p.getColDef().lockVisible))||[];n.setColumnsVisible(h,!0,"uiColumnMoved")}},onGridExit:d=>{var c;if(a){const h=((c=d==null?void 0:d.columns)==null?void 0:c.filter(p=>!p.getColDef().lockVisible))||[];n.setColumnsVisible(h,!1,"uiColumnMoved")}}};o.addDragSource(u,!0)}getDragItemForGroup(i){const e=i.getProvidedColumnGroup().getLeafColumns(),t={};e.forEach(r=>t[r.getId()]=r.isVisible());const s=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(r=>{e.indexOf(r)>=0&&(s.push(r),bs(e,r))}),e.forEach(r=>s.push(r)),{columns:s,visibleState:t}}isSuppressMoving(){let i=!1;return this.column.getLeafColumns().forEach(t=>{(t.getColDef().suppressMovable||t.getColDef().lockPosition)&&(i=!0)}),i||this.gridOptionsService.get("suppressMovableColumns")}},h4=0,cp=class extends U{constructor(i,e,t){super(),this.instanceId=h4++,this.rowIndex=i,this.pinned=e,this.type=t;const s=t=="group"?"ag-header-row-column-group":t=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}postConstruct(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(i,e=!0){this.comp=i,e&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,y.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_VIRTUAL_COLUMNS_CHANGED,i=>this.onVirtualColumnsChanged(i.afterScroll)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(i){if(this.headerCellCtrls)return Gd(this.headerCellCtrls).find(e=>e.getColumnGroupChild()===i)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const i=this.getWidthForRow();this.comp.setWidth(`${i}px`)}getWidthForRow(){const{columnModel:i}=this.beans;return this.isPrintLayout?this.pinned!=null?0:i.getContainerWidth("right")+i.getContainerWidth("left")+i.getContainerWidth(null):i.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:i,rowHeight:e}=this.getTopAndHeight();this.comp.setTop(i+"px"),this.comp.setHeight(e+"px")}getTopAndHeight(){const{columnModel:i,filterManager:e}=this.beans;let t=i.getHeaderRowCount();const s=[];let r=0;e.hasFloatingFilters()&&(t++,r=1);const o=i.getColumnGroupHeaderRowHeight(),n=i.getColumnHeaderRowHeight(),l=1+r,a=t-l;for(let c=0;c<a;c++)s.push(o);s.push(n);for(let c=0;c<r;c++)s.push(i.getFloatingFiltersHeight());let u=0;for(let c=0;c<this.rowIndex;c++)u+=s[c];const d=s[this.rowIndex];return{topOffset:u,rowHeight:d}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(i=!1){const e=this.getHeaderCtrls(),t=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,t,i)}getHeaderCtrls(){const i=this.headerCellCtrls;this.headerCellCtrls=new Map;const e=this.getColumnsInViewport();for(const r of e)this.recycleAndCreateHeaderCtrls(r,i);const t=r=>{const{focusService:o,columnModel:n}=this.beans;return o.isHeaderWrapperFocused(r)?n.isDisplayed(r.getColumnGroupChild()):!1};if(i)for(const[r,o]of i)t(o)?this.headerCellCtrls.set(r,o):this.destroyBean(o);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(i,e){if(!this.headerCellCtrls||i.isEmptyGroup())return;const t=i.getUniqueId();let s;if(e&&(s=e.get(t),e.delete(t)),s&&s.getColumnGroupChild()!=i&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":s=this.createBean(new u4(i,this.beans,this));break;case"group":s=this.createBean(new c4(i,this.beans,this));break;default:s=this.createBean(new d4(i,this.beans,this));break}this.headerCellCtrls.set(t,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let i=[];const e=this.getActualDepth(),{columnModel:t}=this.beans;return["left",null,"right"].forEach(s=>{const r=t.getVirtualHeaderGroupRow(s,e);i=i.concat(r)}),i}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(i,e){if(!this.headerCellCtrls)return!1;const s=Array.from(this.headerCellCtrls.values()).find(r=>r.getColumnGroupChild()==i);return s?s.focus(e):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(i=>{this.destroyBean(i)}),this.headerCellCtrls=void 0,super.destroy()}};f([D("beans")],cp.prototype,"beans",2);f([K],cp.prototype,"postConstruct",1);var Nu=class extends U{constructor(i){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=i}setComp(i,e){this.comp=i,this.eViewport=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,y.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(i){const e=new ah(this.pinned,i);this.createManagedBean(e)}refresh(i=!1){const e=new TP,t=this.focusService.getFocusHeaderToUseAfterRefresh(),s=()=>{const l=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let a=0;a<l;a++){const u=this.createBean(new cp(e.next(),this.pinned,"group"));this.groupsRowCtrls.push(u)}},r=()=>{const l=e.next(),a=!this.hidden&&(this.columnsRowCtrl==null||!i||this.columnsRowCtrl.getRowIndex()!==l);(a||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),a&&(this.columnsRowCtrl=this.createBean(new cp(l,this.pinned,"column")))},o=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;const l=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){l();return}const a=e.next();if(this.filtersRowCtrl){const u=this.filtersRowCtrl.getRowIndex()!==a;(!i||u)&&l()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new cp(a,this.pinned,"filter")))};s(),r(),o();const n=this.getAllCtrls();this.comp.setCtrls(n),this.restoreFocusOnHeader(t)}restoreFocusOnHeader(i){i==null||i.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:i})}getAllCtrls(){const i=[...this.groupsRowCtrls];return this.columnsRowCtrl&&i.push(this.columnsRowCtrl),this.filtersRowCtrl&&i.push(this.filtersRowCtrl),i}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const i=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==i&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new nh(i=>this.comp.setCenterWidth(`${i}px`),!0))}setHorizontalScroll(i){this.comp.setViewportScrollLeft(i)}setupPinnedWidth(){if(this.pinned==null)return;const i=this.pinned==="left",e=this.pinned==="right";this.hidden=!0;const t=()=>{const s=i?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(s==null)return;const r=s==0,o=this.hidden!==r,n=this.gridOptionsService.get("enableRtl"),l=this.gridOptionsService.getScrollbarWidth(),u=this.scrollVisibleService.isVerticalScrollShowing()&&(n&&i||!n&&e)?s+l:s;this.comp.setPinnedContainerWidth(`${u}px`),this.comp.setDisplayed(!r),o&&(this.hidden=r,this.refresh())};this.addManagedListener(this.eventService,y.EVENT_LEFT_PINNED_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,y.EVENT_RIGHT_PINNED_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,y.EVENT_SCROLL_VISIBILITY_CHANGED,t),this.addManagedListener(this.eventService,y.EVENT_SCROLLBAR_WIDTH_CHANGED,t)}getHeaderCtrlForColumn(i){if(i instanceof dt)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(i):void 0;if(this.groupsRowCtrls.length!==0)for(let e=0;e<this.groupsRowCtrls.length;e++){const t=this.groupsRowCtrls[e].getHeaderCellCtrl(i);if(t)return t}}getHtmlElementForColumnHeader(i){const e=this.getHeaderCtrlForColumn(i);return e?e.getGui():null}getRowType(i){const t=this.getAllCtrls()[i];return t?t.getType():void 0}focusHeader(i,e,t){const r=this.getAllCtrls()[i];return r?r.focusHeader(e,t):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};f([D("ctrlsService")],Nu.prototype,"ctrlsService",2);f([D("scrollVisibleService")],Nu.prototype,"scrollVisibleService",2);f([D("pinnedWidthService")],Nu.prototype,"pinnedWidthService",2);f([D("columnModel")],Nu.prototype,"columnModel",2);f([D("focusService")],Nu.prototype,"focusService",2);f([D("filterManager")],Nu.prototype,"filterManager",2);var Gu=class Jm extends be{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();const e={setDisplayed:s=>this.setDisplayed(s),setCtrls:s=>this.setCtrls(s),setCenterWidth:s=>this.eCenterContainer.style.width=s,setViewportScrollLeft:s=>this.getGui().scrollLeft=s,setPinnedContainerWidth:s=>{const r=this.getGui();r.style.width=s,r.style.maxWidth=s,r.style.minWidth=s}};this.createManagedBean(new Nu(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",t=this.pinned=="right",s=e?Jm.PINNED_LEFT_TEMPLATE:t?Jm.PINNED_RIGHT_TEMPLATE:Jm.CENTER_TEMPLATE;this.setTemplate(s),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let s;const r=o=>{const n=o.getGui();n.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(n),s&&CP(this.eRowContainer,n,s),s=n};e.forEach(o=>{const n=o.getInstanceId(),l=t[n];delete t[n];const a=l||this.createBean(new HP(o));this.headerRowComps[n]=a,this.rowCompsList.push(a),r(a)}),Ml(t).forEach(o=>this.destroyRowComp(o))}};Gu.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>';Gu.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>';Gu.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;f([q("eCenterContainer")],Gu.prototype,"eCenterContainer",2);f([K],Gu.prototype,"init",1);f([Ur],Gu.prototype,"destroyRowComps",1);var Gy=Gu,Fc=class extends U{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl});const i=this.gridOptionsService.getDocument();this.addManagedListener(i,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){const i=this.ctrlsService.getHeaderRowContainerCtrl();return i?i.getRowCount():0}navigateVertically(i,e,t){if(e||(e=this.focusService.getFocusedHeader()),!e)return!1;const{headerRowIndex:s,column:r}=e,o=this.getHeaderRowCount(),n=i===0;let{headerRowIndex:l,column:a,headerRowIndexWithoutSpan:u}=n?this.headerPositionUtils.getColumnVisibleParent(r,s):this.headerPositionUtils.getColumnVisibleChild(r,s),d=!1;return l<0&&(l=0,a=r,d=!0),l>=o?(l=-1,this.setCurrentHeaderRowWithoutSpan(-1)):u!==void 0&&(this.currentHeaderRowWithoutSpan=u),!d&&!a?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l,column:a},allowUserOverride:!0,event:t})}setCurrentHeaderRowWithoutSpan(i){this.currentHeaderRowWithoutSpan=i}navigateHorizontally(i,e=!1,t){const s=this.focusService.getFocusedHeader(),r=i===2,o=this.gridOptionsService.get("enableRtl");let n,l;return this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,r!==o?(l="Before",n=this.headerPositionUtils.findHeader(s,l)):(l="After",n=this.headerPositionUtils.findHeader(s,l)),n||!e?this.focusService.focusHeaderPosition({headerPosition:n,direction:l,fromTab:e,allowUserOverride:!0,event:t}):this.focusNextHeaderRow(s,l,t)}focusNextHeaderRow(i,e,t){const s=i.headerRowIndex;let r=null,o;if(e==="Before"?s>0&&(o=s-1,this.currentHeaderRowWithoutSpan-=1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),r=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),!r)return!1;const{column:n,headerRowIndex:l}=this.headerPositionUtils.getHeaderIndexToFocus(r.column,r==null?void 0:r.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:l},direction:e,fromTab:!0,allowUserOverride:!0,event:t})}scrollToColumn(i,e="After"){if(i.getPinned())return;let t;if(i instanceof Si){const s=i.getDisplayedLeafColumns();t=e==="Before"?Ze(s):s[0]}else t=i;this.gridBodyCon.getScrollFeature().ensureColumnVisible(t)}};f([D("focusService")],Fc.prototype,"focusService",2);f([D("headerPositionUtils")],Fc.prototype,"headerPositionUtils",2);f([D("ctrlsService")],Fc.prototype,"ctrlsService",2);f([K],Fc.prototype,"postConstruct",1);Fc=f([ie("headerNavigationService")],Fc);var ku=class extends U{setComp(i,e,t){this.comp=i,this.eGui=e,this.createManagedBean(new ql(t,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",s),this.mockContextMenuForIPad(s),this.ctrlsService.registerGridHeaderCtrl(this)}setupHeaderHeight(){const i=this.setHeaderHeight.bind(this);i(),this.addManagedPropertyListener("headerHeight",i),this.addManagedPropertyListener("pivotHeaderHeight",i),this.addManagedPropertyListener("groupHeaderHeight",i),this.addManagedPropertyListener("pivotGroupHeaderHeight",i),this.addManagedPropertyListener("floatingFiltersHeight",i),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_GRID_STYLES_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,i)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:i}=this;let e=0,t=i.getHeaderRowCount(),s;this.filterManager.hasFloatingFilters()&&(t++,e=1);const o=this.columnModel.getColumnGroupHeaderRowHeight(),n=this.columnModel.getColumnHeaderRowHeight(),l=1+e,a=t-l;if(s=e*i.getFloatingFiltersHeight(),s+=a*o,s+=n,this.headerHeight===s)return;this.headerHeight=s;const u=`${s+1}px`;this.comp.setHeightAndMinHeight(u),this.eventService.dispatchEvent({type:y.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){const i=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",i),this.comp.addOrRemoveCssClass("ag-pivot-off",!i)}onDisplayedColumnsChanged(){const e=this.columnModel.getAllDisplayedColumns().some(t=>t.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(i){const e=this.gridOptionsService.get("enableRtl"),t=i.shiftKey!==e?2:3;(this.headerNavigationService.navigateHorizontally(t,!0,i)||this.focusService.focusNextGridCoreContainer(i.shiftKey))&&i.preventDefault()}handleKeyDown(i){let e=null;switch(i.key){case _.LEFT:e=2;case _.RIGHT:H(e)||(e=3),this.headerNavigationService.navigateHorizontally(e,!1,i);break;case _.UP:e=0;case _.DOWN:H(e)||(e=1),this.headerNavigationService.navigateVertically(e,null,i)&&i.preventDefault();break;default:return}}onFocusOut(i){const e=this.gridOptionsService.getDocument(),{relatedTarget:t}=i;!t&&this.eGui.contains(e.activeElement)||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(i,e,t){if(!i&&!t||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=i??e;(s===this.eGui||s===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,i,t)}mockContextMenuForIPad(i){if(!_n())return;const e=new Oi(this.eGui),t=s=>{i(void 0,s.touchStart,s.touchEvent)};this.addManagedListener(e,Oi.EVENT_LONG_TAP,t),this.addDestroyFunc(()=>e.destroy())}};f([D("headerNavigationService")],ku.prototype,"headerNavigationService",2);f([D("focusService")],ku.prototype,"focusService",2);f([D("columnModel")],ku.prototype,"columnModel",2);f([D("ctrlsService")],ku.prototype,"ctrlsService",2);f([D("filterManager")],ku.prototype,"filterManager",2);f([D("menuService")],ku.prototype,"menuService",2);var OV=class LV extends be{constructor(){super(LV.TEMPLATE)}postConstruct(){const e={addOrRemoveCssClass:(r,o)=>this.addOrRemoveCssClass(r,o),setHeightAndMinHeight:r=>{this.getGui().style.height=r,this.getGui().style.minHeight=r}};this.createManagedBean(new ku).setComp(e,this.getGui(),this.getFocusableElement());const s=r=>{this.createManagedBean(r),this.appendChild(r)};s(new Gy("left")),s(new Gy(null)),s(new Gy("right"))}};OV.TEMPLATE='<div class="ag-header" role="presentation"/>';f([K],OV.prototype,"postConstruct",1);var Tv=class extends U{addResizeBar(i){const e={dragStartPixels:i.dragStartPixels||0,eElement:i.eResizeBar,onDragStart:this.onDragStart.bind(this,i),onDragStop:this.onDragStop.bind(this,i),onDragging:this.onDragging.bind(this,i),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(e),()=>this.dragService.removeDragSource(e)}onDragStart(i,e){this.dragStartX=e.clientX,this.setResizeIcons();const t=e instanceof MouseEvent&&e.shiftKey===!0;i.onResizeStart(t)}setResizeIcons(){const i=this.ctrlsService.getGridCtrl();i.setResizeCursor(!0),i.disableUserSelect(!0)}onDragStop(i,e){i.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const i=this.ctrlsService.getGridCtrl();i.setResizeCursor(!1),i.disableUserSelect(!1)}onDragging(i,e){this.resizeAmount=e.clientX-this.dragStartX,i.onResizing(this.resizeAmount)}};f([D("dragService")],Tv.prototype,"dragService",2);f([D("ctrlsService")],Tv.prototype,"ctrlsService",2);Tv=f([ie("horizontalResizeService")],Tv);var du=class extends U{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(i,e,t){this.showPopup(i,s=>{this.popupService.positionPopupUnderMouseEvent({column:i,type:t,mouseEvent:e,ePopup:s})},t,e.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(i,e,t){let s=-1,r="left";const o=this.menuService.isLegacyMenuEnabled();!o&&this.gridOptionsService.get("enableRtl")&&(s=1,r="right");let n=o?void 0:4*s,l=o?void 0:4;this.showPopup(i,a=>{this.popupService.positionPopupByComponent({type:t,eventSource:e,ePopup:a,nudgeX:n,nudgeY:l,alignSide:r,keepWithinBounds:!0,position:"under",column:i})},t,e,o)}showPopup(i,e,t,s,r){const o=i?this.filterManager.getOrCreateFilterWrapper(i,"COLUMN_MENU"):void 0;if(!o||!i)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const n=document.createElement("div");Wt(n,"presentation"),n.classList.add("ag-menu"),r||n.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(n,"keydown",m=>this.trapFocusWithin(m,n)),o.guiPromise.then(m=>n.appendChild(m));let l;const a=()=>{var m;return(m=o.filterPromise)==null?void 0:m.then(S=>{var E;return(E=S==null?void 0:S.afterGuiDetached)==null?void 0:E.call(S)})},u=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,d=m=>{i.setMenuVisible(!1,"contextMenu");const S=m instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),S&&s&&hr(s)){const E=this.focusService.findTabbableParent(s);E&&E.focus()}a(),this.dispatchVisibleChangedEvent(!1,t,i)},c=this.localeService.getLocaleTextFunc(),h=r&&t!=="columnFilter"?c("ariaLabelColumnMenu","Column Menu"):c("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:n,closeOnEsc:!0,closedCallback:d,positionCallback:()=>e(n),anchorToElement:u,ariaLabel:h});p&&(this.hidePopup=l=p.hideFunc),o.filterPromise.then(m=>{e(n),m.afterGuiAttached&&m.afterGuiAttached({container:t,hidePopup:l})}),i.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,t,i)}trapFocusWithin(i,e){i.key!==_.TAB||i.defaultPrevented||this.focusService.findNextFocusableElement(e,!1,i.shiftKey)||(i.preventDefault(),this.focusService.focusInto(e,i.shiftKey))}dispatchVisibleChangedEvent(i,e,t){const s={type:y.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:i,switchingTab:!1,key:e,column:t??null};this.eventService.dispatchEvent(s)}isMenuEnabled(i){var e;return i.isFilterAllowed()&&((e=i.getColDef().menuTabs)!=null?e:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}};f([D("filterManager")],du.prototype,"filterManager",2);f([D("popupService")],du.prototype,"popupService",2);f([D("focusService")],du.prototype,"focusService",2);f([D("ctrlsService")],du.prototype,"ctrlsService",2);f([D("menuService")],du.prototype,"menuService",2);du=f([ie("filterMenuFactory")],du);var WP=class extends U{constructor(i){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;const{comp:e,eTopGuard:t,eBottomGuard:s,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:o,focusInnerElement:n,onFocusIn:l,onFocusOut:a,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:c,eFocusableElement:h}=i;this.comp=e,this.eTopGuard=t,this.eBottomGuard=s,this.providedFocusInnerElement=n,this.eFocusableElement=h,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.providedFocusIn=l,this.providedFocusOut=a,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=c}postConstruct(){this.createManagedBean(new ql(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:i=>this.onTabKeyDown(i),handleKeyDown:i=>this.handleKeyDown(i),onFocusIn:i=>this.onFocusIn(i),onFocusOut:i=>this.onFocusOut(i)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(i=>this.addManagedListener(i,"focus",this.onFocus.bind(this)))}handleKeyDown(i){this.providedHandleKeyDown&&this.providedHandleKeyDown(i)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const i=this.gridOptionsService.get("tabIndex");this.comp.setTabIndex(i.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(i){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(i.target===this.eBottomGuard);return}const e=i.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e)}findNextElementOutsideAndFocus(i){const e=this.gridOptionsService.getDocument(),t=this.focusService.findFocusableElements(e.body,null,!0),s=t.indexOf(i?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let r,o;i?(r=0,o=s):(r=s+1,o=t.length);const n=t.slice(r,o),l=this.gridOptionsService.get("tabIndex");n.sort((a,u)=>{const d=parseInt(a.getAttribute("tabindex")||"0"),c=parseInt(u.getAttribute("tabindex")||"0");return c===l?1:d===l?-1:d===0?1:c===0?-1:d-c}),n[i?n.length-1:0].focus()}onFocusIn(i){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(i),this.deactivateTabGuards())}onFocusOut(i){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(i),this.eFocusableElement.contains(i.relatedTarget)||this.activateTabGuards())}onTabKeyDown(i){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(i);return}if(this.focusTrapActive||i.defaultPrevented)return;const e=this.tabGuardsAreActive();e&&this.deactivateTabGuards();const t=this.getNextFocusableElement(i.shiftKey);e&&setTimeout(()=>this.activateTabGuards(),0),t&&(t.focus(),i.preventDefault())}focusInnerElement(i=!1){const e=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(e.length-1,1)),e.length&&e[i?e.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(i){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i)}forceFocusOutOfContainer(i=!1){if(this.forcingFocusOut)return;const e=i?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,e.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(i){return i===this.eTopGuard||i===this.eBottomGuard}};f([D("focusService")],WP.prototype,"focusService",2);f([K],WP.prototype,"postConstruct",1);var Lf=class extends be{initialiseTabGuard(i){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const e=[this.eTopGuard,this.eBottomGuard],t={setTabIndex:s=>{e.forEach(r=>s!=null?r.setAttribute("tabindex",s):r.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new WP({comp:t,focusTrapActive:!!i.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:i.onFocusIn,onFocusOut:i.onFocusOut,focusInnerElement:i.focusInnerElement,handleKeyDown:i.handleKeyDown,onTabKeyDown:i.onTabKeyDown,shouldStopEventPropagation:i.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:i.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(i){const e=document.createElement("div"),t=i==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return e.classList.add("ag-tab-guard",t),Wt(e,"presentation"),e}addTabGuards(i,e){this.eFocusableElement.insertAdjacentElement("afterbegin",i),this.eFocusableElement.insertAdjacentElement("beforeend",e)}removeAllChildrenExceptTabGuards(){const i=[this.eTopGuard,this.eBottomGuard];ni(this.getFocusableElement()),this.addTabGuards(...i)}forceFocusOutOfContainer(i=!1){this.tabGuardCtrl.forceFocusOutOfContainer(i)}appendChild(i,e){Sf(i)||(i=i.getGui());const{eBottomGuard:t}=this;t?t.insertAdjacentElement("beforebegin",i):super.appendChild(i,e)}},dw=class IV extends Lf{constructor(e){super(IV.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(e=>this.addItem(e)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var e,t,s;return(s=(t=(e=this.activeItem)==null?void 0:e.tabbedItem)==null?void 0:t.afterDetachedCallback)==null?void 0:s.call(t)})}static getTemplate(e){return`<div class="ag-tabs ${e}">
            <div ref="eHeader"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
        </div>`}setupHeader(){const{enableCloseButton:e,cssClass:t}=this.params,s=(r,o)=>{r.classList.add(`ag-tabs-${o}`),t&&r.classList.add(`${t}-${o}`)};e?(this.setupCloseButton(s),this.eTabHeader=this.gridOptionsService.getDocument().createElement("div"),s(this.eHeader,"header-wrapper"),Wt(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,Wt(this.eTabHeader,"tablist"),s(this.eTabHeader,"header")}setupCloseButton(e){const t=this.gridOptionsService.getDocument(),s=t.createElement("button");e(s,"close-button");const r=Nt("close",this.gridOptionsService,void 0,!0);So(s,this.params.closeButtonAriaLabel),s.appendChild(r),this.addManagedListener(s,"click",()=>{var n,l;return(l=(n=this.params).onCloseClicked)==null?void 0:l.call(n)});const o=t.createElement("div");e(o,"close-button-wrapper"),Wt(o,"presentation"),o.appendChild(s),this.eHeader.appendChild(o),this.eCloseButton=s}handleKeyDown(e){const t=this.gridOptionsService.getDocument();switch(e.key){case _.RIGHT:case _.LEFT:if(!this.eTabHeader.contains(t.activeElement))return;const s=e.key===_.RIGHT,r=this.gridOptionsService.get("enableRtl"),o=this.items.indexOf(this.activeItem),n=s!==r?Math.min(o+1,this.items.length-1):Math.max(o-1,0);if(o===n)return;e.preventDefault();const l=this.items[n];this.showItemWrapper(l),l.eHeaderButton.focus();break;case _.UP:case _.DOWN:e.stopPropagation();break}}onTabKeyDown(e){var t,s,r,o;if(e.defaultPrevented)return;const{focusService:n,eHeader:l,eBody:a,activeItem:u,params:d}=this,{suppressTrapFocus:c,enableCloseButton:h}=d,m=this.gridOptionsService.getDocument().activeElement,S=e.target,E=e.shiftKey;if(l.contains(m)){e.preventDefault(),h&&E&&!((t=this.eCloseButton)!=null&&t.contains(m))?(s=this.eCloseButton)==null||s.focus():c&&E?(r=this.focusService.findFocusableElementBeforeTabGuard(this.gridOptionsService.getDocument().body,S))==null||r.focus():this.focusBody(e.shiftKey);return}let C=null;if(n.isTargetUnderManagedComponent(a,S)&&(E&&(C=this.focusService.findFocusableElementBeforeTabGuard(a,S)),!C&&!c&&(C=u.eHeaderButton)),!C&&a.contains(m)&&(C=n.findNextFocusableElement(a,!1,E),!C)){e.preventDefault(),c&&!E?this.forceFocusOutOfContainer(E):h&&!E?(o=this.eCloseButton)==null||o.focus():this.focusHeader();return}C&&(e.preventDefault(),C.focus())}focusInnerElement(e){e?this.focusHeader():this.focusBody(!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){this.focusService.focusInto(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=document.createElement("span");Wt(t,"tab"),t.setAttribute("tabindex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eTabHeader.appendChild(t),So(t,e.titleLabel);const s={tabbedItem:e,eHeaderButton:t};this.items.push(s),t.addEventListener("click",this.showItemWrapper.bind(this,s))}showItem(e){const t=this.items.find(s=>s.tabbedItem===e);t&&this.showItemWrapper(t)}showItemWrapper(e){var t,s,r,o,n,l;const{tabbedItem:a,eHeaderButton:u}=e;if((s=(t=this.params).onItemClicked)==null||s.call(t,{item:a}),this.activeItem===e){(o=(r=this.params).onActiveItemClicked)==null||o.call(r);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),ni(this.eBody),a.bodyPromise.then(d=>{this.eBody.appendChild(d);const c=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,c),a.afterAttachedCallback&&a.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const h=a.getScrollableContainer&&a.getScrollableContainer()||d;this.lastScrollListener=this.addManagedListener(h,"scroll",()=>{this.tabbedItemScrollMap.set(a.name,h.scrollTop)});const p=this.tabbedItemScrollMap.get(a.name);p!==void 0&&setTimeout(()=>{h.scrollTop=p},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(l=(n=this.activeItem.tabbedItem).afterDetachedCallback)==null||l.call(n)),u.classList.add("ag-tab-selected"),this.activeItem=e}};f([D("focusService")],dw.prototype,"focusService",2);f([q("eHeader")],dw.prototype,"eHeader",2);f([q("eBody")],dw.prototype,"eBody",2);f([K],dw.prototype,"postConstruct",1);var p4=50,dL=class extends U{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(i,e){const t=this.gridOptionsService.getWindow(),s=()=>{const l=new t.ResizeObserver(e);return l.observe(i),()=>l.disconnect()},r=()=>{var l,a;let u=(l=i==null?void 0:i.clientWidth)!=null?l:0,d=(a=i==null?void 0:i.clientHeight)!=null?a:0,c=!0;const h=()=>{var p,m;if(c){const S=(p=i==null?void 0:i.clientWidth)!=null?p:0,E=(m=i==null?void 0:i.clientHeight)!=null?m:0;(S!==u||E!==d)&&(u=S,d=E,e()),this.doNextPolyfillTurn(h)}};return h(),()=>c=!1},o=this.gridOptionsService.get("suppressBrowserResizeObserver");return!!t.ResizeObserver&&!o?s():this.getFrameworkOverrides().wrapIncoming(()=>r(),"resize-observer")}doNextPolyfillTurn(i){this.polyfillFunctions.push(i),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;const i=()=>{const e=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],e.forEach(t=>t())};this.polyfillScheduled=!0,window.setTimeout(i,p4)}};dL=f([ie("resizeObserverService")],dL);var Cg=class extends U{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(i){const e=this.gridOptionsService.get("pagination");if(this.scrollGoingDown=i>=this.lastScrollTop,e&&i===0){const t=this.paginationProxy.getCurrentPage();t!==this.lastPage&&(this.lastPage=t,this.scrollGoingDown=!0)}this.lastScrollTop=i}init(){this.useAnimationFrame=!this.gridOptionsService.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(i){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${i} called but animation frames are off`)}createTask(i,e,t){this.verifyAnimationFrameOn(t);const s={task:i,index:e,createOrder:++this.taskCount};this.addTaskToList(this[t],s),this.schedule()}cancelTask(i){this.cancelledTasks.add(i)}addTaskToList(i,e){i.list.push(e),i.sorted=!1}sortTaskList(i){if(i.sorted)return;const e=this.scrollGoingDown?1:-1;i.list.sort((t,s)=>t.index!==s.index?e*(s.index-t.index):s.createOrder-t.createOrder),i.sorted=!0}addDestroyTask(i){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(i),this.schedule()}executeFrame(i){this.verifyAnimationFrameOn("executeFrame");const e=this.createTasksP1,t=e.list,s=this.createTasksP2,r=s.list,o=this.destroyTasks,n=new Date().getTime();let l=new Date().getTime()-n;const a=i<=0,u=this.ctrlsService.getGridBodyCtrl();for(;a||l<i;){if(!u.getScrollFeature().scrollGridIfNeeded()){let c;if(t.length)this.sortTaskList(e),c=t.pop().task;else if(r.length)this.sortTaskList(s),c=r.pop().task;else if(o.length)c=o.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(c)||c()}l=new Date().getTime()-n}t.length||r.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const i=this.executeFrame.bind(this,60);this.requestAnimationFrame(i)}requestAnimationFrame(i){const e=this.gridOptionsService.getWindow();e.requestAnimationFrame?e.requestAnimationFrame(i):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(i):e.setTimeout(i,0)}isQueueEmpty(){return!this.ticking}debounce(i){let e=!1;return()=>{if(!this.isOn()){window.setTimeout(i,0);return}e||(e=!0,this.addDestroyTask(()=>{e=!1,i()}))}}};f([D("ctrlsService")],Cg.prototype,"ctrlsService",2);f([D("paginationProxy")],Cg.prototype,"paginationProxy",2);f([K],Cg.prototype,"init",1);Cg=f([ie("animationFrameService")],Cg);var Ke=(i=>(i.EVERYTHING="group",i.FILTER="filter",i.SORT="sort",i.MAP="map",i.AGGREGATE="aggregate",i.FILTER_AGGREGATES="filter_aggregates",i.PIVOT="pivot",i.NOTHING="nothing",i))(Ke||{}),Dv=class extends U{postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(i){if(!this.isClientSideRowModel)return;const e=new Set(i);this.rowModel.forEachNode(t=>{t.id&&e.has(t.id)&&(t.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const i=[];return this.rowModel.forEachNode(({expanded:e,id:t})=>{e&&t&&i.push(t)}),i}expandAll(i){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(i)}setRowNodeExpanded(i,e,t){i&&(t&&i.parent&&i.parent.level!==-1&&this.setRowNodeExpanded(i.parent,e,t),i.setExpanded(e))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}};f([D("rowModel")],Dv.prototype,"rowModel",2);f([K],Dv.prototype,"postConstruct",1);Dv=f([ie("expansionService")],Dv);var Zo=class extends U{postConstruct(){var i;this.activeMenuFactory=(i=this.enterpriseMenuFactory)!=null?i:this.filterMenuFactory}showColumnMenu(i){this.showColumnMenuCommon(this.activeMenuFactory,i,"columnMenu")}showFilterMenu(i){const e=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(e,i,i.containerType,!0)}showHeaderContextMenu(i,e,t){this.activeMenuFactory.showMenuAfterContextMenuEvent(i,e,t)}showContextMenu(i){var e,t,s;const{column:r,anchorToElement:o,rowNode:n,value:l}=i;(s=this.contextMenuFactory)==null||s.onContextMenu((e=i.mouseEvent)!=null?e:null,(t=i.touchEvent)!=null?t:null,n??null,r??null,l,o)}showColumnChooser(i){var e;(e=this.columnChooserFactory)==null||e.showColumnChooser(i)}hidePopupMenu(){var i;(i=this.contextMenuFactory)==null||i.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var i;(i=this.columnChooserFactory)==null||i.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(i){const{suppressMenu:e,suppressHeaderMenuButton:t}=i.getColDef();return!(t??e)&&this.activeMenuFactory.isMenuEnabled(i)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(i){return!i.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(i)}isHeaderContextMenuEnabled(i){return!(i!=null&&i.getColDef().suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const i=!this.isSuppressMenuHide();return!(_n()&&i)}isHeaderFilterButtonEnabled(i){return this.isFilterMenuInHeaderEnabled(i)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(i)}isFilterMenuItemEnabled(i){return this.filterManager.isFilterAllowed(i)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(i)&&!this.isFloatingFilterButtonDisplayed(i)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(i){var e;const t=i.getColDef(),s=(e=t.floatingFilterComponentParams)==null?void 0:e.suppressFilterButton;return s!=null&&ve("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!s:!t.suppressFloatingFilterButton}getColumnMenuType(){var i;return(i=this.gridOptionsService.get("columnMenu"))!=null?i:"legacy"}isFloatingFilterButtonDisplayed(i){return!!i.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(i)}isSuppressMenuHide(){const i=this.gridOptionsService.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gridOptionsService.exists("suppressMenuHide")?i:!0}showColumnMenuCommon(i,e,t,s){const{column:r,positionBy:o}=e;if(o==="button"){const{buttonElement:n}=e;i.showMenuAfterButtonClick(r,n,t,s)}else if(o==="mouse"){const{mouseEvent:n}=e;i.showMenuAfterMouseEvent(r,n,t,s)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const n=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getHeaderCtrlForColumn(r);i.showMenuAfterButtonClick(r,n.getAnchorElementForMenu(s),t,!0)}))}};f([Qe("enterpriseMenuFactory")],Zo.prototype,"enterpriseMenuFactory",2);f([D("filterMenuFactory")],Zo.prototype,"filterMenuFactory",2);f([Qe("contextMenuFactory")],Zo.prototype,"contextMenuFactory",2);f([D("ctrlsService")],Zo.prototype,"ctrlsService",2);f([D("animationFrameService")],Zo.prototype,"animationFrameService",2);f([Qe("columnChooserFactory")],Zo.prototype,"columnChooserFactory",2);f([D("filterManager")],Zo.prototype,"filterManager",2);f([K],Zo.prototype,"postConstruct",1);Zo=f([ie("menuService")],Zo);var Oc=class extends U{postConstruct(){this.ctrlsService.whenReady(i=>{this.centerRowContainerCtrl=i.centerRowContainerCtrl})}getPreferredWidthForColumn(i,e){const t=this.getHeaderCellForColumn(i);if(!t)return-1;const s=this.rowRenderer.getAllCellsForColumn(i);return e||s.push(t),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(i){const e=this.getHeaderCellForColumn(i);return e?this.addElementsToContainerAndGetWidth([e]):-1}addElementsToContainerAndGetWidth(i){const e=document.createElement("form");e.style.position="fixed";const t=this.centerRowContainerCtrl.getContainerElement();i.forEach(o=>this.cloneItemIntoDummy(o,e)),t.appendChild(e);const s=e.offsetWidth;t.removeChild(e);const r=this.getAutoSizePadding();return s+r}getAutoSizePadding(){return this.gridOptionsService.get("autoSizePadding")}getHeaderCellForColumn(i){let e=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>{const s=t.getHtmlElementForColumnHeader(i);s!=null&&(e=s)}),e}cloneItemIntoDummy(i,e){const t=i.cloneNode(!0);t.style.width="",t.style.position="static",t.style.left="";const s=document.createElement("div"),r=s.classList;["ag-header-cell","ag-header-group-cell"].some(l=>t.classList.contains(l))?(r.add("ag-header","ag-header-row"),s.style.position="static"):r.add("ag-row");let n=i.parentElement;for(;n;){if(["ag-header-row","ag-row"].some(a=>n.classList.contains(a))){for(let a=0;a<n.classList.length;a++){const u=n.classList[a];u!="ag-row-position-absolute"&&r.add(u)}break}n=n.parentElement}s.appendChild(t),e.appendChild(s)}};f([D("rowRenderer")],Oc.prototype,"rowRenderer",2);f([D("ctrlsService")],Oc.prototype,"ctrlsService",2);f([D("rowCssClassCalculator")],Oc.prototype,"rowCssClassCalculator",2);f([K],Oc.prototype,"postConstruct",1);Oc=f([ie("autoWidthCalculator")],Oc);var If=class extends U{constructor(i,e){super(),this.createRowCon=i,this.destroyRowCtrls=e,this.stickyRowCtrls=[],this.containerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getStickyRowCtrls(){return this.stickyRowCtrls}checkStickyRows(){let i=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],i);const e=[],t=this.rowRenderer.getFirstVisibleVerticalPixel(),s=o=>{var n,l,a;e.push(o);let u;if(this.isClientSide){let c=o;for(;c.isExpandable()&&c.expanded;)if(c.master)c=c.detailNode;else if(c.childrenAfterSort){if(c.childrenAfterSort.length===0)break;c=Ze(c.childrenAfterSort)}u=c.rowTop+c.rowHeight}else if(o.master)u=o.detailNode.rowTop+o.detailNode.rowHeight;else{const c=(n=o.childStore)==null?void 0:n.getStoreBounds();u=((l=c==null?void 0:c.heightPx)!=null?l:0)+((a=c==null?void 0:c.topPx)!=null?a:0)}const d=t+i+o.rowHeight;u<d?o.stickyRowTop=i+(u-d):o.stickyRowTop=i,i=0,e.forEach(c=>{const h=c.stickyRowTop+c.rowHeight;i<h&&(i=h)})};let r=0;for(;;){const o=t+i,n=this.rowModel.getRowIndexAtPixel(o),l=this.rowModel.getRow(n);if(l==null||l.level<0||r++===100)break;const a=[];let u=l.parent;for(;u.level>=0;)a.push(u),u=u.parent;const d=a.reverse().find(c=>e.indexOf(c)<0&&c.displayed);if(d){s(d);continue}if(l.isExpandable()&&l.expanded&&l.rowTop<o){s(l);continue}break}return this.refreshNodesAndContainerHeight(e,i)}refreshStickyNode(i){const e=[];for(let t=0;t<this.stickyRowCtrls.length;t++){const s=this.stickyRowCtrls[t].getRowNode();s!==i&&e.push(s)}this.refreshNodesAndContainerHeight(e,this.containerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(i,e){let t=!1;const s=this.stickyRowCtrls.filter(l=>i.indexOf(l.getRowNode())===-1),r=i.filter(l=>this.stickyRowCtrls.findIndex(a=>a.getRowNode()===l)===-1);(s.length||r.length)&&(t=!0);const o={};s.forEach(l=>{o[l.getRowNode().id]=l,this.stickyRowCtrls=this.stickyRowCtrls.filter(a=>a!==l)});for(const l of Object.values(o))l.getRowNode().sticky=!1;this.destroyRowCtrls(o,!1);const n=r.map(l=>(l.sticky=!0,this.createRowCon(l,!1,!1)));return this.stickyRowCtrls.push(...n),this.stickyRowCtrls.forEach(l=>l.setRowTop(l.getRowNode().stickyRowTop)),this.stickyRowCtrls.sort((l,a)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex),this.containerHeight!==e&&(this.containerHeight=e,this.gridBodyCtrl.setStickyTopHeight(e),t=!0),t}};f([D("rowModel")],If.prototype,"rowModel",2);f([D("rowRenderer")],If.prototype,"rowRenderer",2);f([D("ctrlsService")],If.prototype,"ctrlsService",2);f([K],If.prototype,"postConstruct",1);var Hr=class extends U{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const i=()=>{this.getAllCellCtrls().forEach(o=>o.onRangeSelectionChanged())},e=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},t=()=>{this.eventService.addEventListener(y.EVENT_RANGE_SELECTION_CHANGED,i),this.eventService.addEventListener(y.EVENT_COLUMN_MOVED,e),this.eventService.addEventListener(y.EVENT_COLUMN_PINNED,e),this.eventService.addEventListener(y.EVENT_COLUMN_VISIBLE,e)},s=()=>{this.eventService.removeEventListener(y.EVENT_RANGE_SELECTION_CHANGED,i),this.eventService.removeEventListener(y.EVENT_COLUMN_MOVED,e),this.eventService.removeEventListener(y.EVENT_COLUMN_PINNED,e),this.eventService.removeEventListener(y.EVENT_COLUMN_VISIBLE,e)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListener("enableRangeSelection",o=>{o.currentValue?t():s()}),this.gridOptionsService.get("enableRangeSelection")&&t()}}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,y.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,y.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,y.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gridOptionsService.isGroupRowsSticky()){const i=this.rowModel.getType();(i==="clientSide"||i==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new If(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gridOptionsService.get("keepDetailRows")){const i=this.getKeepDetailRowsCount(),e=i??3;this.cachedRowCtrls=new g4(e)}}getKeepDetailRowsCount(){return this.gridOptionsService.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]}updateAllRowCtrls(){const i=Ml(this.rowCtrlsByRowIndex),e=Ml(this.zombieRowCtrls),t=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];e.length>0||t.length>0?this.allRowCtrls=[...i,...e,...t]:this.allRowCtrls=i}onCellFocusChanged(i){this.getAllCellCtrls().forEach(e=>e.onCellFocused(i)),this.getFullWidthRowCtrls().forEach(e=>e.onFullWidthRowFocused(i))}registerCellEventListeners(){this.addManagedListener(this.eventService,y.EVENT_CELL_FOCUSED,i=>{this.onCellFocusChanged(i)}),this.addManagedListener(this.eventService,y.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,y.EVENT_FLASH_CELLS,i=>{this.getAllCellCtrls().forEach(e=>e.onFlashCells(i))}),this.addManagedListener(this.eventService,y.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(i=>i.onColumnHover())}),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(i=>i.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(i=>i.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,y.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(i=>i()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(e=>{const t=a=>{this.getAllCellCtrls().forEach(u=>{u.getColumn()===e&&a(u)})},s=()=>{t(a=>a.onLeftChanged())},r=()=>{t(a=>a.onWidthChanged())},o=()=>{t(a=>a.onFirstRightPinnedChanged())},n=()=>{t(a=>a.onLastLeftPinnedChanged())},l=()=>{t(a=>a.onColDefChanged())};e.addEventListener("leftChanged",s),e.addEventListener("widthChanged",r),e.addEventListener("firstRightPinnedChanged",o),e.addEventListener("lastLeftPinnedChanged",n),e.addEventListener("colDefChanged",l),this.destroyFuncsForColumnListeners.push(()=>{e.removeEventListener("leftChanged",s),e.removeEventListener("widthChanged",r),e.removeEventListener("firstRightPinnedChanged",o),e.removeEventListener("lastLeftPinnedChanged",n),e.removeEventListener("colDefChanged",l)})})}onDomLayoutChanged(){const i=this.gridOptionsService.isDomLayout("print"),e=i||this.gridOptionsService.get("embedFullWidthRows"),t=e!==this.embedFullWidthRows||this.printLayout!==i;this.printLayout=i,this.embedFullWidthRows=e,t&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const i=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(i)}onPageLoaded(i){const e={recycleRows:i.keepRenderedRows,animate:i.animate,newData:i.newData,newPage:i.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)}getAllCellsForColumn(i){const e=[];return this.getAllRowCtrls().forEach(t=>{const s=t.getCellElement(i);s&&e.push(s)}),e}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(i,e){i.forEach(t=>{t.destroyFirstPass(),t.destroySecondPass()}),i.length=0,e&&e.forEach(t=>{const s=new Ua(t,this.beans,!1,!1,this.printLayout);i.push(s)})}onPinnedRowDataChanged(){const i={recycleRows:!0};this.redrawAfterModelUpdate(i)}redrawRow(i,e=!1){var t;if(i.sticky)this.stickyRowFeature.refreshStickyNode(i);else if((t=this.cachedRowCtrls)!=null&&t.has(i)){this.cachedRowCtrls.removeRow(i);return}else{const s=r=>{const o=r[i.rowIndex];o&&o.getRowNode()===i&&(o.destroyFirstPass(),o.destroySecondPass(),r[i.rowIndex]=this.createRowCon(i,!1,!1))};switch(i.rowPinned){case"top":s(this.topRowCtrls);break;case"bottom":s(this.bottomRowCtrls);break;default:s(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)}redrawRows(i){if(i!=null){i==null||i.forEach(t=>this.redrawRow(t,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(i){const e=i!=null&&i.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(e==null)return null;const s=this.gridOptionsService.getDocument().activeElement,r=this.gridOptionsService.getDomData(s,Wa.DOM_DATA_KEY_CELL_CTRL),o=this.gridOptionsService.getDomData(s,Ua.DOM_DATA_KEY_ROW_CTRL);return r||o?e:null}redrawAfterModelUpdate(i={}){this.getLockOnRefresh();const e=this.getCellToRestoreFocusToAfterRefresh(i);this.updateContainerHeights(),this.scrollToTopIfNewData(i);const t=!i.domLayoutChanged&&!!i.recycleRows,s=i.animate&&this.gridOptionsService.isAnimateRows(),r=t?this.getRowsToRecycle():null;t||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(r,s),this.gridBodyCtrl.updateRowCount(),i.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),e!=null&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()}scrollToTopIfNewData(i){const e=i.newData||i.newPage,t=this.gridOptionsService.get("suppressScrollOnNewData");e&&!t&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let i=this.paginationProxy.getCurrentPageHeight();i===0&&(i=1),this.rowContainerHeightService.setModelHeight(i)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(i){i&&(this.focusService.setRestoreFocusedCell(i),this.onCellFocusChanged(this.beans.gridOptionsService.addGridCommonParams({rowIndex:i.rowIndex,column:i.column,rowPinned:i.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(i=!1){this.getAllRowCtrls().forEach(e=>{e.stopEditing(i)})}getAllCellCtrls(){const i=[],e=this.getAllRowCtrls(),t=e.length;for(let s=0;s<t;s++){const r=e[s].getAllCellCtrls(),o=r.length;for(let n=0;n<o;n++)i.push(r[n])}return i}getAllRowCtrls(){const i=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],e=[...this.topRowCtrls,...this.bottomRowCtrls,...i];for(const t of Object.keys(this.rowCtrlsByRowIndex))e.push(this.rowCtrlsByRowIndex[t]);return e}addRenderedRowListener(i,e,t){const s=this.rowCtrlsByRowIndex[e];s&&s.addEventListener(i,t)}flashCells(i={}){this.getCellCtrls(i.rowNodes,i.columns).forEach(e=>e.flashCell(i))}refreshCells(i={}){const e={forceRefresh:i.force,newData:!1,suppressFlash:i.suppressFlash};this.getCellCtrls(i.rowNodes,i.columns).forEach(t=>t.refreshOrDestroyCell(e)),i.rowNodes&&(this.getRowCtrls(i.rowNodes).forEach(t=>{if(!t.isFullWidth())return;t.refreshFullWidth()||this.redrawRow(t.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(i){var e;const t=this.getCellCtrls(i.rowNodes,i.columns).map(o=>o.getCellRenderer()).filter(o=>o!=null);if((e=i.columns)!=null&&e.length)return t;const s=[],r=this.mapRowNodes(i.rowNodes);return this.getAllRowCtrls().forEach(o=>{if(r&&!this.isRowInMap(o.getRowNode(),r)||!o.isFullWidth())return;const n=o.getFullWidthCellRenderers();for(let l=0;l<n.length;l++){const a=n[l];a!=null&&s.push(a)}}),[...s,...t]}getCellEditorInstances(i){const e=[];return this.getCellCtrls(i.rowNodes,i.columns).forEach(t=>{const s=t.getCellEditor();s&&e.push(s)}),e}getEditingCells(){const i=[];return this.getAllCellCtrls().forEach(e=>{if(e.isEditing()){const t=e.getCellPosition();i.push(t)}}),i}mapRowNodes(i){if(!i)return;const e={top:{},bottom:{},normal:{}};return i.forEach(t=>{const s=t.id;t.rowPinned==="top"?e.top[s]=t:t.rowPinned==="bottom"?e.bottom[s]=t:e.normal[s]=t}),e}isRowInMap(i,e){const t=i.id,s=i.rowPinned;return s==="bottom"?e.bottom[t]!=null:s==="top"?e.top[t]!=null:e.normal[t]!=null}getRowCtrls(i){const e=this.mapRowNodes(i),t=this.getAllRowCtrls();return!i||!e?t:t.filter(s=>{const r=s.getRowNode();return this.isRowInMap(r,e)})}getCellCtrls(i,e){let t;H(e)&&(t={},e.forEach(r=>{const o=this.columnModel.getGridColumn(r);H(o)&&(t[o.getId()]=!0)}));const s=[];return this.getRowCtrls(i).forEach(r=>{r.getAllCellCtrls().forEach(o=>{const n=o.getColumn().getId();t&&!t[n]||s.push(o)})}),s}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const i=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(i)}getRowsToRecycle(){const i=[];tr(this.rowCtrlsByRowIndex,(t,s)=>{s.getRowNode().id==null&&i.push(t)}),this.removeRowCtrls(i);const e={};return tr(this.rowCtrlsByRowIndex,(t,s)=>{const r=s.getRowNode();e[r.id]=s}),this.rowCtrlsByRowIndex={},e}removeRowCtrls(i,e=!1){i.forEach(t=>{const s=this.rowCtrlsByRowIndex[t];s&&(s.destroyFirstPass(e),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[t]})}onBodyScroll(i){i.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(i={}){const{afterScroll:e}=i;let t;this.stickyRowFeature&&uP()&&(t=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;this.stickyRowFeature&&(o=this.stickyRowFeature.checkStickyRows());const n=this.firstRenderedRow!==s||this.lastRenderedRow!==r;if(!(e&&!o&&!n)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,e),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(e&&!o),t!=null)){const l=this.getCellToRestoreFocusToAfterRefresh();t!=null&&l==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(t))}}removeRowCompsNotToDraw(i,e){const t={};i.forEach(o=>t[o]=!0);const r=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!t[o]);this.removeRowCtrls(r,e)}calculateIndexesToDraw(i){let e=uk(this.firstRenderedRow,this.lastRenderedRow);const t=(r,o)=>{const n=o.getRowNode().rowIndex;n!=null&&(n<this.firstRenderedRow||n>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(o)&&e.push(n)};tr(this.rowCtrlsByRowIndex,t),tr(i,t),e.sort((r,o)=>r-o);const s=[];for(let r=0;r<e.length;r++){const o=e[r],n=this.paginationProxy.getRow(o);n&&!n.sticky&&s.push(o)}return s}recycleRows(i,e=!1,t=!1){const s=this.calculateIndexesToDraw(i);(this.printLayout||t)&&(e=!1),this.removeRowCompsNotToDraw(s,!e),s.forEach(r=>{this.createOrUpdateRowCtrl(r,i,e,t)}),i&&(t&&!this.gridOptionsService.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(i,e),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(i,e)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(i=!1){const e={type:y.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:i};this.eventService.dispatchEvent(e)}onDisplayedColumnsChanged(){const i=this.columnModel.isPinningLeft(),e=this.columnModel.isPinningRight();(this.pinningLeft!==i||e!==this.pinningRight)&&(this.pinningLeft=i,this.pinningRight=e,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const i=[];this.getFullWidthRowCtrls().forEach(e=>{const t=e.getRowNode().rowIndex;i.push(t.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(i),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(i){const e=this.mapRowNodes(i);return this.getAllRowCtrls().filter(t=>{if(!t.isFullWidth())return!1;const s=t.getRowNode();return!(e!=null&&!this.isRowInMap(s,e))})}createOrUpdateRowCtrl(i,e,t,s){let r,o=this.rowCtrlsByRowIndex[i];if(o||(r=this.paginationProxy.getRow(i),H(r)&&H(e)&&e[r.id]&&r.alreadyRendered&&(o=e[r.id],e[r.id]=null)),!o)if(r||(r=this.paginationProxy.getRow(i)),H(r))o=this.createRowCon(r,t,s);else return;return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[i]=o,o}destroyRowCtrls(i,e){const t=[];tr(i,(s,r)=>{if(r){if(this.cachedRowCtrls&&r.isCacheable()){this.cachedRowCtrls.addRow(r);return}r.destroyFirstPass(!e),e?(this.zombieRowCtrls[r.getInstanceId()]=r,t.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[r.getInstanceId()]})):r.destroySecondPass()}}),e&&(t.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),C0(t))}getRowBuffer(){return this.gridOptionsService.get("rowBuffer")}getRowBufferInPixels(){const i=this.getRowBuffer(),e=this.gridOptionsService.getRowHeightAsNumber();return i*e}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let i,e;if(!this.paginationProxy.isRowsToRender())i=0,e=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),i=this.paginationProxy.getPageFirstRow(),e=this.paginationProxy.getPageLastRow();else{const l=this.getRowBufferInPixels(),a=this.ctrlsService.getGridBodyCtrl(),u=this.gridOptionsService.get("suppressRowVirtualisation");let d=!1,c,h;do{const C=this.paginationProxy.getPixelOffset(),{pageFirstPixel:v,pageLastPixel:R}=this.paginationProxy.getCurrentPagePixelRange(),b=this.rowContainerHeightService.getDivStretchOffset(),A=a.getScrollFeature().getVScrollPosition(),F=A.top,O=A.bottom;u?(c=v+b,h=R+b):(c=Math.max(F+C-l,v)+b,h=Math.min(O+C+l,R)+b),this.firstVisibleVPixel=Math.max(F+C,v)+b,d=this.ensureAllRowsInRangeHaveHeightsCalculated(c,h)}while(d);let p=this.paginationProxy.getRowIndexAtPixel(c),m=this.paginationProxy.getRowIndexAtPixel(h);const S=this.paginationProxy.getPageFirstRow(),E=this.paginationProxy.getPageLastRow();p<S&&(p=S),m>E&&(m=E),i=p,e=m}const t=this.gridOptionsService.isDomLayout("normal"),s=this.gridOptionsService.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);t&&!s&&e-i>r&&(e=i+r);const o=i!==this.firstRenderedRow,n=e!==this.lastRenderedRow;if(o||n){this.firstRenderedRow=i,this.lastRenderedRow=e;const l={type:y.EVENT_VIEWPORT_CHANGED,firstRow:i,lastRow:e};this.eventService.dispatchEvent(l)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const i={type:y.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(i)})}ensureAllRowsInRangeHaveHeightsCalculated(i,e){const t=this.paginationProxy.ensureRowHeightsValid(i,e,-1,-1);return t&&this.updateContainerHeights(),t}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(i){const s=i.getRowNode(),r=this.focusService.isRowNodeFocused(s),o=i.isEditing(),n=s.detail;return r||o||n?!!this.paginationProxy.isRowPresent(s):!1}createRowCon(i,e,t){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(i):null;if(s)return s;const r=this.gridOptionsService.get("suppressAnimationFrame"),o=t&&!r&&!this.printLayout;return new Ua(i,this.beans,e,o,this.printLayout)}getRenderedNodes(){const i=this.rowCtrlsByRowIndex;return Object.keys(i).map(e=>i[e].getRowNode())}getRowByPosition(i){let e;const{rowIndex:t}=i;switch(i.rowPinned){case"top":e=this.topRowCtrls[t];break;case"bottom":e=this.bottomRowCtrls[t];break;default:e=this.rowCtrlsByRowIndex[t],e||(e=this.getStickyTopRowCtrls().find(s=>s.getRowNode().rowIndex===t)||null);break}return e}getRowNode(i){switch(i.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[i.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[i.rowIndex];default:return this.rowModel.getRow(i.rowIndex)}}isRangeInRenderedViewport(i,e){if(i==null||e==null)return!1;const s=i>this.lastRenderedRow;return!(e<this.firstRenderedRow)&&!s}};f([D("animationFrameService")],Hr.prototype,"animationFrameService",2);f([D("paginationProxy")],Hr.prototype,"paginationProxy",2);f([D("columnModel")],Hr.prototype,"columnModel",2);f([D("pinnedRowModel")],Hr.prototype,"pinnedRowModel",2);f([D("rowModel")],Hr.prototype,"rowModel",2);f([D("focusService")],Hr.prototype,"focusService",2);f([D("beans")],Hr.prototype,"beans",2);f([D("rowContainerHeightService")],Hr.prototype,"rowContainerHeightService",2);f([D("ctrlsService")],Hr.prototype,"ctrlsService",2);f([K],Hr.prototype,"postConstruct",1);Hr=f([ie("rowRenderer")],Hr);var g4=class{constructor(i){this.entriesMap={},this.entriesList=[],this.maxCount=i}addRow(i){if(this.entriesMap[i.getRowNode().id]=i,this.entriesList.push(i),i.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(i){if(i==null||i.id==null)return null;const e=this.entriesMap[i.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=i?null:e):null}has(i){return this.entriesMap[i.id]!=null}removeRow(i){const e=i.id,t=this.entriesMap[e];delete this.entriesMap[e],bs(this.entriesList,t)}removeFromCache(i){const e=i.getRowNode().id;delete this.entriesMap[e],bs(this.entriesList,i)}getEntries(){return this.entriesList}},tT=class extends U{formatValue(i,e,t,s,r=!0){let o=null,n;const l=i.getColDef();if(s?n=s:r&&(n=l.valueFormatter),n){const a=this.gridOptionsService.addGridCommonParams({value:t,node:e,data:e?e.data:null,colDef:l,column:i});typeof n=="function"?o=n(a):o=this.expressionService.evaluate(n,a)}else if(l.refData)return l.refData[t]||"";return o==null&&Array.isArray(t)&&(o=t.join(", ")),o}};f([D("expressionService")],tT.prototype,"expressionService",2);tT=f([ie("valueFormatterService")],tT);var bv=class extends U{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(i){const e=i==="top"?this.pinnedTopRows:this.pinnedBottomRows;return er(e)}isRowsToRender(i){return!this.isEmpty(i)}getRowAtPixel(i,e){const t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(er(t))return 0;for(let s=0;s<t.length;s++){const r=t[s];if(r.rowTop+r.rowHeight-1>=i)return s}return t.length-1}setPinnedTopRowData(){const i=this.gridOptionsService.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(i,!0);const e={type:y.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}setPinnedBottomRowData(){const i=this.gridOptionsService.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(i,!1);const e={type:y.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}createNodesFromData(i,e){const t=[];if(i){let s=0;i.forEach((r,o)=>{const n=new Ge(this.beans);n.data=r;const l=e?Ge.ID_PREFIX_TOP_PINNED:Ge.ID_PREFIX_BOTTOM_PINNED;n.id=l+o,n.rowPinned=e?"top":"bottom",n.setRowTop(s),n.setRowHeight(this.gridOptionsService.getRowHeightForNode(n).height),n.setRowIndex(o),s+=n.rowHeight,t.push(n)})}return t}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(i){return this.pinnedTopRows[i]}getPinnedBottomRow(i){return this.pinnedBottomRows[i]}forEachPinnedTopRow(i){er(this.pinnedTopRows)||this.pinnedTopRows.forEach(i)}forEachPinnedBottomRow(i){er(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(i)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(i){if(!i||i.length===0)return 0;const e=Ze(i);return e.rowTop+e.rowHeight}};f([D("beans")],bv.prototype,"beans",2);f([K],bv.prototype,"init",1);bv=f([ie("pinnedRowModel")],bv);var cw=class{constructor(i,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=i,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(i,e){if(i.children)for(let t=0;t<i.children.length;t++)this.depthFirstSearchChangedPath(i.children[t],e);e(i.rowNode)}depthFirstSearchEverything(i,e,t){if(i.childrenAfterGroup)for(let s=0;s<i.childrenAfterGroup.length;s++){const r=i.childrenAfterGroup[s];r.childrenAfterGroup?this.depthFirstSearchEverything(i.childrenAfterGroup[s],e,t):t&&e(r)}e(i)}forEachChangedNodeDepthFirst(i,e=!1,t=!1){this.active&&!t?this.depthFirstSearchChangedPath(this.pathRoot,i):this.depthFirstSearchEverything(this.pathRoot.rowNode,i,e)}executeFromRootNode(i){i(this.pathRoot.rowNode)}createPathItems(i){let e=i,t=0;for(;!this.mapToItems[e.id];){const s={rowNode:e,children:null};this.mapToItems[e.id]=s,t++,e=e.parent}return t}populateColumnsMap(i,e){if(!this.keepingColumns||!e)return;let t=i;for(;t;)this.nodeIdsToColumns[t.id]||(this.nodeIdsToColumns[t.id]={}),e.forEach(s=>this.nodeIdsToColumns[t.id][s.getId()]=!0),t=t.parent}linkPathItems(i,e){let t=i;for(let s=0;s<e;s++){const r=this.mapToItems[t.id],o=this.mapToItems[t.parent.id];o.children||(o.children=[]),o.children.push(r),t=t.parent}}addParentNode(i,e){if(!i||i.isRowPinned())return;const t=this.createPathItems(i);this.linkPathItems(i,t),this.populateColumnsMap(i,e)}canSkip(i){return this.active&&!this.mapToItems[i.id]}getValueColumnsForNode(i,e){if(!this.keepingColumns)return e;const t=this.nodeIdsToColumns[i.id];return e.filter(r=>t[r.getId()])}getNotValueColumnsForNode(i,e){if(!this.keepingColumns)return null;const t=this.nodeIdsToColumns[i.id];return e.filter(r=>!t[r.getId()])}},ch=class oa extends U{constructor(e){super(),this.state=oa.STATE_WAITING_TO_LOAD,this.version=0,this.id=e}getId(){return this.id}load(){this.state=oa.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=oa.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state=oa.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,s){this.successCommon(e,{rowData:t,rowCount:s})}isRequestMostRecentAndLive(e){const t=e===this.version,s=this.isAlive();return t&&s}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=oa.STATE_LOADED,this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:oa.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(t)}};ch.EVENT_LOAD_COMPLETE="loadComplete";ch.STATE_WAITING_TO_LOAD="needsLoading";ch.STATE_LOADING="loading";ch.STATE_LOADED="loaded";ch.STATE_FAILED="failed";var cL=ch,bn=class extends U{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const i=this.gridOptionsService.get("blockLoadDebounceMillis");i&&i>0&&(this.checkBlockToLoadDebounce=tt.debounce(this.performCheckBlocksToLoad.bind(this),i))}setBeans(i){this.logger=i.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const i=this.gridOptionsService.get("maxConcurrentDatasourceRequests");if(i==null)return 2;if(!(i<=0))return i}addBlock(i){this.blocks.push(i),i.addEventListener(cL.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(i){tt.removeFromArray(this.blocks,i)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:bn.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:bn.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}const i=this.getAvailableLoadingCount(),e=this.blocks.filter(t=>t.getState()===cL.STATE_WAITING_TO_LOAD).slice(0,i);this.registerLoads(e.length),e.forEach(t=>t.load()),this.printCacheStatus()}getBlockState(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const i={};return this.blocks.forEach(e=>{const{id:t,state:s}=e.getBlockStateJson();i[t]=s}),i}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(i){this.activeBlockLoadsCount+=i}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};bn.BLOCK_LOADED_EVENT="blockLoaded";bn.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";f([D("rowModel")],bn.prototype,"rowModel",2);f([K],bn.prototype,"postConstruct",1);f([oo(0,no("loggerFactory"))],bn.prototype,"setBeans",1);bn=f([ie("rowNodeBlockLoader")],bn);var Pv=class extends U{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gridOptionsService.get("pagination"),this.pageSizeFromGridOptions=this.gridOptionsService.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,y.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(i,e,t,s){const r=this.rowModel.ensureRowHeightsValid(i,e,this.getPageFirstRow(),this.getPageLastRow());return r&&this.calculatePages(),r}isPaginateChildRows(){return this.gridOptionsService.get("groupRemoveSingleChildren")||this.gridOptionsService.get("groupRemoveLowestSingleChildren")?!0:this.gridOptionsService.get("paginateChildRows")}onModelUpdated(i){this.calculatePages();const e={type:y.EVENT_PAGINATION_CHANGED,animate:i?i.animate:!1,newData:i?i.newData:!1,newPage:i?i.newPage:!1,newPageSize:i?i.newPageSize:!1,keepRenderedRows:i?i.keepRenderedRows:!1};this.eventService.dispatchEvent(e)}onPaginationGridOptionChanged(){this.active=this.gridOptionsService.get("pagination"),this.calculatePages();const i={type:y.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(i)}onPageSizeGridOptionChanged(){this.setPageSize(this.gridOptionsService.get("paginationPageSize"),"gridOptions")}goToPage(i){if(!this.active||this.currentPage===i||typeof this.currentPage!="number")return;this.currentPage=i;const e={type:y.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,newPageSize:!1};this.onModelUpdated(e)}getPixelOffset(){return this.pixelOffset}getRow(i){return this.rowModel.getRow(i)}getRowNode(i){return this.rowModel.getRowNode(i)}getRowIndexAtPixel(i){return this.rowModel.getRowIndexAtPixel(i)}getCurrentPageHeight(){return Ee(this.topRowBounds)||Ee(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const i=this.topRowBounds?this.topRowBounds.rowTop:0,e=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:i,pageLastPixel:e}}isRowPresent(i){return this.rowModel.isRowPresent(i)?i.rowIndex>=this.topDisplayedRowIndex&&i.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(i){return this.rowModel.forEachNode(i)}forEachNodeOnPage(i){const e=this.getPageFirstRow(),t=this.getPageLastRow();for(let s=e;s<=t;s++){const r=this.getRow(s);r&&i(r)}}getType(){return this.rowModel.getType()}getRowBounds(i){const e=this.rowModel.getRowBounds(i);return e.rowIndex=i,e}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(i){return Math.floor(i/this.pageSize)}goToPageWithIndex(i){if(!this.active)return;const e=this.getPageForIndex(i);this.goToPage(e)}isRowInPage(i){return this.active?this.getPageForIndex(i.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const i=this.rowModel.getRowCount(),e=Math.floor(i/this.pageSize);this.goToPage(e)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(i){this.currentPage=i}get pageSize(){return H(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:H(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:H(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:H(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const i=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==i&&this.onModelUpdated({type:y.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0})}setPageSize(i,e){const t=this.pageSize;switch(e){case"autoCalculated":this.pageSizeAutoCalculated=i;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=i,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=i;break;case"gridOptions":this.pageSizeFromGridOptions=i,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(t!==this.pageSize){const s={type:y.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0};this.onModelUpdated(s)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(H(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(i){this.pixelOffset!==i&&(this.pixelOffset=i,this.eventService.dispatchEvent({type:y.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const i=this.masterRowCount-1;this.totalPages=Math.floor(i/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const e=this.pageSize*this.currentPage;let t=this.pageSize*(this.currentPage+1)-1;if(t>i&&(t=i),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(e),t===i)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const s=this.rowModel.getTopLevelRowDisplayedIndex(t+1);this.bottomDisplayedRowIndex=s-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const i=this.masterRowCount-1;this.totalPages=Math.floor(i/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(this.masterRowCount,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};f([D("rowModel")],Pv.prototype,"rowModel",2);f([K],Pv.prototype,"postConstruct",1);Pv=f([ie("paginationProxy")],Pv);var iT=class extends U{processAllCellClasses(i,e,t,s){this.processClassRules(void 0,i.cellClassRules,e,t,s),this.processStaticCellClasses(i,e,t)}processClassRules(i,e,t,s,r){if(e==null&&i==null)return;const o={},n={},l=(a,u)=>{a.split(" ").forEach(d=>{d.trim()!=""&&u(d)})};if(e){const a=Object.keys(e);for(let u=0;u<a.length;u++){const d=a[u],c=e[d];let h;typeof c=="string"?h=this.expressionService.evaluate(c,t):typeof c=="function"&&(h=c(t)),l(d,p=>{h?o[p]=!0:n[p]=!0})}}i&&r&&Object.keys(i).forEach(a=>l(a,u=>{o[u]||(n[u]=!0)})),r&&Object.keys(n).forEach(r),Object.keys(o).forEach(s)}getStaticCellClasses(i,e){const{cellClass:t}=i;if(!t)return[];let s;return typeof t=="function"?s=t(e):s=t,typeof s=="string"&&(s=[s]),s||[]}processStaticCellClasses(i,e,t){this.getStaticCellClasses(i,e).forEach(r=>{t(r)})}};f([D("expressionService")],iT.prototype,"expressionService",2);iT=f([ie("stylingService")],iT);var f4=class extends AP{constructor(i){super(i,"ag-toggle-button")}setValue(i,e){return super.setValue(i,e),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},UP=class extends be{constructor(i,e){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=i,this.wrapperEl=e}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(i){let e="";this.params.valueFormatter&&(e=this.params.valueFormatter(i)),this.populateWithRenderer(i,e)||this.populateWithoutRenderer(i,e),this.value=i}highlightString(i){const{parsedValue:e}=this;if(this.params.cellRenderer||!H(e))return;let t=H(i);if(t){const s=e==null?void 0:e.toLocaleLowerCase().indexOf(i.toLocaleLowerCase());if(s>=0){const r=s+i.length,o=gi(e.slice(0,s),!0),n=gi(e.slice(s,r),!0),l=gi(e.slice(r));this.renderValueWithoutRenderer(`${o}<span class="ag-rich-select-row-text-highlight">${n}</span>${l}`)}else t=!1}t||this.renderValueWithoutRenderer(e)}updateHighlighted(i){var e;const t=this.getGui(),s=`ag-rich-select-row-${this.getCompId()}`;if((e=t.parentElement)==null||e.setAttribute("id",s),i){const r=this.getParentComponent().getAriaElement();iP(r,s),this.wrapperEl.setAttribute("data-active-option",s)}Pc(t.parentElement,i),this.addOrRemoveCssClass("ag-rich-select-row-selected",i)}populateWithoutRenderer(i,e){const t=this.gridOptionsService.getDocument(),s=this.getGui(),r=t.createElement("span");r.style.overflow="hidden",r.style.textOverflow="ellipsis";const o=gi(H(e)?e:i,!0);this.parsedValue=H(o)?o:null,s.appendChild(r),this.renderValueWithoutRenderer(o),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})}renderValueWithoutRenderer(i){const e=this.getGui().querySelector("span");e&&(e.innerHTML=H(i)?i:"&nbsp;")}populateWithRenderer(i,e){let t,s;return this.params.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.params,{value:i,valueFormatted:e,setTooltip:(r,o)=>{this.setTooltip({newTooltipText:r,shouldDisplayTooltip:o})}})),s&&(t=s.newAgStackInstance()),t&&yP(t,this.getGui()),t?(t.then(r=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(r)})}),!0):!1}onClick(){const i=this.getParentComponent(),e={type:y.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};i==null||i.dispatchEvent(e)}};f([D("userComponentFactory")],UP.prototype,"userComponentFactory",2);f([K],UP.prototype,"postConstruct",1);var Mf=class MV extends Lf{constructor(e){super(MV.getTemplate((e==null?void 0:e.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20,this.isHeightFromTheme=!0;const{cssIdentifier:t="default",ariaRole:s="listbox",listName:r}=e||{};this.cssIdentifier=t,this.ariaRole=s,this.listName=r}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,y.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const t=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),s=this.eContainer;Wt(s,this.ariaRole),So(s,t)}addResizeObserver(){const e=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),t=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(t)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=U0(t)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case _.UP:case _.DOWN:this.navigate(e.key===_.UP)&&e.preventDefault();break}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(vo(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(this.lastFocusedRowIndex==null)return!1;const t=this.lastFocusedRowIndex+(e?-1:1);return t<0||t>=this.model.getRowCount()?!1:(this.focusRow(t),!0)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.ensureIndexVisible(e),window.setTimeout(()=>{if(!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()},10)}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,s)=>e(t.rowComponent,s))}static getTemplate(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(e,t=!0){const s=this.model.getRowCount();if(typeof e!="number"||e<0||e>=s)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;const r=e*this.rowHeight,o=r+this.rowHeight,n=this.getGui(),l=n.scrollTop,a=n.offsetHeight,u=l+a,d=t?0:this.rowHeight,c=l>r+d,h=u<o-d;if(c)return n.scrollTop=r,!0;if(h){const p=o-a;return n.scrollTop=p,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height=`${t*this.rowHeight}px`,Yb(()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),s=t.scrollTop,r=s+t.offsetHeight,o=Math.floor(s/this.rowHeight),n=Math.floor(r/this.rowHeight);this.ensureRowsRendered(o,n,e)}ensureRowsRendered(e,t,s){this.renderedRows.forEach((r,o)=>{(o<e||o>t)&&o!==this.lastFocusedRowIndex&&this.removeRow(o)}),s&&this.refreshRows();for(let r=e;r<=t;r++)this.renderedRows.has(r)||r<this.model.getRowCount()&&this.insertRow(r)}insertRow(e){const t=this.model.getRow(e),s=document.createElement("div");s.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),Wt(s,this.ariaRole==="tree"?"treeitem":"option"),$S(s,this.model.getRowCount()),KS(s,e+1),s.setAttribute("tabindex","-1"),s.style.height=`${this.rowHeight}px`,s.style.top=`${this.rowHeight*e}px`;const r=this.componentCreator(t,s);r.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),s.appendChild(r.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",s):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",s):this.eContainer.appendChild(s),this.renderedRows.set(e,{rowComponent:r,eDiv:s,value:t})}removeRow(e){const t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((t,s)=>{var r,o;if(s>=e)this.removeRow(s);else{const n=this.model.getRow(s);(o=(r=this.model).areRowsEqual)!=null&&o.call(r,t.value,n)?this.componentUpdater(n,t.rowComponent):this.removeRow(s)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};f([D("resizeObserverService")],Mf.prototype,"resizeObserverService",2);f([D("animationFrameService")],Mf.prototype,"animationFrameService",2);f([q("eContainer")],Mf.prototype,"eContainer",2);f([K],Mf.prototype,"postConstruct",1);var xV=Mf,m4=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,_V=class extends Lu{constructor(i){var e,t;super(At(pe({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(e=i==null?void 0:i.template)!=null?e:m4,modalPicker:!1},i),{maxPickerHeight:(t=i==null?void 0:i.maxPickerHeight)!=null?t:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;const{cellRowHeight:s,value:r,valueList:o,searchStringCreator:n}=i||{};s!=null&&(this.cellRowHeight=s),r!==void 0&&(this.value=r),o!=null&&(this.values=o),n&&(this.searchStringCreator=n)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();const{allowTyping:i,placeholder:e}=this.config;i?(this.eInput.setAutoComplete(!1).setInputPlaceholder(e),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");const{searchDebounceDelay:t=300}=this.config;this.clearSearchString=ns(this.clearSearchString,t),this.renderSelectedValue(),i&&(this.eInput.onValueChange(s=>this.searchTextFromString(s)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){const i=this.gridOptionsService.getDocument(),e=this.localeService.getLocaleTextFunc(),t=i.createElement("div");t.classList.add("ag-loading-text"),t.innerText=e("loadingOoo","Loading..."),this.eLoading=t}createListComponent(){this.listComponent=this.createBean(new xV({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));const i=(l,a)=>{};this.listComponent.setComponentUpdater(i),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,y.EVENT_FIELD_PICKER_VALUE_SELECTED,l=>{this.onListValueSelected(l.value,l.fromEnterKey)});const{cellRowHeight:e}=this;e&&this.listComponent.setRowHeight(e);const t=this.listComponent.getGui(),s=this.listComponent.getAriaElement();this.addManagedListener(t,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(t,"mousedown",l=>l.preventDefault()),t.classList.add("ag-rich-select-list");const r=`ag-rich-select-list-${this.listComponent.getCompId()}`;s.setAttribute("id",r);const n=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);So(s,n),oP(this.eWrapper,s)}renderSelectedValue(){const{value:i,eDisplayField:e,config:t}=this,{allowTyping:s,initialInputValue:r}=this.config,o=this.config.valueFormatter?this.config.valueFormatter(i):i;if(s){this.eInput.setValue(r??o);return}let n;t.cellRenderer&&(n=this.userComponentFactory.getCellRendererDetails(this.config,{value:i,valueFormatted:o}));let l;if(n&&(l=n.newAgStackInstance()),l)ni(e),yP(l,e),l.then(a=>{this.addDestroyFunc(()=>this.getContext().destroyBean(a))});else{if(H(this.value))e.innerText=o,e.classList.remove("ag-display-as-placeholder");else{const{placeholder:a}=t;H(a)?(e.innerHTML=`${gi(a)}`,e.classList.add("ag-display-as-placeholder")):ni(e)}this.setTooltip({newTooltipText:o??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){const{currentList:i,value:e}=this;if(e==null||!i)return-1;for(let t=0;t<i.length;t++)if(i[t]===e)return t;return-1}highlightFilterMatch(){var i;(i=this.listComponent)==null||i.forEachRenderedRow((e,t)=>{e.highlightString(this.searchString)})}highlightSelectedValue(i){var e;i==null&&(i=this.getCurrentValueIndex()),this.highlightedItem=i,(e=this.listComponent)==null||e.forEachRenderedRow((t,s)=>{const r=i===-1?!1:this.highlightedItem===s;t.updateHighlighted(r)})}setRowHeight(i){i!==this.cellRowHeight&&(this.cellRowHeight=i),this.listComponent&&this.listComponent.setRowHeight(i)}createPickerComponent(){const{values:i}=this;return i&&this.setValueList({valueList:i}),this.listComponent}setSearchStringCreator(i){this.searchStringCreator=i}setValueList(i){const{valueList:e,refresh:t}=i;this.listComponent&&this.currentList!==e&&(this.currentList=e,this.listComponent.setModel({getRowCount:()=>e.length,getRow:s=>e[s],areRowsEqual:(s,r)=>s===r}),t&&(this.values?this.listComponent.refresh(!0):(this.values=e,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var i,e;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}(i=this.eLoading)!=null&&i.offsetParent&&((e=this.eLoading.parentElement)==null||e.removeChild(this.eLoading));const t=this.getCurrentValueIndex();t!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(t),this.listComponent.refresh(!0),this.highlightSelectedValue(t)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;const i=this.eInput.getFocusableElement();i.focus(),i.select()}onWrapperFocusOut(i){this.eWrapper.contains(i.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(i){let{key:e}=i;if(e===_.BACKSPACE)this.searchString=this.searchString.slice(0,-1),e="";else if(!QS(i))return;i.preventDefault(),this.searchTextFromCharacter(e)}searchTextFromCharacter(i){this.searchString+=i,this.runSearch(),this.clearSearchString()}searchTextFromString(i){i==null&&(i=""),this.searchString=i,this.runSearch()}buildSearchStrings(i){const{valueFormatter:e=s=>s}=this.config;let t;return typeof i[0]=="number"||typeof i[0]=="string"?t=i.map(s=>e(s)):typeof i[0]=="object"&&this.searchStringCreator&&(t=this.searchStringCreator(i)),t}getSuggestionsAndFilteredValues(i,e){let t=[],s=[];if(!i.length)return{suggestions:t,filteredValues:s};const{searchType:r="fuzzy",filterList:o}=this.config;if(r==="fuzzy"){const n=wf(this.searchString,e,!0);t=n.values;const l=n.indices;if(o&&l.length)for(let a=0;a<l.length;a++)s.push(this.values[l[a]])}else t=e.filter((n,l)=>{const a=n.toLocaleLowerCase(),u=this.searchString.toLocaleLowerCase(),d=r==="match"?a.startsWith(u):a.indexOf(u)!==-1;return o&&d&&s.push(this.values[l]),d});return{suggestions:t,filteredValues:s}}filterListModel(i){const{filterList:e}=this.config;e&&(this.setValueList({valueList:i,refresh:!0}),this.alignPickerToComponent())}runSearch(){var i,e;const{values:t}=this,s=this.buildSearchStrings(t);if(!s){this.highlightSelectedValue(-1);return}const{suggestions:r,filteredValues:o}=this.getSuggestionsAndFilteredValues(this.searchString,s),{filterList:n,highlightMatch:l,searchType:a="fuzzy"}=this.config,u=o.length,d=!!(n&&this.searchString!=="");if(this.filterListModel(d?o:t),r.length){const c=d?0:s.indexOf(r[0]);this.selectListItem(c)}else if(this.highlightSelectedValue(-1),!d||u)(i=this.listComponent)==null||i.ensureIndexVisible(0);else if(d){this.getAriaElement().removeAttribute("data-active-option");const c=(e=this.listComponent)==null?void 0:e.getAriaElement();c&&iP(c,null)}l&&a!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var i;const e=(i=this.listComponent)==null?void 0:i.getGui(),t=this.currentList?this.currentList.length===0:!1;e==null||e.classList.toggle("ag-hidden",t)}clearSearchString(){this.searchString=""}selectListItem(i,e){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||i<0||i>=this.currentList.length)return;this.listComponent.ensureIndexVisible(i,!e)&&!e&&this.listComponent.refresh(!0),this.highlightSelectedValue(i)}setValue(i,e,t){const s=this.currentList?this.currentList.indexOf(i):-1;return s===-1?this:(this.value=i,t||this.selectListItem(s),this.renderSelectedValue(),super.setValue(i,e))}createRowComponent(i){const e=new UP(this.config,this.eWrapper);e.setParentComponent(this.listComponent),this.getContext().createBean(e),e.setState(i);const{highlightMatch:t,searchType:s="fuzzy"}=this.config;return t&&s!=="fuzzy"&&e.highlightString(this.searchString),e}getRowForMouseEvent(i){const{listComponent:e}=this;if(!e)return-1;const s=(e==null?void 0:e.getGui()).getBoundingClientRect(),r=e.getScrollTop(),o=i.clientY-s.top+r;return Math.floor(o/e.getRowHeight())}onPickerMouseMove(i){if(!this.listComponent)return;const e=this.getRowForMouseEvent(i);e!==-1&&e!=this.lastRowHovered&&(this.lastRowHovered=e,this.selectListItem(e,!0))}onNavigationKeyDown(i,e){i.preventDefault();const t=e===_.DOWN;if(!this.isPickerDisplayed&&t){this.showPicker();return}const s=this.highlightedItem,o=s===-1?0:s+(t?1:-1);this.selectListItem(o)}onEnterKeyDown(i){this.isPickerDisplayed&&(i.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(i,e){this.setValue(i,!1,!0),this.dispatchPickerEvent(i,e),this.hidePicker()}dispatchPickerEvent(i,e){const t={type:y.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:e,value:i};this.dispatchEvent(t)}getFocusableElement(){const{allowTyping:i}=this.config;return i?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(i){const e=i.key,{allowTyping:t}=this.config;switch(e){case _.LEFT:case _.RIGHT:case _.PAGE_HOME:case _.PAGE_END:t||i.preventDefault();break;case _.PAGE_UP:case _.PAGE_DOWN:i.preventDefault();break;case _.DOWN:case _.UP:this.onNavigationKeyDown(i,e);break;case _.ESCAPE:this.isPickerDisplayed&&(hr(this.listComponent.getGui())&&(i.preventDefault(),vo(i)),this.hidePicker());break;case _.ENTER:this.onEnterKeyDown(i);break;case _.TAB:this.onTabKeyDown();break;default:t||this.buildSearchStringFromKeyboardEvent(i)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};f([D("userComponentFactory")],_V.prototype,"userComponentFactory",2);f([q("eInput")],_V.prototype,"eInput",2);var xf=class NV extends bP{constructor(e){super(e,NV.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");const{minValue:e,maxValue:t,textFieldWidth:s,step:r,value:o,onValueChange:n}=this.config;e!=null&&this.setMinValue(e),t!=null&&this.setMaxValue(t),s!=null&&this.setTextFieldWidth(s),r!=null&&this.setStep(r),o!=null&&this.setValue(o),n!=null&&this.onValueChange(n)}onValueChange(e){const t=y.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,t,()=>{const s=parseFloat(this.eText.getValue());this.eSlider.setValue(s.toString(),!0),e(s||0)}),this.addManagedListener(this.eSlider,t,()=>{const s=this.eSlider.getValue();this.eText.setValue(s,!0),e(parseFloat(s))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,t){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),t||this.dispatchEvent({type:y.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}};xf.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;f([q("eLabel")],xf.prototype,"eLabel",2);f([q("eSlider")],xf.prototype,"eSlider",2);f([q("eText")],xf.prototype,"eText",2);f([K],xf.prototype,"init",1);var Vu=class ad extends be{constructor(e={}){super(ad.getTemplate(e)),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;const{enabled:t,items:s,suppressEnabledCheckbox:r,expanded:o,suppressToggleExpandOnEnableChange:n,useToggle:l}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=t??!0,this.items=s||[],this.useToggle=l??!1,this.alignItems=e.alignItems||"center",this.expanded=o??!0,r!=null&&(this.suppressEnabledCheckbox=r),n!=null&&(this.suppressToggleExpandOnEnableChange=n)}static getTemplate(e){const t=e.cssIdentifier||"default",s=e.direction||"vertical";return`
            <div class="ag-group ag-${t}-group" role="presentation">
                <div ref="eToolbar" class="ag-group-toolbar ag-${t}-group-toolbar">
                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
                </div>
                <div ref="eContainer" class="ag-group-container ag-group-container-${s} ag-${t}-group-container"></div>
            </div>
        `}postConstruct(){if(this.setupTitleBar(),this.items.length){const r=this.items;this.items=[],this.addItems(r)}const e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:t,suppressOpenCloseIcons:s}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(s??!1),this.refreshChildDisplay(),ze(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(r=>{this.setEnabled(r,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(r)}),t!=null&&this.onEnableChange(t)}refreshChildDisplay(){var e;ze(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),(e=this.eTitleBar)==null||e.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;const t=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(t),this}toggleGroupExpand(e){var t;let s=!1;if((t=this.eTitleBar)!=null&&t.isSuppressCollapse()&&!this.useToggle)e=!0,s=!0;else if(e=e??!this.expanded,this.expanded===e)return this;return this.expanded=e,this.refreshChildDisplay(),ze(this.eContainer,e),s||this.dispatchEvent({type:e?ad.EVENT_EXPANDED:ad.EVENT_COLLAPSED}),this}addItems(e){e.forEach(t=>this.addItem(t))}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}insertItem(e,t){const s=this.eContainer,r=e instanceof be?e.getGui():e;r.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),t?(s.insertAdjacentElement("afterbegin",r),this.items.unshift(r)):(s.appendChild(r),this.items.push(r))}hideItem(e,t){const s=this.items[t];ze(s,!e)}getItemIndex(e){const t=e instanceof be?e.getGui():e;return this.items.indexOf(t)}setTitle(e){var t;return(t=this.eTitleBar)==null||t.setTitle(e),this}addCssClassToTitleBar(e){var t;(t=this.eTitleBar)==null||t.addCssClass(e)}dispatchEnableChangeEvent(e){const t={type:ad.EVENT_ENABLE_CHANGE,enabled:e};this.dispatchEvent(t)}setEnabled(e,t,s){var r;return this.enabled=e,this.refreshDisabledStyles(),s||this.toggleGroupExpand(e),t||(this.cbGroupEnabled.setValue(e),(r=this.eToggle)==null||r.setValue(e)),this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListener(this,ad.EVENT_ENABLE_CHANGE,t=>e(t.enabled)),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){var t;return(t=this.eTitleBar)==null||t.hideOpenCloseIcons(e),this}refreshDisabledStyles(){var e;const t=!this.enabled;this.eContainer.classList.toggle("ag-disabled",t),(e=this.eTitleBar)==null||e.refreshDisabledStyles(this.suppressEnabledCheckbox&&t),this.eContainer.classList.toggle("ag-disabled-group-container",t)}setupTitleBar(){const e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){const e=this.createManagedBean(new hL(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListener(e,hL.EVENT_EXPAND_CHANGED,t=>this.toggleGroupExpand(t.expanded)),e}createToggleTitleBar(){var e;const t=this.createManagedBean(new f4({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:s=>{this.setEnabled(s,!0),this.dispatchEnableChangeEvent(s)}}));return t.addCssClass("ag-group-title-bar"),t.addCssClass(`ag-${(e=this.params.cssIdentifier)!=null?e:"default"}-group-title-bar ag-unselectable`),this.eToggle=t,this.toggleGroupExpand(this.enabled),t}};Vu.EVENT_EXPANDED="expanded";Vu.EVENT_COLLAPSED="collapsed";Vu.EVENT_ENABLE_CHANGE="enableChange";f([q("eToolbar")],Vu.prototype,"eToolbar",2);f([q("cbGroupEnabled")],Vu.prototype,"cbGroupEnabled",2);f([q("eContainer")],Vu.prototype,"eContainer",2);f([K],Vu.prototype,"postConstruct",1);var hh=class sT extends be{constructor(e={}){super(sT.getTemplate(e)),this.suppressOpenCloseIcons=!1;const{title:t,suppressOpenCloseIcons:s}=e;this.title=t,s!=null&&(this.suppressOpenCloseIcons=s)}static getTemplate(e){var t;const s=(t=e.cssIdentifier)!=null?t:"default";return`
            <div class="ag-group-title-bar ag-${s}-group-title-bar ag-unselectable" role="button">
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${s}-group-title"></span>
            </div>
        `}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(yr("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(yr("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.getGui(),"click",()=>this.dispatchExpandChanged()),this.addManagedListener(this.getGui(),"keydown",e=>{switch(e.key){case _.ENTER:case _.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case _.RIGHT:case _.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===_.RIGHT);break}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||Rn(this.getGui(),e)}refreshOpenCloseIcons(e){const t=!this.suppressOpenCloseIcons;ze(this.eGroupOpenedIcon,t&&e),ze(this.eGroupClosedIcon,t&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){const t={type:sT.EVENT_EXPAND_CHANGED,expanded:e};this.dispatchEvent(t)}setTitle(e){return this.eTitle.innerText=e||"",ze(this.getGui(),e!=null),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){const t=this.getGui();e?(t.classList.add("ag-disabled-group-title-bar"),t.removeAttribute("tabindex")):(t.classList.remove("ag-disabled-group-title-bar"),typeof this.title=="string"?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex"))}};hh.EVENT_EXPAND_CHANGED="expandedChanged";f([q("eGroupOpenedIcon")],hh.prototype,"eGroupOpenedIcon",2);f([q("eGroupClosedIcon")],hh.prototype,"eGroupClosedIcon",2);f([q("eTitle")],hh.prototype,"eTitle",2);f([K],hh.prototype,"postConstruct",1);var hL=hh,zP=class extends Lf{constructor(i=0,e){super('<div class="ag-menu-list" role="tree"></div>'),this.level=i,this.menuItems=[],this.params=e??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:i=>this.onTabKeyDown(i),handleKeyDown:i=>this.handleKeyDown(i),onFocusIn:i=>this.handleFocusIn(i),onFocusOut:i=>this.handleFocusOut(i)})}onTabKeyDown(i){const e=this.getParentComponent(),t=e&&e.getGui();t&&t.classList.contains("ag-focus-managed")||i.preventDefault(),i.shiftKey&&this.closeIfIsChild(i)}handleKeyDown(i){switch(i.key){case _.UP:case _.RIGHT:case _.DOWN:case _.LEFT:i.preventDefault(),this.handleNavKey(i.key);break;case _.ESCAPE:this.closeIfIsChild()&&vo(i);break}}handleFocusIn(i){var e,t;const s=i.relatedTarget;!this.tabGuardCtrl.isTabGuard(s)&&(this.getGui().contains(s)||(t=(e=this.activeMenuItem)==null?void 0:e.getSubMenuGui())!=null&&t.contains(s))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(i){var e;const t=i.relatedTarget;!this.activeMenuItem||this.getGui().contains(t)||(e=this.activeMenuItem.getSubMenuGui())!=null&&e.contains(t)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(i){i!=null&&Pr.all(i.map(e=>e==="separator"?Pr.resolve({eGui:this.createSeparator()}):typeof e=="string"?(console.warn(`AG Grid: unrecognised menu item ${e}`),Pr.resolve({eGui:null})):this.addItem(e))).then(e=>{e.forEach(t=>{t!=null&&t.eGui&&(this.appendChild(t.eGui),t.comp&&this.menuItems.push(t.comp))})})}addItem(i){const e=this.createManagedBean(new gm);return e.init({menuItemDef:i,isAnotherSubMenuOpen:()=>this.menuItems.some(t=>t.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(e.setParentComponent(this),this.addManagedListener(e,gm.EVENT_CLOSE_MENU,t=>{this.dispatchEvent(t)}),this.addManagedListener(e,gm.EVENT_MENU_ITEM_ACTIVATED,t=>{this.activeMenuItem&&this.activeMenuItem!==t.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=t.menuItem}),{comp:e,eGui:e.getGui()}))}activateFirstItem(){const i=this.menuItems.filter(e=>!e.isDisabled())[0];i&&i.activate()}createSeparator(){return Is(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(i){switch(i){case _.UP:case _.DOWN:const t=this.findNextItem(i===_.UP);t&&t!==this.activeMenuItem&&t.activate();return}const e=this.gridOptionsService.get("enableRtl")?_.RIGHT:_.LEFT;i===e?this.closeIfIsChild():this.openChild()}closeIfIsChild(i){const e=this.getParentComponent();return e&&e instanceof gm?(i&&i.preventDefault(),e.closeSubMenu(),e.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(i){const e=this.menuItems.filter(r=>!r.isDisabled());if(!e.length)return;if(!this.activeMenuItem)return i?Ze(e):e[0];i&&e.reverse();let t,s=!1;for(let r=0;r<e.length;r++){const o=e[r];if(!s){o===this.activeMenuItem&&(s=!0);continue}t=o;break}return s&&!t?e[0]:t||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};f([D("focusService")],zP.prototype,"focusService",2);f([K],zP.prototype,"postConstruct",1);var GV=class extends Lf{constructor(i){super(),this.wrappedComponent=i,this.setTemplateFromElement(i.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:i=>this.onTabKeyDown(i),handleKeyDown:i=>this.handleKeyDown(i)})}handleKeyDown(i){i.key===_.ESCAPE&&this.closePanel()}onTabKeyDown(i){i.defaultPrevented||(this.closePanel(),i.preventDefault())}closePanel(){const i=this.parentComponent;i.closeSubMenu(),setTimeout(()=>i.getGui().focus(),0)}};f([K],GV.prototype,"postConstruct",1);var Hu=class ud extends U{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var t,s;const{menuItemDef:r,isAnotherSubMenuOpen:o,level:n,childComponent:l,contextParams:a}=e;return this.params=e.menuItemDef,this.level=n,this.isAnotherSubMenuOpen=o,this.childComponent=l,this.contextParams=a,this.cssClassPrefix=(s=(t=this.params.menuItemParams)==null?void 0:t.cssClassPrefix)!=null?s:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,At(pe({},r),{level:n,isAnotherSubMenuOpen:o,openSubMenu:d=>this.openSubMenu(d),closeSubMenu:()=>this.closeSubMenu(),closeMenu:d=>this.closeMenu(d),updateTooltip:(d,c)=>this.refreshTooltip(d,c),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(d=>{var c;this.menuItemComp=d;const h=(c=d.configureDefaults)==null?void 0:c.call(d);h&&this.configureDefaults(h===!0?void 0:h)})}addListeners(e,t){t!=null&&t.suppressClick||this.addManagedListener(e,"click",s=>this.onItemSelected(s)),t!=null&&t.suppressKeyboardSelect||this.addManagedListener(e,"keydown",s=>{(s.key===_.ENTER||s.key===_.SPACE)&&(s.preventDefault(),this.onItemSelected(s))}),t!=null&&t.suppressMouseDown||this.addManagedListener(e,"mousedown",s=>{s.stopPropagation(),s.preventDefault()}),t!=null&&t.suppressMouseOver||(this.addManagedListener(e,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){var t,s;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const r=Is('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=r;let o,n=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const d=this.createBean(new GV(this.childComponent));d.setParentComponent(this);const c=d.getGui(),h="mouseenter",p=()=>this.cancelDeactivate();c.addEventListener(h,p),o=()=>c.removeEventListener(h,p),r.appendChild(c),this.childComponent.afterGuiAttached&&(n=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const d=this.createBean(new zP(this.level+1,this.contextParams));d.setParentComponent(this),d.addMenuItems(this.params.subMenu),r.appendChild(d.getGui()),this.addManagedListener(d,ud.EVENT_CLOSE_MENU,c=>this.dispatchEvent(c)),d.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),o=()=>this.destroyBean(d),e&&(n=()=>{d.activateFirstItem(),this.subMenuIsOpening=!1})}const l=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:r}),a=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:!0,eChild:r,positionCallback:l,anchorToElement:this.eGui,ariaLabel:a("ariaLabelSubMenu","SubMenu"),afterGuiAttached:n});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var d,c;u&&u.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),o(),(c=(d=this.menuItemComp).setExpanded)==null||c.call(d,!1),this.eSubMenuGui=void 0},(s=(t=this.menuItemComp).setExpanded)==null||s.call(t,!0)}setAriaExpanded(e){this.suppressAria||Rn(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var t,s;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(s=(t=this.menuItemComp).setActive)==null||s.call(t,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,t;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(t=(e=this.menuItemComp).setActive)==null||t.call(e,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var t,s;(s=(t=this.menuItemComp).select)==null||s.call(t),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gridOptionsService.addGridCommonParams(pe({},this.contextParams)))):this.openSubMenu(e&&e.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){const t={type:ud.EVENT_CLOSE_MENU,event:e};this.dispatchEvent(t)}onItemActivated(){const e={type:ud.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),ud.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),ud.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var t,s,r;if(this.tooltip=this.params.tooltip,!this.menuItemComp){setTimeout(()=>this.configureDefaults(e));return}let o=this.menuItemComp.getGui();const n=(s=(t=this.menuItemComp).getRootElement)==null?void 0:s.call(t);n&&(e!=null&&e.suppressRootStyles||o.classList.add("ag-menu-option-custom"),o=n),this.eGui=o,this.suppressRootStyles=!!(e!=null&&e.suppressRootStyles),this.suppressRootStyles||(o.classList.add(this.cssClassPrefix),(r=this.params.cssClasses)==null||r.forEach(l=>o.classList.add(l)),this.params.disabled&&o.classList.add(`${this.cssClassPrefix}-disabled`)),e!=null&&e.suppressTooltip||this.refreshTooltip(),this.suppressAria=!!(e!=null&&e.suppressAria),this.suppressAria||(Wt(o,"treeitem"),j0(o,this.level+1),this.params.disabled&&tP(o,!0)),e!=null&&e.suppressTabIndex||o.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(o,e),this.suppressFocus=!!(e!=null&&e.suppressFocus)}refreshTooltip(e,t){this.tooltip=e,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),!(!e||!this.menuItemComp)&&(this.tooltipFeature=this.createBean(new Nn({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};Hu.EVENT_CLOSE_MENU="closeMenu";Hu.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";Hu.ACTIVATION_DELAY=80;f([D("popupService")],Hu.prototype,"popupService",2);f([D("userComponentFactory")],Hu.prototype,"userComponentFactory",2);f([D("beans")],Hu.prototype,"beans",2);var gm=Hu,Bu=class rT extends be{constructor(e){super(rT.getTemplate(e)),this.config=e,this.closable=!0}static getTemplate(e){const t=e.cssIdentifier||"default";return`<div class="ag-panel ag-${t}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${t}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${t}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${t}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${t}-panel-content-wrapper"></div>
        </div>`}postConstruct(){const{component:e,closable:t,hideTitleBar:s,title:r,minWidth:o=250,width:n,minHeight:l=250,height:a,centered:u,popup:d,x:c,y:h}=this.config;this.positionableFeature=new sh(this.getGui(),{minWidth:o,width:n,minHeight:l,height:a,centered:u,x:c,y:h,popup:d,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const p=this.getGui();e&&this.setBodyComponent(e),s?ze(this.eTitleBar,!1):(r&&this.setTitle(r),this.setClosable(t??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",m=>{const S=this.gridOptionsService.getDocument();if(p.contains(m.relatedTarget)||p.contains(S.activeElement)||this.eTitleBarButtons.contains(m.target)){m.preventDefault();return}const E=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");E&&E.focus()}),!(d&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const t=this.closeButtonComp=new be(rT.CLOSE_BTN_TEMPLATE);this.getContext().createBean(t);const s=t.getGui(),r=Nt("close",this.gridOptionsService);r.classList.add("ag-panel-title-bar-button-icon"),s.appendChild(r),this.addTitleBarButton(t),t.addManagedListener(s,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const t=this.closeButtonComp.getGui();t.parentElement.removeChild(t),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const s=this.eTitleBarButtons,r=s.children,o=r.length;t==null&&(t=o),t=Math.max(0,Math.min(t,o)),e.addCssClass("ag-panel-title-bar-button");const n=e.getGui();t===0?s.insertAdjacentElement("afterbegin",n):t===o?s.insertAdjacentElement("beforeend",n):r[t-1].insertAdjacentElement("afterend",n),e.setParentComponent(this)}getBodyHeight(){return vf(this.eContentWrapper)}getBodyWidth(){return Ou(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&hr(e)&&this.close(),super.destroy()}};Bu.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';f([q("eContentWrapper")],Bu.prototype,"eContentWrapper",2);f([q("eTitleBar")],Bu.prototype,"eTitleBar",2);f([q("eTitleBarButtons")],Bu.prototype,"eTitleBarButtons",2);f([q("eTitle")],Bu.prototype,"eTitle",2);f([K],Bu.prototype,"postConstruct",1);var C4=Bu,v4=class extends C4{constructor(i){super(At(pe({},i),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const i=this.getGui(),{movable:e,resizable:t,maximizable:s}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(i,"focusin",r=>{this.popupService.bringPopupToFront(i)}),e&&this.setMovable(e),s&&this.setMaximizable(s),t&&this.setResizable(t)}renderComponent(){const i=this.getGui(),{alwaysOnTop:e,modal:t,title:s,afterGuiAttached:r}=this.config,o=this.localeService.getLocaleTextFunc(),n=this.popupService.addPopup({modal:t,eChild:i,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:e,ariaLabel:s||o("ariaLabelDialog","Dialog"),afterGuiAttached:r});n&&(this.close=n.hideFunc)}onClosed(i){var e,t;this.destroy(),(t=(e=this.config).closedCallback)==null||t.call(e,i)}toggleMaximize(){const i=this.positionableFeature.getPosition();if(this.isMaximized){const{x:e,y:t,width:s,height:r}=this.lastPosition;this.setWidth(s),this.setHeight(r),this.positionableFeature.offsetElement(e,t)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=i.x,this.lastPosition.y=i.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){ze(this.maximizeIcon,!this.isMaximized),ze(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(i=>i()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(i){this.positionableFeature.setResizable(i)}setMovable(i){this.positionableFeature.setMovable(i,this.eTitleBar)}setMaximizable(i){if(!i){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}const e=this.eTitleBar;if(!e||i===this.isMaximizable)return;const t=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),t.addManagedListener(t.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(t,0),this.maximizeListeners.push(this.addManagedListener(e,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){const i=this.maximizeButtonComp=this.createBean(new be('<div class="ag-dialog-button"></span>')),e=i.getGui();return this.maximizeIcon=Nt("maximize",this.gridOptionsService),e.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Nt("minimize",this.gridOptionsService),e.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),i}};f([D("popupService")],v4.prototype,"popupService",2);var S4=0,xl=class extends U{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(i=>{this.gridCtrl=i.gridCtrl}),this.addManagedListener(this.eventService,y.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){const i=this.gridOptionsService.get("popupParent");return i||this.gridCtrl.getGui()}positionPopupForMenu(i){const{eventSource:e,ePopup:t}=i,s=this.getPopupIndex(t);if(s!==-1){const p=this.popupList[s];p.alignedToElement=e}const r=e.getBoundingClientRect(),o=this.getParentRect(),n=this.keepXYWithinBounds(t,r.top-o.top,0),l=t.clientWidth>0?t.clientWidth:200;t.style.minWidth=`${l}px`;const u=o.right-o.left-l;let d;this.gridOptionsService.get("enableRtl")?(d=h(),d<0&&(d=c(),this.setAlignedStyles(t,"left")),d>u&&(d=0,this.setAlignedStyles(t,"right"))):(d=c(),d>u&&(d=h(),this.setAlignedStyles(t,"right")),d<0&&(d=0,this.setAlignedStyles(t,"left"))),t.style.left=`${d}px`,t.style.top=`${n}px`;function c(){return r.right-o.left-2}function h(){return r.left-o.left-l}}positionPopupUnderMouseEvent(i){const{ePopup:e,nudgeX:t,nudgeY:s,skipObserver:r}=i;this.positionPopup({ePopup:e,nudgeX:t,nudgeY:s,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(i.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(i.type,i.ePopup,null,i.mouseEvent,i.column,i.rowNode)})}calculatePointerAlign(i){const e=this.getParentRect();return{x:i.clientX-e.left,y:i.clientY-e.top}}positionPopupByComponent(i){const{ePopup:e,nudgeX:t,nudgeY:s,keepWithinBounds:r,eventSource:o,alignSide:n="left",position:l="over",column:a,rowNode:u,type:d}=i,c=o.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(e);if(p!==-1){const S=this.popupList[p];S.alignedToElement=o}const m=()=>{let S=c.left-h.left;n==="right"&&(S-=e.offsetWidth-c.width);let E;return l==="over"?(E=c.top-h.top,this.setAlignedStyles(e,"over")):(this.setAlignedStyles(e,"under"),this.shouldRenderUnderOrAbove(e,c,h,i.nudgeY||0)==="under"?E=c.top-h.top+c.height:E=c.top-e.offsetHeight-(s||0)*2-h.top),{x:S,y:E}};this.positionPopup({ePopup:e,nudgeX:t,nudgeY:s,keepWithinBounds:r,updatePosition:m,postProcessCallback:()=>this.callPostProcessPopup(d,e,o,null,a,u)})}shouldRenderUnderOrAbove(i,e,t,s){const r=t.bottom-e.bottom,o=e.top-t.top,n=i.offsetHeight+s;return r>n?"under":o>n||o>r?"above":"under"}setAlignedStyles(i,e){const t=this.getPopupIndex(i);if(t===-1)return;const s=this.popupList[t],{alignedToElement:r}=s;!r||(["right","left","over","above","under"].forEach(n=>{r.classList.remove(`ag-has-popup-positioned-${n}`),i.classList.remove(`ag-popup-positioned-${n}`)}),!e)||(r.classList.add(`ag-has-popup-positioned-${e}`),i.classList.add(`ag-popup-positioned-${e}`))}callPostProcessPopup(i,e,t,s,r,o){const n=this.gridOptionsService.getCallback("postProcessPopup");n&&n({column:r,rowNode:o,ePopup:e,type:i,eventSource:t,mouseEvent:s})}positionPopup(i){const{ePopup:e,keepWithinBounds:t,nudgeX:s,nudgeY:r,skipObserver:o,updatePosition:n}=i,l={width:0,height:0},a=(u=!1)=>{let{x:d,y:c}=n();u&&e.clientWidth===l.width&&e.clientHeight===l.height||(l.width=e.clientWidth,l.height=e.clientHeight,s&&(d+=s),r&&(c+=r),t&&(d=this.keepXYWithinBounds(e,d,1),c=this.keepXYWithinBounds(e,c,0)),e.style.left=`${d}px`,e.style.top=`${c}px`,i.postProcessCallback&&i.postProcessCallback())};if(a(),!o){const u=this.resizeObserverService.observeResize(e,()=>a(!0));setTimeout(()=>u(),xl.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(i=>i.element)}getPopupList(){return this.popupList}getParentRect(){const i=this.gridOptionsService.getDocument();let e=this.getPopupParent();return e===i.body?e=i.documentElement:getComputedStyle(e).position==="static"&&(e=e.offsetParent),fP(e)}keepXYWithinBounds(i,e,t){const s=t===0,r=s?"clientHeight":"clientWidth",o=s?"top":"left",n=s?"offsetHeight":"offsetWidth",l=s?"scrollTop":"scrollLeft",a=this.gridOptionsService.getDocument(),u=a.documentElement,d=this.getPopupParent(),c=d.getBoundingClientRect(),h=a.documentElement.getBoundingClientRect(),p=d===a.body,m=i[n];let E=p?(s?gP:cg)(u)+u[l]:d[r];p&&(E-=Math.abs(h[o]-c[o]));const C=E-m;return Math.min(Math.max(e,0),Math.abs(C))}addPopup(i){const e=this.gridOptionsService.getDocument(),{eChild:t,ariaLabel:s,alwaysOnTop:r,positionCallback:o,anchorToElement:n}=i;if(!e)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const l=this.getPopupIndex(t);if(l!==-1)return{hideFunc:this.popupList[l].hideFunc};this.initialisePopupPosition(t);const a=this.createPopupWrapper(t,s,!!r),u=this.addEventListenersToPopup(At(pe({},i),{wrapperEl:a}));return o&&o(),this.addPopupToPopupList(t,a,u,n),{hideFunc:u}}initialisePopupPosition(i){const t=this.getPopupParent().getBoundingClientRect();H(i.style.top)||(i.style.top=`${t.top*-1}px`),H(i.style.left)||(i.style.left=`${t.left*-1}px`)}createPopupWrapper(i,e,t){const s=this.getPopupParent(),r=document.createElement("div"),{allThemes:o}=this.environment.getTheme();return o.length&&r.classList.add(...o),r.classList.add("ag-popup"),i.classList.add(this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),i.hasAttribute("role")||Wt(i,"dialog"),So(i,e),r.appendChild(i),s.appendChild(r),t?this.setAlwaysOnTop(i,!0):this.bringPopupToFront(i),r}handleThemeChange(){const{allThemes:i}=this.environment.getTheme();for(const e of this.popupList){for(const t of Array.from(e.wrapper.classList))t.startsWith("ag-theme-")&&e.wrapper.classList.remove(t);i.length&&e.wrapper.classList.add(...i)}}addEventListenersToPopup(i){const e=this.gridOptionsService.getDocument(),t=this.getPopupParent(),{wrapperEl:s,eChild:r,click:o,closedCallback:n,afterGuiAttached:l,closeOnEsc:a,modal:u}=i;let d=!1;const c=S=>{if(!s.contains(e.activeElement))return;S.key===_.ESCAPE&&!ho(S)&&m({keyboardEvent:S})},h=S=>m({mouseEvent:S}),p=S=>m({touchEvent:S}),m=(S={})=>{const{mouseEvent:E,touchEvent:C,keyboardEvent:v}=S;this.isEventFromCurrentPopup({mouseEvent:E,touchEvent:C},r)||d||(d=!0,t.removeChild(s),e.removeEventListener("keydown",c),e.removeEventListener("mousedown",h),e.removeEventListener("touchstart",p),e.removeEventListener("contextmenu",h),this.eventService.removeEventListener(y.EVENT_DRAG_STARTED,h),n&&n(E||C||v),this.removePopupFromPopupList(r))};return l&&l({hidePopup:m}),window.setTimeout(()=>{a&&e.addEventListener("keydown",c),u&&(e.addEventListener("mousedown",h),this.eventService.addEventListener(y.EVENT_DRAG_STARTED,h),e.addEventListener("touchstart",p),e.addEventListener("contextmenu",h))},0),m}addPopupToPopupList(i,e,t,s){this.popupList.push({element:i,wrapper:e,hideFunc:t,instanceId:S4++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(i,s)}getPopupIndex(i){return this.popupList.findIndex(e=>e.element===i)}setPopupPositionRelatedToElement(i,e){const t=this.getPopupIndex(i);if(t===-1)return;const s=this.popupList[t];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(o=>o&&o()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!e)return;const r=this.keepPopupPositionedRelativeTo({element:e,ePopup:i,hidePopup:s.hideFunc});return s.stopAnchoringPromise=r,s.isAnchored=!0,r}removePopupFromPopupList(i){this.setAlignedStyles(i,null),this.setPopupPositionRelatedToElement(i,null),this.popupList=this.popupList.filter(e=>e.element!==i)}keepPopupPositionedRelativeTo(i){const e=this.getPopupParent(),t=e.getBoundingClientRect(),{element:s,ePopup:r}=i,o=s.getBoundingClientRect(),n=t.top-o.top,l=t.left-o.left;let a=n,u=l;const d=r.style.top,c=parseInt(d.substring(0,d.length-1),10),h=r.style.left,p=parseInt(h.substring(0,h.length-1),10);return new Pr(m=>{this.getFrameworkOverrides().setInterval(()=>{const S=e.getBoundingClientRect(),E=s.getBoundingClientRect();if(E.top==0&&E.left==0&&E.height==0&&E.width==0){i.hidePopup();return}const v=S.top-E.top;if(v!=a){const b=this.keepXYWithinBounds(r,c+n-v,0);r.style.top=`${b}px`}a=v;const R=S.left-E.left;if(R!=u){const b=this.keepXYWithinBounds(r,p+l-R,1);r.style.left=`${b}px`}u=R},200).then(S=>{m(()=>{S!=null&&window.clearInterval(S)})})})}hasAnchoredPopup(){return this.popupList.some(i=>i.isAnchored)}isEventFromCurrentPopup(i,e){const{mouseEvent:t,touchEvent:s}=i,r=t||s;if(!r)return!1;const o=this.getPopupIndex(e);if(o===-1)return!1;for(let n=o;n<this.popupList.length;n++){const l=this.popupList[n];if(fv(l.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(i){const e=this.gridOptionsService.getDocument();for(;i&&i!==e.body;){if(i.classList.contains("ag-custom-component-popup")||i.parentElement===null)return!0;i=i.parentElement}return!1}getWrapper(i){for(;!i.classList.contains("ag-popup")&&i.parentElement;)i=i.parentElement;return i.classList.contains("ag-popup")?i:null}setAlwaysOnTop(i,e){const t=this.getWrapper(i);t&&(t.classList.toggle("ag-always-on-top",!!e),e&&this.bringPopupToFront(t))}bringPopupToFront(i){const e=this.getPopupParent(),t=Array.prototype.slice.call(e.querySelectorAll(".ag-popup")),s=t.length,r=Array.prototype.slice.call(e.querySelectorAll(".ag-popup.ag-always-on-top")),o=r.length,n=this.getWrapper(i);if(!n||s<=1||!e.contains(i))return;const l=t.indexOf(n),a=n.querySelectorAll("div"),u=[];for(a.forEach(d=>{d.scrollTop!==0&&u.push([d,d.scrollTop])}),o?n.classList.contains("ag-always-on-top")?l!==s-1&&Ze(r).insertAdjacentElement("afterend",n):l!==s-o-1&&r[0].insertAdjacentElement("beforebegin",n):l!==s-1&&Ze(t).insertAdjacentElement("afterend",n);u.length;){const d=u.pop();d[0].scrollTop=d[1]}}};xl.WAIT_FOR_POPUP_CONTENT_RESIZE=200;f([D("focusService")],xl.prototype,"focusService",2);f([D("ctrlsService")],xl.prototype,"ctrlsService",2);f([D("resizeObserverService")],xl.prototype,"resizeObserverService",2);f([K],xl.prototype,"postConstruct",1);xl=f([ie("popupService")],xl);var w4=class extends be{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(i,e){this.value=i,this.render(),this.updateSelected(e)}updateSelected(i){this.addOrRemoveCssClass("ag-autocomplete-row-selected",i)}setSearchString(i){var e;let t=!1;if(H(i)){const s=(e=this.value)==null?void 0:e.toLocaleLowerCase().indexOf(i.toLocaleLowerCase());if(s>=0){t=!0,this.hasHighlighting=!0;const r=s+i.length,o=gi(this.value.slice(0,s)),n=gi(this.value.slice(s,r)),l=gi(this.value.slice(r));this.getGui().lastElementChild.innerHTML=`${o}<b>${n}</b>${l}`}}!t&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var i;this.getGui().lastElementChild.innerHTML=(i=gi(this.value))!=null?i:"&nbsp;"}},hw=class kV extends Iu{constructor(e){super(kV.TEMPLATE),this.params=e,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new xV({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:t=>this.autocompleteEntries[t]});const e=this.virtualList.getGui();this.addManagedListener(e,"click",()=>this.params.onConfirmed()),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",t=>t.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(e,t){e.preventDefault();const s=this.autocompleteEntries.indexOf(this.selectedValue),r=t===_.UP?s-1:s+1;this.checkSetSelectedValue(r)}setSearch(e){this.searchString=e,H(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,t){let s,r=!1;const o=e.toLocaleLowerCase(),n=t.filter(l=>{const u=l.toLocaleLowerCase().indexOf(o),d=u===0,c=u>=0;return c&&(!s||!r&&d||r===d&&l.length<s.length)&&(s=l,r=d),c});return!s&&n.length&&(s=n[0]),{topMatch:s,allMatches:n}}runSearch(){var e,t;const{autocompleteEntries:s}=this.params,r=s.map(u=>{var d;return(d=u.displayValue)!=null?d:u.key});let o,n;if(this.params.useFuzzySearch)o=wf(this.searchString,r,!0).values,n=o.length?o[0]:void 0;else{const u=this.runContainsSearch(this.searchString,r);o=u.allMatches,n=u.topMatch}let l=s.filter(({key:u,displayValue:d})=>o.includes(d??u));if(!l.length&&this.selectedValue&&((t=(e=this.params)==null?void 0:e.forceLastSelection)!=null&&t.call(e,this.selectedValue,this.searchString))&&(l=[this.selectedValue]),this.autocompleteEntries=l,this.virtualList.refresh(),!n)return;const a=o.indexOf(n);this.checkSetSelectedValue(a)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){const t=this.autocompleteEntries[e];this.selectedValue!==t&&(this.selectedValue=t,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((s,r)=>{s.updateSelected(e===r)}))}createRowComponent(e){var t;const s=new w4;return this.getContext().createBean(s),s.setState((t=e.displayValue)!=null?t:e.key,e===this.selectedValue),s}onMouseMove(e){const t=this.virtualList.getGui().getBoundingClientRect(),s=this.virtualList.getScrollTop(),r=e.clientY-t.top+s,o=Math.floor(r/this.virtualList.getRowHeight());this.checkSetSelectedValue(o)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!=null?e:null}};hw.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;f([q("eList")],hw.prototype,"eList",2);f([K],hw.prototype,"init",1);var y4=hw,Wu=class jh extends be{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){const t=zo(e);this.updateValue(t),this.updateAutocompleteList(t)}updateValue(e){this.updateLastPosition(),this.dispatchEvent({type:jh.EVENT_VALUE_CHANGED,value:e}),this.validate(e)}updateAutocompleteList(e){var t,s,r,o;const n=(s=(t=this.listGenerator)==null?void 0:t.call(this,e,this.lastPosition))!=null?s:{enabled:!1};if((!n.type||n.type!==((r=this.autocompleteListParams)==null?void 0:r.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=n,(o=this.autocompleteListParams)!=null&&o.enabled){this.isListOpen||this.openList();const{searchString:l}=this.autocompleteListParams;this.autocompleteList.setSearch(l??"")}else this.isListOpen&&this.closeList()}onKeyDown(e){const t=e.key;switch(this.updateLastPosition(),t){case _.ENTER:this.onEnterKeyDown(e);break;case _.TAB:this.onTabKeyDown(e);break;case _.DOWN:case _.UP:this.onUpDownKeyDown(e,t);break;case _.LEFT:case _.RIGHT:case _.PAGE_HOME:case _.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case _.ESCAPE:this.onEscapeKeyDown(e);break;case _.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}}confirmSelection(){var e;const t=(e=this.autocompleteList)==null?void 0:e.getSelectedValue();t&&(this.closeList(),this.dispatchEvent({type:jh.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:t,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,t){var s;e.preventDefault(),this.isListOpen?(s=this.autocompleteList)==null||s.onNavigationKeyDown(e,t):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!=null?e:null)}setCaret(e,t){const s=this.gridOptionsService.getDocument();t&&s.activeElement===s.body&&this.eAutocompleteInput.getFocusableElement().focus();const r=this.eAutocompleteInput.getInputElement();r.setSelectionRange(e,e),e===r.value.length&&(r.scrollLeft=r.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!=null?e:0}validate(e){var t;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((t=this.validationMessage)!=null?t:""),this.valid=!this.validationMessage,this.dispatchEvent({type:jh.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new y4({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const e=this.autocompleteList.getGui(),t={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.get("enableRtl")?"right":"left",keepWithinBounds:!0},s=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(t),ariaLabel:this.listAriaLabel});this.hidePopup=s.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:jh.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return zo(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){const{value:t,position:s,silent:r,updateListOnlyIfOpen:o,restoreFocus:n}=e;this.eAutocompleteInput.setValue(t,!0),this.setCaret(s??this.lastPosition,n),r||this.updateValue(t),(!o||this.isListOpen)&&this.updateAutocompleteList(t)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}};Wu.EVENT_VALUE_CHANGED="eventValueChanged";Wu.EVENT_VALUE_CONFIRMED="eventValueConfirmed";Wu.EVENT_OPTION_SELECTED="eventOptionSelected";Wu.EVENT_VALID_CHANGED="eventValidChanged";f([D("popupService")],Wu.prototype,"popupService",2);f([q("eAutocompleteInput")],Wu.prototype,"eAutocompleteInput",2);f([K],Wu.prototype,"postConstruct",1);var Ql=class Zm extends be{constructor(e,t,s,r){super(),this.dragSourceDropTarget=e,this.ghost=t,this.horizontal=s,this.template=r}init(){var e;this.setTemplate((e=this.template)!=null?e:Zm.TEMPLATE);const t=this.getGui();this.addElementClasses(t),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(Nt("columnDrag",this.gridOptionsService)),this.eButton.appendChild(Nt("cancel",this.gridOptionsService)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const e=this.localeService.getLocaleTextFunc(),t=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(t,e),So(this.getGui(),t.join(". "))}addAdditionalAriaInstructions(e,t){if(this.isRemovable()){const s=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(s)}}setupTooltip(){const e=()=>{const t=this.getTooltip();this.setTooltip({newTooltipText:t})};e(),this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,e)}getDragSourceId(){}getDefaultIconName(){return Fe.ICON_NOT_ALLOWED}addDragSource(){const{dragAndDropService:e,eDragHandle:t}=this,s=this.createGetDragItem(),r=this.getDefaultIconName(),o={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:t,getDefaultIconName:()=>r,getDragItem:s,dragItemName:this.getDisplayName()};e.addDragSource(o,!0),this.addDestroyFunc(()=>e.removeDragSource(o))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){ze(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const e={type:Zm.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",s=>this.onKeyDown(s)),this.addManagedListener(this.eButton,"click",s=>{this.dispatchEvent(e),s.stopPropagation()});const t=new Oi(this.eButton);this.addManagedListener(t,Oi.EVENT_TAP,()=>{this.dispatchEvent(e)}),this.addDestroyFunc(t.destroy.bind(t))}onKeyDown(e){e.key===_.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchEvent({type:Zm.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){const e=this.getDisplayValue(),t=gi(e);this.eText.innerHTML=t}addElementClasses(e,t){t=t?`-${t}`:"";const s=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop-cell${t}`,`ag-column-drop-${s}-cell${t}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}};Ql.EVENT_COLUMN_REMOVE="columnRemove";Ql.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;f([D("dragAndDropService")],Ql.prototype,"dragAndDropService",2);f([q("eText")],Ql.prototype,"eText",2);f([q("eDragHandle")],Ql.prototype,"eDragHandle",2);f([q("eButton")],Ql.prototype,"eButton",2);f([K],Ql.prototype,"init",1);var E4=Ql,_f=class Fo extends be{constructor(e){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.state=Fo.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),Wt(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e}isSourceEventFromTarget(e){const{dropZoneTarget:t,dragSource:s}=e;return t.contains(s.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(e=>e()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,ni(this.getGui()),ni(this.ePillDropList)}init(e){this.params=e??{},this.createManagedBean(new ql(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new sh(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),So(this.ePillDropList,this.getAriaLabel())}handleKeyDown(e){const t=!this.horizontal;let s=e.key===_.DOWN,r=e.key===_.UP;if(!t){const n=this.gridOptionsService.get("enableRtl");s=!n&&e.key===_.RIGHT||n&&e.key===_.LEFT,r=!n&&e.key===_.LEFT||n&&e.key===_.RIGHT}if(!s&&!r)return;const o=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,r);o&&(e.preventDefault(),o.focus())}addElementClasses(e,t){t=t?`-${t}`:"";const s=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop${t}`,`ag-column-drop-${s}${t}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){const t=this.getNewInsertIndex(e);if(t<0)return!1;const s=this.minimumAllowedNewInsertIndex(),r=Math.max(s,t),o=r!==this.insertIndex;return o&&(this.insertIndex=r),o}getNewInsertIndex(e){const t=e.event,s=this.horizontal?t.clientX:t.clientY,r=this.childPillComponents.map(n=>n.getGui().getBoundingClientRect()),o=r.findIndex(n=>this.horizontal?n.right>s&&n.left<s:n.top<s&&n.bottom>s);if(o===-1){const n=this.gridOptionsService.get("enableRtl");return r.every(u=>s>(this.horizontal?u.right:u.bottom))?n&&this.horizontal?0:this.childPillComponents.length:r.every(u=>s<(this.horizontal?u.left:u.top))?n&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=o?o+1:o}checkDragStartedBySelf(e){this.state===Fo.STATE_NOT_DRAGGING&&(this.state=Fo.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){const t=this.getItems(e.dragSource.getDragItem());this.state=Fo.STATE_NEW_ITEMS_IN;const s=t.filter(o=>this.isItemDroppable(o,e)),r=s.every(o=>this.childPillComponents.map(n=>n.getItem()).indexOf(o)!==-1);if(s.length!==0){if(this.potentialDndItems=s,r){this.state=Fo.STATE_NOT_DRAGGING;return}this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()}}isPotentialDndItems(){return D0(this.potentialDndItems)}handleDragLeaveEnd(e){}onDragLeave(e){if(this.state===Fo.STATE_REARRANGE_ITEMS){const t=this.getItems(e.dragSource.getDragItem());this.removeItems(t)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state=Fo.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let e=!1;this.state===Fo.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),e=!0):e=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],(this.refreshOnDragStop()||!e)&&this.refreshGui()}this.state=Fo.STATE_NOT_DRAGGING}removeItems(e){const t=this.getExistingItems().filter(s=>!xr(e,s));this.updateItems(t)}addItems(e){if(!e)return;const t=this.getExistingItems().slice(),s=e.filter(r=>t.indexOf(r)<0);UR(t,s,this.insertIndex),this.updateItems(t)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e){const t=this.getNonGhostItems().slice();return UR(t,e,this.insertIndex),Vo(t,this.getExistingItems())?!1:(this.updateItems(t),!0)}refreshGui(){const e=this.ePillDropList.scrollTop,t=this.resizeEnabled,s=this.getFocusedItem();let r=this.focusService.findNextFocusableElement();r||(r=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=e),t&&this.toggleResizable(t),this.focusService.isKeyboardMode()&&this.restoreFocus(s,r)}getFocusedItem(){const e=this.getGui(),t=this.gridOptionsService.getDocument().activeElement;return e.contains(t)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t):-1}restoreFocus(e,t){const s=this.getGui(),r=Array.from(s.querySelectorAll(".ag-column-drop-cell"));if(e===-1)return;r.length===0&&t.focus();const o=Math.min(r.length-1,e),n=r[o];n&&n.focus()}focusList(e){const t=e?this.childPillComponents.length-1:0;this.restoreFocus(t,this.getFocusableElement())}getNonGhostItems(){const e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(t=>!xr(this.potentialDndItems,t)):e}addItemsToGui(){const t=this.getNonGhostItems().map(s=>this.createItemComponent(s,!1));if(this.isPotentialDndItems()){const s=this.potentialDndItems.map(r=>this.createItemComponent(r,!0));this.insertIndex>=t.length?t.push(...s):t.splice(this.insertIndex,0,...s)}this.appendChild(this.ePillDropList),t.forEach((s,r)=>{r>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(s.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach((e,t)=>{const s=e.getGui();KS(s,t+1),$S(s,this.childPillComponents.length)})}createItemComponent(e,t){const s=this.createPillComponent(e,this.dropTarget,t,this.horizontal);return s.addEventListener(E4.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[e])),this.context.createBean(s),this.guiDestroyFunctions.push(()=>this.destroyBean(s)),t||this.childPillComponents.push(s),s}addIconAndTitleToGui(){const{title:e,icon:t}=this.params;if(!e||!t)return;const s=document.createElement("div");if(Cf(s,!0),this.addElementClasses(s,"title-bar"),this.addElementClasses(t,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),s.appendChild(t),!this.horizontal){const r=document.createElement("span");this.addElementClasses(r,"title"),r.innerHTML=e,s.appendChild(r)}this.appendChild(s)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){const{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const t=document.createElement("span");t.innerHTML=e,this.addElementClasses(t,"empty-message"),this.ePillDropList.appendChild(t)}addArrow(e){if(this.horizontal){const t=this.gridOptionsService.get("enableRtl"),s=Nt(t?"smallLeft":"smallRight",this.gridOptionsService);this.addElementClasses(s,"cell-separator"),e.appendChild(s)}}};_f.STATE_NOT_DRAGGING="notDragging";_f.STATE_NEW_ITEMS_IN="newItemsIn";_f.STATE_REARRANGE_ITEMS="rearrangeItems";f([D("focusService")],_f.prototype,"focusService",2);f([D("dragAndDropService")],_f.prototype,"dragAndDropService",2);var cu=class extends U{getNextCellToFocus(i,e,t=!1){return t?this.getNextCellToFocusWithCtrlPressed(i,e):this.getNextCellToFocusWithoutCtrlPressed(i,e)}getNextCellToFocusWithCtrlPressed(i,e){const t=i===_.UP,s=i===_.DOWN,r=i===_.LEFT;let o,n;if(t||s)n=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),o=e.column;else{const l=this.columnModel.getAllDisplayedColumns(),a=this.gridOptionsService.get("enableRtl");n=e.rowIndex,o=r!==a?l[0]:Ze(l)}return{rowIndex:n,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(i,e){let t=e,s=!1;for(;!s;){switch(i){case _.UP:t=this.getCellAbove(t);break;case _.DOWN:t=this.getCellBelow(t);break;case _.RIGHT:this.gridOptionsService.get("enableRtl")?t=this.getCellToLeft(t):t=this.getCellToRight(t);break;case _.LEFT:this.gridOptionsService.get("enableRtl")?t=this.getCellToRight(t):t=this.getCellToLeft(t);break;default:t=null,console.warn("AG Grid: unknown key for navigation "+i);break}t?s=this.isCellGoodToFocusOn(t):s=!0}return t}isCellGoodToFocusOn(i){const e=i.column;let t;switch(i.rowPinned){case"top":t=this.pinnedRowModel.getPinnedTopRow(i.rowIndex);break;case"bottom":t=this.pinnedRowModel.getPinnedBottomRow(i.rowIndex);break;default:t=this.rowModel.getRow(i.rowIndex);break}return t?!e.isSuppressNavigable(t):!1}getCellToLeft(i){if(!i)return null;const e=this.columnModel.getDisplayedColBefore(i.column);return e?{rowIndex:i.rowIndex,column:e,rowPinned:i.rowPinned}:null}getCellToRight(i){if(!i)return null;const e=this.columnModel.getDisplayedColAfter(i.column);return e?{rowIndex:i.rowIndex,column:e,rowPinned:i.rowPinned}:null}getRowBelow(i){const e=i.rowIndex,t=i.rowPinned;if(this.isLastRowInContainer(i))switch(t){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const s=this.rowModel.getRow(i.rowIndex),r=this.getNextStickyPosition(s);return r||{rowIndex:e+1,rowPinned:t}}getNextStickyPosition(i,e){if(!this.gridOptionsService.isGroupRowsSticky()||!i||!i.sticky)return;const t=[...this.rowRenderer.getStickyTopRowCtrls()].sort((n,l)=>n.getRowNode().rowIndex-l.getRowNode().rowIndex),s=e?-1:1,r=t.findIndex(n=>n.getRowNode().rowIndex===i.rowIndex),o=t[r+s];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(i){if(!i)return null;const e=this.getRowBelow(i);return e?{rowIndex:e.rowIndex,column:i.column,rowPinned:e.rowPinned}:null}isLastRowInContainer(i){const e=i.rowPinned,t=i.rowIndex;return e==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=t:e==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=t:this.paginationProxy.getPageLastRow()<=t}getRowAbove(i){const e=i.rowIndex,t=i.rowPinned;if(t?e===0:e===this.paginationProxy.getPageFirstRow())return t==="top"?null:t?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const r=this.rowModel.getRow(i.rowIndex),o=this.getNextStickyPosition(r,!0);return o||{rowIndex:e-1,rowPinned:t}}getCellAbove(i){if(!i)return null;const e=this.getRowAbove({rowIndex:i.rowIndex,rowPinned:i.rowPinned});return e?{rowIndex:e.rowIndex,column:i.column,rowPinned:e.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(i,e){return e?this.getNextTabbedCellBackwards(i):this.getNextTabbedCellForwards(i)}getNextTabbedCellForwards(i){const e=this.columnModel.getAllDisplayedColumns();let t=i.rowIndex,s=i.rowPinned,r=this.columnModel.getDisplayedColAfter(i.column);if(!r){r=e[0];const o=this.getRowBelow(i);if(Ee(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;t=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:t,column:r,rowPinned:s}}getNextTabbedCellBackwards(i){const e=this.columnModel.getAllDisplayedColumns();let t=i.rowIndex,s=i.rowPinned,r=this.columnModel.getDisplayedColBefore(i.column);if(!r){r=Ze(e);const o=this.getRowAbove({rowIndex:i.rowIndex,rowPinned:i.rowPinned});if(Ee(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;t=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:t,column:r,rowPinned:s}}};f([D("columnModel")],cu.prototype,"columnModel",2);f([D("rowModel")],cu.prototype,"rowModel",2);f([D("rowRenderer")],cu.prototype,"rowRenderer",2);f([D("pinnedRowModel")],cu.prototype,"pinnedRowModel",2);f([D("paginationProxy")],cu.prototype,"paginationProxy",2);cu=f([ie("cellNavigationService")],cu);var Lc=class extends U{constructor(){super(...arguments),this.consuming=!1}setBeans(i){this.logger=i.create("AlignedGridsService")}getAlignedGridApis(){var i;let e=(i=this.gridOptionsService.get("alignedGrids"))!=null?i:[];const t=typeof e=="function";typeof e=="function"&&(e=e());const s=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(o=>{var n;if(!o){Uh("alignedGrids contains an undefined option."),t||Uh(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),Uh(s());return}if(o instanceof Be)return o;const l=o;return"current"in l?(n=l.current)==null?void 0:n.api:(l.api||Uh(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${s()}`),l.api)}).filter(o=>!!o&&!o.isDestroyed())}init(){this.addManagedListener(this.eventService,y.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,y.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(i){this.consuming||this.getAlignedGridApis().forEach(e=>{const t=e.__getAlignedGridService();i(t)})}onEvent(i){this.consuming=!0,i(),this.consuming=!1}fireColumnEvent(i){this.fireEvent(e=>{e.onColumnEvent(i)})}fireScrollEvent(i){i.direction==="horizontal"&&this.fireEvent(e=>{e.onScrollEvent(i)})}onScrollEvent(i){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(i.left,!0)})}getMasterColumns(i){const e=[];return i.columns?i.columns.forEach(t=>{e.push(t)}):i.column&&e.push(i.column),e}getColumnIds(i){const e=[];return i.columns?i.columns.forEach(t=>{e.push(t.getColId())}):i.column&&e.push(i.column.getColId()),e}onColumnEvent(i){this.onEvent(()=>{switch(i.type){case y.EVENT_COLUMN_MOVED:case y.EVENT_COLUMN_VISIBLE:case y.EVENT_COLUMN_PINNED:case y.EVENT_COLUMN_RESIZED:const e=i;this.processColumnEvent(e);break;case y.EVENT_COLUMN_GROUP_OPENED:const t=i;this.processGroupOpenedEvent(t);break;case y.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(i){i.columnGroups.forEach(e=>{let t=null;if(e){const s=e.getGroupId();t=this.columnModel.getProvidedColumnGroup(s)}e&&!t||(this.logger.log("onColumnEvent-> processing "+i+" expanded = "+e.isExpanded()),this.columnModel.setColumnGroupOpened(t,e.isExpanded(),"alignedGridChanged"))})}processColumnEvent(i){var e;const t=i.column;let s=null;if(t&&(s=this.columnModel.getPrimaryColumn(t.getColId())),t&&!s)return;const r=this.getMasterColumns(i);switch(i.type){case y.EVENT_COLUMN_MOVED:{const u=i,c=i.api.getColumnState().map(h=>({colId:h.colId}));this.columnModel.applyColumnState({state:c,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${i.type} toIndex = ${u.toIndex}`)}break;case y.EVENT_COLUMN_VISIBLE:{const u=i,c=i.api.getColumnState().map(h=>({colId:h.colId,hide:h.hide}));this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${i.type} visible = ${u.visible}`)}break;case y.EVENT_COLUMN_PINNED:{const u=i,c=i.api.getColumnState().map(h=>({colId:h.colId,pinned:h.pinned}));this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${i.type} pinned = ${u.pinned}`)}break;case y.EVENT_COLUMN_RESIZED:const l=i,a={};r.forEach(u=>{this.logger.log(`onColumnEvent-> processing ${i.type} actualWidth = ${u.getActualWidth()}`),a[u.getId()]={key:u.getColId(),newWidth:u.getActualWidth()}}),(e=l.flexColumns)==null||e.forEach(u=>{a[u.getId()]&&delete a[u.getId()]}),this.columnModel.setColumnWidths(Object.values(a),!1,l.finished,"alignedGridChanged");break}const n=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(l=>{l.setGridOption("alwaysShowVerticalScroll",n)})}};f([D("columnModel")],Lc.prototype,"columnModel",2);f([D("ctrlsService")],Lc.prototype,"ctrlsService",2);f([oo(0,no("loggerFactory"))],Lc.prototype,"setBeans",1);f([K],Lc.prototype,"init",1);Lc=f([ie("alignedGridsService")],Lc);var Ic=class extends U{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gridOptionsService.get("rowSelection"),this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,y.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(i){var e;const{newValue:t,clearSelection:s,suppressFinishActions:r,rangeSelect:o,nodes:n,event:l,source:a="api"}=i;if(n.length===0)return 0;if(n.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const u=this.groupSelectsChildren&&i.groupSelectsFiltered===!0,d=n.map(h=>h.footer?h.sibling:h);if(o){if(n.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let h=null;if(a==="checkboxSelected"&&t===!1&&this.lastRowNode&&(this.lastRowNode.id?h=this.lastRowNode:this.lastRowNode=null),h==null&&(h=this.getLastSelectedNode()),h){const p=d[0];if(p!==h&&this.isMultiselect())return this.selectRange(p,h,t,a)}}this.lastRowNode=t?null:d[0];let c=0;for(let h=0;h<d.length;h++){const p=d[h];u&&p.group||p.selectThisNode(t,l,a)&&c++,this.groupSelectsChildren&&((e=p.childrenAfterGroup)!=null&&e.length)&&(c+=this.selectChildren(p,t,u,a))}if(!r&&(t&&(s||!this.isMultiselect())&&(c+=this.clearOtherNodes(d[0],a)),c>0)){this.updateGroupsFromChildrenSelections(a);const p={type:y.EVENT_SELECTION_CHANGED,source:a};this.eventService.dispatchEvent(p)}return c}selectRange(i,e,t=!0,s){const r=this.rowModel.getNodesInRangeForSelection(i,e);let o=0;r.forEach(l=>{if(l.group&&this.groupSelectsChildren)return;l.selectThisNode(t,void 0,s)&&o++}),this.updateGroupsFromChildrenSelections(s);const n={type:y.EVENT_SELECTION_CHANGED,source:s};return this.eventService.dispatchEvent(n),o}selectChildren(i,e,t,s){const r=t?i.childrenAfterAggFilter:i.childrenAfterGroup;return Ee(r)?0:this.setNodesSelected({newValue:e,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:t,source:s,nodes:r})}getLastSelectedNode(){const i=Array.from(this.selectedNodes.keys());if(i.length==0)return null;const e=this.selectedNodes.get(Ze(i));return e||null}getSelectedNodes(){const i=[];return this.selectedNodes.forEach(e=>{e&&i.push(e)}),i}getSelectedRows(){const i=[];return this.selectedNodes.forEach(e=>{e&&e.data&&i.push(e.data)}),i}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(i){const e=new Map;this.selectedNodes.forEach((t,s)=>{t&&i(t)&&e.set(s,t)}),this.selectedNodes=e}updateGroupsFromChildrenSelections(i,e){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;const s=this.rowModel.getRootNode();e||(e=new cw(!0,s),e.setInactive());let r=!1;return e.forEachChangedNodeDepthFirst(o=>{if(o!==s){const n=o.calculateSelectedFromChildren();r=o.selectThisNode(n===null?!1:n,void 0,i)||r}}),r}clearOtherNodes(i,e){const t=new Map;let s=0;return this.selectedNodes.forEach(r=>{if(r&&r.id!==i.id){const o=this.selectedNodes.get(r.id);s+=o.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:e}),this.groupSelectsChildren&&r.parent&&t.set(r.parent.id,r.parent)}}),t.forEach(r=>{const o=r.calculateSelectedFromChildren();r.selectThisNode(o===null?!1:o,void 0,e)}),s}onRowSelected(i){const e=i.node;this.groupSelectsChildren&&e.group||(e.isSelected()?this.selectedNodes.set(e.id,e):this.selectedNodes.delete(e.id))}syncInRowNode(i,e){this.syncInOldRowNode(i,e),this.syncInNewRowNode(i)}syncInOldRowNode(i,e){if(H(e)&&i.id!==e.id&&e){const s=e.id;this.selectedNodes.get(s)==i&&this.selectedNodes.set(e.id,e)}}syncInNewRowNode(i){this.selectedNodes.has(i.id)?(i.setSelectedInitialValue(!0),this.selectedNodes.set(i.id,i)):i.setSelectedInitialValue(!1)}reset(i){const e=this.getSelectionCount();if(this.resetNodes(),e){const t={type:y.EVENT_SELECTION_CHANGED,source:i};this.eventService.dispatchEvent(t)}}resetNodes(){var i;(i=this.selectedNodes)==null||i.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;const e=this.rowModel.getTopLevelNodes();if(e===null)return;const t=[];function s(r){for(let o=0,n=r.length;o<n;o++){const l=r[o];if(l.isSelected())t.push(l);else{const a=l;a.group&&a.children&&s(a.children)}}}return s(e),t}isEmpty(){let i=0;return this.selectedNodes.forEach(e=>{e&&i++}),i===0}deselectAllRowNodes(i){const e=l=>l.selectThisNode(!1,void 0,s),t=this.rowModel.getType()==="clientSide",{source:s,justFiltered:r,justCurrentPage:o}=i;if(o||r){if(!t){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(r,o).forEach(e)}else this.selectedNodes.forEach(l=>{l&&e(l)}),this.reset(s);t&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s);const n={type:y.EVENT_SELECTION_CHANGED,source:s};this.eventService.dispatchEvent(n)}getSelectedCounts(i,e){let t=0,s=0;const r=o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?t++:o.selectable&&s++)};return this.getNodesToSelect(i,e).forEach(r),{selectedCount:t,notSelectedCount:s}}getSelectAllState(i,e){const{selectedCount:t,notSelectedCount:s}=this.getSelectedCounts(i,e);return t===0&&s===0?!1:t>0&&s>0?null:t>0}hasNodesToSelect(i=!1,e=!1){return this.getNodesToSelect(i,e).filter(t=>t.selectable).length>0}getNodesToSelect(i=!1,e=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const t=[];if(e)return this.paginationProxy.forEachNodeOnPage(r=>{if(!r.group){t.push(r);return}if(!r.expanded){const o=n=>{var l;t.push(n),(l=n.childrenAfterFilter)!=null&&l.length&&n.childrenAfterFilter.forEach(o)};o(r);return}this.groupSelectsChildren||t.push(r)}),t;const s=this.rowModel;return i?(s.forEachNodeAfterFilter(r=>{t.push(r)}),t):(s.forEachNode(r=>{t.push(r)}),t)}selectAllRowNodes(i){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:e,justFiltered:t,justCurrentPage:s}=i,r=n=>n.selectThisNode(!0,void 0,e);this.getNodesToSelect(t,s).forEach(r),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(e);const o={type:y.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(o)}getSelectionState(){const i=[];return this.selectedNodes.forEach(e=>{e!=null&&e.id&&i.push(e.id)}),i.length?i:null}setSelectionState(i,e){if(!Array.isArray(i))return;const t=new Set(i),s=[];this.rowModel.forEachNode(r=>{t.has(r.id)&&s.push(r)}),this.setNodesSelected({newValue:!0,nodes:s,source:e})}};f([D("rowModel")],Ic.prototype,"rowModel",2);f([D("paginationProxy")],Ic.prototype,"paginationProxy",2);f([K],Ic.prototype,"init",1);Ic=f([ie("selectionService")],Ic);var Av=class{constructor(i){this.viaApi=(e,...t)=>(ve(`Since v31, 'columnApi.${e}' is deprecated and moved to 'api.${e}'.`),this.api[e](...t)),this.api=i}sizeColumnsToFit(i){this.viaApi("sizeColumnsToFit",i)}setColumnGroupOpened(i,e){this.viaApi("setColumnGroupOpened",i,e)}getColumnGroup(i,e){return this.viaApi("getColumnGroup",i,e)}getProvidedColumnGroup(i){return this.viaApi("getProvidedColumnGroup",i)}getDisplayNameForColumn(i,e){return this.viaApi("getDisplayNameForColumn",i,e)}getDisplayNameForColumnGroup(i,e){return this.viaApi("getDisplayNameForColumnGroup",i,e)}getColumn(i){return this.viaApi("getColumn",i)}getColumns(){return this.viaApi("getColumns")}applyColumnState(i){return this.viaApi("applyColumnState",i)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(i){this.viaApi("setColumnGroupState",i)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(i){return this.viaApi("getDisplayedColAfter",i)}getDisplayedColBefore(i){return this.viaApi("getDisplayedColBefore",i)}setColumnVisible(i,e){this.viaApi("setColumnVisible",i,e)}setColumnsVisible(i,e){this.viaApi("setColumnsVisible",i,e)}setColumnPinned(i,e){this.viaApi("setColumnPinned",i,e)}setColumnsPinned(i,e){this.viaApi("setColumnsPinned",i,e)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(i,e){this.viaApi("moveColumn",i,e)}moveColumnByIndex(i,e){this.viaApi("moveColumnByIndex",i,e)}moveColumns(i,e){this.viaApi("moveColumns",i,e)}moveRowGroupColumn(i,e){this.viaApi("moveRowGroupColumn",i,e)}setColumnAggFunc(i,e){this.viaApi("setColumnAggFunc",i,e)}setColumnWidth(i,e,t=!0,s){this.viaApi("setColumnWidth",i,e,t,s)}setColumnWidths(i,e=!0,t){this.viaApi("setColumnWidths",i,e,t)}setPivotMode(i){this.viaApi("setPivotMode",i)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(i,e){return this.viaApi("getPivotResultColumn",i,e)}setValueColumns(i){this.viaApi("setValueColumns",i)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(i){this.viaApi("removeValueColumn",i)}removeValueColumns(i){this.viaApi("removeValueColumns",i)}addValueColumn(i){this.viaApi("addValueColumn",i)}addValueColumns(i){this.viaApi("addValueColumns",i)}setRowGroupColumns(i){this.viaApi("setRowGroupColumns",i)}removeRowGroupColumn(i){this.viaApi("removeRowGroupColumn",i)}removeRowGroupColumns(i){this.viaApi("removeRowGroupColumns",i)}addRowGroupColumn(i){this.viaApi("addRowGroupColumn",i)}addRowGroupColumns(i){this.viaApi("addRowGroupColumns",i)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(i){this.viaApi("setPivotColumns",i)}removePivotColumn(i){this.viaApi("removePivotColumn",i)}removePivotColumns(i){this.viaApi("removePivotColumns",i)}addPivotColumn(i){this.viaApi("addPivotColumn",i)}addPivotColumns(i){this.viaApi("addPivotColumns",i)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(i,e){return this.viaApi("autoSizeColumn",i,e)}autoSizeColumns(i,e){this.viaApi("autoSizeColumns",i,e)}autoSizeAllColumns(i){this.viaApi("autoSizeAllColumns",i)}setPivotResultColumns(i){this.viaApi("setPivotResultColumns",i)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};f([D("gridApi")],Av.prototype,"api",2);Av=f([ie("columnApi")],Av);var hu=class extends U{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.get("enableCellExpressions"),this.isTreeData=this.gridOptionsService.get("treeData"),this.initialised=!0;const i=t=>this.callColumnCellValueChangedHandler(t),e=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(y.EVENT_CELL_VALUE_CHANGED,i,e),this.addDestroyFunc(()=>this.eventService.removeEventListener(y.EVENT_CELL_VALUE_CHANGED,i,e)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValue(i,e,t=!1,s=!1){if(this.initialised||this.init(),!e)return;const r=i.getColDef(),o=r.field,n=i.getColId(),l=e.data;let a;const u=e.groupData&&e.groupData[n]!==void 0,d=!s&&e.aggData&&e.aggData[n]!==void 0,c=this.isSsrm&&s&&!!i.getColDef().aggFunc,h=this.isSsrm&&e.footer&&e.field&&(i.getColDef().showRowGroup===!0||i.getColDef().showRowGroup===e.field);if(t&&r.filterValueGetter?a=this.executeFilterValueGetter(r.filterValueGetter,l,i,e):this.isTreeData&&d?a=e.aggData[n]:this.isTreeData&&r.valueGetter?a=this.executeValueGetter(r.valueGetter,l,i,e):this.isTreeData&&o&&l?a=kd(l,o,i.isFieldContainsDots()):u?a=e.groupData[n]:d?a=e.aggData[n]:r.valueGetter?a=this.executeValueGetter(r.valueGetter,l,i,e):h?a=kd(l,e.field,i.isFieldContainsDots()):o&&l&&!c&&(a=kd(l,o,i.isFieldContainsDots())),this.cellExpressions&&typeof a=="string"&&a.indexOf("=")===0){const p=a.substring(1);a=this.executeValueGetter(p,l,i,e)}if(a==null){const p=this.getOpenedGroup(e,i);if(p!=null)return p}return a}getOpenedGroup(i,e){if(!this.gridOptionsService.get("showOpenedGroup")||!e.getColDef().showRowGroup)return;const s=e.getColDef().showRowGroup;let r=i.parent;for(;r!=null;){if(r.rowGroupColumn&&(s===!0||s===r.rowGroupColumn.getColId()))return r.key;r=r.parent}}setValue(i,e,t,s){const r=this.columnModel.getPrimaryColumn(e);if(!i||!r)return!1;Ee(i.data)&&(i.data={});const{field:o,valueSetter:n}=r.getColDef();if(Ee(o)&&Ee(n))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(r,t))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const l=this.gridOptionsService.addGridCommonParams({node:i,data:i.data,oldValue:this.getValue(r,i),newValue:t,colDef:r.getColDef(),column:r});l.newValue=t;let a;if(H(n)?typeof n=="function"?a=n(l):a=this.expressionService.evaluate(n,l):a=this.setValueUsingField(i.data,o,t,r.isFieldContainsDots()),a===void 0&&(a=!0),!a)return!1;i.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),l.newValue=this.getValue(r,i);const u={type:y.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:l.column,api:l.api,columnApi:l.columnApi,colDef:l.colDef,context:l.context,data:i.data,node:i,oldValue:l.oldValue,newValue:l.newValue,value:l.newValue,source:s};return this.eventService.dispatchEvent(u),!0}callColumnCellValueChangedHandler(i){const e=i.colDef.onCellValueChanged;typeof e=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{e({node:i.node,data:i.data,oldValue:i.oldValue,newValue:i.newValue,colDef:i.colDef,column:i.column,api:i.api,columnApi:i.columnApi,context:i.context})})}setValueUsingField(i,e,t,s){if(!e)return!1;let r=!1;if(!s)r=i[e]===t,r||(i[e]=t);else{const o=e.split(".");let n=i;for(;o.length>0&&n;){const l=o.shift();o.length===0?(r=n[l]===t,r||(n[l]=t)):n=n[l]}}return!r}executeFilterValueGetter(i,e,t,s){const r=this.gridOptionsService.addGridCommonParams({data:e,node:s,column:t,colDef:t.getColDef(),getValue:this.getValueCallback.bind(this,s)});return typeof i=="function"?i(r):this.expressionService.evaluate(i,r)}executeValueGetter(i,e,t,s){const r=t.getColId(),o=this.valueCache.getValue(s,r);if(o!==void 0)return o;const n=this.gridOptionsService.addGridCommonParams({data:e,node:s,column:t,colDef:t.getColDef(),getValue:this.getValueCallback.bind(this,s)});let l;return typeof i=="function"?l=i(n):l=this.expressionService.evaluate(i,n),this.valueCache.setValue(s,r,l),l}getValueCallback(i,e){const t=this.columnModel.getPrimaryColumn(e);return t?this.getValue(t,i):null}getKeyForNode(i,e){const t=this.getValue(i,e),s=i.getColDef().keyCreator;let r=t;if(s){const o=this.gridOptionsService.addGridCommonParams({value:t,colDef:i.getColDef(),column:i,node:e,data:e.data});r=s(o)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&ve("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}};f([D("expressionService")],hu.prototype,"expressionService",2);f([D("columnModel")],hu.prototype,"columnModel",2);f([D("valueCache")],hu.prototype,"valueCache",2);f([D("dataTypeService")],hu.prototype,"dataTypeService",2);f([K],hu.prototype,"init",1);hu=f([ie("valueService")],hu);var oT=class extends U{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(i){this.logger=i.create("ExpressionService")}evaluate(i,e){if(typeof i=="string")return this.evaluateExpression(i,e);console.error("AG Grid: value should be either a string or a function",i)}evaluateExpression(i,e){try{return this.createExpressionFunction(i)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.columnApi,e.getValue,e.column,e.columnGroup)}catch(t){return console.log("Processing of the expression failed"),console.log("Expression = "+i),console.log("Params =",e),console.log("Exception = "+t),null}}createExpressionFunction(i){if(this.expressionToFunctionCache[i])return this.expressionToFunctionCache[i];const e=this.createFunctionBody(i),t=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",e);return this.expressionToFunctionCache[i]=t,t}createFunctionBody(i){return i.indexOf("return")>=0?i:"return "+i+";"}};f([oo(0,no("loggerFactory"))],oT.prototype,"setBeans",1);oT=f([ie("expressionService")],oT);var pL=class extends U{constructor(){super(...arguments),this.templateCache={},this.waitingCallbacks={}}getTemplate(i,e){const t=this.templateCache[i];if(t)return t;let s=this.waitingCallbacks[i];const r=this;if(!s){s=[],this.waitingCallbacks[i]=s;const o=new XMLHttpRequest;o.onload=function(){r.handleHttpResult(this,i)},o.open("GET",i),o.send()}return e&&s.push(e),null}handleHttpResult(i,e){if(i.status!==200||i.response===null){console.warn(`AG Grid: Unable to get template error ${i.status} - ${e}`);return}this.templateCache[e]=i.response||i.responseText;const t=this.waitingCallbacks[e];for(let s=0;s<t.length;s++){const r=t[s];r()}}};pL=f([ie("templateService")],pL);var nT=class extends U{setBeans(i){this.logging=i.get("debug")}create(i){return new VV(i,this.isLogging.bind(this))}isLogging(){return this.logging}};f([oo(0,no("gridOptionsService"))],nT.prototype,"setBeans",1);nT=f([ie("loggerFactory")],nT);var VV=class{constructor(i,e){this.name=i,this.isLoggingFunc=e}isLogging(){return this.isLoggingFunc()}log(i){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+i)}},Uu=class extends U{setComp(i,e,t){this.view=i,this.eGridHostDiv=e,this.eGui=t,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:r=>r===1||r===0,getIconName:()=>Fe.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(e),this.createManagedBean(new sw(this.view)),this.addRtlSupport();const s=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),this.ctrlsService.registerGridCtrl(this)}isDetailGrid(){var i;const e=this.focusService.findTabbableParent(this.getGui());return((i=e==null?void 0:e.getAttribute("row-id"))==null?void 0:i.startsWith("detail"))||!1}showDropZones(){return wt.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return wt.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return wt.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return wt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){const i={type:y.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(i)}addRtlSupport(){const i=this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(i)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(i){this.view.setCursor(i?"ew-resize":null)}disableUserSelect(i){this.view.setUserSelect(i?"none":null)}focusNextInnerContainer(i){const e=this.gridOptionsService.getDocument(),t=this.view.getFocusableContainers(),r=t.findIndex(o=>o.contains(e.activeElement))+(i?-1:1);return r<=0||r>=t.length?!1:this.focusService.focusInto(t[r])}focusInnerElement(i){const e=this.view.getFocusableContainers(),t=this.columnModel.getAllDisplayedColumns();if(i){if(e.length>1)return this.focusService.focusInto(Ze(e),!0);const s=Ze(t);if(this.focusService.focusGridView(s,!0))return!0}if(this.gridOptionsService.get("headerHeight")===0||this.gridOptionsService.get("suppressHeaderFocus")){if(this.focusService.focusGridView(t[0]))return!0;for(let s=1;s<e.length;s++)if(this.focusService.focusInto(e[s]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(i=!1){this.view.forceFocusOutOfContainer(i)}};f([D("focusService")],Uu.prototype,"focusService",2);f([D("resizeObserverService")],Uu.prototype,"resizeObserverService",2);f([D("columnModel")],Uu.prototype,"columnModel",2);f([D("ctrlsService")],Uu.prototype,"ctrlsService",2);f([D("mouseEventService")],Uu.prototype,"mouseEventService",2);f([D("dragAndDropService")],Uu.prototype,"dragAndDropService",2);var Nf=class extends Lf{constructor(i){super(),this.eGridDiv=i}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const i={destroyGridUi:()=>this.destroyBean(this),setRtlClass:t=>this.addCssClass(t),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:t=>{this.getGui().style.userSelect=t??"",this.getGui().style.webkitUserSelect=t??""},setCursor:t=>{this.getGui().style.cursor=t??""}};this.ctrl=this.createManagedBean(new Uu);const e=this.createTemplate();this.setTemplate(e),this.ctrl.setComp(i,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:t=>this.ctrl.focusInnerElement(t),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const i=this.getGui();this.eGridDiv.appendChild(i),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(i),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(i,e){const t=this.eRootWrapperBody.classList;t.toggle("ag-layout-auto-height",e.autoHeight),t.toggle("ag-layout-normal",e.normal),t.toggle("ag-layout-print",e.print),this.addOrRemoveCssClass("ag-layout-auto-height",e.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",e.normal),this.addOrRemoveCssClass("ag-layout-print",e.print)}createTemplate(){const i=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",e=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",t=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",s=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${i}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${e}
                </div>
                ${t}
                <ag-pagination></ag-pagination>
                ${s}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const i=[this.gridBodyComp.getGui()];return this.sideBarComp&&i.push(this.sideBarComp.getGui()),i.filter(e=>hr(e))}};f([D("loggerFactory")],Nf.prototype,"loggerFactory",2);f([q("gridBody")],Nf.prototype,"gridBodyComp",2);f([q("sideBar")],Nf.prototype,"sideBarComp",2);f([q("rootWrapperBody")],Nf.prototype,"eRootWrapperBody",2);f([K],Nf.prototype,"postConstruct",1);var Mc=class extends U{progressSort(i,e,t){const s=this.getNextSortDirection(i);this.setSortForColumn(i,s,e,t)}setSortForColumn(i,e,t,s){e!=="asc"&&e!=="desc"&&(e=null);const r=this.gridOptionsService.isColumnsSortingCoupledToGroup();let o=[i];if(r&&i.getColDef().showRowGroup){const a=this.columnModel.getSourceColumnsForGroupColumn(i),u=a==null?void 0:a.filter(d=>d.isSortable());u&&(o=[i,...u])}o.forEach(a=>a.setSort(e,s));const n=(t||this.gridOptionsService.get("alwaysMultiSort"))&&!this.gridOptionsService.get("suppressMultiSort"),l=[];if(!n){const a=this.clearSortBarTheseColumns(o,s);l.push(...a)}this.updateSortIndex(i),l.push(...o),this.dispatchSortChangedEvents(s,l)}updateSortIndex(i){const e=this.gridOptionsService.isColumnsSortingCoupledToGroup(),t=this.columnModel.getGroupDisplayColumnForGroup(i.getId()),s=e&&t||i,r=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(l=>l.setSortIndex(null));const o=r.filter(l=>e&&l.getColDef().showRowGroup?!1:l!==s);(s.getSort()?[...o,s]:o).forEach((l,a)=>{l.setSortIndex(a)})}onSortChanged(i,e){this.dispatchSortChangedEvents(i,e)}isSortActive(){const e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(t=>!!t.getSort());return e&&e.length>0}dispatchSortChangedEvents(i,e){const t={type:y.EVENT_SORT_CHANGED,source:i};e&&(t.columns=e),this.eventService.dispatchEvent(t)}clearSortBarTheseColumns(i,e){const t=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(s=>{i.includes(s)||(s.getSort()&&t.push(s),s.setSort(void 0,e))}),t}getNextSortDirection(i){let e;if(i.getColDef().sortingOrder?e=i.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?e=this.gridOptionsService.get("sortingOrder"):e=Mc.DEFAULT_SORTING_ORDER,!Array.isArray(e)||e.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${e}`),null;const t=e.indexOf(i.getSort()),s=t<0,r=t==e.length-1;let o;return s||r?o=e[0]:o=e[t+1],Mc.DEFAULT_SORTING_ORDER.indexOf(o)<0?(console.warn("AG Grid: invalid sort type "+o),null):o}getIndexedSortMap(){let i=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){const o=this.gridOptionsService.isColumnsSortingCoupledToGroup();i=i.filter(n=>{const l=!!n.getAggFunc(),a=!n.isPrimary(),u=o?this.columnModel.getGroupDisplayColumnForGroup(n.getId()):n.getColDef().showRowGroup;return l||a||u})}const e=this.columnModel.getRowGroupColumns().filter(o=>!!o.getSort()),t={};i.forEach((o,n)=>t[o.getId()]=n),i.sort((o,n)=>{const l=o.getSortIndex(),a=n.getSortIndex();if(l!=null&&a!=null)return l-a;if(l==null&&a==null){const u=t[o.getId()],d=t[n.getId()];return u>d?1:-1}else return a==null?-1:1});const s=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!e.length;s&&(i=[...new Set(i.map(o=>{var n;return(n=this.columnModel.getGroupDisplayColumnForGroup(o.getId()))!=null?n:o}))]);const r=new Map;return i.forEach((o,n)=>r.set(o,n)),s&&e.forEach(o=>{const n=this.columnModel.getGroupDisplayColumnForGroup(o.getId());r.set(o,r.get(n))}),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([i,e],[t,s])=>e-s).map(([i])=>i)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(i=>i.getSort()).map(i=>({sort:i.getSort(),colId:i.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(i=>i.getSort()).map(i=>({sort:i.getSort(),column:i}))}canColumnDisplayMixedSort(i){const e=this.gridOptionsService.isColumnsSortingCoupledToGroup(),t=!!i.getColDef().showRowGroup;return e&&t}getDisplaySortForColumn(i){const e=this.columnModel.getSourceColumnsForGroupColumn(i);if(!this.canColumnDisplayMixedSort(i)||!(e!=null&&e.length))return i.getSort();const s=i.getColDef().field!=null||!!i.getColDef().valueGetter?[i,...e]:e,r=s[0].getSort();return s.every(n=>n.getSort()==r)?r:"mixed"}getDisplaySortIndexForColumn(i){return this.getIndexedSortMap().get(i)}};Mc.DEFAULT_SORTING_ORDER=["asc","desc",null];f([D("columnModel")],Mc.prototype,"columnModel",2);Mc=f([ie("sortController")],Mc);var pt=class extends U{static addKeyboardModeEvents(i){this.instanceCount>0||(i.addEventListener("keydown",pt.toggleKeyboardMode),i.addEventListener("mousedown",pt.toggleKeyboardMode))}static removeKeyboardModeEvents(i){this.instanceCount>0||(i.addEventListener("keydown",pt.toggleKeyboardMode),i.addEventListener("mousedown",pt.toggleKeyboardMode))}static toggleKeyboardMode(i){const e=pt.keyboardModeActive,t=i.type==="keydown";t&&(i.ctrlKey||i.metaKey||i.altKey)||e!==t&&(pt.keyboardModeActive=t)}static unregisterGridCompController(i){pt.removeKeyboardModeEvents(i)}init(){const i=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_MODE_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_GROUP_OPENED,i),this.addManagedListener(this.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,i),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl})}registerKeyboardFocusEvents(){const i=this.gridOptionsService.getDocument();pt.addKeyboardModeEvents(i),pt.instanceCount++,this.addDestroyFunc(()=>{pt.instanceCount--,pt.unregisterGridCompController(i)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const i=this.focusedCellPosition.column,e=this.columnModel.getGridColumn(i.getId());i!==e&&this.clearFocusedCell()}isKeyboardMode(){return pt.keyboardModeActive}getFocusCellToUseAfterRefresh(){const i=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(i.activeElement,Ua.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){const i=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(i.activeElement,aw.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(i,e){let t=i;for(;t;){if(this.gridOptionsService.getDomData(t,e))return!1;t=t.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(i){return this.isCellRestoreFocused(i)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(i){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(i,this.restoredFocusedCellPosition)}setRestoreFocusedCell(i){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=i)}getFocusEventParams(){const{rowIndex:i,rowPinned:e,column:t}=this.focusedCellPosition,s={rowIndex:i,rowPinned:e,column:t,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:e});return r&&(s.isFullWidthCell=r.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const i=pe({type:y.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(i)}setFocusedCell(i){const{column:e,rowIndex:t,rowPinned:s,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1}=i,n=this.columnModel.getGridColumn(e);if(!n){this.focusedCellPosition=null;return}this.focusedCellPosition=n?{rowIndex:t,rowPinned:zo(s),column:n}:null;const l=At(pe({type:y.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:r,preventScrollOnBrowserFocus:o,floating:null});this.eventService.dispatchEvent(l)}isCellFocused(i){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(i,this.focusedCellPosition)}isRowNodeFocused(i){return this.isRowFocused(i.rowIndex,i.rowPinned)}isHeaderWrapperFocused(i){if(this.focusedHeaderPosition==null)return!1;const e=i.getColumnGroupChild(),t=i.getRowIndex(),s=i.getPinned(),{column:r,headerRowIndex:o}=this.focusedHeaderPosition;return e===r&&t===o&&s==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(i,e){this.focusedHeaderPosition={headerRowIndex:i,column:e}}focusHeaderPosition(i){if(this.gridOptionsService.get("suppressHeaderFocus"))return!1;const{direction:e,fromTab:t,allowUserOverride:s,event:r,fromCell:o,rowWithoutSpanValue:n}=i;let{headerPosition:l}=i;if(o&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(l);if(s){const d=this.getFocusedHeader(),c=this.headerNavigationService.getHeaderRowCount();if(t){const h=this.gridOptionsService.getCallback("tabToNextHeader");h&&(l=h({backwards:e==="Before",previousHeaderPosition:d,nextHeaderPosition:l,headerRowCount:c}))}else{const h=this.gridOptionsService.getCallback("navigateToNextHeader");if(h&&r){const p={key:r.key,previousHeaderPosition:d,nextHeaderPosition:l,headerRowCount:c,event:r};l=h(p)}}}if(!l)return!1;if(l.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(l):this.focusGridView(l.column);this.headerNavigationService.scrollToColumn(l.column,e);const u=this.ctrlsService.getHeaderRowContainerCtrl(l.column.getPinned()).focusHeader(l.headerRowIndex,l.column,r);return u&&(n!=null||o)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(n??-1),u}focusFirstHeader(){let i=this.columnModel.getAllDisplayedColumns()[0];if(!i)return!1;i.getParent()&&(i=this.columnModel.getColumnGroupAtLevel(i,0));const e=this.headerPositionUtils.getHeaderIndexToFocus(i,0);return this.focusHeaderPosition({headerPosition:e,rowWithoutSpanValue:0})}focusLastHeader(i){const e=this.headerNavigationService.getHeaderRowCount()-1,t=Ze(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:t},rowWithoutSpanValue:-1,event:i})}focusPreviousFromFirstCell(i){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(i)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(i,e){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===i&&this.focusedCellPosition.rowPinned===zo(e)}findFocusableElements(i,e,t=!1){const s=ck;let r=hP;e&&(r+=", "+e),t&&(r+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(i.querySelectorAll(s)).filter(a=>hr(a)),n=Array.prototype.slice.apply(i.querySelectorAll(r));return n.length?((a,u)=>a.filter(d=>u.indexOf(d)===-1))(o,n):o}focusInto(i,e=!1,t=!1){const s=this.findFocusableElements(i,null,t),r=e?Ze(s):s[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(i,e){if(!e)return null;const t=this.findFocusableElements(i),s=t.indexOf(e);if(s===-1)return null;let r=-1;for(let o=s-1;o>=0;o--)if(t[o].classList.contains("ag-tab-guard-top")){r=o;break}return r<=0?null:t[r-1]}findNextFocusableElement(i=this.eGridDiv,e,t){const s=this.findFocusableElements(i,e?':not([tabindex="-1"])':null),o=this.gridOptionsService.getDocument().activeElement;let n;e?n=s.findIndex(a=>a.contains(o)):n=s.indexOf(o);const l=n+(t?-1:1);return l<0||l>=s.length?null:s[l]}isTargetUnderManagedComponent(i,e){if(!e)return!1;const t=i.querySelectorAll(`.${ql.FOCUS_MANAGED_CLASS}`);if(!t.length)return!1;for(let s=0;s<t.length;s++)if(t[s].contains(e))return!0;return!1}findTabbableParent(i,e=5){let t=0;for(;i&&vv(i)===null&&++t<=e;)i=i.parentElement;return vv(i)===null?null:i}focusGridView(i,e){if(this.gridOptionsService.get("suppressCellFocus"))return e?this.gridOptionsService.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const t=e?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!t)return!1;const{rowIndex:s,rowPinned:r}=t,o=this.getFocusedHeader();if(!i&&o&&(i=o.column),s==null||!i)return!1;if(this.navigationService.ensureCellVisible({rowIndex:s,column:i,rowPinned:r}),this.setFocusedCell({rowIndex:s,column:i,rowPinned:zo(r),forceBrowserFocus:!0}),this.rangeService){const n={rowIndex:s,rowPinned:r,column:i};this.rangeService.setRangeToCell(n)}return!0}focusNextGridCoreContainer(i,e=!1){return!e&&this.gridCtrl.focusNextInnerContainer(i)?!0:((e||!i&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(i),!1)}focusAdvancedFilter(i){return this.advancedFilterFocusColumn=i==null?void 0:i.column,this.advancedFilterService.getCtrl().focusHeaderComp()}focusNextFromAdvancedFilter(i,e){var t,s;const r=(s=e?void 0:this.advancedFilterFocusColumn)!=null?s:(t=this.columnModel.getAllDisplayedColumns())==null?void 0:t[0];return i?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(r)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};pt.keyboardModeActive=!1;pt.instanceCount=0;f([D("eGridDiv")],pt.prototype,"eGridDiv",2);f([D("columnModel")],pt.prototype,"columnModel",2);f([D("headerNavigationService")],pt.prototype,"headerNavigationService",2);f([D("headerPositionUtils")],pt.prototype,"headerPositionUtils",2);f([D("rowRenderer")],pt.prototype,"rowRenderer",2);f([D("rowPositionUtils")],pt.prototype,"rowPositionUtils",2);f([D("cellPositionUtils")],pt.prototype,"cellPositionUtils",2);f([Qe("rangeService")],pt.prototype,"rangeService",2);f([D("navigationService")],pt.prototype,"navigationService",2);f([D("ctrlsService")],pt.prototype,"ctrlsService",2);f([D("filterManager")],pt.prototype,"filterManager",2);f([Qe("advancedFilterService")],pt.prototype,"advancedFilterService",2);f([K],pt.prototype,"init",1);pt=f([ie("focusService")],pt);var gL=class extends U{setMouseOver(i){this.selectedColumns=i;const e={type:y.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}clearMouseOver(){this.selectedColumns=null;const i={type:y.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(i)}isHovered(i){return!!this.selectedColumns&&this.selectedColumns.indexOf(i)>=0}};gL=f([ie("columnHoverService")],gL);var Fv=class extends U{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(i=>this.gridBodyCtrl=i.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(i){this.suppressAnimation=i}start(){this.active||this.gridOptionsService.get("suppressColumnMoveAnimation")||this.gridOptionsService.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(i){this.active?this.executeNextFuncs.push(i):i()}executeLaterVMTurn(i){this.active?this.executeLaterFuncs.push(i):i()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const i=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===i&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(i){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){i();return}const e=t=>{for(;t.length;){const s=t.pop();s&&s()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>e(this.executeNextFuncs),0),window.setTimeout(()=>{e(this.executeLaterFuncs),i()},200)})}};f([D("ctrlsService")],Fv.prototype,"ctrlsService",2);f([K],Fv.prototype,"postConstruct",1);Fv=f([ie("columnAnimationService")],Fv);var vg=class extends U{postConstruct(){this.ctrlsService.whenReady(i=>{this.centerRowContainerCon=i.centerRowContainerCtrl,this.addManagedListener(this.eventService,y.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,y.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gridOptionsService.get("paginationAutoPageSize")||this.centerRowContainerCon==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const i=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(i>0){const e=()=>{const t=this.gridOptionsService.getRowHeightAsNumber(),s=Math.floor(i/t);this.paginationProxy.setPageSize(s,"autoCalculated")};this.isBodyRendered?ns(()=>e(),50)():(e(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};f([D("ctrlsService")],vg.prototype,"ctrlsService",2);f([D("paginationProxy")],vg.prototype,"paginationProxy",2);f([K],vg.prototype,"postConstruct",1);vg=f([ie("paginationAutoPageSizeService")],vg);var lT=class extends U{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gridOptionsService.get("valueCache"),this.neverExpires=this.gridOptionsService.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(i,e,t){this.active&&(i.__cacheVersion!==this.cacheVersion&&(i.__cacheVersion=this.cacheVersion,i.__cacheData={}),i.__cacheData[e]=t)}getValue(i,e){if(!(!this.active||i.__cacheVersion!==this.cacheVersion))return i.__cacheData[e]}};f([K],lT.prototype,"init",1);lT=f([ie("valueCache")],lT);var R4="paste",Sg=class extends U{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,y.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(i){i.source!==R4&&this.doChangeDetection(i.node,i.column)}doChangeDetection(i,e){if(this.gridOptionsService.get("suppressChangeDetection"))return;const t=[i];if(this.clientSideRowModel&&!i.isRowPinned()){const s=this.gridOptionsService.get("aggregateOnlyChangedColumns"),r=new cw(s,this.clientSideRowModel.getRootNode());r.addParentNode(i.parent,[e]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst(o=>{t.push(o)})}this.rowRenderer.refreshCells({rowNodes:t})}};f([D("rowModel")],Sg.prototype,"rowModel",2);f([D("rowRenderer")],Sg.prototype,"rowRenderer",2);f([K],Sg.prototype,"init",1);Sg=f([ie("changeDetectionService")],Sg);var aT=class extends U{adaptFunction(i,e){const t=this.componentMetadataProvider.retrieve(i);return t&&t.functionAdapter?t.functionAdapter(e):null}adaptCellRendererFunction(i){class e{refresh(s){return!1}getGui(){return this.eGui}init(s){const r=i(s),o=typeof r;if(o==="string"||o==="number"||o==="boolean"){this.eGui=Is("<span>"+r+"</span>");return}if(r==null){this.eGui=Is("<span></span>");return}this.eGui=r}}return e}doesImplementIComponent(i){return i?i.prototype&&"getGui"in i.prototype:!1}};f([D("componentMetadataProvider")],aT.prototype,"componentMetadataProvider",2);aT=f([ie("agComponentUtils")],aT);var Ov=class extends U{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(i){return this.componentMetaData[i]}};f([D("agComponentUtils")],Ov.prototype,"agComponentUtils",2);f([K],Ov.prototype,"postConstruct",1);Ov=f([ie("componentMetadataProvider")],Ov);var T4=25,fL=10,ky=8,D4=4,Vy=4,Hy=6,b4=16,mL=14,By=8,P4={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:D4*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:ky*7,headerCellMinWidth:48,listItemHeight:ky*4,rowHeight:ky*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:Vy*8,headerCellMinWidth:24,listItemHeight:Vy*6,rowHeight:Vy*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:Hy*8,headerCellMinWidth:36,listItemHeight:Hy*4,rowHeight:Hy*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:mL+By*4.25,headerCellMinWidth:36,listItemHeight:b4+By,rowHeight:mL+By*3.5,chartMenuPanelWidth:260}},CL={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Lv=class extends U{constructor(){super(...arguments),this.calculatedSizes={}}postConstruct(){var i;const e=(i=this.getTheme().el)!=null?i:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(e||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){const i={type:y.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(i)}getSassVariable(i){const{themeFamily:e,el:t}=this.getTheme();if(!e||e.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[e]||(this.calculatedSizes[e]={});const s=this.calculatedSizes[e][i];return s??(this.calculatedSizes[e][i]=this.calculateValueForSassProperty(i,e,t),this.calculatedSizes[e][i])}calculateValueForSassProperty(i,e,t){const s="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),r=P4[s][i],o=this.gridOptionsService.getDocument();if(t||(t=this.eGridDiv),!CL[i])return r;const n=CL[i],l=o.createElement("div"),a=Array.from(t.classList);l.classList.add(e,...a),l.style.position="absolute";const u=n.reduce((c,h)=>{const p=o.createElement("div");return p.style.position="static",p.classList.add(h),c.appendChild(p),p},l);let d=0;if(o.body){o.body.appendChild(l);const c=i.toLowerCase().indexOf("height")!==-1?"height":"width";d=parseInt(window.getComputedStyle(u)[c],10),o.body.removeChild(l)}return d||r}isThemeDark(){const{theme:i}=this.getTheme();return!!i&&i.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){const i=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let e=this.eGridDiv,t=null,s=[];for(;e;)if(t=i.exec(e.className),!t)e=e.parentElement||void 0;else{const o=e.className.match(i);o&&(s=o);break}if(!t)return{allThemes:s};const r=t[0];return{theme:r,el:e,themeFamily:r.replace(/-dark$/,""),allThemes:s}}getFromTheme(i,e){var t;return(t=this.getSassVariable(e))!=null?t:i}getDefaultRowHeight(){return this.getFromTheme(T4,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){const i=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),e=this.gridOptionsService.get("rowHeight");if(e==null||isNaN(e)||!isFinite(e))return i!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const t=`${e}px`;return i!=t?(this.eGridDiv.style.setProperty("--ag-line-height",t),e):i!=""?parseFloat(i):-1}getMinColWidth(){const i=this.getFromTheme(null,"headerCellMinWidth");return H(i)?Math.max(i,fL):fL}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};f([D("eGridDiv")],Lv.prototype,"eGridDiv",2);f([K],Lv.prototype,"postConstruct",1);Lv=f([ie("environment")],Lv);var wg=class extends U{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(i){this.logger=i.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,y.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=ik(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const i=this.scrollY/this.maxScrollY,e=i*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${e} (${this.pixelsToShave} * ${i})`),this.setDivStretchOffset(e)}setUiContainerHeight(i){i!==this.uiContainerHeight&&(this.uiContainerHeight=i,this.eventService.dispatchEvent({type:y.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(i){const e=typeof i=="number"?Math.floor(i):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventService.dispatchEvent({type:y.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(i){this.modelHeight=i,this.stretching=i!=null&&this.maxDivHeight>0&&i>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(i){return i-this.divStretchOffset}getUiBodyHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(i){if(this.pixelsToShave<=0)return i;const e=this.modelHeight-this.getUiBodyHeight(),t=i/e;return this.maxScrollY*t}};f([D("ctrlsService")],wg.prototype,"ctrlsService",2);f([oo(0,no("loggerFactory"))],wg.prototype,"agWire",1);f([K],wg.prototype,"postConstruct",1);wg=f([ie("rowContainerHeightService")],wg);var yg=class extends U{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(i=!1){const e=!!this.gridOptionsService.get("rowSelection"),t=this.gridOptionsService.get("isRowSelectable");if(!e||!t)return;const s=this.gridOptionsService.get("groupSelectsChildren"),r=this.rowModel.getType()==="clientSide"&&s,o=[],n=l=>{if(i&&!l.group)return;if(r&&l.group){const u=l.childrenAfterGroup.some(d=>d.selectable===!0);l.setRowSelectable(u,!0);return}const a=t?t(l):!0;l.setRowSelectable(a,!0),!a&&l.isSelected()&&o.push(l)};if(r){const l=this.rowModel;new cw(!1,l.getRootNode()).forEachChangedNodeDepthFirst(n,!0,!0)}else this.rowModel.forEachNode(n);o.length&&this.selectionService.setNodesSelected({nodes:o,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof Ic&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};f([D("rowModel")],yg.prototype,"rowModel",2);f([D("selectionService")],yg.prototype,"selectionService",2);f([K],yg.prototype,"init",1);yg=f([ie("selectableService")],yg);var Cr=class extends be{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const i=this.gridOptionsService.get("enableRtl");this.setTemplate(this.getTemplate());const{btFirst:e,btPrevious:t,btNext:s,btLast:r,pageSizeComp:o}=this;this.activateTabIndex([e,t,s,r]),e.insertAdjacentElement("afterbegin",Nt(i?"last":"first",this.gridOptionsService)),t.insertAdjacentElement("afterbegin",Nt(i?"next":"previous",this.gridOptionsService)),s.insertAdjacentElement("afterbegin",Nt(i?"previous":"next",this.gridOptionsService)),r.insertAdjacentElement("afterbegin",Nt(i?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){const e=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,y.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(i=>{const{el:e,fn:t}=i;this.addManagedListener(e,"click",t),this.addManagedListener(e,"keydown",s=>{(s.key===_.ENTER||s.key===_.SPACE)&&(s.preventDefault(),t())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const i=this.paginationProxy.getTotalPages()>0,e=this.paginationProxy.getCurrentPage(),t=i?e+1:0;this.lbCurrent.textContent=this.formatNumber(t)}formatNumber(i){const e=this.gridOptionsService.getCallback("paginationNumberFormatter");if(e)return e({value:i});const t=this.localeService.getLocaleTextFunc(),s=t("thousandSeparator",","),r=t("decimalSeparator",".");return cP(i,s,r)}getTemplate(){const i=this.localeService.getLocaleTextFunc(),e=i("page","Page"),t=i("to","to"),s=i("of","of"),r=i("firstPage","First Page"),o=i("previousPage","Previous Page"),n=i("nextPage","Next Page"),l=i("lastPage","Last Page"),a=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${a}">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${a}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${a}-to">${t}</span>
                    <span id="ag-${a}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${a}-of">${s}</span>
                    <span id="ag-${a}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${a}-start-page">${e}</span>
                        <span id="ag-${a}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${a}-of-page">${s}</span>
                        <span id="ag-${a}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${l}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const i=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=i===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),r=i===t-1;this.nextButtonDisabled=r||s,this.lastButtonDisabled=!e||s||i===t-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(i,e){tP(i,e),i.classList.toggle("ag-disabled",e)}updateRowLabels(){const i=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.getPageSize(),t=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let r,o;if(this.isZeroPagesToDisplay()?r=o=0:(r=e*i+1,o=r+e-1,t&&o>s&&(o=s)),this.lbFirstRowOnPage.textContent=this.formatNumber(r),this.rowNodeBlockLoader.isLoading()){const n=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=n("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(o)}isZeroPagesToDisplay(){const i=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages();return i&&e===0}setTotalLabels(){const i=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages(),t=i?this.paginationProxy.getMasterRowCount():null;if(t===1){const s=this.paginationProxy.getRow(0);if(s&&s.group&&!(s.groupData||s.aggData)){this.setTotalLabelsToZero();return}}if(i)this.lbTotal.textContent=this.formatNumber(e),this.lbRecordCount.textContent=this.formatNumber(t);else{const s=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=s,this.lbRecordCount.innerHTML=s}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};f([D("paginationProxy")],Cr.prototype,"paginationProxy",2);f([D("rowNodeBlockLoader")],Cr.prototype,"rowNodeBlockLoader",2);f([q("btFirst")],Cr.prototype,"btFirst",2);f([q("btPrevious")],Cr.prototype,"btPrevious",2);f([q("btNext")],Cr.prototype,"btNext",2);f([q("btLast")],Cr.prototype,"btLast",2);f([q("lbRecordCount")],Cr.prototype,"lbRecordCount",2);f([q("lbFirstRowOnPage")],Cr.prototype,"lbFirstRowOnPage",2);f([q("lbLastRowOnPage")],Cr.prototype,"lbLastRowOnPage",2);f([q("lbCurrent")],Cr.prototype,"lbCurrent",2);f([q("lbTotal")],Cr.prototype,"lbTotal",2);f([q("pageSizeComp")],Cr.prototype,"pageSizeComp",2);f([K],Cr.prototype,"postConstruct",1);var pw=class HV extends be{constructor(){super(HV.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(e,t){const s=this.eOverlayWrapper.classList;s.toggle("ag-layout-auto-height",t.autoHeight),s.toggle("ag-layout-normal",t.normal),s.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new sw(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,s){this.inProgress||(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(r=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(r.getGui()),this.activeOverlay=r,this.updateListenerDestroyFunc=s,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var e;if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(e=this.updateListenerDestroyFunc)==null||e.call(this),ni(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};pw.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`;f([D("overlayService")],pw.prototype,"overlayService",2);f([q("eOverlayWrapper")],pw.prototype,"eOverlayWrapper",2);f([K],pw.prototype,"postConstruct",1);var Eg=class extends U{getFirstRow(){let i=0,e;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,i=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),e===void 0?null:{rowIndex:i,rowPinned:e}}getLastRow(){let i,e=null;const t=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return t?(e="bottom",i=t-1):this.rowModel.getRowCount()?(e=null,i=this.paginationProxy.getPageLastRow()):s&&(e="top",i=s-1),i===void 0?null:{rowIndex:i,rowPinned:e}}getRowNode(i){switch(i.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[i.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[i.rowIndex];default:return this.rowModel.getRow(i.rowIndex)}}sameRow(i,e){return!i&&!e?!0:i&&!e||!i&&e?!1:i.rowIndex===e.rowIndex&&i.rowPinned==e.rowPinned}before(i,e){switch(i.rowPinned){case"top":if(e.rowPinned!=="top")return!0;break;case"bottom":if(e.rowPinned!=="bottom")return!1;break;default:if(H(e.rowPinned))return e.rowPinned!=="top";break}return i.rowIndex<e.rowIndex}rowMax(i){let e;return i.forEach(t=>{(e===void 0||this.before(e,t))&&(e=t)}),e}rowMin(i){let e;return i.forEach(t=>{(e===void 0||this.before(t,e))&&(e=t)}),e}};f([D("rowModel")],Eg.prototype,"rowModel",2);f([D("pinnedRowModel")],Eg.prototype,"pinnedRowModel",2);f([D("paginationProxy")],Eg.prototype,"paginationProxy",2);Eg=f([ie("rowPositionUtils")],Eg);var vL=class extends U{createId(i){const{rowIndex:e,rowPinned:t,column:s}=i;return this.createIdFromValues({rowIndex:e,column:s,rowPinned:t})}createIdFromValues(i){const{rowIndex:e,rowPinned:t,column:s}=i;return`${e}.${t??"null"}.${s.getId()}`}equals(i,e){const t=i.column===e.column,s=i.rowPinned===e.rowPinned,r=i.rowIndex===e.rowIndex;return t&&s&&r}};vL=f([ie("cellPositionUtils")],vL);var Yh=class{constructor(i){this.cellValueChanges=i}},Wy=class extends Yh{constructor(i,e,t,s){super(i),this.initialRange=e,this.finalRange=t,this.ranges=s}},BV=class WV{constructor(e){this.actionStack=[],this.maxStackSize=e||WV.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};BV.DEFAULT_STACK_SIZE=10;var SL=BV,yo=class extends U{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=i=>{const e={column:i.column,rowIndex:i.rowIndex,rowPinned:i.rowPinned},t=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,e),s=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,e);if(!(t||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:n,column:l,oldValue:a,value:u}=i,d={rowPinned:o,rowIndex:n,columnId:l.getColId(),newValue:u,oldValue:a};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gridOptionsService.get("undoRedoCellEditing"))return;const i=this.gridOptionsService.get("undoRedoCellEditingLimit");i<=0||(this.undoStack=new SL(i),this.redoStack=new SL(i),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,y.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,y.EVENT_MODEL_UPDATED,e=>{e.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,y.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,y.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,y.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,y.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(i){const e={type:y.EVENT_UNDO_STARTED,source:i};this.eventService.dispatchEvent(e);const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),s={type:y.EVENT_UNDO_ENDED,source:i,operationPerformed:t};this.eventService.dispatchEvent(s)}redo(i){const e={type:y.EVENT_REDO_STARTED,source:i};this.eventService.dispatchEvent(e);const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),s={type:y.EVENT_REDO_ENDED,source:i,operationPerformed:t};this.eventService.dispatchEvent(s)}undoRedo(i,e,t,s,r){if(!i)return!1;const o=i.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,n=>n[s],r),o instanceof Wy?this.processRange(o.ranges||[o[t]]):this.processCell(o.cellValueChanges),e.push(o),!0)}processAction(i,e,t){i.cellValueChanges.forEach(s=>{const{rowIndex:r,rowPinned:o,columnId:n}=s,l={rowIndex:r,rowPinned:o},a=this.getRowNode(l);a.displayed&&a.setDataValue(n,e(s),t)})}processRange(i){let e;this.rangeService.removeAllCellRanges(!0),i.forEach((t,s)=>{if(!t)return;const r=t.startRow,o=t.endRow;s===i.length-1&&(e={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:t.startColumn.getColId()},this.setLastFocusedCell(e));const n={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:t.startColumn,columns:t.columns};this.rangeService.addCellRange(n)})}processCell(i){const e=i[0],{rowIndex:t,rowPinned:s}=e,r={rowIndex:t,rowPinned:s},o=this.getRowNode(r),n={rowPinned:e.rowPinned,rowIndex:o.rowIndex,columnId:e.columnId};this.setLastFocusedCell(n,!!this.rangeService)}setLastFocusedCell(i,e){const{rowIndex:t,columnId:s,rowPinned:r}=i,o=this.gridBodyCtrl.getScrollFeature(),n=this.columnModel.getGridColumn(s);if(!n)return;o.ensureIndexVisible(t),o.ensureColumnVisible(n);const l={rowIndex:t,column:n,rowPinned:r};this.focusService.setFocusedCell(At(pe({},l),{forceBrowserFocus:!0})),e&&this.rangeService.setRangeToCell(l)}addRowEditingListeners(){this.addManagedListener(this.eventService,y.EVENT_ROW_EDITING_STARTED,i=>{this.activeRowEdit={rowIndex:i.rowIndex,rowPinned:i.rowPinned}}),this.addManagedListener(this.eventService,y.EVENT_ROW_EDITING_STOPPED,()=>{const i=new Yh(this.cellValueChanges);this.pushActionsToUndoStack(i),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,y.EVENT_CELL_EDITING_STARTED,i=>{this.activeCellEdit={column:i.column,rowIndex:i.rowIndex,rowPinned:i.rowPinned}}),this.addManagedListener(this.eventService,y.EVENT_CELL_EDITING_STOPPED,i=>{if(this.activeCellEdit=null,i.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const t=new Yh(this.cellValueChanges);this.pushActionsToUndoStack(t)}})}addPasteListeners(){this.addManagedListener(this.eventService,y.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,y.EVENT_PASTE_END,()=>{const i=new Yh(this.cellValueChanges);this.pushActionsToUndoStack(i),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,y.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,y.EVENT_FILL_END,i=>{const e=new Wy(this.cellValueChanges,i.initialRange,i.finalRange);this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,y.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,y.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let i;this.rangeService&&this.gridOptionsService.get("enableRangeSelection")?i=new Wy(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):i=new Yh(this.cellValueChanges),this.pushActionsToUndoStack(i),this.isRangeInAction=!1})}pushActionsToUndoStack(i){this.undoStack.push(i),this.cellValueChanges=[],this.redoStack.clear()}getRowNode(i){switch(i.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[i.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[i.rowIndex];default:return this.rowModel.getRow(i.rowIndex)}}};f([D("focusService")],yo.prototype,"focusService",2);f([D("ctrlsService")],yo.prototype,"ctrlsService",2);f([D("rowModel")],yo.prototype,"rowModel",2);f([D("pinnedRowModel")],yo.prototype,"pinnedRowModel",2);f([D("cellPositionUtils")],yo.prototype,"cellPositionUtils",2);f([D("rowPositionUtils")],yo.prototype,"rowPositionUtils",2);f([D("columnModel")],yo.prototype,"columnModel",2);f([Qe("rangeService")],yo.prototype,"rangeService",2);f([K],yo.prototype,"init",1);yo=f([ie("undoRedoService")],yo);var Iv=class extends U{findHeader(i,e){let t,s,r;if(i.column instanceof Si?(s=`getDisplayedGroup${e}`,t=this.columnModel[s](i.column)):(r=`getDisplayedCol${e}`,t=this.columnModel[r](i.column)),!t)return;let{headerRowIndex:o}=i;if(this.getHeaderRowType(o)!=="filter"){const a=[t];for(;t.getParent();)t=t.getParent(),a.push(t);t=a[a.length-1-o]}const{column:n,headerRowIndex:l}=this.getHeaderIndexToFocus(t,o);return{column:n,headerRowIndex:l}}getHeaderIndexToFocus(i,e){let t;if(i instanceof Si&&this.isAnyChildSpanningHeaderHeight(i)&&i.isPadding()){const s=i;t=s.getLeafColumns()[0];let r=t;for(;r!==s;)e++,r=r.getParent()}return{column:t||i,headerRowIndex:e}}isAnyChildSpanningHeaderHeight(i){return i?i.getLeafColumns().some(e=>e.isSpanHeaderHeight()):!1}getColumnVisibleParent(i,e){const t=this.getHeaderRowType(e),s=t==="filter",r=t==="column";let o=s?i:i.getParent(),n=e-1,l=n;if(r&&this.isAnyChildSpanningHeaderHeight(i.getParent())){for(;o&&o.isPadding();)o=o.getParent(),n--;l=n,n<0&&(o=i,n=e,l=void 0)}return{column:o,headerRowIndex:n,headerRowIndexWithoutSpan:l}}getColumnVisibleChild(i,e,t="After"){const s=this.getHeaderRowType(e);let r=i,o=e+1,n=o;if(s==="group"){const l=i.getDisplayedLeafColumns(),a=t==="After"?l[0]:Ze(l),u=[];let d=a;for(;d.getParent()!==i;)d=d.getParent(),u.push(d);if(r=a,a.isSpanHeaderHeight())for(let c=u.length-1;c>=0;c--){const h=u[c];if(!h.isPadding()){r=h;break}o++}else r=Ze(u),r||(r=a)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:n}}getHeaderRowType(i){const e=this.ctrlsService.getHeaderRowContainerCtrl();if(e)return e.getRowType(i)}findColAtEdgeForHeaderRow(i,e){const t=this.columnModel.getAllDisplayedColumns(),s=t[e==="start"?0:t.length-1];if(!s)return;const o=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()).getRowType(i);if(o=="group"){const n=this.columnModel.getColumnGroupAtLevel(s,i);return{headerRowIndex:i,column:n}}return{headerRowIndex:o==null?-1:i,column:s}}};f([D("columnModel")],Iv.prototype,"columnModel",2);f([D("ctrlsService")],Iv.prototype,"ctrlsService",2);Iv=f([ie("headerPositionUtils")],Iv);var wL=class{buildColumnDefs(i,e,t){const s=[],r={};return i.forEach(o=>{const n=this.createDefFromColumn(o,e,t);let l=!0,a=n,u=o.getOriginalParent(),d=null;for(;u;){let c=null;if(u.isPadding()){u=u.getOriginalParent();continue}const h=r[u.getGroupId()];if(h){h.children.push(a),l=!1;break}if(c=this.createDefFromGroup(u),c&&(c.children=[a],r[c.groupId]=c,a=c,u=u.getOriginalParent()),u!=null&&d===u){l=!1;break}d=u}l&&s.push(a)}),s}createDefFromGroup(i){const e=hv(i.getColGroupDef(),["children"]);return e&&(e.groupId=i.getGroupId()),e}createDefFromColumn(i,e,t){const s=hv(i.getColDef());return s.colId=i.getColId(),s.width=i.getActualWidth(),s.rowGroup=i.isRowGroupActive(),s.rowGroupIndex=i.isRowGroupActive()?e.indexOf(i):null,s.pivot=i.isPivotActive(),s.pivotIndex=i.isPivotActive()?t.indexOf(i):null,s.aggFunc=i.isValueActive()?i.getAggFunc():null,s.hide=i.isVisible()?void 0:!0,s.pinned=i.isPinned()?i.getPinned():null,s.sort=i.getSort()?i.getSort():null,s.sortIndex=i.getSortIndex()!=null?i.getSortIndex():null,s}};wL=f([ie("columnDefFactory")],wL);var Mv=class{getInitialRowClasses(i){const e=[];return H(i.extraCssClass)&&e.push(i.extraCssClass),e.push("ag-row"),e.push(i.rowFocused?"ag-row-focus":"ag-row-no-focus"),i.fadeRowIn&&e.push("ag-opacity-zero"),e.push(i.rowIsEven?"ag-row-even":"ag-row-odd"),i.rowNode.isRowPinned()&&e.push("ag-row-pinned"),i.rowNode.isSelected()&&e.push("ag-row-selected"),i.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+i.rowLevel),i.rowNode.stub&&e.push("ag-row-loading"),i.fullWidthRow&&e.push("ag-full-width-row"),i.expandable&&(e.push("ag-row-group"),e.push(i.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),i.rowNode.dragging&&e.push("ag-row-dragging"),$R(e,this.processClassesFromGridOptions(i.rowNode)),$R(e,this.preProcessRowClassRules(i.rowNode)),e.push(i.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),i.firstRowOnPage&&e.push("ag-row-first"),i.lastRowOnPage&&e.push("ag-row-last"),i.fullWidthRow&&(i.pinned==="left"&&e.push("ag-cell-last-left-pinned"),i.pinned==="right"&&e.push("ag-cell-first-right-pinned")),e}processClassesFromGridOptions(i){const e=[],t=o=>{typeof o=="string"?e.push(o):Array.isArray(o)&&o.forEach(n=>e.push(n))},s=this.gridOptionsService.get("rowClass");if(s){if(typeof s=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];t(s)}const r=this.gridOptionsService.getCallback("getRowClass");if(r){const o={data:i.data,node:i,rowIndex:i.rowIndex},n=r(o);t(n)}return e}preProcessRowClassRules(i){const e=[];return this.processRowClassRules(i,t=>{e.push(t)},t=>{}),e}processRowClassRules(i,e,t){const s=this.gridOptionsService.addGridCommonParams({data:i.data,node:i,rowIndex:i.rowIndex});this.stylingService.processClassRules(void 0,this.gridOptionsService.get("rowClassRules"),s,e,t)}calculateRowLevel(i){return i.group?i.level:i.parent?i.parent.level+1:0}};f([D("stylingService")],Mv.prototype,"stylingService",2);f([D("gridOptionsService")],Mv.prototype,"gridOptionsService",2);Mv=f([ie("rowCssClassCalculator")],Mv);var Rg=class extends U{init(){this.isAccentedSort=this.gridOptionsService.get("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",i=>this.isAccentedSort=i.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup())}doFullSort(i,e){const t=(r,o)=>({currentPos:o,rowNode:r}),s=i.map(t);return s.sort(this.compareRowNodes.bind(this,e)),s.map(r=>r.rowNode)}compareRowNodes(i,e,t){const s=e.rowNode,r=t.rowNode;for(let o=0,n=i.length;o<n;o++){const l=i[o],a=l.sort==="desc",u=this.getValue(s,l.column),d=this.getValue(r,l.column);let c;const h=this.getComparator(l,s);if(h?c=h(u,d,s,r,a):c=tt.defaultComparator(u,d,this.isAccentedSort),!isNaN(c)&&c!==0)return l.sort==="asc"?c:c*-1}return e.currentPos-t.currentPos}getComparator(i,e){const t=i.column,s=t.getColDef().comparator;if(s!=null)return s;if(!t.getColDef().showRowGroup)return;const r=!e.group&&t.getColDef().field;if(!r)return;const o=this.columnModel.getPrimaryColumn(r);if(o)return o.getColDef().comparator}getValue(i,e){var t,s;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(e,i,!1,!1);if(i.rowGroupColumn===e){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){const l=(t=i.allLeafChildren)==null?void 0:t[0];return l?this.valueService.getValue(e,l,!1,!1):void 0}const n=this.columnModel.getGroupDisplayColumnForGroup(e.getId());return n?(s=i.groupData)==null?void 0:s[n.getId()]:void 0}if(!(i.group&&e.getColDef().showRowGroup))return this.valueService.getValue(e,i,!1,!1)}};f([D("valueService")],Rg.prototype,"valueService",2);f([D("columnModel")],Rg.prototype,"columnModel",2);f([K],Rg.prototype,"init",1);Rg=f([ie("rowNodeSorter")],Rg);var eC=class extends U{constructor(){super(...arguments),this.ready=!1,this.readyCallbacks=[]}checkReady(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollComp!=null&&this.fakeVScrollComp!=null&&this.gridHeaderCtrl!=null,this.ready){const i=this.createReadyParams();this.readyCallbacks.forEach(e=>e(i)),this.readyCallbacks.length=0}}whenReady(i){this.ready?i(this.createReadyParams()):this.readyCallbacks.push(i)}createReadyParams(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}}registerFakeHScrollComp(i){this.fakeHScrollComp=i,this.checkReady()}registerFakeVScrollComp(i){this.fakeVScrollComp=i,this.checkReady()}registerGridHeaderCtrl(i){this.gridHeaderCtrl=i,this.checkReady()}registerCenterRowContainerCtrl(i){this.centerRowContainerCtrl=i,this.checkReady()}registerLeftRowContainerCtrl(i){this.leftRowContainerCtrl=i,this.checkReady()}registerRightRowContainerCtrl(i){this.rightRowContainerCtrl=i,this.checkReady()}registerTopCenterRowContainerCtrl(i){this.topCenterRowContainerCtrl=i,this.checkReady()}registerTopLeftRowContainerCon(i){this.topLeftRowContainerCtrl=i,this.checkReady()}registerTopRightRowContainerCtrl(i){this.topRightRowContainerCtrl=i,this.checkReady()}registerStickyTopCenterRowContainerCtrl(i){this.stickyTopCenterRowContainerCtrl=i,this.checkReady()}registerStickyTopLeftRowContainerCon(i){this.stickyTopLeftRowContainerCtrl=i,this.checkReady()}registerStickyTopRightRowContainerCtrl(i){this.stickyTopRightRowContainerCtrl=i,this.checkReady()}registerBottomCenterRowContainerCtrl(i){this.bottomCenterRowContainerCtrl=i,this.checkReady()}registerBottomLeftRowContainerCtrl(i){this.bottomLeftRowContainerCtrl=i,this.checkReady()}registerBottomRightRowContainerCtrl(i){this.bottomRightRowContainerCtrl=i,this.checkReady()}registerHeaderContainer(i,e){switch(e){case"left":this.leftHeaderRowContainerCtrl=i;break;case"right":this.rightHeaderRowContainerCtrl=i;break;default:this.centerHeaderRowContainerCtrl=i;break}this.checkReady()}registerGridBodyCtrl(i){this.gridBodyCtrl=i,this.checkReady()}registerGridCtrl(i){this.gridCtrl=i,this.checkReady()}getFakeHScrollComp(){return this.fakeHScrollComp}getFakeVScrollComp(){return this.fakeVScrollComp}getGridHeaderCtrl(){return this.gridHeaderCtrl}getGridCtrl(){return this.gridCtrl}getCenterRowContainerCtrl(){return this.centerRowContainerCtrl}getTopCenterRowContainerCtrl(){return this.topCenterRowContainerCtrl}getBottomCenterRowContainerCtrl(){return this.bottomCenterRowContainerCtrl}getStickyTopCenterRowContainerCtrl(){return this.stickyTopCenterRowContainerCtrl}getGridBodyCtrl(){return this.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]}getHeaderRowContainerCtrl(i){switch(i){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}}};eC.NAME="ctrlsService";eC=f([ie(eC.NAME)],eC);var yL=class extends U{constructor(){super(...arguments),this.registry={}}register(i){this.registry[i.controllerName]=i.controllerClass}getInstance(i){const e=this.registry[i];if(e!=null)return new e}};yL=f([ie("ctrlsFactory")],yL);var zu=class extends be{constructor(i,e){super(i),this.direction=e,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,y.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",aP()||_n())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=dP(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const i=["mouseenter","mousedown","touchstart"],e=["mouseleave","touchend"],t=this.getGui();i.forEach(s=>this.addManagedListener(t,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),e.forEach(s=>this.addManagedListener(t,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,y.EVENT_BODY_SCROLL,i=>{i.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,y.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(i){const e=this.getViewport();Yb(()=>hr(e),()=>this.setScrollPosition(i),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(i){this.addManagedListener(this.getViewport(),"scroll",i)}};f([q("eViewport")],zu.prototype,"eViewport",2);f([q("eContainer")],zu.prototype,"eContainer",2);f([D("scrollVisibleService")],zu.prototype,"scrollVisibleService",2);f([D("ctrlsService")],zu.prototype,"ctrlsService",2);f([D("animationFrameService")],zu.prototype,"animationFrameService",2);var ph=class UV extends zu{constructor(){super(UV.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,y.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new nh(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsService.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.columnModel.getDisplayedColumnsRightWidth();const s=!this.enableRtl&&e,r=this.gridOptionsService.getScrollbarWidth();s&&(t+=r),_r(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=r);let o=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(o+=r),_r(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=r)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,s=this.gridOptionsService.get("suppressHorizontalScroll"),r=e&&this.gridOptionsService.getScrollbarWidth()||0,n=s?0:r===0&&t?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Ha(this.getGui(),n),Ha(this.eViewport,n),Ha(this.eContainer,n),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return pg(this.getViewport(),this.enableRtl)}setScrollPosition(e){hr(this.getViewport())||this.attemptSettingScrollPosition(e),gg(this.getViewport(),e,this.enableRtl)}};ph.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;f([q("eLeftSpacer")],ph.prototype,"eLeftSpacer",2);f([q("eRightSpacer")],ph.prototype,"eRightSpacer",2);f([D("columnModel")],ph.prototype,"columnModel",2);f([D("pinnedRowModel")],ph.prototype,"pinnedRowModel",2);f([K],ph.prototype,"postConstruct",1);var xv=class extends U{postConstruct(){const i=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,i),this.addManagedPropertyListener("domLayout",i)}checkContainerWidths(){const i=this.gridOptionsService.isDomLayout("print"),e=i?0:this.columnModel.getDisplayedColumnsLeftWidth(),t=i?0:this.columnModel.getDisplayedColumnsRightWidth();e!=this.leftWidth&&(this.leftWidth=e,this.eventService.dispatchEvent({type:y.EVENT_LEFT_PINNED_WIDTH_CHANGED})),t!=this.rightWidth&&(this.rightWidth=t,this.eventService.dispatchEvent({type:y.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};f([D("columnModel")],xv.prototype,"columnModel",2);f([K],xv.prototype,"postConstruct",1);xv=f([ie("pinnedWidthService")],xv);var Tg=class extends U{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(i){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(i);return}this.events.push(i);const e=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(t=>this.eventService.dispatchEvent(t)),this.events=[]};this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(e)),this.dispatchExpandedDebounced()}};f([D("animationFrameService")],Tg.prototype,"animationFrameService",2);f([D("rowModel")],Tg.prototype,"rowModel",2);f([K],Tg.prototype,"postConstruct",1);Tg=f([ie("rowNodeEventThrottle")],Tg);var A4={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},Un=(i,e)=>{var t;return((t=e.rowModelType)!=null?t:"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},F4={enableRowGroup:Un,rowGroup:Un,rowGroupIndex:Un,enablePivot:Un,enableValue:Un,pivot:Un,pivotIndex:Un,aggFunc:Un,cellEditor:i=>i.cellEditor==="agRichSelect"||i.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:i=>{var e;const t=["columnsMenuTab","generalMenuTab"];return(e=i.menuTabs)!=null&&e.some(s=>t.includes(s))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(i,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(i,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(i,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>bd},bd={objectName:"colDef",allProperties:EQ.ALL_PROPERTIES,docsUrl:"column-properties/",deprecations:A4,validations:F4},O4={enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."}},L4={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,pivotMaxGeneratedColumns:-1},I4={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:i=>{var e;const t=(e=i.rowModelType)!=null?e:"clientSide";switch(t){case"clientSide":const s=`treeData requires 'getDataPath' in the ${t} row model.`;return i.getDataPath?null:s;case"serverSide":const r=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return i.isServerSideGroup&&i.getServerSideGroupKey?null:r}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:i=>{var e;switch((e=i.rowModelType)!=null?e:"clientSide"){case"clientSide":return null;case"serverSide":return i.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>bd,defaultColDef:()=>bd,defaultColGroupDef:()=>bd,autoGroupColumnDef:()=>bd},M4={objectName:"gridOptions",allProperties:[...Jo.ALL_PROPERTIES,...V0.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:O4,validations:I4},lt=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Xo,this.globalEventHandlerFactory=i=>(e,t)=>{if(this.destroyed)return;const s=jm.has(e);if(s&&!i||!s&&i)return;const r=V0.getCallbackForEvent(e),o=this.gridOptions[r];typeof o=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{o(t)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new Av(this.api);const i=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),i),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(i){var e;return(e=this.gridOptions[i])!=null?e:L4[i]}getCallback(i){return this.mergeGridCommonParams(this.gridOptions[i])}exists(i){return H(this.gridOptions[i])}mergeGridCommonParams(i){return i&&(t=>{const s=t;return s.api=this.api,s.columnApi=this.columnApi,s.context=this.context,i(s)})}static toBoolean(i){return typeof i=="boolean"?i:typeof i=="string"?i.toUpperCase()==="TRUE"||i=="":!1}static toNumber(i){if(typeof i=="number")return i;if(typeof i=="string"){const e=parseInt(i);return isNaN(e)?void 0:e}}static toConstrainedNum(i,e){return t=>{const s=lt.toNumber(t);if(!(s==null||s<i||s>e))return s}}static getCoercedValue(i,e){const t=lt.PROPERTY_COERCIONS.get(i);return t?t(e):e}static getCoercedGridOptions(i){const e={};return Object.entries(i).forEach(([t,s])=>{const r=lt.getCoercedValue(t,s);e[t]=r}),e}updateGridOptions({options:i,source:e="api"}){const t={id:lt.changeSetId++,properties:[]},s=[];Object.entries(i).forEach(([r,o])=>{e==="api"&&fq[r]&&ve(`${r} is an initial property and cannot be updated.`);const n=lt.getCoercedValue(r,o),l=typeof n=="object"&&e==="api",a=this.gridOptions[r];if(l||a!==n){this.gridOptions[r]=n;const u={type:r,currentValue:n,previousValue:a,changeSet:t,source:e};s.push(u)}}),this.validationService.processGridOptions(this.gridOptions),t.properties=s.map(r=>r.type),s.forEach(r=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${r.type} from `,r.previousValue," to  ",r.currentValue),this.propertyEventService.dispatchEvent(r)})}addEventListener(i,e){this.propertyEventService.addEventListener(i,e)}removeEventListener(i,e){this.propertyEventService.removeEventListener(i,e)}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:ok();e!=null&&(this.scrollbarWidth=e,this.eventService.dispatchEvent({type:y.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(i){return this.gridOptions.rowModelType===i||i==="clientSide"&&Ee(this.gridOptions.rowModelType)}isDomLayout(i){var e;return((e=this.gridOptions.domLayout)!=null?e:"normal")===i}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(i,e=!1,t){if(t==null&&(t=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(e)return{height:t,estimated:!0};const r={node:i,data:i.data},o=this.getCallback("getRowHeight")(r);if(this.isNumeric(o))return o===0&&ve("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}return i.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:t,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Ee(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const i=this.environment.refreshRowHeightVariable();return i!==-1?i:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(i){return!isNaN(i)&&typeof i=="number"&&isFinite(i)}getDomDataKey(){return this.domDataKey}getDomData(i,e){const t=i[this.getDomDataKey()];return t?t[e]:void 0}setDomData(i,e,t){const s=this.getDomDataKey();let r=i[s];Ee(r)&&(r={},i[s]=r),r[e]=t}getDocument(){let i=null;return this.gridOptions.getDocument&&H(this.gridOptions.getDocument)?i=this.gridOptions.getDocument():this.eGridDiv&&(i=this.eGridDiv.ownerDocument),i&&H(i)?i:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getAsyncTransactionWaitMillis(){return H(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("suppressGroupRowsSticky")||this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){const i=this.gridOptions.autoGroupColumnDef;return!(i!=null&&i.comparator)&&!this.get("treeData")}getGroupAggFiltering(){const i=this.gridOptions.groupAggFiltering;if(typeof i=="function")return this.getCallback("groupAggFiltering");if(i===!0)return()=>!0}isGroupIncludeFooterTrueOrCallback(){const i=this.gridOptions.groupIncludeFooter;return i===!0||typeof i=="function"}getGroupIncludeFooter(){const i=this.gridOptions.groupIncludeFooter;return typeof i=="function"?this.getCallback("groupIncludeFooter"):i===!0?()=>!0:()=>!1}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(i){return i?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(i){const e=i;return e.api=this.api,e.columnApi=this.columnApi,e.context=this.context,e}};lt.PROPERTY_COERCIONS=new Map([...Jo.BOOLEAN_PROPERTIES.map(i=>[i,lt.toBoolean]),...Jo.NUMBER_PROPERTIES.map(i=>[i,lt.toNumber]),["groupAggFiltering",i=>typeof i=="function"?i:lt.toBoolean(i)],["pageSize",lt.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",lt.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",lt.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",lt.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",lt.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",lt.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",lt.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",lt.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",lt.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",lt.toConstrainedNum(0,Number.MAX_VALUE)]]);lt.changeSetId=0;f([D("gridOptions")],lt.prototype,"gridOptions",2);f([D("eventService")],lt.prototype,"eventService",2);f([D("environment")],lt.prototype,"environment",2);f([D("frameworkOverrides")],lt.prototype,"frameworkOverrides",2);f([D("eGridDiv")],lt.prototype,"eGridDiv",2);f([D("validationService")],lt.prototype,"validationService",2);f([D("gridApi")],lt.prototype,"api",2);f([K],lt.prototype,"init",1);f([Ur],lt.prototype,"destroy",1);lt=f([ie("gridOptionsService")],lt);var EL=class extends U{getLocaleTextFunc(){const i=this.gridOptionsService.getCallback("getLocaleText");if(i)return(t,s,r)=>i({key:t,defaultValue:s,variableValues:r});const e=this.gridOptionsService.get("localeText");return(t,s,r)=>{let o=e&&e[t];if(o&&r&&r.length){let n=0;for(;!(n>=r.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",r[n++])}return o??s}}};EL=f([ie("localeService")],EL);var zV=class $V extends zu{constructor(){super($V.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new ow(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,y.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,s=e&&this.gridOptionsService.getScrollbarWidth()||0,r=s===0&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),_r(this.getGui(),r),_r(this.eViewport,r),_r(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,s=e.getGridBodyCtrl().getBodyViewportElement(),r=this.getScrollPosition(),o=s.scrollTop;r!=o&&this.setScrollPosition(o,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,t){!t&&!hr(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}};zV.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;f([K],zV.prototype,"postConstruct",1);var RL={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},TL=["january","february","march","april","may","june","july","august","september","october","november","december"],_l=class extends U{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",i=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Dd(i.source))})}processDataTypeDefinitions(){var i;const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(e).forEach(([s,r])=>{this.dataTypeDefinitions[s]=At(pe({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})});const t=(i=this.gridOptionsService.get("dataTypeDefinitions"))!=null?i:{};this.dataTypeMatchers={},Object.entries(t).forEach(([s,r])=>{const o=this.processDataTypeDefinition(r,t,[s],e);o&&(this.dataTypeDefinitions[s]=o,r.dataTypeMatcher&&(this.dataTypeMatchers[s]=r.dataTypeMatcher))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(s=>{const r=this.dataTypeMatchers[s];r&&delete this.dataTypeMatchers[s],this.dataTypeMatchers[s]=r??e[s].dataTypeMatcher})}mergeDataTypeDefinitions(i,e){const t=pe(pe({},i),e);return i.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(t.columnTypes=[...this.convertColumnTypes(i.columnTypes),...this.convertColumnTypes(e.columnTypes)]),t}processDataTypeDefinition(i,e,t,s){let r;const o=i.extendsDataType;if(i.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),i.extendsDataType===i.baseDataType){let n=s[o];const l=e[o];if(n&&l&&(n=l),!this.validateDataTypeDefinition(i,n,o))return;r=this.mergeDataTypeDefinitions(n,i)}else{if(t.includes(o)){ve('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const n=e[o];if(!this.validateDataTypeDefinition(i,n,o))return;const l=this.processDataTypeDefinition(n,e,[...t,o],s);if(!l)return;r=this.mergeDataTypeDefinitions(l,i)}return At(pe({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})}validateDataTypeDefinition(i,e,t){return e?e.baseDataType!==i.baseDataType?(ve('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(ve(`The data type definition ${t} does not exist.`),!1)}createGroupSafeValueFormatter(i){if(i.valueFormatter)return e=>{var t,s;if((t=e.node)!=null&&t.group){const r=e.column.getAggFunc();if(r){if(r==="first"||r==="last")return i.valueFormatter(e);if(i.baseDataType==="number"&&r!=="count"){if(typeof e.value=="number")return i.valueFormatter(e);if(typeof e.value=="object"){if(!e.value)return;if("toNumber"in e.value)return i.valueFormatter(At(pe({},e),{value:e.value.toNumber()}));if("value"in e.value)return i.valueFormatter(At(pe({},e),{value:e.value.value}))}}}if(!this.gridOptionsService.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&e.column.isRowGroupActive()){if(typeof e.value!="string"||(s=i.dataTypeMatcher)!=null&&s.call(i,e.value))return i.valueFormatter(e);if(!this.gridOptionsService.get("suppressGroupMaintainValueType"))return}return i.valueFormatter(e)}}updateColDefAndGetDataTypeDefinitionColumnType(i,e,t){let{cellDataType:s}=e;const{field:r}=e;if(s===void 0&&(s=i.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(i,e)?this.inferCellDataType(r,t):!1),!s){i.cellDataType=!1;return}const o=this.dataTypeDefinitions[s];if(!o){ve(`Missing data type definition - "${s}"`);return}return i.cellDataType=s,o.groupSafeValueFormatter&&(i.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(i.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(i,o,t),o.columnTypes}updateColDefAndGetColumnType(i,e,t){var s,r;const o=this.updateColDefAndGetDataTypeDefinitionColumnType(i,e,t),n=(r=(s=e.type)!=null?s:o)!=null?r:i.type;return i.type=n,n?this.convertColumnTypes(n):void 0}addColumnListeners(i){if(!this.isWaitingForRowData)return;const e=this.columnStateUpdatesPendingInference[i.getColId()];if(!e)return;const t=s=>{e.add(s.key)};i.addEventListener(dt.EVENT_STATE_UPDATED,t),this.columnStateUpdateListenerDestroyFuncs.push(()=>i.removeEventListener(dt.EVENT_STATE_UPDATED,t))}canInferCellDataType(i,e){var t;if(this.rowModel.getType()!=="clientSide")return!1;const s={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(e,s))return!1;const r=e.type===null?i.type:e.type;if(r){const o=(t=this.gridOptionsService.get("columnTypes"))!=null?t:{};if(this.convertColumnTypes(r).some(l=>{const a=o[l.trim()];return a&&this.doColDefPropsPreventInference(a,s)}))return!1}return!this.doColDefPropsPreventInference(i,s)}doColDefPropsPreventInference(i,e){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([t,s])=>this.doesColDefPropPreventInference(i,e,t,s))}doesColDefPropPreventInference(i,e,t,s){if(!e[t])return!1;const r=i[t];return r===null?(e[t]=!1,!1):s===void 0?!!r:r===s}inferCellDataType(i,e){var t;if(!i)return;let s;const r=this.getInitialData();if(r){const n=i.indexOf(".")>=0&&!this.gridOptionsService.get("suppressFieldDotNotation");s=kd(r,i,n)}else this.initWaitForRowData(e);if(s==null)return;const[o]=(t=Object.entries(this.dataTypeMatchers).find(([n,l])=>l(s)))!=null?t:["object"];return o}getInitialData(){const i=this.gridOptionsService.get("rowData");if(i!=null&&i.length)return i[0];if(this.initialData)return this.initialData;{const e=this.rowModel.getRootNode().allLeafChildren;if(e!=null&&e.length)return e[0].data}return null}initWaitForRowData(i){if(this.columnStateUpdatesPendingInference[i]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const e=this.isColumnTypeOverrideInDataTypeDefinitions;e&&this.columnModel.queueResizeOperations();const t=this.addManagedListener(this.eventService,y.EVENT_ROW_DATA_UPDATE_STARTED,s=>{const{firstRowData:r}=s;if(!r)return;t==null||t(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(r,e),this.columnStateUpdatesPendingInference={},e&&this.columnModel.processResizeOperations();const o={type:y.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(o)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(i,e){this.initialData=i;const t=[];this.columnStateUpdateListenerDestroyFuncs.forEach(o=>o()),this.columnStateUpdateListenerDestroyFuncs=[];const s={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([o,n])=>{const l=this.columnModel.getGridColumn(o);if(!l)return;const a=l.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(l,"cellDataTypeInferred"))return;const u=l.getColDef();if(e&&u.type&&u.type!==a.type){const d=this.getUpdatedColumnState(l,n);d.rowGroup&&d.rowGroupIndex==null&&(s[o]=d),d.pivot&&d.pivotIndex==null&&(r[o]=d),t.push(d)}}),e&&t.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(s,r)),t.length&&this.columnModel.applyColumnState({state:t},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(i,e){const t=this.columnModel.getColumnStateFromColDef(i);return e.forEach(s=>{delete t[s],s==="rowGroup"?delete t.rowGroupIndex:s==="pivot"&&delete t.pivotIndex}),t}checkObjectValueHandlers(i){const e=this.dataTypeDefinitions.object,t=i.object;this.hasObjectValueParser=e.valueParser!==t.valueParser,this.hasObjectValueFormatter=e.valueFormatter!==t.valueFormatter}convertColumnTypes(i){let e=[];return i instanceof Array?i.some(s=>typeof s!="string")?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):e=i:typeof i=="string"?e=i.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),e}getDateStringTypeDefinition(i){var e;return i?(e=this.getDataTypeDefinition(i))!=null?e:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(i){return this.getDateStringTypeDefinition(i).dateParser}getDateFormatterFunction(i){return this.getDateStringTypeDefinition(i).dateFormatter}getDataTypeDefinition(i){const e=i.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]}getBaseDataType(i){var e;return(e=this.getDataTypeDefinition(i))==null?void 0:e.baseDataType}checkType(i,e){var t;if(e==null)return!0;const s=(t=this.getDataTypeDefinition(i))==null?void 0:t.dataTypeMatcher;return s?s(e):!0}validateColDef(i){i.cellDataType==="object"&&(i.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&ve('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),i.editable&&i.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&ve('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(i,e,t){const s=(l,a,u)=>{let d=l.getColDef().valueFormatter;return d===e.groupSafeValueFormatter&&(d=e.valueFormatter),this.valueFormatterService.formatValue(l,a,u,d)},r=wt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),o=this.localeService.getLocaleTextFunc(),n=l=>{const{filterParams:a}=i;i.filterParams=typeof a=="object"?pe(pe({},a),l):l};switch(e.baseDataType){case"number":{i.cellEditor="agNumberCellEditor",r&&n({comparator:(l,a)=>{const u=l==null?0:parseInt(l),d=a==null?0:parseInt(a);return u===d?0:u>d?1:-1}});break}case"boolean":{i.cellEditor="agCheckboxCellEditor",i.cellRenderer="agCheckboxCellRenderer",i.suppressKeyboardEvent=l=>!!l.colDef.editable&&l.event.key===_.SPACE,n(r?{valueFormatter:l=>H(l.value)?o(String(l.value),l.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(l,a)=>a,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(l,a)=>a===!1,numberOfInputs:0}]});break}case"date":{i.cellEditor="agDateCellEditor",i.keyCreator=l=>s(l.column,l.node,l.value),r&&n({valueFormatter:l=>{const a=s(l.column,l.node,l.value);return H(a)?a:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(l,a)=>{if(a===1&&l!=null){const u=TL[Number(l)-1];return o(u,RL[u])}return l??o("blanks","(Blanks)")}});break}case"dateString":{i.cellEditor="agDateStringCellEditor",i.keyCreator=a=>s(a.column,a.node,a.value);const l=e.dateParser;n(r?{valueFormatter:a=>{const u=s(a.column,a.node,a.value);return H(u)?u:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:a=>{const u=l(a??void 0);return u?[String(u.getFullYear()),String(u.getMonth()+1),String(u.getDate())]:null},treeListFormatter:(a,u)=>{if(u===1&&a!=null){const d=TL[Number(a)-1];return o(d,RL[d])}return a??o("blanks","(Blanks)")}}:{comparator:(a,u)=>{const d=l(u);return u==null||d<a?-1:d>a?1:0}});break}case"object":{i.cellEditorParams={useFormatter:!0},i.comparator=(l,a)=>{const u=this.columnModel.getPrimaryColumn(t),d=u==null?void 0:u.getColDef();if(!u||!d)return 0;const c=l==null?"":s(u,null,l),h=a==null?"":s(u,null,a);return c===h?0:c>h?1:-1},i.keyCreator=l=>s(l.column,l.node,l.value),r?n({valueFormatter:l=>{const a=s(l.column,l.node,l.value);return H(a)?a:o("blanks","(Blanks)")}}):i.filterValueGetter=l=>s(l.column,l.node,this.valueService.getValue(l.column,l.node));break}}}getDefaultDataTypes(){const i=t=>!!t.match("^\\d{4}-\\d{2}-\\d{2}$"),e=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>{var s,r;return((r=(s=t.newValue)==null?void 0:s.trim)==null?void 0:r.call(s))===""?null:Number(t.newValue)},valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:lg(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>{var s,r;return t.newValue==null?t.newValue:((r=(s=t.newValue)==null?void 0:s.trim)==null?void 0:r.call(s))===""?null:String(t.newValue).toLowerCase()==="true"},valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:{baseDataType:"date",valueParser:t=>or(t.newValue==null?null:String(t.newValue)),valueFormatter:t=>{var s;return t.value==null?"":!(t.value instanceof Date)||isNaN(t.value.getTime())?e("invalidDate","Invalid Date"):(s=Dn(t.value,!1))!=null?s:""},dataTypeMatcher:t=>t instanceof Date},dateString:{baseDataType:"dateString",dateParser:t=>{var s;return(s=or(t))!=null?s:void 0},dateFormatter:t=>{var s;return(s=Dn(t??null,!1))!=null?s:void 0},valueParser:t=>i(String(t.newValue))?t.newValue:null,valueFormatter:t=>i(String(t.value))?t.value:"",dataTypeMatcher:t=>typeof t=="string"&&i(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>{var s;return(s=lg(t.value))!=null?s:""}}}}};f([D("rowModel")],_l.prototype,"rowModel",2);f([D("columnModel")],_l.prototype,"columnModel",2);f([D("columnUtils")],_l.prototype,"columnUtils",2);f([D("valueService")],_l.prototype,"valueService",2);f([D("valueFormatterService")],_l.prototype,"valueFormatterService",2);f([K],_l.prototype,"init",1);_l=f([ie("dataTypeService")],_l);var uT=class extends U{parseValue(i,e,t,s){const r=i.getColDef(),o=this.gridOptionsService.addGridCommonParams({node:e,data:e==null?void 0:e.data,oldValue:s,newValue:t,colDef:r,column:i}),n=r.valueParser;return H(n)?typeof n=="function"?n(o):this.expressionService.evaluate(n,o):t}};f([D("expressionService")],uT.prototype,"expressionService",2);uT=f([ie("valueParserService")],uT);var xc=class extends U{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",i=>this.setColumnDefs(i))}start(){this.ctrlsService.whenReady(()=>{const i=this.gridOptionsService.get("columnDefs");i?this.setColumnsAndData(i):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(i){this.columnModel.setColumnDefs(i??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const i=wt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new VV("AG Grid",()=>this.gridOptionsService.get("debug")).log(`initialised successfully, enterprise = ${i}`)}dispatchGridReadyEvent(){const i={type:y.EVENT_GRID_READY};this.eventService.dispatchEvent(i)}setColumnDefs(i){const e=this.gridOptionsService.get("columnDefs");if(e){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(e);return}this.columnModel.setColumnDefs(e,Dd(i.source))}}};f([D("ctrlsService")],xc.prototype,"ctrlsService",2);f([D("columnModel")],xc.prototype,"columnModel",2);f([D("rowModel")],xc.prototype,"rowModel",2);f([K],xc.prototype,"postConstruct",1);xc=f([ie("syncService")],xc);var _c=class extends U{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,y.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(i){this.overlayWrapperComp=i,(!this.gridOptionsService.get("columnDefs")||this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gridOptionsService.get("suppressLoadingOverlay"))return;const i={},e=this.userComponentFactory.getLoadingOverlayCompDetails(i);this.showOverlay(e,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gridOptionsService.get("suppressNoRowsOverlay"))return;const i={},e=this.userComponentFactory.getNoRowsOverlayCompDetails(i);this.showOverlay(e,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(i,e,t){const s=i.newAgStackInstance(),r=this.addManagedPropertyListener(t,({currentValue:o})=>{s.then(n=>{n.refresh&&n.refresh(this.gridOptionsService.addGridCommonParams(pe({},o??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(s,e,r)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){const i=this.paginationProxy.isEmpty(),e=this.gridOptionsService.get("suppressNoRowsOverlay");i&&!e?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};f([D("userComponentFactory")],_c.prototype,"userComponentFactory",2);f([D("paginationProxy")],_c.prototype,"paginationProxy",2);f([D("columnModel")],_c.prototype,"columnModel",2);f([K],_c.prototype,"postConstruct",1);_c=f([ie("overlayService")],_c);var Ns=class extends U{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=ns(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=ns(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=ns(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var i;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(i=this.gridOptionsService.get("initialState"))!=null?i:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const e=this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,({source:r})=>{r==="gridInitializing"&&(e==null||e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),t=this.addManagedListener(this.eventService,y.EVENT_ROW_COUNT_READY,()=>{t==null||t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),s=this.addManagedListener(this.eventService,y.EVENT_FIRST_DATA_RENDERED,()=>{s==null||s(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,y.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,y.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var i;const e=(i=this.gridOptionsService.get("initialState"))!=null?i:{};this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,y.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,y.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,y.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,y.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,y.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,y.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var i;const{filter:e,rowGroupExpansion:t,rowSelection:s,pagination:r}=(i=this.gridOptionsService.get("initialState"))!=null?i:{},o=this.gridOptionsService.get("advancedFilterModel");(e||o)&&this.setFilterState(e,o),t&&this.setRowGroupExpansionState(t),s&&this.setRowSelectionState(s),r&&this.setPaginationState(r),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,y.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,y.EVENT_ROW_GROUP_OPENED,()=>this.onRowGroupOpenedDebounced()),this.addManagedListener(this.eventService,y.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,y.EVENT_SELECTION_CHANGED,()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()}),this.addManagedListener(this.eventService,y.EVENT_PAGINATION_CHANGED,n=>{(n.newPage||n.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var i;const{scroll:e,rangeSelection:t,focusedCell:s,columnOrder:r}=(i=this.gridOptionsService.get("initialState"))!=null?i:{};s&&this.setFocusedCellState(s),t&&this.setRangeSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!(r!=null&&r.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,y.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,y.EVENT_RANGE_SELECTION_CHANGED,o=>{o.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,y.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){const i=this.columnModel.isPivotMode(),e=[],t=[],s=[],r=[],o=[],n=[],l=[],a=[],u=[],d=this.columnModel.getColumnState();for(let c=0;c<d.length;c++){const{colId:h,sort:p,sortIndex:m,rowGroup:S,rowGroupIndex:E,aggFunc:C,pivot:v,pivotIndex:R,pinned:b,hide:A,width:F,flex:O}=d[c];u.push(h),p&&(e[m??0]={colId:h,sort:p}),S&&(t[E??0]=h),typeof C=="string"&&s.push({colId:h,aggFunc:C}),v&&(r[R??0]=h),b&&(b==="right"?n:o).push(h),A&&l.push(h),(O||F)&&a.push({colId:h,flex:O??void 0,width:F})}return{sort:e.length?{sortModel:e}:void 0,rowGroup:t.length?{groupColIds:t}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:r.length||i?{pivotMode:i,pivotColIds:r}:void 0,columnPinning:o.length||n.length?{leftColIds:o,rightColIds:n}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:a.length?{columnSizingModel:a}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}setColumnState(i){const{sort:e,rowGroup:t,aggregation:s,pivot:r,columnPinning:o,columnVisibility:n,columnSizing:l,columnOrder:a}=i,u={},d=m=>{let S=u[m];return S||(S={colId:m},u[m]=S,S)};e&&e.sortModel.forEach(({colId:m,sort:S},E)=>{const C=d(m);C.sort=S,C.sortIndex=E}),t&&t.groupColIds.forEach((m,S)=>{const E=d(m);E.rowGroup=!0,E.rowGroupIndex=S}),s&&s.aggregationModel.forEach(({colId:m,aggFunc:S})=>{d(m).aggFunc=S}),r&&(r.pivotColIds.forEach((m,S)=>{const E=d(m);E.pivot=!0,E.pivotIndex=S}),this.gridOptionsService.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"})),o&&(o.leftColIds.forEach(m=>{d(m).pinned="left"}),o.rightColIds.forEach(m=>{d(m).pinned="right"})),n&&n.hiddenColIds.forEach(m=>{d(m).hide=!0}),l&&l.columnSizingModel.forEach(({colId:m,flex:S,width:E})=>{const C=d(m);C.flex=S??null,C.width=E});const c=a==null?void 0:a.orderedColIds,h=!!(c!=null&&c.length),p=h?c.map(m=>d(m)):Object.values(u);if(p.length){this.columnStates=p;const m={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:p,applyOrder:h,defaultState:m},"gridInitializing")}}setColumnPivotState(i){const e=this.columnStates;this.columnStates=void 0;const t=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(e){let s=[];for(const r of e)this.columnModel.getSecondaryColumn(r.colId)&&s.push(r);this.columnModel.applyColumnState({state:s,applyOrder:i},"gridInitializing")}t&&this.columnModel.setColumnGroupState(t,"gridInitializing")}}getColumnGroupState(){const i=this.columnModel.getColumnGroupState(),e=[];return i.forEach(({groupId:t,open:s})=>{s&&e.push(t)}),e.length?{openColumnGroupIds:e}:void 0}setColumnGroupState(i){var e;if(!i.hasOwnProperty("columnGroup"))return;const t=new Set((e=i.columnGroup)==null?void 0:e.openColumnGroupIds),r=this.columnModel.getColumnGroupState().map(({groupId:o})=>{const n=t.has(o);return n&&t.delete(o),{groupId:o,open:n}});t.forEach(o=>{r.push({groupId:o,open:!0})}),r.length&&(this.columnGroupStates=r),this.columnModel.setColumnGroupState(r,"gridInitializing")}getFilterState(){var i;let e=this.filterManager.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const t=(i=this.filterManager.getAdvancedFilterModel())!=null?i:void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(i,e){const{filterModel:t,advancedFilterModel:s}=i??{advancedFilterModel:e};t&&this.filterManager.setFilterModel(t,"columnFilter"),s&&this.filterManager.setAdvancedFilterModel(s)}getRangeSelectionState(){var i;const e=(i=this.rangeService)==null?void 0:i.getCellRanges().map(t=>{const{id:s,type:r,startRow:o,endRow:n,columns:l,startColumn:a}=t;return{id:s,type:r,startRow:o,endRow:n,colIds:l.map(u=>u.getColId()),startColId:a.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setRangeSelectionState(i){var e;if(!this.gridOptionsService.get("enableRangeSelection"))return;const t=i.cellRanges.map(s=>At(pe({},s),{columns:s.colIds.map(r=>this.columnModel.getGridColumn(r)),startColumn:this.columnModel.getGridColumn(s.startColId)}));(e=this.rangeService)==null||e.setCellRanges(t)}getScrollState(){var i,e,t;if(!this.isClientSideRowModel)return;const s=(i=this.ctrlsService.getGridBodyCtrl())==null?void 0:i.getScrollFeature(),{left:r}=(e=s==null?void 0:s.getHScrollPosition())!=null?e:{left:0},{top:o}=(t=s==null?void 0:s.getVScrollPosition())!=null?t:{top:0};return o||r?{top:o,left:r}:void 0}setScrollState(i){var e;if(!this.isClientSideRowModel)return;const{top:t,left:s}=i;(e=this.ctrlsService.getGridBodyCtrl())==null||e.getScrollFeature().setScrollPosition(t,s)}getSideBarState(){var i,e;return(e=(i=this.sideBarService)==null?void 0:i.getSideBarComp())==null?void 0:e.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const i=this.focusService.getFocusedCell();if(i){const{column:e,rowIndex:t,rowPinned:s}=i;return{colId:e.getColId(),rowIndex:t,rowPinned:s}}}setFocusedCellState(i){if(!this.isClientSideRowModel)return;const{colId:e,rowIndex:t,rowPinned:s}=i;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(e),rowIndex:t,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const i=this.paginationProxy.getCurrentPage(),e=this.gridOptionsService.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!i&&!e))return{page:i,pageSize:e}}setPaginationState(i){i.pageSize&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(i.pageSize,"initialState"),typeof i.page=="number"&&this.paginationProxy.setPage(i.page)}getRowSelectionState(){var i;const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((i=e==null?void 0:e.toggledNodes)!=null&&i.length)?void 0:e}setRowSelectionState(i){this.selectionService.setSelectionState(i,"gridInitializing")}getRowGroupExpansionState(){const i=this.expansionService.getExpandedRows();return i.length?{expandedRowGroupIds:i}:void 0}setRowGroupExpansionState(i){this.expansionService.expandRows(i.expandedRowGroupIds)}updateColumnState(i){const e=this.getColumnState();let t=!1;Object.entries(e).forEach(([s,r])=>{HR(r,this.cachedState[s])||(t=!0)}),this.cachedState=pe(pe({},this.cachedState),e),t&&this.dispatchStateUpdateEvent(i)}updateCachedState(i,e){const t=this.cachedState[i];this.setCachedStateValue(i,e),HR(e,t)||this.dispatchStateUpdateEvent([i])}setCachedStateValue(i,e){this.cachedState=At(pe({},this.cachedState),{[i]:e})}refreshStaleState(){this.staleStateKeys.forEach(i=>{switch(i){case"rowSelection":this.setCachedStateValue(i,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(i){this.suppressEvents||(i.forEach(e=>this.queuedUpdateSources.add(e)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const i=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();const e={type:y.EVENT_STATE_UPDATED,sources:i,state:this.cachedState};this.eventService.dispatchEvent(e)}suppressEventsAndDispatchInitEvent(i){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),i(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};f([D("filterManager")],Ns.prototype,"filterManager",2);f([Qe("rangeService")],Ns.prototype,"rangeService",2);f([D("ctrlsService")],Ns.prototype,"ctrlsService",2);f([Qe("sideBarService")],Ns.prototype,"sideBarService",2);f([D("focusService")],Ns.prototype,"focusService",2);f([D("columnModel")],Ns.prototype,"columnModel",2);f([D("paginationProxy")],Ns.prototype,"paginationProxy",2);f([D("rowModel")],Ns.prototype,"rowModel",2);f([D("selectionService")],Ns.prototype,"selectionService",2);f([D("expansionService")],Ns.prototype,"expansionService",2);f([D("columnAnimationService")],Ns.prototype,"columnAnimationService",2);f([K],Ns.prototype,"postConstruct",1);Ns=f([ie("stateService")],Ns);var _v=class extends U{init(){this.processGridOptions(this.gridOptions)}processGridOptions(i){this.processOptions(i,M4)}processColumnDefs(i){this.processOptions(i,bd)}processOptions(i,e){const{validations:t,deprecations:s,allProperties:r,propertyExceptions:o,objectName:n,docsUrl:l}=e;r&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(i,[...o??[],...Object.keys(s)],r,n,l);const a=new Set;Object.keys(i).forEach(d=>{var c;const h=s[d];if(h)if("renamed"in h){const{renamed:R,version:b}=h;a.add(`As of v${b}, ${String(d)} is deprecated. Please use ${String(R)} instead.`),i[R]=i[d]}else{const{message:R,version:b}=h;a.add(`As of v${b}, ${String(d)} is deprecated. ${R??""}`)}const p=i[d];if(p==null||p===!1)return;const m=t[d];let S;if(m)if(typeof m=="function"){const R=m(i,this.gridOptions);if(!R)return;if("objectName"in R){const b=i[d];if(Array.isArray(b)){b.forEach(A=>{this.processOptions(A,R)});return}this.processOptions(i[d],R);return}S=R}else S=m;else return;const{module:E,dependencies:C,supportedRowModels:v}=S;if(v){const R=(c=this.gridOptions.rowModelType)!=null?c:"clientSide";if(!v.includes(R)){a.add(`${String(d)} is not supported with the '${R}' row model.`);return}}if(E){const R=Array.isArray(E)?E:[E];let b=!0;if(R.forEach(A=>{wt.__assertRegistered(A,String(d),this.context.getGridId())||(b=!1,a.add(`${String(d)} is only available when ${A} is loaded.`))}),!b)return}if(C){const R=this.checkForWarning(d,C,i);if(R){a.add(R);return}}}),a.size>0&&a.forEach(d=>{ve(d)})}checkForWarning(i,e,t){if(typeof e=="function")return e(t,this.gridOptions);const r=Object.entries(e).find(([l,a])=>{const u=t[l];return!a.includes(u)});if(!r)return null;const[o,n]=r;return n.length>1?`'${String(i)}' requires '${o}' to be one of [${n.join(", ")}].`:`'${String(i)}' requires '${o}' to be ${n[0]}.`}checkProperties(i,e,t,s,r){const o=["__ob__","__v_skip","__metadata__"],n=Sk(Object.getOwnPropertyNames(i),[...o,...e,...t],t);if(tr(n,(l,a)=>{ve(`invalid ${s} property '${l}' did you mean any of these: ${a.slice(0,8).join(", ")}`)}),Object.keys(n).length>0&&r){const l=this.getFrameworkOverrides().getDocLink(r);ve(`to see all the valid ${s} properties please check: ${l}`)}}};f([D("gridOptions")],_v.prototype,"gridOptions",2);f([K],_v.prototype,"init",1);_v=f([ie("validationService")],_v);var dT=class extends U{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new Qb(this.getFrameworkOverrides())}addEventListener(i,e){const t=this.frameworkEventWrappingService.wrap(e),s=this.gridOptionsService.useAsyncEvents()&&!jm.has(i),r=s?this.asyncEventListeners:this.syncEventListeners;r.has(i)||r.set(i,new Set),r.get(i).add(t),this.eventService.addEventListener(i,t,s)}removeEventListener(i,e){var t;const s=this.frameworkEventWrappingService.unwrap(e),r=this.asyncEventListeners.get(i),o=!!(r!=null&&r.delete(s));o||(t=this.syncEventListeners.get(i))==null||t.delete(s),this.eventService.removeEventListener(i,s,o)}addGlobalListener(i){const e=this.frameworkEventWrappingService.wrapGlobal(i);if(this.gridOptionsService.useAsyncEvents()){const s=(o,n)=>{jm.has(o)&&e(o,n)},r=(o,n)=>{jm.has(o)||e(o,n)};this.globalEventListenerPairs.set(i,{syncListener:s,asyncListener:r}),this.eventService.addGlobalListener(s,!1),this.eventService.addGlobalListener(r,!0)}else this.syncGlobalEventListeners.add(e),this.eventService.addGlobalListener(e,!1)}removeGlobalListener(i){const e=this.frameworkEventWrappingService.unwrapGlobal(i);if(this.globalEventListenerPairs.has(e)){const{syncListener:s,asyncListener:r}=this.globalEventListenerPairs.get(e);this.eventService.removeGlobalListener(s,!1),this.eventService.removeGlobalListener(r,!0),this.globalEventListenerPairs.delete(i)}else this.syncGlobalEventListeners.delete(e),this.eventService.removeGlobalListener(e,!1)}destroyEventListeners(i,e){i.forEach((t,s)=>{t.forEach(r=>this.eventService.removeEventListener(s,r,e)),t.clear()}),i.clear()}destroyGlobalListeners(i,e){i.forEach(t=>this.eventService.removeGlobalListener(t,e)),i.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:i,asyncListener:e})=>{this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(e,!0)}),this.globalEventListenerPairs.clear()}};f([K],dT.prototype,"postConstruct",1);dT=f([ie("apiEventService")],dT);var gw=class extends be{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const i=this.selectPageSizeComp.getValue();if(!i)return;const e=Number(i);isNaN(e)||e<1||e===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(e,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,y.EVENT_PAGINATION_CHANGED,i=>this.handlePaginationChanged(i))}handlePaginationChanged(i){if(!this.selectPageSizeComp||!(i!=null&&i.newPageSize))return;const e=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(e)?this.selectPageSizeComp.setValue(e.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(i){this.selectPageSizeComp&&this.reset(),i&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){ni(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel")&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.gridOptionsService.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){const i=this.getPageSizeSelectorValues(),e=this.paginationProxy.getPageSize(),t=!e||!i.includes(e);t&&(i.unshift(""),ve(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);const s=this.localeService.getLocaleTextFunc(),r=s("pageSizeSelectorLabel","Page Size:"),o=i.map(l=>({value:String(l),text:String(l)})),n=s("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new PP).addOptions(o).setValue(String(t?"":e)).setAriaLabel(n).setLabel(r).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=t}getPageSizeSelectorValues(){const i=[20,50,100],e=this.gridOptionsService.get("paginationPageSizeSelector");return!Array.isArray(e)||!this.validateValues(e)?i:[...e].sort((t,s)=>t-s)}validateValues(i){if(!i.length)return ve(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let e=0;e<i.length;e++){const t=i[e],s=typeof t=="number",r=t>0;if(!s)return ve(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!r)return ve(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};f([D("localeService")],gw.prototype,"localeService",2);f([D("gridOptionsService")],gw.prototype,"gridOptionsService",2);f([D("paginationProxy")],gw.prototype,"paginationProxy",2);f([K],gw.prototype,"init",1);var Nv=class extends U{constructor(){super(),this.descriptionContainer=null,this.announceValue=ns(this.announceValue.bind(this),200)}postConstruct(){const i=this.gridOptionsService.getDocument(),e=this.descriptionContainer=i.createElement("div");e.classList.add("ag-aria-description-container"),eP(e,"polite"),K0(e,"additions text"),$0(e,!0),this.eGridDiv.appendChild(e)}announceValue(i){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=i)},50))}destroy(){super.destroy();const{descriptionContainer:i}=this;i&&(ni(i),i.parentElement&&i.parentElement.removeChild(i)),this.descriptionContainer=null,this.eGridDiv=null}};f([D("eGridDiv")],Nv.prototype,"eGridDiv",2);f([K],Nv.prototype,"postConstruct",1);Nv=f([ie("ariaAnnouncementService")],Nv);var gh=typeof global>"u"?{}:global;gh.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;gh.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;gh.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;gh.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;gh.Node=typeof Node>"u"?{}:Node;gh.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var x4=Object.defineProperty,_4=Object.getOwnPropertyDescriptor,rt=(i,e,t,s)=>{for(var r=s>1?void 0:s?_4(e,t):e,o=i.length-1,n;o>=0;o--)(n=i[o])&&(r=(s?n(e,t,r):n(r))||r);return s&&r&&x4(e,t,r),r},$P=class qh{constructor(e,t,s,r,o,n){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gridOptionsService=t,this.eventService=s,this.columnModel=r,this.beans=n,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=qh.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return tt.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,s=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(r=>this.createNode(r,this.rootNode,qh.TOP_LEVEL)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),s&&(s.childrenAfterFilter=t.childrenAfterFilter,s.childrenAfterGroup=t.childrenAfterGroup,s.childrenAfterAggFilter=t.childrenAfterAggFilter,s.childrenAfterSort=t.childrenAfterSort,s.childrenMapped=t.childrenMapped,s.allLeafChildren=t.allLeafChildren)}updateRowData(e,t){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const s={remove:[],update:[],add:[]},r=[];return this.executeRemove(e,s,r),this.executeUpdate(e,s,r),this.executeAdd(e,s),this.updateSelection(r,"rowDataChanged"),t&&tt.sortRowNodesByOrder(this.rootNode.allLeafChildren,t),s}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){const t={type:y.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:e!=null&&e.length?e[0]:null};this.eventService.dispatchEvent(t)}updateSelection(e,t){const s=e.length>0;if(s&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),s){const r={type:y.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(r)}}executeAdd(e,t){var s;const{add:r,addIndex:o}=e;if(tt.missingOrEmpty(r))return;const n=r.map(l=>this.createNode(l,this.rootNode,qh.TOP_LEVEL));if(typeof o=="number"&&o>=0){const{allLeafChildren:l}=this.rootNode,a=l.length;let u=o;if(this.gridOptionsService.get("treeData")&&o>0&&a>0){for(let p=0;p<a;p++)if(((s=l[p])==null?void 0:s.rowIndex)==o-1){u=p+1;break}}const c=l.slice(0,u),h=l.slice(u,l.length);this.rootNode.allLeafChildren=[...c,...n,...h]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...n];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),t.add=n}executeRemove(e,t,s){const{remove:r}=e;if(tt.missingOrEmpty(r))return;const o={};r.forEach(n=>{const l=this.lookupRowNode(n);l&&(l.isSelected()&&s.push(l),l.clearRowTopAndRowIndex(),o[l.id]=!0,delete this.allNodesMap[l.id],t.remove.push(l))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(n=>!o[n.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,s){const{update:r}=e;tt.missingOrEmpty(r)||r.forEach(o=>{const n=this.lookupRowNode(o);n&&(n.updateData(o),!n.selectable&&n.isSelected()&&s.push(n),this.setMasterForRow(n,o,qh.TOP_LEVEL,!1),t.update.push(n))})}lookupRowNode(e){const t=this.gridOptionsService.getCallback("getRowId");let s;if(t){const r=t({data:e,level:0});if(s=this.allNodesMap[r],!s)return console.error(`AG Grid: could not find row id=${r}, data item was not found for this id`),null}else if(s=this.rootNode.allLeafChildren.find(r=>r.data===e),!s)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return s||null}createNode(e,t,s){const r=new Ge(this.beans);r.group=!1,this.setMasterForRow(r,e,s,!0);const o=this.gridOptionsService.get("suppressParentsInRowNodes");return t&&!o&&(r.parent=t),r.level=s,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&console.warn(`AG Grid: duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,t,s,r){if(this.gridOptionsService.get("treeData"))e.setMaster(!1),r&&(e.expanded=!1);else{if(this.gridOptionsService.get("masterDetail")){const l=this.gridOptionsService.get("isRowMaster");l?e.setMaster(l(t)):e.setMaster(!0)}else e.setMaster(!1);if(r){const l=this.columnModel.getRowGroupColumns(),a=l?l.length:0,u=s+a;e.expanded=e.master?this.isExpanded(u):!1}}}isExpanded(e){const t=this.gridOptionsService.get("groupDefaultExpanded");return t===-1?!0:e<t}};$P.TOP_LEVEL=0;$P.ROOT_NODE_ID="ROOT_NODE_ID";var N4=$P,qi=class extends U{constructor(){super(...arguments),this.onRowHeightChanged_debounced=tt.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){const i=this.refreshModel.bind(this,{step:Ke.EVERYTHING}),e=!this.gridOptionsService.get("suppressAnimationFrame"),t=this.refreshModel.bind(this,{step:Ke.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:e});this.addManagedListener(this.eventService,y.EVENT_NEW_COLUMNS_LOADED,t),this.addManagedListener(this.eventService,y.EVENT_COLUMN_ROW_GROUP_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:Ke.PIVOT})),this.addManagedListener(this.eventService,y.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,y.EVENT_COLUMN_PIVOT_MODE_CHANGED,i),this.addManagedListener(this.eventService,y.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,y.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new Ge(this.beans),this.nodeManager=new N4(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){const i=new Set(["treeData","masterDetail"]),e=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),t=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),n=new Set([]),l=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"]),a=[...i,...e,...t,...s,...s,...r,...o,...n,...l];this.addManagedPropertyListeners(a,u=>{var d;const c=(d=u.changeSet)==null?void 0:d.properties;if(!c)return;const h=p=>c.some(m=>p.has(m));if(h(i)){this.setRowData(this.rootNode.allLeafChildren.map(p=>p.data));return}if(h(e)){this.refreshModel({step:Ke.EVERYTHING});return}if(h(t)){this.refreshModel({step:Ke.FILTER});return}if(h(s)){this.refreshModel({step:Ke.PIVOT});return}if(h(r)){this.refreshModel({step:Ke.AGGREGATE});return}if(h(o)){this.refreshModel({step:Ke.SORT});return}if(h(n)){this.refreshModel({step:Ke.FILTER_AGGREGATES});return}h(l)&&this.refreshModel({step:Ke.MAP})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const i=this.gridOptionsService.get("rowData");i&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(i))}ensureRowHeightsValid(i,e,t,s){let r,o=!1;do{r=!1;const n=this.getRowIndexAtPixel(i),l=this.getRowIndexAtPixel(e),a=Math.max(n,t),u=Math.min(l,s);for(let d=a;d<=u;d++){const c=this.getRow(d);if(c.rowHeightEstimated){const h=this.gridOptionsService.getRowHeightForNode(c);c.setRowHeight(h.height),r=!0,o=!0}}r&&this.setRowTopAndRowIndex()}while(r);return o}setRowTopAndRowIndex(){const i=this.environment.getDefaultRowHeight();let e=0;const t=new Set,s=this.gridOptionsService.isDomLayout("normal");for(let r=0;r<this.rowsToDisplay.length;r++){const o=this.rowsToDisplay[r];if(o.id!=null&&t.add(o.id),o.rowHeight==null){const n=this.gridOptionsService.getRowHeightForNode(o,s,i);o.setRowHeight(n.height,n.estimated)}o.setRowTop(e),o.setRowIndex(r),e+=o.rowHeight}return t}clearRowTopAndRowIndex(i,e){const t=i.isActive(),s=o=>{o&&o.id!=null&&!e.has(o.id)&&o.clearRowTopAndRowIndex()},r=o=>{if(s(o),s(o.detailNode),s(o.sibling),o.hasChildren()&&o.childrenAfterGroup){const n=o.level==-1;t&&!n&&!o.expanded||o.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(i,e,t=0){const s=this.getRowIndexAtPixel(e),r=this.getRow(s),o=!this.gridOptionsService.get("suppressAnimationFrame");return r===i[0]?!1:(i.forEach(n=>{tt.removeFromArray(this.rootNode.allLeafChildren,n)}),i.forEach((n,l)=>{tt.insertIntoArray(this.rootNode.allLeafChildren,n,Math.max(s+t,0)+l)}),this.refreshModel({step:Ke.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),!0)}highlightRowAtPixel(i,e){const t=e!=null?this.getRowIndexAtPixel(e):null,s=t!=null?this.getRow(t):null;if(!s||!i||s===i||e==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const r=this.getHighlightPosition(e,s);this.lastHighlightedRow&&this.lastHighlightedRow!==s&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),s.setHighlighted(r),this.lastHighlightedRow=s}getHighlightPosition(i,e){if(!e){const r=this.getRowIndexAtPixel(i);if(e=this.getRow(r||0),!e)return Xm.Below}const{rowTop:t,rowHeight:s}=e;return i-t<s/2?Xm.Above:Xm.Below}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const e=this.rootNode.childrenAfterAggFilter;return e?e.length:0}getTopLevelRowDisplayedIndex(i){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return i;let t=this.rootNode.childrenAfterSort[i];if(this.gridOptionsService.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex}getRowBounds(i){if(tt.missing(this.rowsToDisplay))return null;const e=this.rowsToDisplay[i];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null}onRowGroupOpened(){const i=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Ke.MAP,keepRenderedRows:!0,animate:i})}onFilterChanged(i){if(i.afterDataChange)return;const e=this.gridOptionsService.isAnimateRows(),s=i.columns.length===0||i.columns.some(r=>r.isPrimary())?Ke.FILTER:Ke.FILTER_AGGREGATES;this.refreshModel({step:s,keepRenderedRows:!0,animate:e})}onSortChanged(){const i=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Ke.SORT,keepRenderedRows:!0,animate:i,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:Ke.PIVOT}):this.refreshModel({step:Ke.AGGREGATE})}createChangePath(i){const e=tt.missingOrEmpty(i),t=new cw(!1,this.rootNode);return(e||this.gridOptionsService.get("treeData"))&&t.setInactive(),t}isSuppressModelUpdateAfterUpdateTransaction(i){if(!this.gridOptionsService.get("suppressModelUpdateAfterUpdateTransaction")||i.rowNodeTransactions==null)return!1;const e=i.rowNodeTransactions.filter(s=>s.add!=null&&s.add.length>0||s.remove!=null&&s.remove.length>0);return e==null||e.length==0}buildRefreshModelParams(i){let e=Ke.EVERYTHING;const t={everything:Ke.EVERYTHING,group:Ke.EVERYTHING,filter:Ke.FILTER,map:Ke.MAP,aggregate:Ke.AGGREGATE,sort:Ke.SORT,pivot:Ke.PIVOT};if(tt.exists(i)&&(e=t[i]),tt.missing(e)){console.error(`AG Grid: invalid step ${i}, available steps are ${Object.keys(t).join(", ")}`);return}const s=!this.gridOptionsService.get("suppressAnimationFrame");return{step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:s}}refreshModel(i){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let e=typeof i=="object"&&"step"in i?i:this.buildRefreshModelParams(i);if(!e||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;const t=this.createChangePath(e.rowNodeTransactions);switch(this.isRefreshingModel=!0,e.step){case Ke.EVERYTHING:this.doRowGrouping(e.rowNodeTransactions,e.rowNodeOrder,t,!!e.afterColumnsChanged);case Ke.FILTER:this.doFilter(t);case Ke.PIVOT:this.doPivot(t);case Ke.AGGREGATE:this.doAggregate(t);case Ke.FILTER_AGGREGATES:this.doFilterAggregates(t);case Ke.SORT:this.doSort(e.rowNodeTransactions,t);case Ke.MAP:this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(t,s),this.isRefreshingModel=!1;const r={type:y.EVENT_MODEL_UPDATED,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(r)}isEmpty(){const i=tt.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return tt.missing(this.rootNode)||i||!this.columnModel.isReady()}isRowsToRender(){return tt.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(i,e){let t=!e,s=!1;const r=[],o=this.gridOptionsService.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(n=>{if(s)return;if(t&&(n===e||n===i)&&(s=!0,n.group&&o)){r.push(...n.allLeafChildren);return}if(!t){if(n!==e&&n!==i)return;t=!0}if(!n.group||!o){r.push(n);return}}),r}setDatasource(i){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(i){return this.rowsToDisplay[i]}isRowPresent(i){return this.rowsToDisplay.indexOf(i)>=0}getRowIndexAtPixel(i){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let e=0,t=this.rowsToDisplay.length-1;if(i<=0)return 0;if(tt.last(this.rowsToDisplay).rowTop<=i)return this.rowsToDisplay.length-1;let r=-1,o=-1;for(;;){const n=Math.floor((e+t)/2),l=this.rowsToDisplay[n];if(this.isRowInPixel(l,i)||(l.rowTop<i?e=n+1:l.rowTop>i&&(t=n-1),r===e&&o===t))return n;r=e,o=t}}isRowInPixel(i,e){const t=i.rowTop,s=i.rowTop+i.rowHeight;return t<=e&&s>e}forEachLeafNode(i){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((e,t)=>i(e,t))}forEachNode(i,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:i,recursionType:0,index:0,includeFooterNodes:e})}forEachNodeAfterFilter(i,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:i,recursionType:1,index:0,includeFooterNodes:e})}forEachNodeAfterFilterAndSort(i,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:i,recursionType:2,index:0,includeFooterNodes:e})}forEachPivotNode(i,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:i,recursionType:3,index:0,includeFooterNodes:e})}recursivelyWalkNodesAndCallback(i){var e;const{nodes:t,callback:s,recursionType:r,includeFooterNodes:o}=i;let{index:n}=i;for(let u=0;u<t.length;u++){const d=t[u];if(s(d,n++),d.hasChildren()&&!d.footer){let c=null;switch(r){case 0:c=d.childrenAfterGroup;break;case 1:c=d.childrenAfterAggFilter;break;case 2:c=d.childrenAfterSort;break;case 3:c=d.leafGroup?null:d.childrenAfterSort;break}c&&(n=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:s,recursionType:r,index:n,includeFooterNodes:o}))}}const l=(e=t[0])==null?void 0:e.parent;if(!o||!l)return n;if(l===this.rootNode){if(!this.gridOptionsService.get("groupIncludeTotalFooter"))return n}else if(!this.gridOptionsService.getGroupIncludeFooter()({node:l}))return n;return l.createFooter(),s(l.sibling,n++),n}doAggregate(i){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:i})}doFilterAggregates(i){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:i}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(i){const e=this.gridOptionsService.get("treeData"),t=this.columnModel.isPivotActive(),s=n=>{n&&n.forEach(l=>{const a=()=>{l.expanded=i,s(l.childrenAfterGroup)};if(e){tt.exists(l.childrenAfterGroup)&&a();return}if(t){!l.leafGroup&&a();return}l.group&&a()})};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:Ke.MAP});const r=i?"expandAll":"collapseAll",o={type:y.EVENT_EXPAND_COLLAPSE_ALL,source:r};this.eventService.dispatchEvent(o)}doSort(i,e){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:i,changedPath:e})}doRowGrouping(i,e,t,s){if(this.groupStage){if(i?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:i,rowNodeOrder:e,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:s}),this.gridOptionsService.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)){const o={type:y.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(o)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:y.EVENT_ROW_COUNT_READY}))}doFilter(i){this.filterStage.execute({rowNode:this.rootNode,changedPath:i})}doPivot(i){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:i})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(i){if(typeof i=="string"&&i.indexOf(Ge.ID_PREFIX_ROW_GROUP)==0){let t;return this.forEachNode(s=>{s.id===i&&(t=s)}),t}return this.nodeManager.getRowNode(i)}setRowData(i){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(i),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){const i={type:y.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(i),this.refreshModel({step:Ke.EVERYTHING,newData:!0})}batchUpdateRowData(i,e){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const t=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},t)}this.rowDataTransactionBatch.push({rowDataTransaction:i,callback:e})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const i=[],e=[];let t=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(s=>{const r=this.nodeManager.updateRowData(s.rowDataTransaction,void 0);e.push(r),s.callback&&i.push(s.callback.bind(null,r)),typeof s.rowDataTransaction.addIndex=="number"&&(t=!0)}),this.commonUpdateRowData(e,void 0,t),i.length>0&&window.setTimeout(()=>{i.forEach(s=>s())},0),e.length>0){const s={type:y.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:e};this.eventService.dispatchEvent(s)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(i,e){this.valueCache.onDataChanged();const t=this.nodeManager.updateRowData(i,e),s=typeof i.addIndex=="number";return this.commonUpdateRowData([t],e,s),t}createRowNodeOrder(){if(this.gridOptionsService.get("suppressMaintainUnsortedOrder"))return;const e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let t=0;t<this.rootNode.allLeafChildren.length;t++){const s=this.rootNode.allLeafChildren[t];e[s.id]=t}return e}commonUpdateRowData(i,e,t){if(!this.hasStarted)return;const s=!this.gridOptionsService.get("suppressAnimationFrame");t&&(e=this.createRowNodeOrder());const r={type:y.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(r),this.refreshModel({step:Ke.EVERYTHING,rowNodeTransactions:i,rowNodeOrder:e,keepRenderedRows:!0,keepEditingRows:!0,animate:s})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:Ke.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const i=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),i&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let i=!1;return this.forEachNode(e=>{e.setRowHeight(e.rowHeight,!0);const t=e.detailNode;t&&t.setRowHeight(t.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),i=!0}),i}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};rt([D("columnModel")],qi.prototype,"columnModel",2);rt([D("selectionService")],qi.prototype,"selectionService",2);rt([D("filterManager")],qi.prototype,"filterManager",2);rt([D("valueCache")],qi.prototype,"valueCache",2);rt([D("beans")],qi.prototype,"beans",2);rt([D("filterStage")],qi.prototype,"filterStage",2);rt([D("sortStage")],qi.prototype,"sortStage",2);rt([D("flattenStage")],qi.prototype,"flattenStage",2);rt([Qe("groupStage")],qi.prototype,"groupStage",2);rt([Qe("aggregationStage")],qi.prototype,"aggregationStage",2);rt([Qe("pivotStage")],qi.prototype,"pivotStage",2);rt([Qe("filterAggregatesStage")],qi.prototype,"filterAggregatesStage",2);rt([K],qi.prototype,"init",1);qi=rt([ie("rowModel")],qi);var Gv=class extends U{execute(i){const{changedPath:e}=i;this.filterService.filter(e)}};rt([D("filterService")],Gv.prototype,"filterService",2);Gv=rt([ie("filterStage")],Gv);var Dg=class extends U{execute(i){const e=this.sortController.getSortOptions(),t=tt.exists(e)&&e.length>0,s=t&&tt.exists(i.rowNodeTransactions)&&this.gridOptionsService.get("deltaSort"),r=e.some(o=>this.gridOptionsService.isColumnsSortingCoupledToGroup()?o.column.isPrimary()&&o.column.isRowGroupActive():!!o.column.getColDef().showRowGroup);this.sortService.sort(e,t,s,i.rowNodeTransactions,i.changedPath,r)}};rt([D("sortService")],Dg.prototype,"sortService",2);rt([D("sortController")],Dg.prototype,"sortController",2);Dg=rt([ie("sortStage")],Dg);var bg=class extends U{execute(i){const e=i.rowNode,t=[],s=this.columnModel.isPivotMode(),r=s&&e.leafGroup,o=r?[e]:e.childrenAfterSort,n=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(n,o,t,s,0);const l=t.length>0;return!r&&l&&n.groupIncludeTotalFooter&&(e.createFooter(),this.addRowNodeToRowsToDisplay(n,e.sibling,t,0)),t}getFlattenDetails(){const i=this.gridOptionsService.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!i&&this.gridOptionsService.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:i,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.get("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}}recursivelyAddToRowsToDisplay(i,e,t,s,r){if(!tt.missingOrEmpty(e))for(let o=0;o<e.length;o++){const n=e[o],l=n.hasChildren(),a=s&&!l,u=i.groupRemoveSingleChildren&&l&&n.childrenAfterGroup.length===1,d=i.groupRemoveLowestSingleChildren&&l&&n.leafGroup&&n.childrenAfterGroup.length===1,c=s&&n.leafGroup,h=i.hideOpenParents&&n.expanded&&!n.master&&!c;if(!a&&!h&&!u&&!d&&this.addRowNodeToRowsToDisplay(i,n,t,r),!(s&&n.leafGroup)){if(l){const m=u||d;if(n.expanded||m){const S=m?r:r+1;this.recursivelyAddToRowsToDisplay(i,n.childrenAfterSort,t,s,S),i.getGroupIncludeFooter({node:n})?(n.createFooter(),this.addRowNodeToRowsToDisplay(i,n.sibling,t,S)):n.destroyFooter()}}else if(n.master&&n.expanded){const m=this.createDetailNode(n);this.addRowNodeToRowsToDisplay(i,m,t,r)}}}}addRowNodeToRowsToDisplay(i,e,t,s){t.push(e),e.setUiLevel(i.isGroupMultiAutoColumn?0:s)}createDetailNode(i){if(tt.exists(i.detailNode))return i.detailNode;const e=new Ge(this.beans);return e.detail=!0,e.selectable=!1,e.parent=i,tt.exists(i.id)&&(e.id="detail_"+i.id),e.data=i.data,e.level=i.level+1,i.detailNode=e,e}};rt([D("columnModel")],bg.prototype,"columnModel",2);rt([D("beans")],bg.prototype,"beans",2);bg=rt([ie("flattenStage")],bg);var Pg=class extends U{sort(i,e,t,s,r,o){const n=this.gridOptionsService.get("groupMaintainOrder"),l=this.columnModel.getAllGridColumns().some(h=>h.isRowGroupActive());let a={};t&&s&&(a=this.calculateDirtyNodes(s));const u=this.columnModel.isPivotMode(),d=this.gridOptionsService.getCallback("postSortRows"),c=h=>{var p;this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);const m=u&&h.leafGroup;if(n&&l&&!h.leafGroup&&!o){const E=(p=this.columnModel.getRowGroupColumns())==null?void 0:p[h.level+1],C=(E==null?void 0:E.getSort())===null,v=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!C){const R={};h.childrenAfterSort.forEach((b,A)=>{R[b.id]=A}),v.sort((b,A)=>{var F,O;return((F=R[b.id])!=null?F:0)-((O=R[A.id])!=null?O:0)})}h.childrenAfterSort=v}else!e||m?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):t?h.childrenAfterSort=this.doDeltaSort(h,a,r,i):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,i);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),d){const E={nodes:h.childrenAfterSort};d(E)}};r&&r.forEachChangedNodeDepthFirst(c),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(i){const e={},t=s=>{s&&s.forEach(r=>e[r.id]=!0)};return i&&i.forEach(s=>{t(s.add),t(s.update),t(s.remove)}),e}doDeltaSort(i,e,t,s){const r=i.childrenAfterAggFilter,o=i.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(r,s);const n={},l=[];r.forEach(c=>{e[c.id]||!t.canSkip(c)?l.push(c):n[c.id]=!0});const a=o.filter(c=>n[c.id]),u=(c,h)=>({currentPos:h,rowNode:c}),d=l.map(u).sort((c,h)=>this.rowNodeSorter.compareRowNodes(s,c,h));return this.mergeSortedArrays(s,d,a.map(u)).map(({rowNode:c})=>c)}mergeSortedArrays(i,e,t){const s=[];let r=0,o=0;for(;r<e.length&&o<t.length;)this.rowNodeSorter.compareRowNodes(i,e[r],t[o])<0?s.push(e[r++]):s.push(t[o++]);for(;r<e.length;)s.push(e[r++]);for(;o<t.length;)s.push(t[o++]);return s}updateChildIndexes(i){if(tt.missing(i.childrenAfterSort))return;const e=i.childrenAfterSort;for(let t=0;t<e.length;t++){const s=e[t],r=t===0,o=t===i.childrenAfterSort.length-1;s.setFirstChild(r),s.setLastChild(o),s.setChildIndex(t)}}updateGroupDataForHideOpenParents(i){if(!this.gridOptionsService.get("groupHideOpenParents"))return;if(this.gridOptionsService.get("treeData"))return tt.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const e=t=>{this.pullDownGroupDataForHideOpenParents(t.childrenAfterSort,!1),t.childrenAfterSort.forEach(s=>{s.hasChildren()&&e(s)})};i&&i.executeFromRootNode(t=>e(t))}pullDownGroupDataForHideOpenParents(i,e){!this.gridOptionsService.get("groupHideOpenParents")||tt.missing(i)||i.forEach(t=>{this.columnModel.getGroupDisplayColumns().forEach(r=>{const o=r.getColDef().showRowGroup;if(typeof o!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const n=o,l=this.columnModel.getPrimaryColumn(n);if(l!==t.rowGroupColumn)if(e)t.setGroupValue(r.getId(),void 0);else{const u=t.getFirstChildOfFirstChild(l);u&&t.setGroupValue(r.getId(),u.key)}})})}};rt([D("columnModel")],Pg.prototype,"columnModel",2);rt([D("rowNodeSorter")],Pg.prototype,"rowNodeSorter",2);Pg=rt([ie("sortService")],Pg);var kv=class extends U{filter(i){const e=this.filterManager.isChildFilterPresent();this.filterNodes(e,i)}filterNodes(i,e){const t=(s,r)=>{s.hasChildren()&&i&&!r?s.childrenAfterFilter=s.childrenAfterGroup.filter(o=>{const n=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,l=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return n||l}):s.childrenAfterFilter=s.childrenAfterGroup,s.sibling&&(s.sibling.childrenAfterFilter=s.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const s=(o,n)=>{if(o.childrenAfterGroup)for(let l=0;l<o.childrenAfterGroup.length;l++){const a=o.childrenAfterGroup[l],u=n||this.filterManager.doesRowPassFilter({rowNode:a});a.childrenAfterGroup?s(o.childrenAfterGroup[l],u):t(a,u)}t(o,n)},r=o=>s(o,!1);e.executeFromRootNode(r)}else{const s=r=>t(r,!1);e.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gridOptionsService.get("treeData")&&!this.gridOptionsService.get("excludeChildrenWhenTreeDataFiltering")}};rt([D("filterManager")],kv.prototype,"filterManager",2);kv=rt([ie("filterService")],kv);var pu=class extends U{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const i=this.gridOptionsService.exists("getRowId");return this.gridOptionsService.get("resetRowDataOnUpdate")?!1:i}setRowData(i){const e=this.createTransactionForRowData(i);if(!e)return;const[t,s]=e;this.clientSideRowModel.updateRowData(t,s)}createTransactionForRowData(i){if(tt.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}const e=this.gridOptionsService.getCallback("getRowId");if(e==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const t={remove:[],update:[],add:[]},s=this.clientSideRowModel.getCopyOfNodesMap(),o=this.gridOptionsService.get("suppressMaintainUnsortedOrder")?void 0:{};return tt.exists(i)&&i.forEach((n,l)=>{const a=e({data:n,level:0}),u=s[a];o&&(o[a]=l),u?(u.data!==n&&t.update.push(n),s[a]=void 0):t.add.push(n)}),tt.iterateObject(s,(n,l)=>{l&&t.remove.push(l.data)}),[t,o]}onRowDataUpdated(){const i=this.gridOptionsService.get("rowData");i&&(this.isActive()?this.setRowData(i):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(i)))}};rt([D("rowModel")],pu.prototype,"rowModel",2);rt([D("rowRenderer")],pu.prototype,"rowRenderer",2);rt([D("selectionService")],pu.prototype,"selectionService",2);rt([K],pu.prototype,"postConstruct",1);pu=rt([ie("immutableService")],pu);var G4="31.2.1",k4={version:G4,moduleName:qb.ClientSideRowModelModule,rowModel:"clientSide",beans:[qi,Gv,Dg,bg,Pg,kv,pu]};wt.registerModules([k4]);function V4(){const i=P.useRef(),e=P.useMemo(()=>({width:"100%",height:"100%"}),[]),t=P.useCallback(()=>{i.current.api.setGridOption("quickFilterText",document.getElementById("filter-text-box").value)},[]),{isLoading:s,data:r,error:o}=vW({queryKey:["employees"],queryFn:uz}),n=[{field:"id",minWidth:70,maxWidth:90},{field:"FirstName",width:150},{field:"LastName",width:150},{field:"dob",width:150},{field:"StartDate",width:150},{field:"Department",width:150},{field:"Street",width:150},{field:"State",width:150},{field:"ZipCode",width:100}];return s?de.jsx("h2",{children:"Loading..."}):o?de.jsxs("h2",{children:["An error occurred: ",o.message]}):de.jsx("div",{style:e,children:de.jsxs("div",{className:"mx-auto max-w-[1300px] w-full p-4",children:[de.jsxs("div",{className:"text-xl py-3",children:[de.jsx("span",{children:"Search:"}),de.jsx("input",{className:"border-2 mx-2",type:"text",id:"filter-text-box",placeholder:"",onInput:t})]}),de.jsx("div",{className:"ag-theme-quartz",style:{height:800},children:de.jsx(zY,{rowData:r,columnDefs:n,ref:i,paginationAutoPageSize:!0,pagination:!0})})]})})}function H4(){return de.jsx("div",{className:"h-24 bg-gradient-to-r from-green-200 via-green-100 to-green-200 border-b-2 border-green-200 border-opacity-75",children:de.jsx("h1",{className:"py-4 text-center text-5xl font-semibold",children:"HRnet"})})}function B4(){return de.jsxs("div",{children:[de.jsx(H4,{}),de.jsx(gz,{}),de.jsx(V4,{})]})}var W4=function(){return null};const U4=new eW({defaultOptions:{queries:{staleTime:60*1e3}}});function z4(){return de.jsxs(oW,{client:U4,children:[de.jsx(W4,{initialIsOpen:!1}),de.jsx(B4,{})]})}Uy.createRoot(document.getElementById("root")).render(de.jsx($.StrictMode,{children:de.jsx(z4,{})}));export{_L as g};
